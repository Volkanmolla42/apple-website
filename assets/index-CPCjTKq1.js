(function(){try{var n=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new n.Error().stack;e&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[e]="45c0ff2c-39b2-4d09-b1e9-451d8cd9a2a3",n._sentryDebugIdIdentifier="sentry-dbid-45c0ff2c-39b2-4d09-b1e9-451d8cd9a2a3")}catch{}})();var S9=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};S9.SENTRY_RELEASE={id:"9b309a7036e08f6561b3c36c22771a93b36e6383"};(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function N_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var CF={exports:{}},y1={},bF={exports:{}},dn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k_=Symbol.for("react.element"),E9=Symbol.for("react.portal"),A9=Symbol.for("react.fragment"),w9=Symbol.for("react.strict_mode"),M9=Symbol.for("react.profiler"),T9=Symbol.for("react.provider"),C9=Symbol.for("react.context"),b9=Symbol.for("react.forward_ref"),R9=Symbol.for("react.suspense"),I9=Symbol.for("react.memo"),P9=Symbol.for("react.lazy"),RD=Symbol.iterator;function D9(n){return n===null||typeof n!="object"?null:(n=RD&&n[RD]||n["@@iterator"],typeof n=="function"?n:null)}var RF={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},IF=Object.assign,PF={};function bp(n,e,t){this.props=n,this.context=e,this.refs=PF,this.updater=t||RF}bp.prototype.isReactComponent={};bp.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};bp.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function DF(){}DF.prototype=bp.prototype;function Fb(n,e,t){this.props=n,this.context=e,this.refs=PF,this.updater=t||RF}var Ob=Fb.prototype=new DF;Ob.constructor=Fb;IF(Ob,bp.prototype);Ob.isPureReactComponent=!0;var ID=Array.isArray,BF=Object.prototype.hasOwnProperty,Ub={current:null},LF={key:!0,ref:!0,__self:!0,__source:!0};function NF(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)BF.call(e,r)&&!LF.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:k_,type:n,key:s,ref:o,props:i,_owner:Ub.current}}function B9(n,e){return{$$typeof:k_,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Hb(n){return typeof n=="object"&&n!==null&&n.$$typeof===k_}function L9(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var PD=/\/+/g;function qA(n,e){return typeof n=="object"&&n!==null&&n.key!=null?L9(""+n.key):e.toString(36)}function rx(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case k_:case E9:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+qA(o,0):r,ID(i)?(t="",n!=null&&(t=n.replace(PD,"$&/")+"/"),rx(i,e,t,"",function(c){return c})):i!=null&&(Hb(i)&&(i=B9(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(PD,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",ID(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+qA(s,a);o+=rx(s,e,t,l,i)}else if(l=D9(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+qA(s,a++),o+=rx(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function dv(n,e,t){if(n==null)return n;var r=[],i=0;return rx(n,r,"","",function(s){return e.call(t,s,i++)}),r}function N9(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var cs={current:null},ix={transition:null},k9={ReactCurrentDispatcher:cs,ReactCurrentBatchConfig:ix,ReactCurrentOwner:Ub};function kF(){throw Error("act(...) is not supported in production builds of React.")}dn.Children={map:dv,forEach:function(n,e,t){dv(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return dv(n,function(){e++}),e},toArray:function(n){return dv(n,function(e){return e})||[]},only:function(n){if(!Hb(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};dn.Component=bp;dn.Fragment=A9;dn.Profiler=M9;dn.PureComponent=Fb;dn.StrictMode=w9;dn.Suspense=R9;dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k9;dn.act=kF;dn.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=IF({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Ub.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)BF.call(e,l)&&!LF.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:k_,type:n.type,key:i,ref:s,props:r,_owner:o}};dn.createContext=function(n){return n={$$typeof:C9,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:T9,_context:n},n.Consumer=n};dn.createElement=NF;dn.createFactory=function(n){var e=NF.bind(null,n);return e.type=n,e};dn.createRef=function(){return{current:null}};dn.forwardRef=function(n){return{$$typeof:b9,render:n}};dn.isValidElement=Hb;dn.lazy=function(n){return{$$typeof:P9,_payload:{_status:-1,_result:n},_init:N9}};dn.memo=function(n,e){return{$$typeof:I9,type:n,compare:e===void 0?null:e}};dn.startTransition=function(n){var e=ix.transition;ix.transition={};try{n()}finally{ix.transition=e}};dn.unstable_act=kF;dn.useCallback=function(n,e){return cs.current.useCallback(n,e)};dn.useContext=function(n){return cs.current.useContext(n)};dn.useDebugValue=function(){};dn.useDeferredValue=function(n){return cs.current.useDeferredValue(n)};dn.useEffect=function(n,e){return cs.current.useEffect(n,e)};dn.useId=function(){return cs.current.useId()};dn.useImperativeHandle=function(n,e,t){return cs.current.useImperativeHandle(n,e,t)};dn.useInsertionEffect=function(n,e){return cs.current.useInsertionEffect(n,e)};dn.useLayoutEffect=function(n,e){return cs.current.useLayoutEffect(n,e)};dn.useMemo=function(n,e){return cs.current.useMemo(n,e)};dn.useReducer=function(n,e,t){return cs.current.useReducer(n,e,t)};dn.useRef=function(n){return cs.current.useRef(n)};dn.useState=function(n){return cs.current.useState(n)};dn.useSyncExternalStore=function(n,e,t){return cs.current.useSyncExternalStore(n,e,t)};dn.useTransition=function(){return cs.current.useTransition()};dn.version="18.3.1";bF.exports=dn;var se=bF.exports;const jh=N_(se);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F9=se,O9=Symbol.for("react.element"),U9=Symbol.for("react.fragment"),H9=Object.prototype.hasOwnProperty,z9=F9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,G9={key:!0,ref:!0,__self:!0,__source:!0};function FF(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)H9.call(e,r)&&!G9.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:O9,type:n,key:s,ref:o,props:i,_owner:z9.current}}y1.Fragment=U9;y1.jsx=FF;y1.jsxs=FF;CF.exports=y1;var ae=CF.exports,OF={exports:{}},oo={},UF={exports:{}},HF={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(k,K){var F=k.length;k.push(K);e:for(;0<F;){var ie=F-1>>>1,me=k[ie];if(0<i(me,K))k[ie]=K,k[F]=me,F=ie;else break e}}function t(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var K=k[0],F=k.pop();if(F!==K){k[0]=F;e:for(var ie=0,me=k.length,Ne=me>>>1;ie<Ne;){var ce=2*(ie+1)-1,xe=k[ce],Ae=ce+1,Ie=k[Ae];if(0>i(xe,F))Ae<me&&0>i(Ie,xe)?(k[ie]=Ie,k[Ae]=F,ie=Ae):(k[ie]=xe,k[ce]=F,ie=ce);else if(Ae<me&&0>i(Ie,F))k[ie]=Ie,k[Ae]=F,ie=Ae;else break e}}return K}function i(k,K){var F=k.sortIndex-K.sortIndex;return F!==0?F:k.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,p=3,m=!1,g=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(k){for(var K=t(c);K!==null;){if(K.callback===null)r(c);else if(K.startTime<=k)r(c),K.sortIndex=K.expirationTime,e(l,K);else break;K=t(c)}}function w(k){if(v=!1,E(k),!g)if(t(l)!==null)g=!0,Y(I);else{var K=t(c);K!==null&&te(w,K.startTime-k)}}function I(k,K){g=!1,v&&(v=!1,_(P),P=-1),m=!0;var F=p;try{for(E(K),f=t(l);f!==null&&(!(f.expirationTime>K)||k&&!L());){var ie=f.callback;if(typeof ie=="function"){f.callback=null,p=f.priorityLevel;var me=ie(f.expirationTime<=K);K=n.unstable_now(),typeof me=="function"?f.callback=me:f===t(l)&&r(l),E(K)}else r(l);f=t(l)}if(f!==null)var Ne=!0;else{var ce=t(c);ce!==null&&te(w,ce.startTime-K),Ne=!1}return Ne}finally{f=null,p=F,m=!1}}var T=!1,b=null,P=-1,C=5,M=-1;function L(){return!(n.unstable_now()-M<C)}function U(){if(b!==null){var k=n.unstable_now();M=k;var K=!0;try{K=b(!0,k)}finally{K?X():(T=!1,b=null)}}else T=!1}var X;if(typeof S=="function")X=function(){S(U)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,Q=$.port2;$.port1.onmessage=U,X=function(){Q.postMessage(null)}}else X=function(){y(U,0)};function Y(k){b=k,T||(T=!0,X())}function te(k,K){P=y(function(){k(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(k){k.callback=null},n.unstable_continueExecution=function(){g||m||(g=!0,Y(I))},n.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<k?Math.floor(1e3/k):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(k){switch(p){case 1:case 2:case 3:var K=3;break;default:K=p}var F=p;p=K;try{return k()}finally{p=F}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(k,K){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var F=p;p=k;try{return K()}finally{p=F}},n.unstable_scheduleCallback=function(k,K,F){var ie=n.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?ie+F:ie):F=ie,k){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=F+me,k={id:u++,callback:K,priorityLevel:k,startTime:F,expirationTime:me,sortIndex:-1},F>ie?(k.sortIndex=F,e(c,k),t(l)===null&&k===t(c)&&(v?(_(P),P=-1):v=!0,te(w,F-ie))):(k.sortIndex=me,e(l,k),g||m||(g=!0,Y(I))),k},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(k){var K=p;return function(){var F=p;p=K;try{return k.apply(this,arguments)}finally{p=F}}}})(HF);UF.exports=HF;var V9=UF.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W9=se,ro=V9;function Je(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zF=new Set,Og={};function Qf(n,e){Yh(n,e),Yh(n+"Capture",e)}function Yh(n,e){for(Og[n]=e,n=0;n<e.length;n++)zF.add(e[n])}var Nl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uT=Object.prototype.hasOwnProperty,X9=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,DD={},BD={};function j9(n){return uT.call(BD,n)?!0:uT.call(DD,n)?!1:X9.test(n)?BD[n]=!0:(DD[n]=!0,!1)}function Y9(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function J9(n,e,t,r){if(e===null||typeof e>"u"||Y9(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function us(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ei={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Ei[n]=new us(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Ei[e]=new us(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Ei[n]=new us(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Ei[n]=new us(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Ei[n]=new us(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Ei[n]=new us(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Ei[n]=new us(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Ei[n]=new us(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Ei[n]=new us(n,5,!1,n.toLowerCase(),null,!1,!1)});var zb=/[\-:]([a-z])/g;function Gb(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(zb,Gb);Ei[e]=new us(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(zb,Gb);Ei[e]=new us(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(zb,Gb);Ei[e]=new us(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Ei[n]=new us(n,1,!1,n.toLowerCase(),null,!1,!1)});Ei.xlinkHref=new us("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Ei[n]=new us(n,1,!1,n.toLowerCase(),null,!0,!0)});function Vb(n,e,t,r){var i=Ei.hasOwnProperty(e)?Ei[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(J9(e,t,i,r)&&(t=null),r||i===null?j9(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Yl=W9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hv=Symbol.for("react.element"),nh=Symbol.for("react.portal"),rh=Symbol.for("react.fragment"),Wb=Symbol.for("react.strict_mode"),fT=Symbol.for("react.profiler"),GF=Symbol.for("react.provider"),VF=Symbol.for("react.context"),Xb=Symbol.for("react.forward_ref"),dT=Symbol.for("react.suspense"),hT=Symbol.for("react.suspense_list"),jb=Symbol.for("react.memo"),mc=Symbol.for("react.lazy"),WF=Symbol.for("react.offscreen"),LD=Symbol.iterator;function cm(n){return n===null||typeof n!="object"?null:(n=LD&&n[LD]||n["@@iterator"],typeof n=="function"?n:null)}var yr=Object.assign,QA;function zm(n){if(QA===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);QA=e&&e[1]||""}return`
`+QA+n}var ZA=!1;function ew(n,e){if(!n||ZA)return"";ZA=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{ZA=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?zm(n):""}function K9(n){switch(n.tag){case 5:return zm(n.type);case 16:return zm("Lazy");case 13:return zm("Suspense");case 19:return zm("SuspenseList");case 0:case 2:case 15:return n=ew(n.type,!1),n;case 11:return n=ew(n.type.render,!1),n;case 1:return n=ew(n.type,!0),n;default:return""}}function pT(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case rh:return"Fragment";case nh:return"Portal";case fT:return"Profiler";case Wb:return"StrictMode";case dT:return"Suspense";case hT:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case VF:return(n.displayName||"Context")+".Consumer";case GF:return(n._context.displayName||"Context")+".Provider";case Xb:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case jb:return e=n.displayName||null,e!==null?e:pT(n.type)||"Memo";case mc:e=n._payload,n=n._init;try{return pT(n(e))}catch{}}return null}function $9(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pT(e);case 8:return e===Wb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Kc(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function XF(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function q9(n){var e=XF(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function pv(n){n._valueTracker||(n._valueTracker=q9(n))}function jF(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=XF(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Ux(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function mT(n,e){var t=e.checked;return yr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function ND(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Kc(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function YF(n,e){e=e.checked,e!=null&&Vb(n,"checked",e,!1)}function gT(n,e){YF(n,e);var t=Kc(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?_T(n,e.type,t):e.hasOwnProperty("defaultValue")&&_T(n,e.type,Kc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function kD(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function _T(n,e,t){(e!=="number"||Ux(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Gm=Array.isArray;function Mh(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Kc(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function vT(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Je(91));return yr({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function FD(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Je(92));if(Gm(t)){if(1<t.length)throw Error(Je(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Kc(t)}}function JF(n,e){var t=Kc(e.value),r=Kc(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function OD(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function KF(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yT(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?KF(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var mv,$F=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(mv=mv||document.createElement("div"),mv.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mv.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Ug(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var ng={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Q9=["Webkit","ms","Moz","O"];Object.keys(ng).forEach(function(n){Q9.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),ng[e]=ng[n]})});function qF(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||ng.hasOwnProperty(n)&&ng[n]?(""+e).trim():e+"px"}function QF(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=qF(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var Z9=yr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xT(n,e){if(e){if(Z9[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Je(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Je(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Je(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Je(62))}}function ST(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ET=null;function Yb(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var AT=null,Th=null,Ch=null;function UD(n){if(n=U_(n)){if(typeof AT!="function")throw Error(Je(280));var e=n.stateNode;e&&(e=w1(e),AT(n.stateNode,n.type,e))}}function ZF(n){Th?Ch?Ch.push(n):Ch=[n]:Th=n}function eO(){if(Th){var n=Th,e=Ch;if(Ch=Th=null,UD(n),e)for(n=0;n<e.length;n++)UD(e[n])}}function tO(n,e){return n(e)}function nO(){}var tw=!1;function rO(n,e,t){if(tw)return n(e,t);tw=!0;try{return tO(n,e,t)}finally{tw=!1,(Th!==null||Ch!==null)&&(nO(),eO())}}function Hg(n,e){var t=n.stateNode;if(t===null)return null;var r=w1(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Je(231,e,typeof t));return t}var wT=!1;if(Nl)try{var um={};Object.defineProperty(um,"passive",{get:function(){wT=!0}}),window.addEventListener("test",um,um),window.removeEventListener("test",um,um)}catch{wT=!1}function eV(n,e,t,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var rg=!1,Hx=null,zx=!1,MT=null,tV={onError:function(n){rg=!0,Hx=n}};function nV(n,e,t,r,i,s,o,a,l){rg=!1,Hx=null,eV.apply(tV,arguments)}function rV(n,e,t,r,i,s,o,a,l){if(nV.apply(this,arguments),rg){if(rg){var c=Hx;rg=!1,Hx=null}else throw Error(Je(198));zx||(zx=!0,MT=c)}}function Zf(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function iO(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function HD(n){if(Zf(n)!==n)throw Error(Je(188))}function iV(n){var e=n.alternate;if(!e){if(e=Zf(n),e===null)throw Error(Je(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return HD(i),n;if(s===r)return HD(i),e;s=s.sibling}throw Error(Je(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(Je(189))}}if(t.alternate!==r)throw Error(Je(190))}if(t.tag!==3)throw Error(Je(188));return t.stateNode.current===t?n:e}function sO(n){return n=iV(n),n!==null?oO(n):null}function oO(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=oO(n);if(e!==null)return e;n=n.sibling}return null}var aO=ro.unstable_scheduleCallback,zD=ro.unstable_cancelCallback,sV=ro.unstable_shouldYield,oV=ro.unstable_requestPaint,Pr=ro.unstable_now,aV=ro.unstable_getCurrentPriorityLevel,Jb=ro.unstable_ImmediatePriority,lO=ro.unstable_UserBlockingPriority,Gx=ro.unstable_NormalPriority,lV=ro.unstable_LowPriority,cO=ro.unstable_IdlePriority,x1=null,Ga=null;function cV(n){if(Ga&&typeof Ga.onCommitFiberRoot=="function")try{Ga.onCommitFiberRoot(x1,n,void 0,(n.current.flags&128)===128)}catch{}}var aa=Math.clz32?Math.clz32:dV,uV=Math.log,fV=Math.LN2;function dV(n){return n>>>=0,n===0?32:31-(uV(n)/fV|0)|0}var gv=64,_v=4194304;function Vm(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Vx(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=Vm(a):(s&=o,s!==0&&(r=Vm(s)))}else o=t&~i,o!==0?r=Vm(o):s!==0&&(r=Vm(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-aa(e),i=1<<t,r|=n[t],e&=~i;return r}function hV(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pV(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-aa(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=hV(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function TT(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function uO(){var n=gv;return gv<<=1,!(gv&4194240)&&(gv=64),n}function nw(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function F_(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-aa(e),n[e]=t}function mV(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-aa(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function Kb(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-aa(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Nn=0;function fO(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var dO,$b,hO,pO,mO,CT=!1,vv=[],Lc=null,Nc=null,kc=null,zg=new Map,Gg=new Map,Ec=[],gV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function GD(n,e){switch(n){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Nc=null;break;case"mouseover":case"mouseout":kc=null;break;case"pointerover":case"pointerout":zg.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gg.delete(e.pointerId)}}function fm(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=U_(e),e!==null&&$b(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function _V(n,e,t,r,i){switch(e){case"focusin":return Lc=fm(Lc,n,e,t,r,i),!0;case"dragenter":return Nc=fm(Nc,n,e,t,r,i),!0;case"mouseover":return kc=fm(kc,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return zg.set(s,fm(zg.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Gg.set(s,fm(Gg.get(s)||null,n,e,t,r,i)),!0}return!1}function gO(n){var e=Zu(n.target);if(e!==null){var t=Zf(e);if(t!==null){if(e=t.tag,e===13){if(e=iO(t),e!==null){n.blockedOn=e,mO(n.priority,function(){hO(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function sx(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=bT(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);ET=r,t.target.dispatchEvent(r),ET=null}else return e=U_(t),e!==null&&$b(e),n.blockedOn=t,!1;e.shift()}return!0}function VD(n,e,t){sx(n)&&t.delete(e)}function vV(){CT=!1,Lc!==null&&sx(Lc)&&(Lc=null),Nc!==null&&sx(Nc)&&(Nc=null),kc!==null&&sx(kc)&&(kc=null),zg.forEach(VD),Gg.forEach(VD)}function dm(n,e){n.blockedOn===e&&(n.blockedOn=null,CT||(CT=!0,ro.unstable_scheduleCallback(ro.unstable_NormalPriority,vV)))}function Vg(n){function e(i){return dm(i,n)}if(0<vv.length){dm(vv[0],n);for(var t=1;t<vv.length;t++){var r=vv[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Lc!==null&&dm(Lc,n),Nc!==null&&dm(Nc,n),kc!==null&&dm(kc,n),zg.forEach(e),Gg.forEach(e),t=0;t<Ec.length;t++)r=Ec[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Ec.length&&(t=Ec[0],t.blockedOn===null);)gO(t),t.blockedOn===null&&Ec.shift()}var bh=Yl.ReactCurrentBatchConfig,Wx=!0;function yV(n,e,t,r){var i=Nn,s=bh.transition;bh.transition=null;try{Nn=1,qb(n,e,t,r)}finally{Nn=i,bh.transition=s}}function xV(n,e,t,r){var i=Nn,s=bh.transition;bh.transition=null;try{Nn=4,qb(n,e,t,r)}finally{Nn=i,bh.transition=s}}function qb(n,e,t,r){if(Wx){var i=bT(n,e,t,r);if(i===null)dw(n,e,r,Xx,t),GD(n,r);else if(_V(i,n,e,t,r))r.stopPropagation();else if(GD(n,r),e&4&&-1<gV.indexOf(n)){for(;i!==null;){var s=U_(i);if(s!==null&&dO(s),s=bT(n,e,t,r),s===null&&dw(n,e,r,Xx,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else dw(n,e,r,null,t)}}var Xx=null;function bT(n,e,t,r){if(Xx=null,n=Yb(r),n=Zu(n),n!==null)if(e=Zf(n),e===null)n=null;else if(t=e.tag,t===13){if(n=iO(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Xx=n,null}function _O(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(aV()){case Jb:return 1;case lO:return 4;case Gx:case lV:return 16;case cO:return 536870912;default:return 16}default:return 16}}var Mc=null,Qb=null,ox=null;function vO(){if(ox)return ox;var n,e=Qb,t=e.length,r,i="value"in Mc?Mc.value:Mc.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return ox=i.slice(n,1<r?1-r:void 0)}function ax(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function yv(){return!0}function WD(){return!1}function ao(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?yv:WD,this.isPropagationStopped=WD,this}return yr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=yv)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=yv)},persist:function(){},isPersistent:yv}),e}var Rp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zb=ao(Rp),O_=yr({},Rp,{view:0,detail:0}),SV=ao(O_),rw,iw,hm,S1=yr({},O_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eR,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==hm&&(hm&&n.type==="mousemove"?(rw=n.screenX-hm.screenX,iw=n.screenY-hm.screenY):iw=rw=0,hm=n),rw)},movementY:function(n){return"movementY"in n?n.movementY:iw}}),XD=ao(S1),EV=yr({},S1,{dataTransfer:0}),AV=ao(EV),wV=yr({},O_,{relatedTarget:0}),sw=ao(wV),MV=yr({},Rp,{animationName:0,elapsedTime:0,pseudoElement:0}),TV=ao(MV),CV=yr({},Rp,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),bV=ao(CV),RV=yr({},Rp,{data:0}),jD=ao(RV),IV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BV(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=DV[n])?!!e[n]:!1}function eR(){return BV}var LV=yr({},O_,{key:function(n){if(n.key){var e=IV[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=ax(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?PV[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eR,charCode:function(n){return n.type==="keypress"?ax(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ax(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),NV=ao(LV),kV=yr({},S1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),YD=ao(kV),FV=yr({},O_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eR}),OV=ao(FV),UV=yr({},Rp,{propertyName:0,elapsedTime:0,pseudoElement:0}),HV=ao(UV),zV=yr({},S1,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),GV=ao(zV),VV=[9,13,27,32],tR=Nl&&"CompositionEvent"in window,ig=null;Nl&&"documentMode"in document&&(ig=document.documentMode);var WV=Nl&&"TextEvent"in window&&!ig,yO=Nl&&(!tR||ig&&8<ig&&11>=ig),JD=" ",KD=!1;function xO(n,e){switch(n){case"keyup":return VV.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function SO(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ih=!1;function XV(n,e){switch(n){case"compositionend":return SO(e);case"keypress":return e.which!==32?null:(KD=!0,JD);case"textInput":return n=e.data,n===JD&&KD?null:n;default:return null}}function jV(n,e){if(ih)return n==="compositionend"||!tR&&xO(n,e)?(n=vO(),ox=Qb=Mc=null,ih=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return yO&&e.locale!=="ko"?null:e.data;default:return null}}var YV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $D(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!YV[n.type]:e==="textarea"}function EO(n,e,t,r){ZF(r),e=jx(e,"onChange"),0<e.length&&(t=new Zb("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var sg=null,Wg=null;function JV(n){BO(n,0)}function E1(n){var e=ah(n);if(jF(e))return n}function KV(n,e){if(n==="change")return e}var AO=!1;if(Nl){var ow;if(Nl){var aw="oninput"in document;if(!aw){var qD=document.createElement("div");qD.setAttribute("oninput","return;"),aw=typeof qD.oninput=="function"}ow=aw}else ow=!1;AO=ow&&(!document.documentMode||9<document.documentMode)}function QD(){sg&&(sg.detachEvent("onpropertychange",wO),Wg=sg=null)}function wO(n){if(n.propertyName==="value"&&E1(Wg)){var e=[];EO(e,Wg,n,Yb(n)),rO(JV,e)}}function $V(n,e,t){n==="focusin"?(QD(),sg=e,Wg=t,sg.attachEvent("onpropertychange",wO)):n==="focusout"&&QD()}function qV(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return E1(Wg)}function QV(n,e){if(n==="click")return E1(e)}function ZV(n,e){if(n==="input"||n==="change")return E1(e)}function eW(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var fa=typeof Object.is=="function"?Object.is:eW;function Xg(n,e){if(fa(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!uT.call(e,i)||!fa(n[i],e[i]))return!1}return!0}function ZD(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function eB(n,e){var t=ZD(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=ZD(t)}}function MO(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?MO(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function TO(){for(var n=window,e=Ux();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Ux(n.document)}return e}function nR(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function tW(n){var e=TO(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&MO(t.ownerDocument.documentElement,t)){if(r!==null&&nR(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=eB(t,s);var o=eB(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var nW=Nl&&"documentMode"in document&&11>=document.documentMode,sh=null,RT=null,og=null,IT=!1;function tB(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;IT||sh==null||sh!==Ux(r)||(r=sh,"selectionStart"in r&&nR(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),og&&Xg(og,r)||(og=r,r=jx(RT,"onSelect"),0<r.length&&(e=new Zb("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=sh)))}function xv(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var oh={animationend:xv("Animation","AnimationEnd"),animationiteration:xv("Animation","AnimationIteration"),animationstart:xv("Animation","AnimationStart"),transitionend:xv("Transition","TransitionEnd")},lw={},CO={};Nl&&(CO=document.createElement("div").style,"AnimationEvent"in window||(delete oh.animationend.animation,delete oh.animationiteration.animation,delete oh.animationstart.animation),"TransitionEvent"in window||delete oh.transitionend.transition);function A1(n){if(lw[n])return lw[n];if(!oh[n])return n;var e=oh[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in CO)return lw[n]=e[t];return n}var bO=A1("animationend"),RO=A1("animationiteration"),IO=A1("animationstart"),PO=A1("transitionend"),DO=new Map,nB="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function au(n,e){DO.set(n,e),Qf(e,[n])}for(var cw=0;cw<nB.length;cw++){var uw=nB[cw],rW=uw.toLowerCase(),iW=uw[0].toUpperCase()+uw.slice(1);au(rW,"on"+iW)}au(bO,"onAnimationEnd");au(RO,"onAnimationIteration");au(IO,"onAnimationStart");au("dblclick","onDoubleClick");au("focusin","onFocus");au("focusout","onBlur");au(PO,"onTransitionEnd");Yh("onMouseEnter",["mouseout","mouseover"]);Yh("onMouseLeave",["mouseout","mouseover"]);Yh("onPointerEnter",["pointerout","pointerover"]);Yh("onPointerLeave",["pointerout","pointerover"]);Qf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qf("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sW=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wm));function rB(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,rV(r,e,void 0,n),n.currentTarget=null}function BO(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;rB(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;rB(i,a,c),s=l}}}if(zx)throw n=MT,zx=!1,MT=null,n}function Kn(n,e){var t=e[NT];t===void 0&&(t=e[NT]=new Set);var r=n+"__bubble";t.has(r)||(LO(e,n,2,!1),t.add(r))}function fw(n,e,t){var r=0;e&&(r|=4),LO(t,n,r,e)}var Sv="_reactListening"+Math.random().toString(36).slice(2);function jg(n){if(!n[Sv]){n[Sv]=!0,zF.forEach(function(t){t!=="selectionchange"&&(sW.has(t)||fw(t,!1,n),fw(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Sv]||(e[Sv]=!0,fw("selectionchange",!1,e))}}function LO(n,e,t,r){switch(_O(e)){case 1:var i=yV;break;case 4:i=xV;break;default:i=qb}t=i.bind(null,e,t,n),i=void 0,!wT||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function dw(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Zu(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}rO(function(){var c=s,u=Yb(t),f=[];e:{var p=DO.get(n);if(p!==void 0){var m=Zb,g=n;switch(n){case"keypress":if(ax(t)===0)break e;case"keydown":case"keyup":m=NV;break;case"focusin":g="focus",m=sw;break;case"focusout":g="blur",m=sw;break;case"beforeblur":case"afterblur":m=sw;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=XD;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=AV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=OV;break;case bO:case RO:case IO:m=TV;break;case PO:m=HV;break;case"scroll":m=SV;break;case"wheel":m=GV;break;case"copy":case"cut":case"paste":m=bV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=YD}var v=(e&4)!==0,y=!v&&n==="scroll",_=v?p!==null?p+"Capture":null:p;v=[];for(var S=c,E;S!==null;){E=S;var w=E.stateNode;if(E.tag===5&&w!==null&&(E=w,_!==null&&(w=Hg(S,_),w!=null&&v.push(Yg(S,w,E)))),y)break;S=S.return}0<v.length&&(p=new m(p,g,null,t,u),f.push({event:p,listeners:v}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==ET&&(g=t.relatedTarget||t.fromElement)&&(Zu(g)||g[kl]))break e;if((m||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,m?(g=t.relatedTarget||t.toElement,m=c,g=g?Zu(g):null,g!==null&&(y=Zf(g),g!==y||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=c),m!==g)){if(v=XD,w="onMouseLeave",_="onMouseEnter",S="mouse",(n==="pointerout"||n==="pointerover")&&(v=YD,w="onPointerLeave",_="onPointerEnter",S="pointer"),y=m==null?p:ah(m),E=g==null?p:ah(g),p=new v(w,S+"leave",m,t,u),p.target=y,p.relatedTarget=E,w=null,Zu(u)===c&&(v=new v(_,S+"enter",g,t,u),v.target=E,v.relatedTarget=y,w=v),y=w,m&&g)t:{for(v=m,_=g,S=0,E=v;E;E=Ad(E))S++;for(E=0,w=_;w;w=Ad(w))E++;for(;0<S-E;)v=Ad(v),S--;for(;0<E-S;)_=Ad(_),E--;for(;S--;){if(v===_||_!==null&&v===_.alternate)break t;v=Ad(v),_=Ad(_)}v=null}else v=null;m!==null&&iB(f,p,m,v,!1),g!==null&&y!==null&&iB(f,y,g,v,!0)}}e:{if(p=c?ah(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var I=KV;else if($D(p))if(AO)I=ZV;else{I=qV;var T=$V}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(I=QV);if(I&&(I=I(n,c))){EO(f,I,t,u);break e}T&&T(n,p,c),n==="focusout"&&(T=p._wrapperState)&&T.controlled&&p.type==="number"&&_T(p,"number",p.value)}switch(T=c?ah(c):window,n){case"focusin":($D(T)||T.contentEditable==="true")&&(sh=T,RT=c,og=null);break;case"focusout":og=RT=sh=null;break;case"mousedown":IT=!0;break;case"contextmenu":case"mouseup":case"dragend":IT=!1,tB(f,t,u);break;case"selectionchange":if(nW)break;case"keydown":case"keyup":tB(f,t,u)}var b;if(tR)e:{switch(n){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else ih?xO(n,t)&&(P="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(P="onCompositionStart");P&&(yO&&t.locale!=="ko"&&(ih||P!=="onCompositionStart"?P==="onCompositionEnd"&&ih&&(b=vO()):(Mc=u,Qb="value"in Mc?Mc.value:Mc.textContent,ih=!0)),T=jx(c,P),0<T.length&&(P=new jD(P,n,null,t,u),f.push({event:P,listeners:T}),b?P.data=b:(b=SO(t),b!==null&&(P.data=b)))),(b=WV?XV(n,t):jV(n,t))&&(c=jx(c,"onBeforeInput"),0<c.length&&(u=new jD("onBeforeInput","beforeinput",null,t,u),f.push({event:u,listeners:c}),u.data=b))}BO(f,e)})}function Yg(n,e,t){return{instance:n,listener:e,currentTarget:t}}function jx(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Hg(n,t),s!=null&&r.unshift(Yg(n,s,i)),s=Hg(n,e),s!=null&&r.push(Yg(n,s,i))),n=n.return}return r}function Ad(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function iB(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Hg(t,s),l!=null&&o.unshift(Yg(t,l,a))):i||(l=Hg(t,s),l!=null&&o.push(Yg(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var oW=/\r\n?/g,aW=/\u0000|\uFFFD/g;function sB(n){return(typeof n=="string"?n:""+n).replace(oW,`
`).replace(aW,"")}function Ev(n,e,t){if(e=sB(e),sB(n)!==e&&t)throw Error(Je(425))}function Yx(){}var PT=null,DT=null;function BT(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var LT=typeof setTimeout=="function"?setTimeout:void 0,lW=typeof clearTimeout=="function"?clearTimeout:void 0,oB=typeof Promise=="function"?Promise:void 0,cW=typeof queueMicrotask=="function"?queueMicrotask:typeof oB<"u"?function(n){return oB.resolve(null).then(n).catch(uW)}:LT;function uW(n){setTimeout(function(){throw n})}function hw(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),Vg(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);Vg(e)}function Fc(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function aB(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Ip=Math.random().toString(36).slice(2),Ba="__reactFiber$"+Ip,Jg="__reactProps$"+Ip,kl="__reactContainer$"+Ip,NT="__reactEvents$"+Ip,fW="__reactListeners$"+Ip,dW="__reactHandles$"+Ip;function Zu(n){var e=n[Ba];if(e)return e;for(var t=n.parentNode;t;){if(e=t[kl]||t[Ba]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=aB(n);n!==null;){if(t=n[Ba])return t;n=aB(n)}return e}n=t,t=n.parentNode}return null}function U_(n){return n=n[Ba]||n[kl],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ah(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Je(33))}function w1(n){return n[Jg]||null}var kT=[],lh=-1;function lu(n){return{current:n}}function Zn(n){0>lh||(n.current=kT[lh],kT[lh]=null,lh--)}function Jn(n,e){lh++,kT[lh]=n.current,n.current=e}var $c={},Hi=lu($c),Es=lu(!1),Df=$c;function Jh(n,e){var t=n.type.contextTypes;if(!t)return $c;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function As(n){return n=n.childContextTypes,n!=null}function Jx(){Zn(Es),Zn(Hi)}function lB(n,e,t){if(Hi.current!==$c)throw Error(Je(168));Jn(Hi,e),Jn(Es,t)}function NO(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Je(108,$9(n)||"Unknown",i));return yr({},t,r)}function Kx(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||$c,Df=Hi.current,Jn(Hi,n),Jn(Es,Es.current),!0}function cB(n,e,t){var r=n.stateNode;if(!r)throw Error(Je(169));t?(n=NO(n,e,Df),r.__reactInternalMemoizedMergedChildContext=n,Zn(Es),Zn(Hi),Jn(Hi,n)):Zn(Es),Jn(Es,t)}var vl=null,M1=!1,pw=!1;function kO(n){vl===null?vl=[n]:vl.push(n)}function hW(n){M1=!0,kO(n)}function cu(){if(!pw&&vl!==null){pw=!0;var n=0,e=Nn;try{var t=vl;for(Nn=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}vl=null,M1=!1}catch(i){throw vl!==null&&(vl=vl.slice(n+1)),aO(Jb,cu),i}finally{Nn=e,pw=!1}}return null}var ch=[],uh=0,$x=null,qx=0,wo=[],Mo=0,Bf=null,Tl=1,Cl="";function Gu(n,e){ch[uh++]=qx,ch[uh++]=$x,$x=n,qx=e}function FO(n,e,t){wo[Mo++]=Tl,wo[Mo++]=Cl,wo[Mo++]=Bf,Bf=n;var r=Tl;n=Cl;var i=32-aa(r)-1;r&=~(1<<i),t+=1;var s=32-aa(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Tl=1<<32-aa(e)+i|t<<i|r,Cl=s+n}else Tl=1<<s|t<<i|r,Cl=n}function rR(n){n.return!==null&&(Gu(n,1),FO(n,1,0))}function iR(n){for(;n===$x;)$x=ch[--uh],ch[uh]=null,qx=ch[--uh],ch[uh]=null;for(;n===Bf;)Bf=wo[--Mo],wo[Mo]=null,Cl=wo[--Mo],wo[Mo]=null,Tl=wo[--Mo],wo[Mo]=null}var Zs=null,$s=null,ir=!1,na=null;function OO(n,e){var t=Io(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function uB(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Zs=n,$s=Fc(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Zs=n,$s=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Bf!==null?{id:Tl,overflow:Cl}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Io(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Zs=n,$s=null,!0):!1;default:return!1}}function FT(n){return(n.mode&1)!==0&&(n.flags&128)===0}function OT(n){if(ir){var e=$s;if(e){var t=e;if(!uB(n,e)){if(FT(n))throw Error(Je(418));e=Fc(t.nextSibling);var r=Zs;e&&uB(n,e)?OO(r,t):(n.flags=n.flags&-4097|2,ir=!1,Zs=n)}}else{if(FT(n))throw Error(Je(418));n.flags=n.flags&-4097|2,ir=!1,Zs=n}}}function fB(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Zs=n}function Av(n){if(n!==Zs)return!1;if(!ir)return fB(n),ir=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!BT(n.type,n.memoizedProps)),e&&(e=$s)){if(FT(n))throw UO(),Error(Je(418));for(;e;)OO(n,e),e=Fc(e.nextSibling)}if(fB(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Je(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){$s=Fc(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}$s=null}}else $s=Zs?Fc(n.stateNode.nextSibling):null;return!0}function UO(){for(var n=$s;n;)n=Fc(n.nextSibling)}function Kh(){$s=Zs=null,ir=!1}function sR(n){na===null?na=[n]:na.push(n)}var pW=Yl.ReactCurrentBatchConfig;function pm(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Je(309));var r=t.stateNode}if(!r)throw Error(Je(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Je(284));if(!t._owner)throw Error(Je(290,n))}return n}function wv(n,e){throw n=Object.prototype.toString.call(e),Error(Je(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function dB(n){var e=n._init;return e(n._payload)}function HO(n){function e(_,S){if(n){var E=_.deletions;E===null?(_.deletions=[S],_.flags|=16):E.push(S)}}function t(_,S){if(!n)return null;for(;S!==null;)e(_,S),S=S.sibling;return null}function r(_,S){for(_=new Map;S!==null;)S.key!==null?_.set(S.key,S):_.set(S.index,S),S=S.sibling;return _}function i(_,S){return _=zc(_,S),_.index=0,_.sibling=null,_}function s(_,S,E){return _.index=E,n?(E=_.alternate,E!==null?(E=E.index,E<S?(_.flags|=2,S):E):(_.flags|=2,S)):(_.flags|=1048576,S)}function o(_){return n&&_.alternate===null&&(_.flags|=2),_}function a(_,S,E,w){return S===null||S.tag!==6?(S=Sw(E,_.mode,w),S.return=_,S):(S=i(S,E),S.return=_,S)}function l(_,S,E,w){var I=E.type;return I===rh?u(_,S,E.props.children,w,E.key):S!==null&&(S.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===mc&&dB(I)===S.type)?(w=i(S,E.props),w.ref=pm(_,S,E),w.return=_,w):(w=px(E.type,E.key,E.props,null,_.mode,w),w.ref=pm(_,S,E),w.return=_,w)}function c(_,S,E,w){return S===null||S.tag!==4||S.stateNode.containerInfo!==E.containerInfo||S.stateNode.implementation!==E.implementation?(S=Ew(E,_.mode,w),S.return=_,S):(S=i(S,E.children||[]),S.return=_,S)}function u(_,S,E,w,I){return S===null||S.tag!==7?(S=gf(E,_.mode,w,I),S.return=_,S):(S=i(S,E),S.return=_,S)}function f(_,S,E){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Sw(""+S,_.mode,E),S.return=_,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case hv:return E=px(S.type,S.key,S.props,null,_.mode,E),E.ref=pm(_,null,S),E.return=_,E;case nh:return S=Ew(S,_.mode,E),S.return=_,S;case mc:var w=S._init;return f(_,w(S._payload),E)}if(Gm(S)||cm(S))return S=gf(S,_.mode,E,null),S.return=_,S;wv(_,S)}return null}function p(_,S,E,w){var I=S!==null?S.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return I!==null?null:a(_,S,""+E,w);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case hv:return E.key===I?l(_,S,E,w):null;case nh:return E.key===I?c(_,S,E,w):null;case mc:return I=E._init,p(_,S,I(E._payload),w)}if(Gm(E)||cm(E))return I!==null?null:u(_,S,E,w,null);wv(_,E)}return null}function m(_,S,E,w,I){if(typeof w=="string"&&w!==""||typeof w=="number")return _=_.get(E)||null,a(S,_,""+w,I);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case hv:return _=_.get(w.key===null?E:w.key)||null,l(S,_,w,I);case nh:return _=_.get(w.key===null?E:w.key)||null,c(S,_,w,I);case mc:var T=w._init;return m(_,S,E,T(w._payload),I)}if(Gm(w)||cm(w))return _=_.get(E)||null,u(S,_,w,I,null);wv(S,w)}return null}function g(_,S,E,w){for(var I=null,T=null,b=S,P=S=0,C=null;b!==null&&P<E.length;P++){b.index>P?(C=b,b=null):C=b.sibling;var M=p(_,b,E[P],w);if(M===null){b===null&&(b=C);break}n&&b&&M.alternate===null&&e(_,b),S=s(M,S,P),T===null?I=M:T.sibling=M,T=M,b=C}if(P===E.length)return t(_,b),ir&&Gu(_,P),I;if(b===null){for(;P<E.length;P++)b=f(_,E[P],w),b!==null&&(S=s(b,S,P),T===null?I=b:T.sibling=b,T=b);return ir&&Gu(_,P),I}for(b=r(_,b);P<E.length;P++)C=m(b,_,P,E[P],w),C!==null&&(n&&C.alternate!==null&&b.delete(C.key===null?P:C.key),S=s(C,S,P),T===null?I=C:T.sibling=C,T=C);return n&&b.forEach(function(L){return e(_,L)}),ir&&Gu(_,P),I}function v(_,S,E,w){var I=cm(E);if(typeof I!="function")throw Error(Je(150));if(E=I.call(E),E==null)throw Error(Je(151));for(var T=I=null,b=S,P=S=0,C=null,M=E.next();b!==null&&!M.done;P++,M=E.next()){b.index>P?(C=b,b=null):C=b.sibling;var L=p(_,b,M.value,w);if(L===null){b===null&&(b=C);break}n&&b&&L.alternate===null&&e(_,b),S=s(L,S,P),T===null?I=L:T.sibling=L,T=L,b=C}if(M.done)return t(_,b),ir&&Gu(_,P),I;if(b===null){for(;!M.done;P++,M=E.next())M=f(_,M.value,w),M!==null&&(S=s(M,S,P),T===null?I=M:T.sibling=M,T=M);return ir&&Gu(_,P),I}for(b=r(_,b);!M.done;P++,M=E.next())M=m(b,_,P,M.value,w),M!==null&&(n&&M.alternate!==null&&b.delete(M.key===null?P:M.key),S=s(M,S,P),T===null?I=M:T.sibling=M,T=M);return n&&b.forEach(function(U){return e(_,U)}),ir&&Gu(_,P),I}function y(_,S,E,w){if(typeof E=="object"&&E!==null&&E.type===rh&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case hv:e:{for(var I=E.key,T=S;T!==null;){if(T.key===I){if(I=E.type,I===rh){if(T.tag===7){t(_,T.sibling),S=i(T,E.props.children),S.return=_,_=S;break e}}else if(T.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===mc&&dB(I)===T.type){t(_,T.sibling),S=i(T,E.props),S.ref=pm(_,T,E),S.return=_,_=S;break e}t(_,T);break}else e(_,T);T=T.sibling}E.type===rh?(S=gf(E.props.children,_.mode,w,E.key),S.return=_,_=S):(w=px(E.type,E.key,E.props,null,_.mode,w),w.ref=pm(_,S,E),w.return=_,_=w)}return o(_);case nh:e:{for(T=E.key;S!==null;){if(S.key===T)if(S.tag===4&&S.stateNode.containerInfo===E.containerInfo&&S.stateNode.implementation===E.implementation){t(_,S.sibling),S=i(S,E.children||[]),S.return=_,_=S;break e}else{t(_,S);break}else e(_,S);S=S.sibling}S=Ew(E,_.mode,w),S.return=_,_=S}return o(_);case mc:return T=E._init,y(_,S,T(E._payload),w)}if(Gm(E))return g(_,S,E,w);if(cm(E))return v(_,S,E,w);wv(_,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,S!==null&&S.tag===6?(t(_,S.sibling),S=i(S,E),S.return=_,_=S):(t(_,S),S=Sw(E,_.mode,w),S.return=_,_=S),o(_)):t(_,S)}return y}var $h=HO(!0),zO=HO(!1),Qx=lu(null),Zx=null,fh=null,oR=null;function aR(){oR=fh=Zx=null}function lR(n){var e=Qx.current;Zn(Qx),n._currentValue=e}function UT(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Rh(n,e){Zx=n,oR=fh=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(ys=!0),n.firstContext=null)}function Fo(n){var e=n._currentValue;if(oR!==n)if(n={context:n,memoizedValue:e,next:null},fh===null){if(Zx===null)throw Error(Je(308));fh=n,Zx.dependencies={lanes:0,firstContext:n}}else fh=fh.next=n;return e}var ef=null;function cR(n){ef===null?ef=[n]:ef.push(n)}function GO(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,cR(e)):(t.next=i.next,i.next=t),e.interleaved=t,Fl(n,r)}function Fl(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var gc=!1;function uR(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function VO(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Il(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Oc(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,wn&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Fl(n,t)}return i=r.interleaved,i===null?(e.next=e,cR(r)):(e.next=i.next,i.next=e),r.interleaved=e,Fl(n,t)}function lx(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,Kb(n,t)}}function hB(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function eS(n,e,t,r){var i=n.updateQueue;gc=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,u=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=n,v=a;switch(p=e,m=t,v.tag){case 1:if(g=v.payload,typeof g=="function"){f=g.call(m,f,p);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,p=typeof g=="function"?g.call(m,f,p):g,p==null)break e;f=yr({},f,p);break e;case 2:gc=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=f):u=u.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(u===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Nf|=o,n.lanes=o,n.memoizedState=f}}function pB(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Je(191,i));i.call(r)}}}var H_={},Va=lu(H_),Kg=lu(H_),$g=lu(H_);function tf(n){if(n===H_)throw Error(Je(174));return n}function fR(n,e){switch(Jn($g,e),Jn(Kg,n),Jn(Va,H_),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yT(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=yT(e,n)}Zn(Va),Jn(Va,e)}function qh(){Zn(Va),Zn(Kg),Zn($g)}function WO(n){tf($g.current);var e=tf(Va.current),t=yT(e,n.type);e!==t&&(Jn(Kg,n),Jn(Va,t))}function dR(n){Kg.current===n&&(Zn(Va),Zn(Kg))}var pr=lu(0);function tS(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var mw=[];function hR(){for(var n=0;n<mw.length;n++)mw[n]._workInProgressVersionPrimary=null;mw.length=0}var cx=Yl.ReactCurrentDispatcher,gw=Yl.ReactCurrentBatchConfig,Lf=0,vr=null,jr=null,ai=null,nS=!1,ag=!1,qg=0,mW=0;function bi(){throw Error(Je(321))}function pR(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!fa(n[t],e[t]))return!1;return!0}function mR(n,e,t,r,i,s){if(Lf=s,vr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,cx.current=n===null||n.memoizedState===null?yW:xW,n=t(r,i),ag){s=0;do{if(ag=!1,qg=0,25<=s)throw Error(Je(301));s+=1,ai=jr=null,e.updateQueue=null,cx.current=SW,n=t(r,i)}while(ag)}if(cx.current=rS,e=jr!==null&&jr.next!==null,Lf=0,ai=jr=vr=null,nS=!1,e)throw Error(Je(300));return n}function gR(){var n=qg!==0;return qg=0,n}function ba(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ai===null?vr.memoizedState=ai=n:ai=ai.next=n,ai}function Oo(){if(jr===null){var n=vr.alternate;n=n!==null?n.memoizedState:null}else n=jr.next;var e=ai===null?vr.memoizedState:ai.next;if(e!==null)ai=e,jr=n;else{if(n===null)throw Error(Je(310));jr=n,n={memoizedState:jr.memoizedState,baseState:jr.baseState,baseQueue:jr.baseQueue,queue:jr.queue,next:null},ai===null?vr.memoizedState=ai=n:ai=ai.next=n}return ai}function Qg(n,e){return typeof e=="function"?e(n):e}function _w(n){var e=Oo(),t=e.queue;if(t===null)throw Error(Je(311));t.lastRenderedReducer=n;var r=jr,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Lf&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,vr.lanes|=u,Nf|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,fa(r,e.memoizedState)||(ys=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,vr.lanes|=s,Nf|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function vw(n){var e=Oo(),t=e.queue;if(t===null)throw Error(Je(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);fa(s,e.memoizedState)||(ys=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function XO(){}function jO(n,e){var t=vr,r=Oo(),i=e(),s=!fa(r.memoizedState,i);if(s&&(r.memoizedState=i,ys=!0),r=r.queue,_R(KO.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||ai!==null&&ai.memoizedState.tag&1){if(t.flags|=2048,Zg(9,JO.bind(null,t,r,i,e),void 0,null),ci===null)throw Error(Je(349));Lf&30||YO(t,e,i)}return i}function YO(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=vr.updateQueue,e===null?(e={lastEffect:null,stores:null},vr.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function JO(n,e,t,r){e.value=t,e.getSnapshot=r,$O(e)&&qO(n)}function KO(n,e,t){return t(function(){$O(e)&&qO(n)})}function $O(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!fa(n,t)}catch{return!0}}function qO(n){var e=Fl(n,1);e!==null&&la(e,n,1,-1)}function mB(n){var e=ba();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qg,lastRenderedState:n},e.queue=n,n=n.dispatch=vW.bind(null,vr,n),[e.memoizedState,n]}function Zg(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=vr.updateQueue,e===null?(e={lastEffect:null,stores:null},vr.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function QO(){return Oo().memoizedState}function ux(n,e,t,r){var i=ba();vr.flags|=n,i.memoizedState=Zg(1|e,t,void 0,r===void 0?null:r)}function T1(n,e,t,r){var i=Oo();r=r===void 0?null:r;var s=void 0;if(jr!==null){var o=jr.memoizedState;if(s=o.destroy,r!==null&&pR(r,o.deps)){i.memoizedState=Zg(e,t,s,r);return}}vr.flags|=n,i.memoizedState=Zg(1|e,t,s,r)}function gB(n,e){return ux(8390656,8,n,e)}function _R(n,e){return T1(2048,8,n,e)}function ZO(n,e){return T1(4,2,n,e)}function eU(n,e){return T1(4,4,n,e)}function tU(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function nU(n,e,t){return t=t!=null?t.concat([n]):null,T1(4,4,tU.bind(null,e,n),t)}function vR(){}function rU(n,e){var t=Oo();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&pR(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function iU(n,e){var t=Oo();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&pR(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function sU(n,e,t){return Lf&21?(fa(t,e)||(t=uO(),vr.lanes|=t,Nf|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,ys=!0),n.memoizedState=t)}function gW(n,e){var t=Nn;Nn=t!==0&&4>t?t:4,n(!0);var r=gw.transition;gw.transition={};try{n(!1),e()}finally{Nn=t,gw.transition=r}}function oU(){return Oo().memoizedState}function _W(n,e,t){var r=Hc(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},aU(n))lU(e,t);else if(t=GO(n,e,t,r),t!==null){var i=os();la(t,n,r,i),cU(t,e,r)}}function vW(n,e,t){var r=Hc(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(aU(n))lU(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,fa(a,o)){var l=e.interleaved;l===null?(i.next=i,cR(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=GO(n,e,i,r),t!==null&&(i=os(),la(t,n,r,i),cU(t,e,r))}}function aU(n){var e=n.alternate;return n===vr||e!==null&&e===vr}function lU(n,e){ag=nS=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function cU(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,Kb(n,t)}}var rS={readContext:Fo,useCallback:bi,useContext:bi,useEffect:bi,useImperativeHandle:bi,useInsertionEffect:bi,useLayoutEffect:bi,useMemo:bi,useReducer:bi,useRef:bi,useState:bi,useDebugValue:bi,useDeferredValue:bi,useTransition:bi,useMutableSource:bi,useSyncExternalStore:bi,useId:bi,unstable_isNewReconciler:!1},yW={readContext:Fo,useCallback:function(n,e){return ba().memoizedState=[n,e===void 0?null:e],n},useContext:Fo,useEffect:gB,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,ux(4194308,4,tU.bind(null,e,n),t)},useLayoutEffect:function(n,e){return ux(4194308,4,n,e)},useInsertionEffect:function(n,e){return ux(4,2,n,e)},useMemo:function(n,e){var t=ba();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=ba();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=_W.bind(null,vr,n),[r.memoizedState,n]},useRef:function(n){var e=ba();return n={current:n},e.memoizedState=n},useState:mB,useDebugValue:vR,useDeferredValue:function(n){return ba().memoizedState=n},useTransition:function(){var n=mB(!1),e=n[0];return n=gW.bind(null,n[1]),ba().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=vr,i=ba();if(ir){if(t===void 0)throw Error(Je(407));t=t()}else{if(t=e(),ci===null)throw Error(Je(349));Lf&30||YO(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,gB(KO.bind(null,r,s,n),[n]),r.flags|=2048,Zg(9,JO.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=ba(),e=ci.identifierPrefix;if(ir){var t=Cl,r=Tl;t=(r&~(1<<32-aa(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=qg++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=mW++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},xW={readContext:Fo,useCallback:rU,useContext:Fo,useEffect:_R,useImperativeHandle:nU,useInsertionEffect:ZO,useLayoutEffect:eU,useMemo:iU,useReducer:_w,useRef:QO,useState:function(){return _w(Qg)},useDebugValue:vR,useDeferredValue:function(n){var e=Oo();return sU(e,jr.memoizedState,n)},useTransition:function(){var n=_w(Qg)[0],e=Oo().memoizedState;return[n,e]},useMutableSource:XO,useSyncExternalStore:jO,useId:oU,unstable_isNewReconciler:!1},SW={readContext:Fo,useCallback:rU,useContext:Fo,useEffect:_R,useImperativeHandle:nU,useInsertionEffect:ZO,useLayoutEffect:eU,useMemo:iU,useReducer:vw,useRef:QO,useState:function(){return vw(Qg)},useDebugValue:vR,useDeferredValue:function(n){var e=Oo();return jr===null?e.memoizedState=n:sU(e,jr.memoizedState,n)},useTransition:function(){var n=vw(Qg)[0],e=Oo().memoizedState;return[n,e]},useMutableSource:XO,useSyncExternalStore:jO,useId:oU,unstable_isNewReconciler:!1};function Zo(n,e){if(n&&n.defaultProps){e=yr({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function HT(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:yr({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var C1={isMounted:function(n){return(n=n._reactInternals)?Zf(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=os(),i=Hc(n),s=Il(r,i);s.payload=e,t!=null&&(s.callback=t),e=Oc(n,s,i),e!==null&&(la(e,n,i,r),lx(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=os(),i=Hc(n),s=Il(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Oc(n,s,i),e!==null&&(la(e,n,i,r),lx(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=os(),r=Hc(n),i=Il(t,r);i.tag=2,e!=null&&(i.callback=e),e=Oc(n,i,r),e!==null&&(la(e,n,r,t),lx(e,n,r))}};function _B(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Xg(t,r)||!Xg(i,s):!0}function uU(n,e,t){var r=!1,i=$c,s=e.contextType;return typeof s=="object"&&s!==null?s=Fo(s):(i=As(e)?Df:Hi.current,r=e.contextTypes,s=(r=r!=null)?Jh(n,i):$c),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=C1,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function vB(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&C1.enqueueReplaceState(e,e.state,null)}function zT(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},uR(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Fo(s):(s=As(e)?Df:Hi.current,i.context=Jh(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(HT(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&C1.enqueueReplaceState(i,i.state,null),eS(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Qh(n,e){try{var t="",r=e;do t+=K9(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function yw(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function GT(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var EW=typeof WeakMap=="function"?WeakMap:Map;function fU(n,e,t){t=Il(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){sS||(sS=!0,QT=r),GT(n,e)},t}function dU(n,e,t){t=Il(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){GT(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){GT(n,e),typeof r!="function"&&(Uc===null?Uc=new Set([this]):Uc.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function yB(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new EW;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=kW.bind(null,n,e,t),e.then(n,n))}function xB(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function SB(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Il(-1,1),e.tag=2,Oc(t,e,1))),t.lanes|=1),n)}var AW=Yl.ReactCurrentOwner,ys=!1;function Qi(n,e,t,r){e.child=n===null?zO(e,null,t,r):$h(e,n.child,t,r)}function EB(n,e,t,r,i){t=t.render;var s=e.ref;return Rh(e,i),r=mR(n,e,t,r,s,i),t=gR(),n!==null&&!ys?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Ol(n,e,i)):(ir&&t&&rR(e),e.flags|=1,Qi(n,e,r,i),e.child)}function AB(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!TR(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,hU(n,e,s,r,i)):(n=px(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Xg,t(o,r)&&n.ref===e.ref)return Ol(n,e,i)}return e.flags|=1,n=zc(s,r),n.ref=e.ref,n.return=e,e.child=n}function hU(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(Xg(s,r)&&n.ref===e.ref)if(ys=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(ys=!0);else return e.lanes=n.lanes,Ol(n,e,i)}return VT(n,e,t,r,i)}function pU(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Jn(hh,Hs),Hs|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Jn(hh,Hs),Hs|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,Jn(hh,Hs),Hs|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,Jn(hh,Hs),Hs|=r;return Qi(n,e,i,t),e.child}function mU(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function VT(n,e,t,r,i){var s=As(t)?Df:Hi.current;return s=Jh(e,s),Rh(e,i),t=mR(n,e,t,r,s,i),r=gR(),n!==null&&!ys?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Ol(n,e,i)):(ir&&r&&rR(e),e.flags|=1,Qi(n,e,t,i),e.child)}function wB(n,e,t,r,i){if(As(t)){var s=!0;Kx(e)}else s=!1;if(Rh(e,i),e.stateNode===null)fx(n,e),uU(e,t,r),zT(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Fo(c):(c=As(t)?Df:Hi.current,c=Jh(e,c));var u=t.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&vB(e,o,r,c),gc=!1;var p=e.memoizedState;o.state=p,eS(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Es.current||gc?(typeof u=="function"&&(HT(e,t,u,r),l=e.memoizedState),(a=gc||_B(e,t,a,r,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,VO(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Zo(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Fo(l):(l=As(t)?Df:Hi.current,l=Jh(e,l));var m=t.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&vB(e,o,r,l),gc=!1,p=e.memoizedState,o.state=p,eS(e,r,o,i);var g=e.memoizedState;a!==f||p!==g||Es.current||gc?(typeof m=="function"&&(HT(e,t,m,r),g=e.memoizedState),(c=gc||_B(e,t,c,r,p,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),r=!1)}return WT(n,e,t,r,s,i)}function WT(n,e,t,r,i,s){mU(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&cB(e,t,!1),Ol(n,e,s);r=e.stateNode,AW.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=$h(e,n.child,null,s),e.child=$h(e,null,a,s)):Qi(n,e,a,s),e.memoizedState=r.state,i&&cB(e,t,!0),e.child}function gU(n){var e=n.stateNode;e.pendingContext?lB(n,e.pendingContext,e.pendingContext!==e.context):e.context&&lB(n,e.context,!1),fR(n,e.containerInfo)}function MB(n,e,t,r,i){return Kh(),sR(i),e.flags|=256,Qi(n,e,t,r),e.child}var XT={dehydrated:null,treeContext:null,retryLane:0};function jT(n){return{baseLanes:n,cachePool:null,transitions:null}}function _U(n,e,t){var r=e.pendingProps,i=pr.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Jn(pr,i&1),n===null)return OT(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=I1(o,r,0,null),n=gf(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=jT(t),e.memoizedState=XT,n):yR(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return wW(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=zc(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=zc(a,s):(s=gf(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?jT(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=XT,r}return s=n.child,n=s.sibling,r=zc(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function yR(n,e){return e=I1({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Mv(n,e,t,r){return r!==null&&sR(r),$h(e,n.child,null,t),n=yR(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function wW(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=yw(Error(Je(422))),Mv(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=I1({mode:"visible",children:r.children},i,0,null),s=gf(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&$h(e,n.child,null,o),e.child.memoizedState=jT(o),e.memoizedState=XT,s);if(!(e.mode&1))return Mv(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Je(419)),r=yw(s,r,void 0),Mv(n,e,o,r)}if(a=(o&n.childLanes)!==0,ys||a){if(r=ci,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Fl(n,i),la(r,n,i,-1))}return MR(),r=yw(Error(Je(421))),Mv(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=FW.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,$s=Fc(i.nextSibling),Zs=e,ir=!0,na=null,n!==null&&(wo[Mo++]=Tl,wo[Mo++]=Cl,wo[Mo++]=Bf,Tl=n.id,Cl=n.overflow,Bf=e),e=yR(e,r.children),e.flags|=4096,e)}function TB(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),UT(n.return,e,t)}function xw(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function vU(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Qi(n,e,r.children,t),r=pr.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&TB(n,t,e);else if(n.tag===19)TB(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Jn(pr,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&tS(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),xw(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&tS(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}xw(e,!0,t,null,s);break;case"together":xw(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function fx(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Ol(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Nf|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Je(153));if(e.child!==null){for(n=e.child,t=zc(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=zc(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function MW(n,e,t){switch(e.tag){case 3:gU(e),Kh();break;case 5:WO(e);break;case 1:As(e.type)&&Kx(e);break;case 4:fR(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Jn(Qx,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Jn(pr,pr.current&1),e.flags|=128,null):t&e.child.childLanes?_U(n,e,t):(Jn(pr,pr.current&1),n=Ol(n,e,t),n!==null?n.sibling:null);Jn(pr,pr.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return vU(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Jn(pr,pr.current),r)break;return null;case 22:case 23:return e.lanes=0,pU(n,e,t)}return Ol(n,e,t)}var yU,YT,xU,SU;yU=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};YT=function(){};xU=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,tf(Va.current);var s=null;switch(t){case"input":i=mT(n,i),r=mT(n,r),s=[];break;case"select":i=yr({},i,{value:void 0}),r=yr({},r,{value:void 0}),s=[];break;case"textarea":i=vT(n,i),r=vT(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Yx)}xT(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Og.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Og.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Kn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};SU=function(n,e,t,r){t!==r&&(e.flags|=4)};function mm(n,e){if(!ir)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Ri(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function TW(n,e,t){var r=e.pendingProps;switch(iR(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ri(e),null;case 1:return As(e.type)&&Jx(),Ri(e),null;case 3:return r=e.stateNode,qh(),Zn(Es),Zn(Hi),hR(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Av(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,na!==null&&(tC(na),na=null))),YT(n,e),Ri(e),null;case 5:dR(e);var i=tf($g.current);if(t=e.type,n!==null&&e.stateNode!=null)xU(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Je(166));return Ri(e),null}if(n=tf(Va.current),Av(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[Ba]=e,r[Jg]=s,n=(e.mode&1)!==0,t){case"dialog":Kn("cancel",r),Kn("close",r);break;case"iframe":case"object":case"embed":Kn("load",r);break;case"video":case"audio":for(i=0;i<Wm.length;i++)Kn(Wm[i],r);break;case"source":Kn("error",r);break;case"img":case"image":case"link":Kn("error",r),Kn("load",r);break;case"details":Kn("toggle",r);break;case"input":ND(r,s),Kn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Kn("invalid",r);break;case"textarea":FD(r,s),Kn("invalid",r)}xT(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ev(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ev(r.textContent,a,n),i=["children",""+a]):Og.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Kn("scroll",r)}switch(t){case"input":pv(r),kD(r,s,!0);break;case"textarea":pv(r),OD(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Yx)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=KF(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Ba]=e,n[Jg]=r,yU(n,e,!1,!1),e.stateNode=n;e:{switch(o=ST(t,r),t){case"dialog":Kn("cancel",n),Kn("close",n),i=r;break;case"iframe":case"object":case"embed":Kn("load",n),i=r;break;case"video":case"audio":for(i=0;i<Wm.length;i++)Kn(Wm[i],n);i=r;break;case"source":Kn("error",n),i=r;break;case"img":case"image":case"link":Kn("error",n),Kn("load",n),i=r;break;case"details":Kn("toggle",n),i=r;break;case"input":ND(n,r),i=mT(n,r),Kn("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=yr({},r,{value:void 0}),Kn("invalid",n);break;case"textarea":FD(n,r),i=vT(n,r),Kn("invalid",n);break;default:i=r}xT(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?QF(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&$F(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Ug(n,l):typeof l=="number"&&Ug(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Og.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Kn("scroll",n):l!=null&&Vb(n,s,l,o))}switch(t){case"input":pv(n),kD(n,r,!1);break;case"textarea":pv(n),OD(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Kc(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Mh(n,!!r.multiple,s,!1):r.defaultValue!=null&&Mh(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Yx)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ri(e),null;case 6:if(n&&e.stateNode!=null)SU(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Je(166));if(t=tf($g.current),tf(Va.current),Av(e)){if(r=e.stateNode,t=e.memoizedProps,r[Ba]=e,(s=r.nodeValue!==t)&&(n=Zs,n!==null))switch(n.tag){case 3:Ev(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Ev(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Ba]=e,e.stateNode=r}return Ri(e),null;case 13:if(Zn(pr),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ir&&$s!==null&&e.mode&1&&!(e.flags&128))UO(),Kh(),e.flags|=98560,s=!1;else if(s=Av(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(Je(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Je(317));s[Ba]=e}else Kh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ri(e),s=!1}else na!==null&&(tC(na),na=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||pr.current&1?Kr===0&&(Kr=3):MR())),e.updateQueue!==null&&(e.flags|=4),Ri(e),null);case 4:return qh(),YT(n,e),n===null&&jg(e.stateNode.containerInfo),Ri(e),null;case 10:return lR(e.type._context),Ri(e),null;case 17:return As(e.type)&&Jx(),Ri(e),null;case 19:if(Zn(pr),s=e.memoizedState,s===null)return Ri(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)mm(s,!1);else{if(Kr!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=tS(n),o!==null){for(e.flags|=128,mm(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Jn(pr,pr.current&1|2),e.child}n=n.sibling}s.tail!==null&&Pr()>Zh&&(e.flags|=128,r=!0,mm(s,!1),e.lanes=4194304)}else{if(!r)if(n=tS(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),mm(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ir)return Ri(e),null}else 2*Pr()-s.renderingStartTime>Zh&&t!==1073741824&&(e.flags|=128,r=!0,mm(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Pr(),e.sibling=null,t=pr.current,Jn(pr,r?t&1|2:t&1),e):(Ri(e),null);case 22:case 23:return wR(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Hs&1073741824&&(Ri(e),e.subtreeFlags&6&&(e.flags|=8192)):Ri(e),null;case 24:return null;case 25:return null}throw Error(Je(156,e.tag))}function CW(n,e){switch(iR(e),e.tag){case 1:return As(e.type)&&Jx(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return qh(),Zn(Es),Zn(Hi),hR(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return dR(e),null;case 13:if(Zn(pr),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Je(340));Kh()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Zn(pr),null;case 4:return qh(),null;case 10:return lR(e.type._context),null;case 22:case 23:return wR(),null;case 24:return null;default:return null}}var Tv=!1,Ni=!1,bW=typeof WeakSet=="function"?WeakSet:Set,pt=null;function dh(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Ar(n,e,r)}else t.current=null}function JT(n,e,t){try{t()}catch(r){Ar(n,e,r)}}var CB=!1;function RW(n,e){if(PT=Wx,n=TO(),nR(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,f=n,p=null;t:for(;;){for(var m;f!==t||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===n)break t;if(p===t&&++c===i&&(a=o),p===s&&++u===r&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(DT={focusedElem:n,selectionRange:t},Wx=!1,pt=e;pt!==null;)if(e=pt,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,pt=n;else for(;pt!==null;){e=pt;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,y=g.memoizedState,_=e.stateNode,S=_.getSnapshotBeforeUpdate(e.elementType===e.type?v:Zo(e.type,v),y);_.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Je(163))}}catch(w){Ar(e,e.return,w)}if(n=e.sibling,n!==null){n.return=e.return,pt=n;break}pt=e.return}return g=CB,CB=!1,g}function lg(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&JT(e,t,s)}i=i.next}while(i!==r)}}function b1(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function KT(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function EU(n){var e=n.alternate;e!==null&&(n.alternate=null,EU(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Ba],delete e[Jg],delete e[NT],delete e[fW],delete e[dW])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function AU(n){return n.tag===5||n.tag===3||n.tag===4}function bB(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||AU(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function $T(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Yx));else if(r!==4&&(n=n.child,n!==null))for($T(n,e,t),n=n.sibling;n!==null;)$T(n,e,t),n=n.sibling}function qT(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(qT(n,e,t),n=n.sibling;n!==null;)qT(n,e,t),n=n.sibling}var pi=null,ta=!1;function nc(n,e,t){for(t=t.child;t!==null;)wU(n,e,t),t=t.sibling}function wU(n,e,t){if(Ga&&typeof Ga.onCommitFiberUnmount=="function")try{Ga.onCommitFiberUnmount(x1,t)}catch{}switch(t.tag){case 5:Ni||dh(t,e);case 6:var r=pi,i=ta;pi=null,nc(n,e,t),pi=r,ta=i,pi!==null&&(ta?(n=pi,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):pi.removeChild(t.stateNode));break;case 18:pi!==null&&(ta?(n=pi,t=t.stateNode,n.nodeType===8?hw(n.parentNode,t):n.nodeType===1&&hw(n,t),Vg(n)):hw(pi,t.stateNode));break;case 4:r=pi,i=ta,pi=t.stateNode.containerInfo,ta=!0,nc(n,e,t),pi=r,ta=i;break;case 0:case 11:case 14:case 15:if(!Ni&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&JT(t,e,o),i=i.next}while(i!==r)}nc(n,e,t);break;case 1:if(!Ni&&(dh(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Ar(t,e,a)}nc(n,e,t);break;case 21:nc(n,e,t);break;case 22:t.mode&1?(Ni=(r=Ni)||t.memoizedState!==null,nc(n,e,t),Ni=r):nc(n,e,t);break;default:nc(n,e,t)}}function RB(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new bW),e.forEach(function(r){var i=OW.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function jo(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:pi=a.stateNode,ta=!1;break e;case 3:pi=a.stateNode.containerInfo,ta=!0;break e;case 4:pi=a.stateNode.containerInfo,ta=!0;break e}a=a.return}if(pi===null)throw Error(Je(160));wU(s,o,i),pi=null,ta=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ar(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)MU(e,n),e=e.sibling}function MU(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(jo(e,n),Ta(n),r&4){try{lg(3,n,n.return),b1(3,n)}catch(v){Ar(n,n.return,v)}try{lg(5,n,n.return)}catch(v){Ar(n,n.return,v)}}break;case 1:jo(e,n),Ta(n),r&512&&t!==null&&dh(t,t.return);break;case 5:if(jo(e,n),Ta(n),r&512&&t!==null&&dh(t,t.return),n.flags&32){var i=n.stateNode;try{Ug(i,"")}catch(v){Ar(n,n.return,v)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&YF(i,s),ST(a,o);var c=ST(a,s);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?QF(i,f):u==="dangerouslySetInnerHTML"?$F(i,f):u==="children"?Ug(i,f):Vb(i,u,f,c)}switch(a){case"input":gT(i,s);break;case"textarea":JF(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Mh(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Mh(i,!!s.multiple,s.defaultValue,!0):Mh(i,!!s.multiple,s.multiple?[]:"",!1))}i[Jg]=s}catch(v){Ar(n,n.return,v)}}break;case 6:if(jo(e,n),Ta(n),r&4){if(n.stateNode===null)throw Error(Je(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(v){Ar(n,n.return,v)}}break;case 3:if(jo(e,n),Ta(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Vg(e.containerInfo)}catch(v){Ar(n,n.return,v)}break;case 4:jo(e,n),Ta(n);break;case 13:jo(e,n),Ta(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(ER=Pr())),r&4&&RB(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(Ni=(c=Ni)||u,jo(e,n),Ni=c):jo(e,n),Ta(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(pt=n,u=n.child;u!==null;){for(f=pt=u;pt!==null;){switch(p=pt,m=p.child,p.tag){case 0:case 11:case 14:case 15:lg(4,p,p.return);break;case 1:dh(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){r=p,t=p.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){Ar(r,t,v)}}break;case 5:dh(p,p.return);break;case 22:if(p.memoizedState!==null){PB(f);continue}}m!==null?(m.return=p,pt=m):PB(f)}u=u.sibling}e:for(u=null,f=n;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=qF("display",o))}catch(v){Ar(n,n.return,v)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(v){Ar(n,n.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:jo(e,n),Ta(n),r&4&&RB(n);break;case 21:break;default:jo(e,n),Ta(n)}}function Ta(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(AU(t)){var r=t;break e}t=t.return}throw Error(Je(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ug(i,""),r.flags&=-33);var s=bB(n);qT(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=bB(n);$T(n,a,o);break;default:throw Error(Je(161))}}catch(l){Ar(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function IW(n,e,t){pt=n,TU(n)}function TU(n,e,t){for(var r=(n.mode&1)!==0;pt!==null;){var i=pt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Tv;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ni;a=Tv;var c=Ni;if(Tv=o,(Ni=l)&&!c)for(pt=i;pt!==null;)o=pt,l=o.child,o.tag===22&&o.memoizedState!==null?DB(i):l!==null?(l.return=o,pt=l):DB(i);for(;s!==null;)pt=s,TU(s),s=s.sibling;pt=i,Tv=a,Ni=c}IB(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,pt=s):IB(n)}}function IB(n){for(;pt!==null;){var e=pt;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ni||b1(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ni)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Zo(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&pB(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}pB(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&Vg(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Je(163))}Ni||e.flags&512&&KT(e)}catch(p){Ar(e,e.return,p)}}if(e===n){pt=null;break}if(t=e.sibling,t!==null){t.return=e.return,pt=t;break}pt=e.return}}function PB(n){for(;pt!==null;){var e=pt;if(e===n){pt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,pt=t;break}pt=e.return}}function DB(n){for(;pt!==null;){var e=pt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{b1(4,e)}catch(l){Ar(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ar(e,i,l)}}var s=e.return;try{KT(e)}catch(l){Ar(e,s,l)}break;case 5:var o=e.return;try{KT(e)}catch(l){Ar(e,o,l)}}}catch(l){Ar(e,e.return,l)}if(e===n){pt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,pt=a;break}pt=e.return}}var PW=Math.ceil,iS=Yl.ReactCurrentDispatcher,xR=Yl.ReactCurrentOwner,Lo=Yl.ReactCurrentBatchConfig,wn=0,ci=null,zr=null,_i=0,Hs=0,hh=lu(0),Kr=0,e_=null,Nf=0,R1=0,SR=0,cg=null,_s=null,ER=0,Zh=1/0,pl=null,sS=!1,QT=null,Uc=null,Cv=!1,Tc=null,oS=0,ug=0,ZT=null,dx=-1,hx=0;function os(){return wn&6?Pr():dx!==-1?dx:dx=Pr()}function Hc(n){return n.mode&1?wn&2&&_i!==0?_i&-_i:pW.transition!==null?(hx===0&&(hx=uO()),hx):(n=Nn,n!==0||(n=window.event,n=n===void 0?16:_O(n.type)),n):1}function la(n,e,t,r){if(50<ug)throw ug=0,ZT=null,Error(Je(185));F_(n,t,r),(!(wn&2)||n!==ci)&&(n===ci&&(!(wn&2)&&(R1|=t),Kr===4&&Ac(n,_i)),ws(n,r),t===1&&wn===0&&!(e.mode&1)&&(Zh=Pr()+500,M1&&cu()))}function ws(n,e){var t=n.callbackNode;pV(n,e);var r=Vx(n,n===ci?_i:0);if(r===0)t!==null&&zD(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&zD(t),e===1)n.tag===0?hW(BB.bind(null,n)):kO(BB.bind(null,n)),cW(function(){!(wn&6)&&cu()}),t=null;else{switch(fO(r)){case 1:t=Jb;break;case 4:t=lO;break;case 16:t=Gx;break;case 536870912:t=cO;break;default:t=Gx}t=LU(t,CU.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function CU(n,e){if(dx=-1,hx=0,wn&6)throw Error(Je(327));var t=n.callbackNode;if(Ih()&&n.callbackNode!==t)return null;var r=Vx(n,n===ci?_i:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=aS(n,r);else{e=r;var i=wn;wn|=2;var s=RU();(ci!==n||_i!==e)&&(pl=null,Zh=Pr()+500,mf(n,e));do try{LW();break}catch(a){bU(n,a)}while(!0);aR(),iS.current=s,wn=i,zr!==null?e=0:(ci=null,_i=0,e=Kr)}if(e!==0){if(e===2&&(i=TT(n),i!==0&&(r=i,e=eC(n,i))),e===1)throw t=e_,mf(n,0),Ac(n,r),ws(n,Pr()),t;if(e===6)Ac(n,r);else{if(i=n.current.alternate,!(r&30)&&!DW(i)&&(e=aS(n,r),e===2&&(s=TT(n),s!==0&&(r=s,e=eC(n,s))),e===1))throw t=e_,mf(n,0),Ac(n,r),ws(n,Pr()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(Je(345));case 2:Vu(n,_s,pl);break;case 3:if(Ac(n,r),(r&130023424)===r&&(e=ER+500-Pr(),10<e)){if(Vx(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){os(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=LT(Vu.bind(null,n,_s,pl),e);break}Vu(n,_s,pl);break;case 4:if(Ac(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-aa(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Pr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*PW(r/1960))-r,10<r){n.timeoutHandle=LT(Vu.bind(null,n,_s,pl),r);break}Vu(n,_s,pl);break;case 5:Vu(n,_s,pl);break;default:throw Error(Je(329))}}}return ws(n,Pr()),n.callbackNode===t?CU.bind(null,n):null}function eC(n,e){var t=cg;return n.current.memoizedState.isDehydrated&&(mf(n,e).flags|=256),n=aS(n,e),n!==2&&(e=_s,_s=t,e!==null&&tC(e)),n}function tC(n){_s===null?_s=n:_s.push.apply(_s,n)}function DW(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!fa(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ac(n,e){for(e&=~SR,e&=~R1,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-aa(e),r=1<<t;n[t]=-1,e&=~r}}function BB(n){if(wn&6)throw Error(Je(327));Ih();var e=Vx(n,0);if(!(e&1))return ws(n,Pr()),null;var t=aS(n,e);if(n.tag!==0&&t===2){var r=TT(n);r!==0&&(e=r,t=eC(n,r))}if(t===1)throw t=e_,mf(n,0),Ac(n,e),ws(n,Pr()),t;if(t===6)throw Error(Je(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Vu(n,_s,pl),ws(n,Pr()),null}function AR(n,e){var t=wn;wn|=1;try{return n(e)}finally{wn=t,wn===0&&(Zh=Pr()+500,M1&&cu())}}function kf(n){Tc!==null&&Tc.tag===0&&!(wn&6)&&Ih();var e=wn;wn|=1;var t=Lo.transition,r=Nn;try{if(Lo.transition=null,Nn=1,n)return n()}finally{Nn=r,Lo.transition=t,wn=e,!(wn&6)&&cu()}}function wR(){Hs=hh.current,Zn(hh)}function mf(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,lW(t)),zr!==null)for(t=zr.return;t!==null;){var r=t;switch(iR(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Jx();break;case 3:qh(),Zn(Es),Zn(Hi),hR();break;case 5:dR(r);break;case 4:qh();break;case 13:Zn(pr);break;case 19:Zn(pr);break;case 10:lR(r.type._context);break;case 22:case 23:wR()}t=t.return}if(ci=n,zr=n=zc(n.current,null),_i=Hs=e,Kr=0,e_=null,SR=R1=Nf=0,_s=cg=null,ef!==null){for(e=0;e<ef.length;e++)if(t=ef[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}ef=null}return n}function bU(n,e){do{var t=zr;try{if(aR(),cx.current=rS,nS){for(var r=vr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}nS=!1}if(Lf=0,ai=jr=vr=null,ag=!1,qg=0,xR.current=null,t===null||t.return===null){Kr=1,e_=e,zr=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=_i,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=xB(o);if(m!==null){m.flags&=-257,SB(m,o,a,s,e),m.mode&1&&yB(s,c,e),e=m,l=c;var g=e.updateQueue;if(g===null){var v=new Set;v.add(l),e.updateQueue=v}else g.add(l);break e}else{if(!(e&1)){yB(s,c,e),MR();break e}l=Error(Je(426))}}else if(ir&&a.mode&1){var y=xB(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),SB(y,o,a,s,e),sR(Qh(l,a));break e}}s=l=Qh(l,a),Kr!==4&&(Kr=2),cg===null?cg=[s]:cg.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=fU(s,l,e);hB(s,_);break e;case 1:a=l;var S=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Uc===null||!Uc.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=dU(s,a,e);hB(s,w);break e}}s=s.return}while(s!==null)}PU(t)}catch(I){e=I,zr===t&&t!==null&&(zr=t=t.return);continue}break}while(!0)}function RU(){var n=iS.current;return iS.current=rS,n===null?rS:n}function MR(){(Kr===0||Kr===3||Kr===2)&&(Kr=4),ci===null||!(Nf&268435455)&&!(R1&268435455)||Ac(ci,_i)}function aS(n,e){var t=wn;wn|=2;var r=RU();(ci!==n||_i!==e)&&(pl=null,mf(n,e));do try{BW();break}catch(i){bU(n,i)}while(!0);if(aR(),wn=t,iS.current=r,zr!==null)throw Error(Je(261));return ci=null,_i=0,Kr}function BW(){for(;zr!==null;)IU(zr)}function LW(){for(;zr!==null&&!sV();)IU(zr)}function IU(n){var e=BU(n.alternate,n,Hs);n.memoizedProps=n.pendingProps,e===null?PU(n):zr=e,xR.current=null}function PU(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=CW(t,e),t!==null){t.flags&=32767,zr=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Kr=6,zr=null;return}}else if(t=TW(t,e,Hs),t!==null){zr=t;return}if(e=e.sibling,e!==null){zr=e;return}zr=e=n}while(e!==null);Kr===0&&(Kr=5)}function Vu(n,e,t){var r=Nn,i=Lo.transition;try{Lo.transition=null,Nn=1,NW(n,e,t,r)}finally{Lo.transition=i,Nn=r}return null}function NW(n,e,t,r){do Ih();while(Tc!==null);if(wn&6)throw Error(Je(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Je(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(mV(n,s),n===ci&&(zr=ci=null,_i=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Cv||(Cv=!0,LU(Gx,function(){return Ih(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Lo.transition,Lo.transition=null;var o=Nn;Nn=1;var a=wn;wn|=4,xR.current=null,RW(n,t),MU(t,n),tW(DT),Wx=!!PT,DT=PT=null,n.current=t,IW(t),oV(),wn=a,Nn=o,Lo.transition=s}else n.current=t;if(Cv&&(Cv=!1,Tc=n,oS=i),s=n.pendingLanes,s===0&&(Uc=null),cV(t.stateNode),ws(n,Pr()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(sS)throw sS=!1,n=QT,QT=null,n;return oS&1&&n.tag!==0&&Ih(),s=n.pendingLanes,s&1?n===ZT?ug++:(ug=0,ZT=n):ug=0,cu(),null}function Ih(){if(Tc!==null){var n=fO(oS),e=Lo.transition,t=Nn;try{if(Lo.transition=null,Nn=16>n?16:n,Tc===null)var r=!1;else{if(n=Tc,Tc=null,oS=0,wn&6)throw Error(Je(331));var i=wn;for(wn|=4,pt=n.current;pt!==null;){var s=pt,o=s.child;if(pt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(pt=c;pt!==null;){var u=pt;switch(u.tag){case 0:case 11:case 15:lg(8,u,s)}var f=u.child;if(f!==null)f.return=u,pt=f;else for(;pt!==null;){u=pt;var p=u.sibling,m=u.return;if(EU(u),u===c){pt=null;break}if(p!==null){p.return=m,pt=p;break}pt=m}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(v!==null)}}pt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,pt=o;else e:for(;pt!==null;){if(s=pt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:lg(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,pt=_;break e}pt=s.return}}var S=n.current;for(pt=S;pt!==null;){o=pt;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,pt=E;else e:for(o=S;pt!==null;){if(a=pt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:b1(9,a)}}catch(I){Ar(a,a.return,I)}if(a===o){pt=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,pt=w;break e}pt=a.return}}if(wn=i,cu(),Ga&&typeof Ga.onPostCommitFiberRoot=="function")try{Ga.onPostCommitFiberRoot(x1,n)}catch{}r=!0}return r}finally{Nn=t,Lo.transition=e}}return!1}function LB(n,e,t){e=Qh(t,e),e=fU(n,e,1),n=Oc(n,e,1),e=os(),n!==null&&(F_(n,1,e),ws(n,e))}function Ar(n,e,t){if(n.tag===3)LB(n,n,t);else for(;e!==null;){if(e.tag===3){LB(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Uc===null||!Uc.has(r))){n=Qh(t,n),n=dU(e,n,1),e=Oc(e,n,1),n=os(),e!==null&&(F_(e,1,n),ws(e,n));break}}e=e.return}}function kW(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=os(),n.pingedLanes|=n.suspendedLanes&t,ci===n&&(_i&t)===t&&(Kr===4||Kr===3&&(_i&130023424)===_i&&500>Pr()-ER?mf(n,0):SR|=t),ws(n,e)}function DU(n,e){e===0&&(n.mode&1?(e=_v,_v<<=1,!(_v&130023424)&&(_v=4194304)):e=1);var t=os();n=Fl(n,e),n!==null&&(F_(n,e,t),ws(n,t))}function FW(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),DU(n,t)}function OW(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Je(314))}r!==null&&r.delete(e),DU(n,t)}var BU;BU=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Es.current)ys=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return ys=!1,MW(n,e,t);ys=!!(n.flags&131072)}else ys=!1,ir&&e.flags&1048576&&FO(e,qx,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;fx(n,e),n=e.pendingProps;var i=Jh(e,Hi.current);Rh(e,t),i=mR(null,e,r,n,i,t);var s=gR();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,As(r)?(s=!0,Kx(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,uR(e),i.updater=C1,e.stateNode=i,i._reactInternals=e,zT(e,r,n,t),e=WT(null,e,r,!0,s,t)):(e.tag=0,ir&&s&&rR(e),Qi(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(fx(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=HW(r),n=Zo(r,n),i){case 0:e=VT(null,e,r,n,t);break e;case 1:e=wB(null,e,r,n,t);break e;case 11:e=EB(null,e,r,n,t);break e;case 14:e=AB(null,e,r,Zo(r.type,n),t);break e}throw Error(Je(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zo(r,i),VT(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zo(r,i),wB(n,e,r,i,t);case 3:e:{if(gU(e),n===null)throw Error(Je(387));r=e.pendingProps,s=e.memoizedState,i=s.element,VO(n,e),eS(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Qh(Error(Je(423)),e),e=MB(n,e,r,t,i);break e}else if(r!==i){i=Qh(Error(Je(424)),e),e=MB(n,e,r,t,i);break e}else for($s=Fc(e.stateNode.containerInfo.firstChild),Zs=e,ir=!0,na=null,t=zO(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Kh(),r===i){e=Ol(n,e,t);break e}Qi(n,e,r,t)}e=e.child}return e;case 5:return WO(e),n===null&&OT(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,BT(r,i)?o=null:s!==null&&BT(r,s)&&(e.flags|=32),mU(n,e),Qi(n,e,o,t),e.child;case 6:return n===null&&OT(e),null;case 13:return _U(n,e,t);case 4:return fR(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=$h(e,null,r,t):Qi(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zo(r,i),EB(n,e,r,i,t);case 7:return Qi(n,e,e.pendingProps,t),e.child;case 8:return Qi(n,e,e.pendingProps.children,t),e.child;case 12:return Qi(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Jn(Qx,r._currentValue),r._currentValue=o,s!==null)if(fa(s.value,o)){if(s.children===i.children&&!Es.current){e=Ol(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Il(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),UT(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Je(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),UT(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Qi(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Rh(e,t),i=Fo(i),r=r(i),e.flags|=1,Qi(n,e,r,t),e.child;case 14:return r=e.type,i=Zo(r,e.pendingProps),i=Zo(r.type,i),AB(n,e,r,i,t);case 15:return hU(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zo(r,i),fx(n,e),e.tag=1,As(r)?(n=!0,Kx(e)):n=!1,Rh(e,t),uU(e,r,i),zT(e,r,i,t),WT(null,e,r,!0,n,t);case 19:return vU(n,e,t);case 22:return pU(n,e,t)}throw Error(Je(156,e.tag))};function LU(n,e){return aO(n,e)}function UW(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Io(n,e,t,r){return new UW(n,e,t,r)}function TR(n){return n=n.prototype,!(!n||!n.isReactComponent)}function HW(n){if(typeof n=="function")return TR(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Xb)return 11;if(n===jb)return 14}return 2}function zc(n,e){var t=n.alternate;return t===null?(t=Io(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function px(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")TR(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case rh:return gf(t.children,i,s,e);case Wb:o=8,i|=8;break;case fT:return n=Io(12,t,e,i|2),n.elementType=fT,n.lanes=s,n;case dT:return n=Io(13,t,e,i),n.elementType=dT,n.lanes=s,n;case hT:return n=Io(19,t,e,i),n.elementType=hT,n.lanes=s,n;case WF:return I1(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case GF:o=10;break e;case VF:o=9;break e;case Xb:o=11;break e;case jb:o=14;break e;case mc:o=16,r=null;break e}throw Error(Je(130,n==null?n:typeof n,""))}return e=Io(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function gf(n,e,t,r){return n=Io(7,n,r,e),n.lanes=t,n}function I1(n,e,t,r){return n=Io(22,n,r,e),n.elementType=WF,n.lanes=t,n.stateNode={isHidden:!1},n}function Sw(n,e,t){return n=Io(6,n,null,e),n.lanes=t,n}function Ew(n,e,t){return e=Io(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function zW(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nw(0),this.expirationTimes=nw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nw(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function CR(n,e,t,r,i,s,o,a,l){return n=new zW(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Io(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},uR(s),n}function GW(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:nh,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function NU(n){if(!n)return $c;n=n._reactInternals;e:{if(Zf(n)!==n||n.tag!==1)throw Error(Je(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(As(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Je(171))}if(n.tag===1){var t=n.type;if(As(t))return NO(n,t,e)}return e}function kU(n,e,t,r,i,s,o,a,l){return n=CR(t,r,!0,n,i,s,o,a,l),n.context=NU(null),t=n.current,r=os(),i=Hc(t),s=Il(r,i),s.callback=e??null,Oc(t,s,i),n.current.lanes=i,F_(n,i,r),ws(n,r),n}function P1(n,e,t,r){var i=e.current,s=os(),o=Hc(i);return t=NU(t),e.context===null?e.context=t:e.pendingContext=t,e=Il(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Oc(i,e,o),n!==null&&(la(n,i,o,s),lx(n,i,o)),o}function lS(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function NB(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function bR(n,e){NB(n,e),(n=n.alternate)&&NB(n,e)}function VW(){return null}var FU=typeof reportError=="function"?reportError:function(n){console.error(n)};function RR(n){this._internalRoot=n}D1.prototype.render=RR.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Je(409));P1(n,e,null,null)};D1.prototype.unmount=RR.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;kf(function(){P1(null,n,null,null)}),e[kl]=null}};function D1(n){this._internalRoot=n}D1.prototype.unstable_scheduleHydration=function(n){if(n){var e=pO();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Ec.length&&e!==0&&e<Ec[t].priority;t++);Ec.splice(t,0,n),t===0&&gO(n)}};function IR(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function B1(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function kB(){}function WW(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=lS(o);s.call(c)}}var o=kU(e,r,n,0,null,!1,!1,"",kB);return n._reactRootContainer=o,n[kl]=o.current,jg(n.nodeType===8?n.parentNode:n),kf(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=lS(l);a.call(c)}}var l=CR(n,0,!1,null,null,!1,!1,"",kB);return n._reactRootContainer=l,n[kl]=l.current,jg(n.nodeType===8?n.parentNode:n),kf(function(){P1(e,l,t,r)}),l}function L1(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=lS(o);a.call(l)}}P1(e,o,n,i)}else o=WW(t,e,n,i,r);return lS(o)}dO=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Vm(e.pendingLanes);t!==0&&(Kb(e,t|1),ws(e,Pr()),!(wn&6)&&(Zh=Pr()+500,cu()))}break;case 13:kf(function(){var r=Fl(n,1);if(r!==null){var i=os();la(r,n,1,i)}}),bR(n,1)}};$b=function(n){if(n.tag===13){var e=Fl(n,134217728);if(e!==null){var t=os();la(e,n,134217728,t)}bR(n,134217728)}};hO=function(n){if(n.tag===13){var e=Hc(n),t=Fl(n,e);if(t!==null){var r=os();la(t,n,e,r)}bR(n,e)}};pO=function(){return Nn};mO=function(n,e){var t=Nn;try{return Nn=n,e()}finally{Nn=t}};AT=function(n,e,t){switch(e){case"input":if(gT(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=w1(r);if(!i)throw Error(Je(90));jF(r),gT(r,i)}}}break;case"textarea":JF(n,t);break;case"select":e=t.value,e!=null&&Mh(n,!!t.multiple,e,!1)}};tO=AR;nO=kf;var XW={usingClientEntryPoint:!1,Events:[U_,ah,w1,ZF,eO,AR]},gm={findFiberByHostInstance:Zu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jW={bundleType:gm.bundleType,version:gm.version,rendererPackageName:gm.rendererPackageName,rendererConfig:gm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yl.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=sO(n),n===null?null:n.stateNode},findFiberByHostInstance:gm.findFiberByHostInstance||VW,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bv.isDisabled&&bv.supportsFiber)try{x1=bv.inject(jW),Ga=bv}catch{}}oo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XW;oo.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!IR(e))throw Error(Je(200));return GW(n,e,null,t)};oo.createRoot=function(n,e){if(!IR(n))throw Error(Je(299));var t=!1,r="",i=FU;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=CR(n,1,!1,null,null,t,!1,r,i),n[kl]=e.current,jg(n.nodeType===8?n.parentNode:n),new RR(e)};oo.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Je(188)):(n=Object.keys(n).join(","),Error(Je(268,n)));return n=sO(e),n=n===null?null:n.stateNode,n};oo.flushSync=function(n){return kf(n)};oo.hydrate=function(n,e,t){if(!B1(e))throw Error(Je(200));return L1(null,n,e,!0,t)};oo.hydrateRoot=function(n,e,t){if(!IR(n))throw Error(Je(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=FU;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=kU(e,null,n,1,t??null,i,!1,s,o),n[kl]=e.current,jg(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new D1(e)};oo.render=function(n,e,t){if(!B1(e))throw Error(Je(200));return L1(null,n,e,!1,t)};oo.unmountComponentAtNode=function(n){if(!B1(n))throw Error(Je(40));return n._reactRootContainer?(kf(function(){L1(null,null,n,!1,function(){n._reactRootContainer=null,n[kl]=null})}),!0):!1};oo.unstable_batchedUpdates=AR;oo.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!B1(t))throw Error(Je(200));if(n==null||n._reactInternals===void 0)throw Error(Je(38));return L1(n,e,t,!1,r)};oo.version="18.3.1-next-f1338f8080-20240426";function OU(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(OU)}catch(n){console.error(n)}}OU(),OF.exports=oo;var YW=OF.exports,PR,FB=YW;PR=FB.createRoot,FB.hydrateRoot;const UU=Object.prototype.toString;function DR(n){switch(UU.call(n)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Ul(n,Error)}}function Pp(n,e){return UU.call(n)===`[object ${e}]`}function HU(n){return Pp(n,"ErrorEvent")}function OB(n){return Pp(n,"DOMError")}function JW(n){return Pp(n,"DOMException")}function Pl(n){return Pp(n,"String")}function BR(n){return typeof n=="object"&&n!==null&&"__sentry_template_string__"in n&&"__sentry_template_values__"in n}function LR(n){return n===null||BR(n)||typeof n!="object"&&typeof n!="function"}function ep(n){return Pp(n,"Object")}function N1(n){return typeof Event<"u"&&Ul(n,Event)}function KW(n){return typeof Element<"u"&&Ul(n,Element)}function $W(n){return Pp(n,"RegExp")}function k1(n){return!!(n&&n.then&&typeof n.then=="function")}function qW(n){return ep(n)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n}function Ul(n,e){try{return n instanceof e}catch{return!1}}function zU(n){return!!(typeof n=="object"&&n!==null&&(n.__isVue||n._isVue))}function Ph(n,e=0){return typeof n!="string"||e===0||n.length<=e?n:`${n.slice(0,e)}...`}function UB(n,e){if(!Array.isArray(n))return"";const t=[];for(let r=0;r<n.length;r++){const i=n[r];try{zU(i)?t.push("[VueViewModel]"):t.push(String(i))}catch{t.push("[value cannot be serialized]")}}return t.join(e)}function QW(n,e,t=!1){return Pl(n)?$W(e)?e.test(n):Pl(e)?t?n===e:n.includes(e):!1:!1}function Gc(n,e=[],t=!1){return e.some(r=>QW(n,r,t))}function ZW(n,e,t=250,r,i,s,o){if(!s.exception||!s.exception.values||!o||!Ul(o.originalException,Error))return;const a=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;a&&(s.exception.values=e7(nC(n,e,i,o.originalException,r,s.exception.values,a,0),t))}function nC(n,e,t,r,i,s,o,a){if(s.length>=t+1)return s;let l=[...s];if(Ul(r[i],Error)){HB(o,a);const c=n(e,r[i]),u=l.length;zB(c,i,u,a),l=nC(n,e,t,r[i],i,[c,...l],c,u)}return Array.isArray(r.errors)&&r.errors.forEach((c,u)=>{if(Ul(c,Error)){HB(o,a);const f=n(e,c),p=l.length;zB(f,`errors[${u}]`,p,a),l=nC(n,e,t,c,i,[f,...l],f,p)}}),l}function HB(n,e){n.mechanism=n.mechanism||{type:"generic",handled:!0},n.mechanism={...n.mechanism,...n.type==="AggregateError"&&{is_exception_group:!0},exception_id:e}}function zB(n,e,t,r){n.mechanism=n.mechanism||{type:"generic",handled:!0},n.mechanism={...n.mechanism,type:"chained",source:e,exception_id:t,parent_id:r}}function e7(n,e){return n.map(t=>(t.value&&(t.value=Ph(t.value,e)),t))}const Vc="8.30.0",pn=globalThis;function F1(n,e,t){const r=pn,i=r.__SENTRY__=r.__SENTRY__||{},s=i[Vc]=i[Vc]||{};return s[n]||(s[n]=e())}const Dh=pn,t7=80;function Hl(n,e={}){if(!n)return"<unknown>";try{let t=n;const r=5,i=[];let s=0,o=0;const a=" > ",l=a.length;let c;const u=Array.isArray(e)?e:e.keyAttrs,f=!Array.isArray(e)&&e.maxStringLength||t7;for(;t&&s++<r&&(c=n7(t,u),!(c==="html"||s>1&&o+i.length*l+c.length>=f));)i.push(c),o+=c.length,t=t.parentNode;return i.reverse().join(a)}catch{return"<unknown>"}}function n7(n,e){const t=n,r=[];if(!t||!t.tagName)return"";if(Dh.HTMLElement&&t instanceof HTMLElement&&t.dataset){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}r.push(t.tagName.toLowerCase());const i=e&&e.length?e.filter(o=>t.getAttribute(o)).map(o=>[o,t.getAttribute(o)]):null;if(i&&i.length)i.forEach(o=>{r.push(`[${o[0]}="${o[1]}"]`)});else{t.id&&r.push(`#${t.id}`);const o=t.className;if(o&&Pl(o)){const a=o.split(/\s+/);for(const l of a)r.push(`.${l}`)}}const s=["aria-label","type","name","title","alt"];for(const o of s){const a=t.getAttribute(o);a&&r.push(`[${o}="${a}"]`)}return r.join("")}function NR(){try{return Dh.document.location.href}catch{return""}}function r7(n){return Dh.document&&Dh.document.querySelector?Dh.document.querySelector(n):null}function GU(n){if(!Dh.HTMLElement)return null;let e=n;const t=5;for(let r=0;r<t;r++){if(!e)return null;if(e instanceof HTMLElement){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}e=e.parentNode}return null}const Dp=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,i7="Sentry Logger ",rC=["debug","info","warn","error","log","assert","trace"],cS={};function Bp(n){if(!("console"in pn))return n();const e=pn.console,t={},r=Object.keys(cS);r.forEach(i=>{const s=cS[i];t[i]=e[i],e[i]=s});try{return n()}finally{r.forEach(i=>{e[i]=t[i]})}}function s7(){let n=!1;const e={enable:()=>{n=!0},disable:()=>{n=!1},isEnabled:()=>n};return Dp?rC.forEach(t=>{e[t]=(...r)=>{n&&Bp(()=>{pn.console[t](`${i7}[${t}]:`,...r)})}}):rC.forEach(t=>{e[t]=()=>{}}),e}const qe=F1("logger",s7),o7=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function a7(n){return n==="http"||n==="https"}function z_(n,e=!1){const{host:t,path:r,pass:i,port:s,projectId:o,protocol:a,publicKey:l}=n;return`${a}://${l}${e&&i?`:${i}`:""}@${t}${s?`:${s}`:""}/${r&&`${r}/`}${o}`}function l7(n){const e=o7.exec(n);if(!e){Bp(()=>{console.error(`Invalid Sentry Dsn: ${n}`)});return}const[t,r,i="",s="",o="",a=""]=e.slice(1);let l="",c=a;const u=c.split("/");if(u.length>1&&(l=u.slice(0,-1).join("/"),c=u.pop()),c){const f=c.match(/^\d+/);f&&(c=f[0])}return VU({host:s,pass:i,path:l,projectId:c,port:o,protocol:t,publicKey:r})}function VU(n){return{protocol:n.protocol,publicKey:n.publicKey||"",pass:n.pass||"",host:n.host,port:n.port||"",path:n.path||"",projectId:n.projectId}}function c7(n){if(!Dp)return!0;const{port:e,projectId:t,protocol:r}=n;return["protocol","publicKey","host","projectId"].find(o=>n[o]?!1:(qe.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:t.match(/^\d+$/)?a7(r)?e&&isNaN(parseInt(e,10))?(qe.error(`Invalid Sentry Dsn: Invalid port ${e}`),!1):!0:(qe.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(qe.error(`Invalid Sentry Dsn: Invalid projectId ${t}`),!1)}function u7(n){const e=typeof n=="string"?l7(n):VU(n);if(!(!e||!c7(e)))return e}class La extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}function xs(n,e,t){if(!(e in n))return;const r=n[e],i=t(r);typeof i=="function"&&WU(i,r),n[e]=i}function Uo(n,e,t){try{Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0})}catch{Dp&&qe.log(`Failed to add non-enumerable property "${e}" to object`,n)}}function WU(n,e){try{const t=e.prototype||{};n.prototype=e.prototype=t,Uo(n,"__sentry_original__",e)}catch{}}function kR(n){return n.__sentry_original__}function f7(n){return Object.keys(n).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(n[e])}`).join("&")}function XU(n){if(DR(n))return{message:n.message,name:n.name,stack:n.stack,...VB(n)};if(N1(n)){const e={type:n.type,target:GB(n.target),currentTarget:GB(n.currentTarget),...VB(n)};return typeof CustomEvent<"u"&&Ul(n,CustomEvent)&&(e.detail=n.detail),e}else return n}function GB(n){try{return KW(n)?Hl(n):Object.prototype.toString.call(n)}catch{return"<unknown>"}}function VB(n){if(typeof n=="object"&&n!==null){const e={};for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e}else return{}}function d7(n,e=40){const t=Object.keys(XU(n));t.sort();const r=t[0];if(!r)return"[object has no keys]";if(r.length>=e)return Ph(r,e);for(let i=t.length;i>0;i--){const s=t.slice(0,i).join(", ");if(!(s.length>e))return i===t.length?s:Ph(s,e)}return""}function Gr(n){return iC(n,new Map)}function iC(n,e){if(h7(n)){const t=e.get(n);if(t!==void 0)return t;const r={};e.set(n,r);for(const i of Object.keys(n))typeof n[i]<"u"&&(r[i]=iC(n[i],e));return r}if(Array.isArray(n)){const t=e.get(n);if(t!==void 0)return t;const r=[];return e.set(n,r),n.forEach(i=>{r.push(iC(i,e))}),r}return n}function h7(n){if(!ep(n))return!1;try{const e=Object.getPrototypeOf(n).constructor.name;return!e||e==="Object"}catch{return!0}}const jU=50,Ff="?",WB=/\(error: (.*)\)/,XB=/captureMessage|captureException/;function YU(...n){const e=n.sort((t,r)=>t[0]-r[0]).map(t=>t[1]);return(t,r=0,i=0)=>{const s=[],o=t.split(`
`);for(let a=r;a<o.length;a++){const l=o[a];if(l.length>1024)continue;const c=WB.test(l)?l.replace(WB,"$1"):l;if(!c.match(/\S*Error: /)){for(const u of e){const f=u(c);if(f){s.push(f);break}}if(s.length>=jU+i)break}}return m7(s.slice(i))}}function p7(n){return Array.isArray(n)?YU(...n):n}function m7(n){if(!n.length)return[];const e=Array.from(n);return/sentryWrapped/.test(Rv(e).function||"")&&e.pop(),e.reverse(),XB.test(Rv(e).function||"")&&(e.pop(),XB.test(Rv(e).function||"")&&e.pop()),e.slice(0,jU).map(t=>({...t,filename:t.filename||Rv(e).filename,function:t.function||Ff}))}function Rv(n){return n[n.length-1]||{}}const Aw="<anonymous>";function zl(n){try{return!n||typeof n!="function"?Aw:n.name||Aw}catch{return Aw}}function jB(n){const e=n.exception;if(e){const t=[];try{return e.values.forEach(r=>{r.stacktrace.frames&&t.push(...r.stacktrace.frames)}),t}catch{return}}}const mx={},YB={};function uu(n,e){mx[n]=mx[n]||[],mx[n].push(e)}function fu(n,e){YB[n]||(e(),YB[n]=!0)}function No(n,e){const t=n&&mx[n];if(t)for(const r of t)try{r(e)}catch(i){Dp&&qe.error(`Error while triggering instrumentation handler.
Type: ${n}
Name: ${zl(r)}
Error:`,i)}}function g7(n){const e="console";uu(e,n),fu(e,_7)}function _7(){"console"in pn&&rC.forEach(function(n){n in pn.console&&xs(pn.console,n,function(e){return cS[n]=e,function(...t){No("console",{args:t,level:n});const i=cS[n];i&&i.apply(pn.console,t)}})})}const sC=pn;function JU(){if(!("fetch"in sC))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function oC(n){return n&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(n.toString())}function v7(){if(typeof EdgeRuntime=="string")return!0;if(!JU())return!1;if(oC(sC.fetch))return!0;let n=!1;const e=sC.document;if(e&&typeof e.createElement=="function")try{const t=e.createElement("iframe");t.hidden=!0,e.head.appendChild(t),t.contentWindow&&t.contentWindow.fetch&&(n=oC(t.contentWindow.fetch)),e.head.removeChild(t)}catch(t){Dp&&qe.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return n}const KU=1e3;function G_(){return Date.now()/KU}function y7(){const{performance:n}=pn;if(!n||!n.now)return G_;const e=Date.now()-n.now(),t=n.timeOrigin==null?e:n.timeOrigin;return()=>(t+n.now())/KU}const vi=y7(),ls=(()=>{const{performance:n}=pn;if(!n||!n.now)return;const e=3600*1e3,t=n.now(),r=Date.now(),i=n.timeOrigin?Math.abs(n.timeOrigin+t-r):e,s=i<e,o=n.timing&&n.timing.navigationStart,l=typeof o=="number"?Math.abs(o+t-r):e,c=l<e;return s||c?i<=l?n.timeOrigin:o:r})();function $U(n,e){const t="fetch";uu(t,n),fu(t,()=>qU(void 0,e))}function x7(n){const e="fetch-body-resolved";uu(e,n),fu(e,()=>qU(E7))}function qU(n,e=!1){e&&!v7()||xs(pn,"fetch",function(t){return function(...r){const{method:i,url:s}=A7(r),o={args:r,fetchData:{method:i,url:s},startTimestamp:vi()*1e3};n||No("fetch",{...o});const a=new Error().stack;return t.apply(pn,r).then(async l=>(n?n(l):No("fetch",{...o,endTimestamp:vi()*1e3,response:l}),l),l=>{throw No("fetch",{...o,endTimestamp:vi()*1e3,error:l}),DR(l)&&l.stack===void 0&&(l.stack=a,Uo(l,"framesToPop",1)),l})}})}async function S7(n,e){if(n&&n.body&&n.body.getReader){const t=n.body.getReader();async function r({done:i}){if(i)return Promise.resolve();try{const s=await Promise.race([t.read(),new Promise(o=>{setTimeout(()=>{o({done:!0})},5e3)})]);await r(s)}catch{}}return t.read().then(r).then(e).catch(()=>{})}}async function E7(n){let e;try{e=n.clone()}catch{return}await S7(e,()=>{No("fetch-body-resolved",{endTimestamp:vi()*1e3,response:n})})}function aC(n,e){return!!n&&typeof n=="object"&&!!n[e]}function JB(n){return typeof n=="string"?n:n?aC(n,"url")?n.url:n.toString?n.toString():"":""}function A7(n){if(n.length===0)return{method:"GET",url:""};if(n.length===2){const[t,r]=n;return{url:JB(t),method:aC(r,"method")?String(r.method).toUpperCase():"GET"}}const e=n[0];return{url:JB(e),method:aC(e,"method")?String(e.method).toUpperCase():"GET"}}let Iv=null;function QU(n){const e="error";uu(e,n),fu(e,w7)}function w7(){Iv=pn.onerror,pn.onerror=function(n,e,t,r,i){return No("error",{column:r,error:i,line:t,msg:n,url:e}),Iv&&!Iv.__SENTRY_LOADER__?Iv.apply(this,arguments):!1},pn.onerror.__SENTRY_INSTRUMENTED__=!0}let Pv=null;function ZU(n){const e="unhandledrejection";uu(e,n),fu(e,M7)}function M7(){Pv=pn.onunhandledrejection,pn.onunhandledrejection=function(n){return No("unhandledrejection",n),Pv&&!Pv.__SENTRY_LOADER__?Pv.apply(this,arguments):!0},pn.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function T7(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function C7(){return"npm"}function b7(){return!T7()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function lC(){return typeof window<"u"&&(!b7()||R7())}function R7(){return pn.process!==void 0&&pn.process.type==="renderer"}function I7(){const n=typeof WeakSet=="function",e=n?new WeakSet:[];function t(i){if(n)return e.has(i)?!0:(e.add(i),!1);for(let s=0;s<e.length;s++)if(e[s]===i)return!0;return e.push(i),!1}function r(i){if(n)e.delete(i);else for(let s=0;s<e.length;s++)if(e[s]===i){e.splice(s,1);break}}return[t,r]}function or(){const n=pn,e=n.crypto||n.msCrypto;let t=()=>Math.random()*16;try{if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e&&e.getRandomValues&&(t=()=>{const r=new Uint8Array(1);return e.getRandomValues(r),r[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(t()&15)>>r/4).toString(16))}function eH(n){return n.exception&&n.exception.values?n.exception.values[0]:void 0}function _c(n){const{message:e,event_id:t}=n;if(e)return e;const r=eH(n);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||t||"<unknown>":t||"<unknown>"}function cC(n,e,t){const r=n.exception=n.exception||{},i=r.values=r.values||[],s=i[0]=i[0]||{};s.value||(s.value=e||""),s.type||(s.type="Error")}function t_(n,e){const t=eH(n);if(!t)return;const r={type:"generic",handled:!0},i=t.mechanism;if(t.mechanism={...r,...i,...e},e&&"data"in e){const s={...i&&i.data,...e.data};t.mechanism.data=s}}function KB(n){if(n&&n.__sentry_captured__)return!0;try{Uo(n,"__sentry_captured__",!0)}catch{}return!1}function tH(n){return Array.isArray(n)?n:[n]}function Da(n,e=100,t=1/0){try{return uC("",n,e,t)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function nH(n,e=3,t=100*1024){const r=Da(n,e);return L7(r)>t?nH(n,e-1,t):r}function uC(n,e,t=1/0,r=1/0,i=I7()){const[s,o]=i;if(e==null||["number","boolean","string"].includes(typeof e)&&!Number.isNaN(e))return e;const a=P7(n,e);if(!a.startsWith("[object "))return a;if(e.__sentry_skip_normalization__)return e;const l=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:t;if(l===0)return a.replace("object ","");if(s(e))return"[Circular ~]";const c=e;if(c&&typeof c.toJSON=="function")try{const m=c.toJSON();return uC("",m,l-1,r,i)}catch{}const u=Array.isArray(e)?[]:{};let f=0;const p=XU(e);for(const m in p){if(!Object.prototype.hasOwnProperty.call(p,m))continue;if(f>=r){u[m]="[MaxProperties ~]";break}const g=p[m];u[m]=uC(m,g,l-1,r,i),f++}return o(e),u}function P7(n,e){try{if(n==="domain"&&e&&typeof e=="object"&&e._events)return"[Domain]";if(n==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&e===global)return"[Global]";if(typeof window<"u"&&e===window)return"[Window]";if(typeof document<"u"&&e===document)return"[Document]";if(zU(e))return"[VueViewModel]";if(qW(e))return"[SyntheticEvent]";if(typeof e=="number"&&e!==e)return"[NaN]";if(typeof e=="function")return`[Function: ${zl(e)}]`;if(typeof e=="symbol")return`[${String(e)}]`;if(typeof e=="bigint")return`[BigInt: ${String(e)}]`;const t=D7(e);return/^HTML(\w*)Element$/.test(t)?`[HTMLElement: ${t}]`:`[object ${t}]`}catch(t){return`**non-serializable** (${t})`}}function D7(n){const e=Object.getPrototypeOf(n);return e?e.constructor.name:"null prototype"}function B7(n){return~-encodeURI(n).split(/%..|./).length}function L7(n){return B7(JSON.stringify(n))}var ml;(function(n){n[n.PENDING=0]="PENDING";const t=1;n[n.RESOLVED=t]="RESOLVED";const r=2;n[n.REJECTED=r]="REJECTED"})(ml||(ml={}));function Gl(n){return new To(e=>{e(n)})}function uS(n){return new To((e,t)=>{t(n)})}class To{constructor(e){To.prototype.__init.call(this),To.prototype.__init2.call(this),To.prototype.__init3.call(this),To.prototype.__init4.call(this),this._state=ml.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(t){this._reject(t)}}then(e,t){return new To((r,i)=>{this._handlers.push([!1,s=>{if(!e)r(s);else try{r(e(s))}catch(o){i(o)}},s=>{if(!t)i(s);else try{r(t(s))}catch(o){i(o)}}]),this._executeHandlers()})}catch(e){return this.then(t=>t,e)}finally(e){return new To((t,r)=>{let i,s;return this.then(o=>{s=!1,i=o,e&&e()},o=>{s=!0,i=o,e&&e()}).then(()=>{if(s){r(i);return}t(i)})})}__init(){this._resolve=e=>{this._setResult(ml.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(ml.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{if(this._state===ml.PENDING){if(k1(t)){t.then(this._resolve,this._reject);return}this._state=e,this._value=t,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===ml.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(t=>{t[0]||(this._state===ml.RESOLVED&&t[1](this._value),this._state===ml.REJECTED&&t[2](this._value),t[0]=!0)})}}}function N7(n){const e=[];function t(){return n===void 0||e.length<n}function r(o){return e.splice(e.indexOf(o),1)[0]||Promise.resolve(void 0)}function i(o){if(!t())return uS(new La("Not adding Promise because buffer limit was reached."));const a=o();return e.indexOf(a)===-1&&e.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function s(o){return new To((a,l)=>{let c=e.length;if(!c)return a(!0);const u=setTimeout(()=>{o&&o>0&&a(!1)},o);e.forEach(f=>{Gl(f).then(()=>{--c||(clearTimeout(u),a(!0))},l)})})}return{$:e,add:i,drain:s}}function _f(n){if(!n)return{};const e=n.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const t=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:t,hash:r,relative:e[5]+t+r}}const k7=["fatal","error","warning","log","info","debug"];function F7(n){return n==="warn"?"warning":k7.includes(n)?n:"log"}const fC="baggage",rH="sentry-",O7=/^sentry-/,U7=8192;function iH(n){const e=H7(n);if(!e)return;const t=Object.entries(e).reduce((r,[i,s])=>{if(i.match(O7)){const o=i.slice(rH.length);r[o]=s}return r},{});if(Object.keys(t).length>0)return t}function sH(n){if(!n)return;const e=Object.entries(n).reduce((t,[r,i])=>(i&&(t[`${rH}${r}`]=i),t),{});return z7(e)}function H7(n){if(!(!n||!Pl(n)&&!Array.isArray(n)))return Array.isArray(n)?n.reduce((e,t)=>{const r=$B(t);return Object.entries(r).forEach(([i,s])=>{e[i]=s}),e},{}):$B(n)}function $B(n){return n.split(",").map(e=>e.split("=").map(t=>decodeURIComponent(t.trim()))).reduce((e,[t,r])=>(t&&r&&(e[t]=r),e),{})}function z7(n){if(Object.keys(n).length!==0)return Object.entries(n).reduce((e,[t,r],i)=>{const s=`${encodeURIComponent(t)}=${encodeURIComponent(r)}`,o=i===0?s:`${e},${s}`;return o.length>U7?(Dp&&qe.warn(`Not adding key: ${t} with val: ${r} to baggage header due to exceeding baggage size limits.`),e):o},"")}const G7=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function V7(n){if(!n)return;const e=n.match(G7);if(!e)return;let t;return e[3]==="1"?t=!0:e[3]==="0"&&(t=!1),{traceId:e[1],parentSampled:t,parentSpanId:e[2]}}function W7(n,e){const t=V7(n),r=iH(e),{traceId:i,parentSpanId:s,parentSampled:o}=t||{};return t?{traceId:i||or(),parentSpanId:s||or().substring(16),spanId:or().substring(16),sampled:o,dsc:r||{}}:{traceId:i||or(),spanId:or().substring(16)}}function FR(n=or(),e=or().substring(16),t){let r="";return t!==void 0&&(r=t?"-1":"-0"),`${n}-${e}${r}`}function ed(n,e=[]){return[n,e]}function X7(n,e){const[t,r]=n;return[t,[...r,e]]}function qB(n,e){const t=n[1];for(const r of t){const i=r[0].type;if(e(r,i))return!0}return!1}function dC(n){return pn.__SENTRY__&&pn.__SENTRY__.encodePolyfill?pn.__SENTRY__.encodePolyfill(n):new TextEncoder().encode(n)}function j7(n){const[e,t]=n;let r=JSON.stringify(e);function i(s){typeof r=="string"?r=typeof s=="string"?r+s:[dC(r),s]:r.push(typeof s=="string"?dC(s):s)}for(const s of t){const[o,a]=s;if(i(`
${JSON.stringify(o)}
`),typeof a=="string"||a instanceof Uint8Array)i(a);else{let l;try{l=JSON.stringify(a)}catch{l=JSON.stringify(Da(a))}i(l)}}return typeof r=="string"?r:Y7(r)}function Y7(n){const e=n.reduce((i,s)=>i+s.length,0),t=new Uint8Array(e);let r=0;for(const i of n)t.set(i,r),r+=i.length;return t}function J7(n){return[{type:"span"},n]}function K7(n){const e=typeof n.data=="string"?dC(n.data):n.data;return[Gr({type:"attachment",length:e.length,filename:n.filename,content_type:n.contentType,attachment_type:n.attachmentType}),e]}const $7={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function QB(n){return $7[n]}function OR(n){if(!n||!n.sdk)return;const{name:e,version:t}=n.sdk;return{name:e,version:t}}function oH(n,e,t,r){const i=n.sdkProcessingMetadata&&n.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:n.event_id,sent_at:new Date().toISOString(),...e&&{sdk:e},...!!t&&r&&{dsn:z_(r)},...i&&{trace:Gr({...i})}}}function q7(n,e,t){const r=[{type:"client_report"},{timestamp:G_(),discarded_events:n}];return ed(e?{dsn:e}:{},[r])}const Q7=60*1e3;function Z7(n,e=Date.now()){const t=parseInt(`${n}`,10);if(!isNaN(t))return t*1e3;const r=Date.parse(`${n}`);return isNaN(r)?Q7:r-e}function eX(n,e){return n[e]||n.all||0}function aH(n,e,t=Date.now()){return eX(n,e)>t}function lH(n,{statusCode:e,headers:t},r=Date.now()){const i={...n},s=t&&t["x-sentry-rate-limits"],o=t&&t["retry-after"];if(s)for(const a of s.trim().split(",")){const[l,c,,,u]=a.split(":",5),f=parseInt(l,10),p=(isNaN(f)?60:f)*1e3;if(!c)i.all=r+p;else for(const m of c.split(";"))m==="metric_bucket"?(!u||u.split(";").includes("custom"))&&(i[m]=r+p):i[m]=r+p}else o?i.all=r+Z7(o,r):e===429&&(i.all=r+60*1e3);return i}function tX(n,e){return n??e()}function js(n){let e,t=n[0],r=1;for(;r<n.length;){const i=n[r],s=n[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&t==null)return;i==="access"||i==="optionalAccess"?(e=t,t=s(t)):(i==="call"||i==="optionalCall")&&(t=s((...o)=>t.call(e,...o)),e=void 0)}return t}function fS(){return{traceId:or(),spanId:or().substring(16)}}const Dv=pn;function nX(){const n=Dv.chrome,e=n&&n.app&&n.app.runtime,t="history"in Dv&&!!Dv.history.pushState&&!!Dv.history.replaceState;return!e&&t}const $t=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function Lp(){return UR(pn),pn}function UR(n){const e=n.__SENTRY__=n.__SENTRY__||{};return e.version=e.version||Vc,e[Vc]=e[Vc]||{}}function rX(n){const e=vi(),t={sid:or(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>sX(t)};return n&&tp(t,n),t}function tp(n,e={}){if(e.user&&(!n.ipAddress&&e.user.ip_address&&(n.ipAddress=e.user.ip_address),!n.did&&!e.did&&(n.did=e.user.id||e.user.email||e.user.username)),n.timestamp=e.timestamp||vi(),e.abnormal_mechanism&&(n.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(n.ignoreDuration=e.ignoreDuration),e.sid&&(n.sid=e.sid.length===32?e.sid:or()),e.init!==void 0&&(n.init=e.init),!n.did&&e.did&&(n.did=`${e.did}`),typeof e.started=="number"&&(n.started=e.started),n.ignoreDuration)n.duration=void 0;else if(typeof e.duration=="number")n.duration=e.duration;else{const t=n.timestamp-n.started;n.duration=t>=0?t:0}e.release&&(n.release=e.release),e.environment&&(n.environment=e.environment),!n.ipAddress&&e.ipAddress&&(n.ipAddress=e.ipAddress),!n.userAgent&&e.userAgent&&(n.userAgent=e.userAgent),typeof e.errors=="number"&&(n.errors=e.errors),e.status&&(n.status=e.status)}function iX(n,e){let t={};n.status==="ok"&&(t={status:"exited"}),tp(n,t)}function sX(n){return Gr({sid:`${n.sid}`,init:n.init,started:new Date(n.started*1e3).toISOString(),timestamp:new Date(n.timestamp*1e3).toISOString(),status:n.status,errors:n.errors,did:typeof n.did=="number"||typeof n.did=="string"?`${n.did}`:void 0,duration:n.duration,abnormal_mechanism:n.abnormal_mechanism,attrs:{release:n.release,environment:n.environment,ip_address:n.ipAddress,user_agent:n.userAgent}})}const hC="_sentrySpan";function n_(n,e){e?Uo(n,hC,e):delete n[hC]}function dS(n){return n[hC]}const oX=100;class HR{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=fS()}clone(){const e=new HR;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,n_(e,dS(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&tp(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return t===null?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t=typeof e=="function"?e(this):e,[r,i]=t instanceof Of?[t.getScopeData(),t.getRequestSession()]:ep(t)?[e,e.requestSession]:[],{tags:s,extra:o,user:a,contexts:l,level:c,fingerprint:u=[],propagationContext:f}=r||{};return this._tags={...this._tags,...s},this._extra={...this._extra,...o},this._contexts={...this._contexts,...l},a&&Object.keys(a).length&&(this._user=a),c&&(this._level=c),u.length&&(this._fingerprint=u),f&&(this._propagationContext=f),i&&(this._requestSession=i),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,n_(this,void 0),this._attachments=[],this._propagationContext=fS(),this._notifyScopeListeners(),this}addBreadcrumb(e,t){const r=typeof t=="number"?t:oX;if(r<=0)return this;const i={timestamp:G_(),...e},s=this._breadcrumbs;return s.push(i),this._breadcrumbs=s.length>r?s.slice(-r):s,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:dS(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const r=t&&t.event_id?t.event_id:or();if(!this._client)return qe.warn("No client configured on scope - will not capture exception!"),r;const i=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:i,...t,event_id:r},this),r}captureMessage(e,t,r){const i=r&&r.event_id?r.event_id:or();if(!this._client)return qe.warn("No client configured on scope - will not capture message!"),i;const s=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:s,...r,event_id:i},this),i}captureEvent(e,t){const r=t&&t.event_id?t.event_id:or();return this._client?(this._client.captureEvent(e,{...t,event_id:r},this),r):(qe.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}const Of=HR;function aX(){return F1("defaultCurrentScope",()=>new Of)}function lX(){return F1("defaultIsolationScope",()=>new Of)}class cX{constructor(e,t){let r;e?r=e:r=new Of;let i;t?i=t:i=new Of,this._stack=[{scope:r}],this._isolationScope=i}withScope(e){const t=this._pushScope();let r;try{r=e(t)}catch(i){throw this._popScope(),i}return k1(r)?r.then(i=>(this._popScope(),i),i=>{throw this._popScope(),i}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function np(){const n=Lp(),e=UR(n);return e.stack=e.stack||new cX(aX(),lX())}function uX(n){return np().withScope(n)}function fX(n,e){const t=np();return t.withScope(()=>(t.getStackTop().scope=n,e(n)))}function ZB(n){return np().withScope(()=>n(np().getIsolationScope()))}function dX(){return{withIsolationScope:ZB,withScope:uX,withSetScope:fX,withSetIsolationScope:(n,e)=>ZB(e),getCurrentScope:()=>np().getScope(),getIsolationScope:()=>np().getIsolationScope()}}function V_(n){const e=UR(n);return e.acs?e.acs:dX()}function Fn(){const n=Lp();return V_(n).getCurrentScope()}function lo(){const n=Lp();return V_(n).getIsolationScope()}function cH(){return F1("globalScope",()=>new Of)}function zR(...n){const e=Lp(),t=V_(e);if(n.length===2){const[r,i]=n;return r?t.withSetScope(r,i):t.withScope(i)}return t.withScope(n[0])}function Zt(){return Fn().getClient()}const hX="_sentryMetrics";function pC(n){const e=n[hX];if(!e)return;const t={};for(const[,[r,i]]of e)(t[r]||(t[r]=[])).push(Gr(i));return t}const ka="sentry.source",uH="sentry.sample_rate",qc="sentry.op",Cr="sentry.origin",mC="sentry.idle_span_finish_reason",O1="sentry.measurement_unit",U1="sentry.measurement_value",pX="sentry.profile_id",GR="sentry.exclusive_time",mX=0,fH=1,si=2;function gX(n){if(n<400&&n>=100)return{code:fH};if(n>=400&&n<500)switch(n){case 401:return{code:si,message:"unauthenticated"};case 403:return{code:si,message:"permission_denied"};case 404:return{code:si,message:"not_found"};case 409:return{code:si,message:"already_exists"};case 413:return{code:si,message:"failed_precondition"};case 429:return{code:si,message:"resource_exhausted"};case 499:return{code:si,message:"cancelled"};default:return{code:si,message:"invalid_argument"}}if(n>=500&&n<600)switch(n){case 501:return{code:si,message:"unimplemented"};case 503:return{code:si,message:"unavailable"};case 504:return{code:si,message:"deadline_exceeded"};default:return{code:si,message:"internal_error"}}return{code:si,message:"unknown_error"}}function dH(n,e){n.setAttribute("http.response.status_code",e);const t=gX(e);t.message!=="unknown_error"&&n.setStatus(t)}const hH=0,pH=1;function _X(n){const{spanId:e,traceId:t}=n.spanContext(),{data:r,op:i,parent_span_id:s,status:o,origin:a}=xn(n);return Gr({parent_span_id:s,span_id:e,trace_id:t,data:r,op:i,status:o,origin:a})}function vX(n){const{spanId:e,traceId:t}=n.spanContext(),{parent_span_id:r}=xn(n);return Gr({parent_span_id:r,span_id:e,trace_id:t})}function mH(n){const{traceId:e,spanId:t}=n.spanContext(),r=td(n);return FR(e,t,r)}function vf(n){return typeof n=="number"?eL(n):Array.isArray(n)?n[0]+n[1]/1e9:n instanceof Date?eL(n.getTime()):vi()}function eL(n){return n>9999999999?n/1e3:n}function xn(n){if(xX(n))return n.getSpanJSON();try{const{spanId:e,traceId:t}=n.spanContext();if(yX(n)){const{attributes:r,startTime:i,name:s,endTime:o,parentSpanId:a,status:l}=n;return Gr({span_id:e,trace_id:t,data:r,description:s,parent_span_id:a,start_timestamp:vf(i),timestamp:vf(o)||void 0,status:gH(l),op:r[qc],origin:r[Cr],_metrics_summary:pC(n)})}return{span_id:e,trace_id:t}}catch{return{}}}function yX(n){const e=n;return!!e.attributes&&!!e.startTime&&!!e.name&&!!e.endTime&&!!e.status}function xX(n){return typeof n.getSpanJSON=="function"}function td(n){const{traceFlags:e}=n.spanContext();return e===pH}function gH(n){if(!(!n||n.code===mX))return n.code===fH?"ok":n.message||"unknown_error"}const yf="_sentryChildSpans",gC="_sentryRootSpan";function _H(n,e){const t=n[gC]||n;Uo(e,gC,t),n[yf]?n[yf].add(e):Uo(n,yf,new Set([e]))}function SX(n,e){n[yf]&&n[yf].delete(e)}function gx(n){const e=new Set;function t(r){if(!e.has(r)&&td(r)){e.add(r);const i=r[yf]?Array.from(r[yf]):[];for(const s of i)t(s)}}return t(n),Array.from(e)}function yi(n){return n[gC]||n}function zi(){const n=Lp(),e=V_(n);return e.getActiveSpan?e.getActiveSpan():dS(Fn())}let tL=!1;function EX(){tL||(tL=!0,QU(_C),ZU(_C))}function _C(){const n=zi(),e=n&&yi(n);if(e){const t="internal_error";$t&&qe.log(`[Tracing] Root span: ${t} -> Global error occured`),e.setStatus({code:si,message:t})}}_C.tag="sentry_tracingErrorCallback";const vH="_sentryScope",yH="_sentryIsolationScope";function AX(n,e,t){n&&(Uo(n,yH,t),Uo(n,vH,e))}function nL(n){return{scope:n[vH],isolationScope:n[yH]}}function Qc(n){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const e=Zt(),t=n||e&&e.getOptions();return!!t&&(t.enableTracing||"tracesSampleRate"in t||"tracesSampler"in t)}class Np{constructor(e={}){this._traceId=e.traceId||or(),this._spanId=e.spanId||or().substring(16)}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:hH}}end(e){}setAttribute(e,t){return this}setAttributes(e){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}addEvent(e,t,r){return this}addLink(e){return this}addLinks(e){return this}recordException(e,t){}}const VR="production",xH="_frozenDsc";function rL(n,e){Uo(n,xH,e)}function H1(n,e){const t=e.getOptions(),{publicKey:r}=e.getDsn()||{},i=Gr({environment:t.environment||VR,release:t.release,public_key:r,trace_id:n});return e.emit("createDsc",i),i}function nd(n){const e=Zt();if(!e)return{};const t=H1(xn(n).trace_id||"",e),r=yi(n),i=r[xH];if(i)return i;const s=r.spanContext().traceState,o=s&&s.get("sentry.dsc"),a=o&&iH(o);if(a)return a;const l=xn(r),c=l.data||{},u=c[uH];u!=null&&(t.sample_rate=`${u}`);const f=c[ka],p=l.description;return f!=="url"&&p&&(t.transaction=p),t.sampled=String(td(r)),e.emit("createDsc",t,r),t}function wX(n){if(!$t)return;const{description:e="< unknown name >",op:t="< unknown op >",parent_span_id:r}=xn(n),{spanId:i}=n.spanContext(),s=td(n),o=yi(n),a=o===n,l=`[Tracing] Starting ${s?"sampled":"unsampled"} ${a?"root ":""}span`,c=[`op: ${t}`,`name: ${e}`,`ID: ${i}`];if(r&&c.push(`parent ID: ${r}`),!a){const{op:u,description:f}=xn(o);c.push(`root ID: ${o.spanContext().spanId}`),u&&c.push(`root op: ${u}`),f&&c.push(`root description: ${f}`)}qe.log(`${l}
  ${c.join(`
  `)}`)}function MX(n){if(!$t)return;const{description:e="< unknown name >",op:t="< unknown op >"}=xn(n),{spanId:r}=n.spanContext(),s=yi(n)===n,o=`[Tracing] Finishing "${t}" ${s?"root ":""}span "${e}" with ID ${r}`;qe.log(o)}function hS(n){if(typeof n=="boolean")return Number(n);const e=typeof n=="string"?parseFloat(n):n;if(typeof e!="number"||isNaN(e)||e<0||e>1){$t&&qe.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(n)} of type ${JSON.stringify(typeof n)}.`);return}return e}function TX(n,e){if(!Qc(n))return[!1];let t;typeof n.tracesSampler=="function"?t=n.tracesSampler(e):e.parentSampled!==void 0?t=e.parentSampled:typeof n.tracesSampleRate<"u"?t=n.tracesSampleRate:t=1;const r=hS(t);return r===void 0?($t&&qe.warn("[Tracing] Discarding transaction because of invalid sample rate."),[!1]):r?Math.random()<r?[!0,r]:($t&&qe.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(t)})`),[!1,r]):($t&&qe.log(`[Tracing] Discarding transaction because ${typeof n.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,r])}function CX(n,e){return e&&(n.sdk=n.sdk||{},n.sdk.name=n.sdk.name||e.name,n.sdk.version=n.sdk.version||e.version,n.sdk.integrations=[...n.sdk.integrations||[],...e.integrations||[]],n.sdk.packages=[...n.sdk.packages||[],...e.packages||[]]),n}function bX(n,e,t,r){const i=OR(t),s={sent_at:new Date().toISOString(),...i&&{sdk:i},...!!r&&e&&{dsn:z_(e)}},o="aggregates"in n?[{type:"sessions"},n]:[{type:"session"},n.toJSON()];return ed(s,[o])}function RX(n,e,t,r){const i=OR(t),s=n.type&&n.type!=="replay_event"?n.type:"event";CX(n,t&&t.sdk);const o=oH(n,i,r,e);return delete n.sdkProcessingMetadata,ed(o,[[{type:s},n]])}function IX(n,e){function t(u){return!!u.trace_id&&!!u.public_key}const r=nd(n[0]),i=e&&e.getDsn(),s=e&&e.getOptions().tunnel,o={sent_at:new Date().toISOString(),...t(r)&&{trace:r},...!!s&&i&&{dsn:z_(i)}},a=e&&e.getOptions().beforeSendSpan,l=a?u=>a(xn(u)):u=>xn(u),c=[];for(const u of n){const f=l(u);f&&c.push(J7(f))}return ed(o,c)}function PX(n,e,t,r=zi()){const i=r&&yi(r);i&&i.addEvent(n,{[U1]:e,[O1]:t})}function iL(n){if(!n||n.length===0)return;const e={};return n.forEach(t=>{const r=t.attributes||{},i=r[O1],s=r[U1];typeof i=="string"&&typeof s=="number"&&(e[t.name]={value:s,unit:i})}),e}const sL=1e3;class WR{constructor(e={}){this._traceId=e.traceId||or(),this._spanId=e.spanId||or().substring(16),this._startTime=e.startTimestamp||vi(),this._attributes={},this.setAttributes({[Cr]:"manual",[qc]:e.op,...e.attributes}),this._name=e.name,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.endTimestamp&&(this._endTime=e.endTimestamp),this._events=[],this._isStandaloneSpan=e.isStandalone,this._endTime&&this._onSpanEnded()}addLink(e){return this}addLinks(e){return this}recordException(e,t){}spanContext(){const{_spanId:e,_traceId:t,_sampled:r}=this;return{spanId:e,traceId:t,traceFlags:r?pH:hH}}setAttribute(e,t){return t===void 0?delete this._attributes[e]:this._attributes[e]=t,this}setAttributes(e){return Object.keys(e).forEach(t=>this.setAttribute(t,e[t])),this}updateStartTime(e){this._startTime=vf(e)}setStatus(e){return this._status=e,this}updateName(e){return this._name=e,this}end(e){this._endTime||(this._endTime=vf(e),MX(this),this._onSpanEnded())}getSpanJSON(){return Gr({data:this._attributes,description:this._name,op:this._attributes[qc],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:gH(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Cr],_metrics_summary:pC(this),profile_id:this._attributes[pX],exclusive_time:this._attributes[GR],measurements:iL(this._events),is_segment:this._isStandaloneSpan&&yi(this)===this||void 0,segment_id:this._isStandaloneSpan?yi(this).spanContext().spanId:void 0})}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,t,r){$t&&qe.log("[Tracing] Adding an event to span:",e);const i=oL(t)?t:r||vi(),s=oL(t)?{}:t||{},o={name:e,time:vf(i),attributes:s};return this._events.push(o),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const e=Zt();if(e&&e.emit("spanEnd",this),!(this._isStandaloneSpan||this===yi(this)))return;if(this._isStandaloneSpan){this._sampled?BX(IX([this],e)):($t&&qe.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),e&&e.recordDroppedEvent("sample_rate","span"));return}const r=this._convertSpanToTransaction();r&&(nL(this).scope||Fn()).captureEvent(r)}_convertSpanToTransaction(){if(!aL(xn(this)))return;this._name||($t&&qe.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:e,isolationScope:t}=nL(this),i=(e||Fn()).getClient()||Zt();if(this._sampled!==!0){$t&&qe.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),i&&i.recordDroppedEvent("sample_rate","transaction");return}const o=gx(this).filter(f=>f!==this&&!DX(f)).map(f=>xn(f)).filter(aL),a=this._attributes[ka],l={contexts:{trace:_X(this)},spans:o.length>sL?o.sort((f,p)=>f.start_timestamp-p.start_timestamp).slice(0,sL):o,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:e,capturedSpanIsolationScope:t,...Gr({dynamicSamplingContext:nd(this)})},_metrics_summary:pC(this),...a&&{transaction_info:{source:a}}},c=iL(this._events);return c&&Object.keys(c).length&&($t&&qe.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),l.measurements=c),l}}function oL(n){return n&&typeof n=="number"||n instanceof Date||Array.isArray(n)}function aL(n){return!!n.start_timestamp&&!!n.timestamp&&!!n.span_id&&!!n.trace_id}function DX(n){return n instanceof WR&&n.isStandaloneSpan()}function BX(n){const e=Zt();if(!e)return;const t=n[1];if(!t||t.length===0){e.recordDroppedEvent("before_send","span");return}const r=e.getTransport();r&&r.send(n).then(null,i=>{$t&&qe.error("Error while sending span:",i)})}const SH="__SENTRY_SUPPRESS_TRACING__";function ca(n){const e=EH();if(e.startInactiveSpan)return e.startInactiveSpan(n);const t=NX(n),{forceTransaction:r,parentSpan:i}=n;return(n.scope?o=>zR(n.scope,o):i!==void 0?o=>pS(i,o):o=>o())(()=>{const o=Fn(),a=FX(o);return n.onlyIfParent&&!a?new Np:LX({parentSpan:a,spanArguments:t,forceTransaction:r,scope:o})})}function pS(n,e){const t=EH();return t.withActiveSpan?t.withActiveSpan(n,e):zR(r=>(n_(r,n||void 0),e(r)))}function LX({parentSpan:n,spanArguments:e,forceTransaction:t,scope:r}){if(!Qc())return new Np;const i=lo();let s;if(n&&!t)s=kX(n,r,e),_H(n,s);else if(n){const o=nd(n),{traceId:a,spanId:l}=n.spanContext(),c=td(n);s=lL({traceId:a,parentSpanId:l,...e},r,c),rL(s,o)}else{const{traceId:o,dsc:a,parentSpanId:l,sampled:c}={...i.getPropagationContext(),...r.getPropagationContext()};s=lL({traceId:o,parentSpanId:l,...e},r,c),a&&rL(s,a)}return wX(s),AX(s,r,i),s}function NX(n){const t={isStandalone:(n.experimental||{}).standalone,...n};if(n.startTime){const r={...t};return r.startTimestamp=vf(n.startTime),delete r.startTime,r}return t}function EH(){const n=Lp();return V_(n)}function lL(n,e,t){const r=Zt(),i=r&&r.getOptions()||{},{name:s="",attributes:o}=n,[a,l]=e.getScopeData().sdkProcessingMetadata[SH]?[!1]:TX(i,{name:s,parentSampled:t,attributes:o,transactionContext:{name:s,parentSampled:t}}),c=new WR({...n,attributes:{[ka]:"custom",...n.attributes},sampled:a});return l!==void 0&&c.setAttribute(uH,l),r&&r.emit("spanStart",c),c}function kX(n,e,t){const{spanId:r,traceId:i}=n.spanContext(),s=e.getScopeData().sdkProcessingMetadata[SH]?!1:td(n),o=s?new WR({...t,parentSpanId:r,traceId:i,sampled:s}):new Np({traceId:i});_H(n,o);const a=Zt();return a&&(a.emit("spanStart",o),t.endTimestamp&&a.emit("spanEnd",o)),o}function FX(n){const e=dS(n);if(!e)return;const t=Zt();return(t?t.getOptions():{}).parentSpanIsAlwaysRootSpan?yi(e):e}const _x={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},OX="heartbeatFailed",UX="idleTimeout",HX="finalTimeout",zX="externalFinish";function AH(n,e={}){const t=new Map;let r=!1,i,s=zX,o=!e.disableAutoFinish;const a=[],{idleTimeout:l=_x.idleTimeout,finalTimeout:c=_x.finalTimeout,childSpanTimeout:u=_x.childSpanTimeout,beforeSpanEnd:f}=e,p=Zt();if(!p||!Qc())return new Np;const m=Fn(),g=zi(),v=GX(n);v.end=new Proxy(v.end,{apply(T,b,P){f&&f(v);const[C,...M]=P,L=C||vi(),U=vf(L),X=gx(v).filter(k=>k!==v);if(!X.length)return I(U),Reflect.apply(T,b,[U,...M]);const $=X.map(k=>xn(k).timestamp).filter(k=>!!k),Q=$.length?Math.max(...$):void 0,Y=xn(v).start_timestamp,te=Math.min(Y?Y+c/1e3:1/0,Math.max(Y||-1/0,Math.min(U,Q||1/0)));return I(te),Reflect.apply(T,b,[te,...M])}});function y(){i&&(clearTimeout(i),i=void 0)}function _(T){y(),i=setTimeout(()=>{!r&&t.size===0&&o&&(s=UX,v.end(T))},l)}function S(T){i=setTimeout(()=>{!r&&o&&(s=OX,v.end(T))},u)}function E(T){y(),t.set(T,!0);const b=vi();S(b+u/1e3)}function w(T){if(t.has(T)&&t.delete(T),t.size===0){const b=vi();_(b+l/1e3)}}function I(T){r=!0,t.clear(),a.forEach(U=>U()),n_(m,g);const b=xn(v),{start_timestamp:P}=b;if(!P)return;(b.data||{})[mC]||v.setAttribute(mC,s),qe.log(`[Tracing] Idle span "${b.op}" finished`);const M=gx(v).filter(U=>U!==v);let L=0;M.forEach(U=>{U.isRecording()&&(U.setStatus({code:si,message:"cancelled"}),U.end(T),$t&&qe.log("[Tracing] Cancelling span since span ended early",JSON.stringify(U,void 0,2)));const X=xn(U),{timestamp:$=0,start_timestamp:Q=0}=X,Y=Q<=T,te=(c+l)/1e3,k=$-Q<=te;if($t){const K=JSON.stringify(U,void 0,2);Y?k||qe.log("[Tracing] Discarding span since it finished after idle span final timeout",K):qe.log("[Tracing] Discarding span since it happened after idle span was finished",K)}(!k||!Y)&&(SX(v,U),L++)}),L>0&&v.setAttribute("sentry.idle_span_discarded_spans",L)}return a.push(p.on("spanStart",T=>{if(r||T===v||xn(T).timestamp)return;gx(v).includes(T)&&E(T.spanContext().spanId)})),a.push(p.on("spanEnd",T=>{r||w(T.spanContext().spanId)})),a.push(p.on("idleSpanEnableAutoFinish",T=>{T===v&&(o=!0,_(),t.size&&S())})),e.disableAutoFinish||_(),setTimeout(()=>{r||(v.setStatus({code:si,message:"deadline_exceeded"}),s=HX,v.end())},c),v}function GX(n){const e=ca(n);return n_(Fn(),e),$t&&qe.log("[Tracing] Started span is an idle span"),e}function vC(n,e,t,r=0){return new To((i,s)=>{const o=n[r];if(e===null||typeof o!="function")i(e);else{const a=o({...e},t);$t&&o.id&&a===null&&qe.log(`Event processor "${o.id}" dropped event`),k1(a)?a.then(l=>vC(n,l,t,r+1).then(i)).then(null,s):vC(n,a,t,r+1).then(i).then(null,s)}})}function VX(n,e){const{fingerprint:t,span:r,breadcrumbs:i,sdkProcessingMetadata:s}=e;WX(n,e),r&&YX(n,r),JX(n,t),XX(n,i),jX(n,s)}function cL(n,e){const{extra:t,tags:r,user:i,contexts:s,level:o,sdkProcessingMetadata:a,breadcrumbs:l,fingerprint:c,eventProcessors:u,attachments:f,propagationContext:p,transactionName:m,span:g}=e;_m(n,"extra",t),_m(n,"tags",r),_m(n,"user",i),_m(n,"contexts",s),_m(n,"sdkProcessingMetadata",a),o&&(n.level=o),m&&(n.transactionName=m),g&&(n.span=g),l.length&&(n.breadcrumbs=[...n.breadcrumbs,...l]),c.length&&(n.fingerprint=[...n.fingerprint,...c]),u.length&&(n.eventProcessors=[...n.eventProcessors,...u]),f.length&&(n.attachments=[...n.attachments,...f]),n.propagationContext={...n.propagationContext,...p}}function _m(n,e,t){if(t&&Object.keys(t).length){n[e]={...n[e]};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[e][r]=t[r])}}function WX(n,e){const{extra:t,tags:r,user:i,contexts:s,level:o,transactionName:a}=e,l=Gr(t);l&&Object.keys(l).length&&(n.extra={...l,...n.extra});const c=Gr(r);c&&Object.keys(c).length&&(n.tags={...c,...n.tags});const u=Gr(i);u&&Object.keys(u).length&&(n.user={...u,...n.user});const f=Gr(s);f&&Object.keys(f).length&&(n.contexts={...f,...n.contexts}),o&&(n.level=o),a&&n.type!=="transaction"&&(n.transaction=a)}function XX(n,e){const t=[...n.breadcrumbs||[],...e];n.breadcrumbs=t.length?t:void 0}function jX(n,e){n.sdkProcessingMetadata={...n.sdkProcessingMetadata,...e}}function YX(n,e){n.contexts={trace:vX(e),...n.contexts},n.sdkProcessingMetadata={dynamicSamplingContext:nd(e),...n.sdkProcessingMetadata};const t=yi(e),r=xn(t).description;r&&!n.transaction&&n.type==="transaction"&&(n.transaction=r)}function JX(n,e){n.fingerprint=n.fingerprint?tH(n.fingerprint):[],e&&(n.fingerprint=n.fingerprint.concat(e)),n.fingerprint&&!n.fingerprint.length&&delete n.fingerprint}function wH(n,e,t,r,i,s){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=n,l={...e,event_id:e.event_id||t.event_id||or(),timestamp:e.timestamp||G_()},c=t.integrations||n.integrations.map(y=>y.name);KX(l,n),QX(l,c),i&&i.emit("applyFrameMetadata",e),e.type===void 0&&$X(l,n.stackParser);const u=ej(r,t.captureContext);t.mechanism&&t_(l,t.mechanism);const f=i?i.getEventProcessors():[],p=cH().getScopeData();if(s){const y=s.getScopeData();cL(p,y)}if(u){const y=u.getScopeData();cL(p,y)}const m=[...t.attachments||[],...p.attachments];m.length&&(t.attachments=m),VX(l,p);const g=[...f,...p.eventProcessors];return vC(g,l,t).then(y=>(y&&qX(y),typeof o=="number"&&o>0?ZX(y,o,a):y))}function KX(n,e){const{environment:t,release:r,dist:i,maxValueLength:s=250}=e;"environment"in n||(n.environment="environment"in e?t:VR),n.release===void 0&&r!==void 0&&(n.release=r),n.dist===void 0&&i!==void 0&&(n.dist=i),n.message&&(n.message=Ph(n.message,s));const o=n.exception&&n.exception.values&&n.exception.values[0];o&&o.value&&(o.value=Ph(o.value,s));const a=n.request;a&&a.url&&(a.url=Ph(a.url,s))}const uL=new WeakMap;function $X(n,e){const t=pn._sentryDebugIds;if(!t)return;let r;const i=uL.get(e);i?r=i:(r=new Map,uL.set(e,r));const s=Object.entries(t).reduce((o,[a,l])=>{let c;const u=r.get(a);u?c=u:(c=e(a),r.set(a,c));for(let f=c.length-1;f>=0;f--){const p=c[f];if(p.filename){o[p.filename]=l;break}}return o},{});try{n.exception.values.forEach(o=>{o.stacktrace.frames.forEach(a=>{a.filename&&(a.debug_id=s[a.filename])})})}catch{}}function qX(n){const e={};try{n.exception.values.forEach(r=>{r.stacktrace.frames.forEach(i=>{i.debug_id&&(i.abs_path?e[i.abs_path]=i.debug_id:i.filename&&(e[i.filename]=i.debug_id),delete i.debug_id)})})}catch{}if(Object.keys(e).length===0)return;n.debug_meta=n.debug_meta||{},n.debug_meta.images=n.debug_meta.images||[];const t=n.debug_meta.images;Object.entries(e).forEach(([r,i])=>{t.push({type:"sourcemap",code_file:r,debug_id:i})})}function QX(n,e){e.length>0&&(n.sdk=n.sdk||{},n.sdk.integrations=[...n.sdk.integrations||[],...e])}function ZX(n,e,t){if(!n)return null;const r={...n,...n.breadcrumbs&&{breadcrumbs:n.breadcrumbs.map(i=>({...i,...i.data&&{data:Da(i.data,e,t)}}))},...n.user&&{user:Da(n.user,e,t)},...n.contexts&&{contexts:Da(n.contexts,e,t)},...n.extra&&{extra:Da(n.extra,e,t)}};return n.contexts&&n.contexts.trace&&r.contexts&&(r.contexts.trace=n.contexts.trace,n.contexts.trace.data&&(r.contexts.trace.data=Da(n.contexts.trace.data,e,t))),n.spans&&(r.spans=n.spans.map(i=>({...i,...i.data&&{data:Da(i.data,e,t)}}))),r}function ej(n,e){if(!e)return n;const t=n?n.clone():new Of;return t.update(e),t}function XR(n,e){return Fn().captureException(n,void 0)}function MH(n,e){return Fn().captureEvent(n,e)}function TH(n,e){lo().setContext(n,e)}function tj(n){lo().addEventProcessor(n)}function fL(n){const e=Zt(),t=lo(),r=Fn(),{release:i,environment:s=VR}=e&&e.getOptions()||{},{userAgent:o}=pn.navigator||{},a=rX({release:i,environment:s,user:r.getUser()||t.getUser(),...o&&{userAgent:o},...n}),l=t.getSession();return l&&l.status==="ok"&&tp(l,{status:"exited"}),CH(),t.setSession(a),r.setSession(a),a}function CH(){const n=lo(),e=Fn(),t=e.getSession()||n.getSession();t&&iX(t),bH(),n.setSession(),e.setSession()}function bH(){const n=lo(),e=Fn(),t=Zt(),r=e.getSession()||n.getSession();r&&t&&t.captureSession(r)}function dL(n=!1){if(n){CH();return}bH()}const nj="7";function rj(n){const e=n.protocol?`${n.protocol}:`:"",t=n.port?`:${n.port}`:"";return`${e}//${n.host}${t}${n.path?`/${n.path}`:""}/api/`}function ij(n){return`${rj(n)}${n.projectId}/envelope/`}function sj(n,e){return f7({sentry_key:n.publicKey,sentry_version:nj,...e&&{sentry_client:`${e.name}/${e.version}`}})}function oj(n,e,t){return e||`${ij(n)}?${sj(n,t)}`}const hL=[];function aj(n){const e={};return n.forEach(t=>{const{name:r}=t,i=e[r];i&&!i.isDefaultInstance&&t.isDefaultInstance||(e[r]=t)}),Object.values(e)}function lj(n){const e=n.defaultIntegrations||[],t=n.integrations;e.forEach(o=>{o.isDefaultInstance=!0});let r;Array.isArray(t)?r=[...e,...t]:typeof t=="function"?r=tH(t(e)):r=e;const i=aj(r),s=i.findIndex(o=>o.name==="Debug");if(s>-1){const[o]=i.splice(s,1);i.push(o)}return i}function cj(n,e){const t={};return e.forEach(r=>{r&&RH(n,r,t)}),t}function pL(n,e){for(const t of e)t&&t.afterAllSetup&&t.afterAllSetup(n)}function RH(n,e,t){if(t[e.name]){$t&&qe.log(`Integration skipped because it was already installed: ${e.name}`);return}if(t[e.name]=e,hL.indexOf(e.name)===-1&&typeof e.setupOnce=="function"&&(e.setupOnce(),hL.push(e.name)),e.setup&&typeof e.setup=="function"&&e.setup(n),typeof e.preprocessEvent=="function"){const r=e.preprocessEvent.bind(e);n.on("preprocessEvent",(i,s)=>r(i,s,n))}if(typeof e.processEvent=="function"){const r=e.processEvent.bind(e),i=Object.assign((s,o)=>r(s,o,n),{id:e.name});n.addEventProcessor(i)}$t&&qe.log(`Integration installed: ${e.name}`)}const mL="Not capturing exception because it's already been captured.";class uj{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=u7(e.dsn):$t&&qe.warn("No DSN provided, client will not send events."),this._dsn){const t=oj(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,r){const i=or();if(KB(e))return $t&&qe.log(mL),i;const s={event_id:i,...t};return this._process(this.eventFromException(e,s).then(o=>this._captureEvent(o,s,r))),s.event_id}captureMessage(e,t,r,i){const s={event_id:or(),...r},o=BR(e)?e:String(e),a=LR(e)?this.eventFromMessage(o,t,s):this.eventFromException(e,s);return this._process(a.then(l=>this._captureEvent(l,s,i))),s.event_id}captureEvent(e,t,r){const i=or();if(t&&t.originalException&&KB(t.originalException))return $t&&qe.log(mL),i;const s={event_id:i,...t},a=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,s,a||r)),s.event_id}captureSession(e){typeof e.release!="string"?$t&&qe.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),tp(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.emit("flush"),this._isClientDoneProcessing(e).then(r=>t.flush(e).then(i=>r&&i))):Gl(!0)}close(e){return this.flush(e).then(t=>(this.getOptions().enabled=!1,this.emit("close"),t))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const t=this._integrations[e.name];RH(this,e,this._integrations),t||pL(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let r=RX(e,this._dsn,this._options._metadata,this._options.tunnel);for(const s of t.attachments||[])r=X7(r,K7(s));const i=this.sendEnvelope(r);i&&i.then(s=>this.emit("afterSendEvent",e,s),null)}sendSession(e){const t=bX(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(t)}recordDroppedEvent(e,t,r){if(this._options.sendClientReports){const i=typeof r=="number"?r:1,s=`${e}:${t}`;$t&&qe.log(`Recording outcome: "${s}"${i>1?` (${i} times)`:""}`),this._outcomes[s]=(this._outcomes[s]||0)+i}}on(e,t){const r=this._hooks[e]=this._hooks[e]||[];return r.push(t),()=>{const i=r.indexOf(t);i>-1&&r.splice(i,1)}}emit(e,...t){const r=this._hooks[e];r&&r.forEach(i=>i(...t))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,t=>($t&&qe.error("Error while sending event:",t),t)):($t&&qe.error("Transport disabled"),Gl({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=cj(this,e),pL(this,e)}_updateSessionFromEvent(e,t){let r=!1,i=!1;const s=t.exception&&t.exception.values;if(s){i=!0;for(const l of s){const c=l.mechanism;if(c&&c.handled===!1){r=!0;break}}}const o=e.status==="ok";(o&&e.errors===0||o&&r)&&(tp(e,{...r&&{status:"crashed"},errors:e.errors||Number(i||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new To(t=>{let r=0;const i=1,s=setInterval(()=>{this._numProcessing==0?(clearInterval(s),t(!0)):(r+=i,e&&r>=e&&(clearInterval(s),t(!1)))},i)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(e,t,r,i=lo()){const s=this.getOptions(),o=Object.keys(this._integrations);return!t.integrations&&o.length>0&&(t.integrations=o),this.emit("preprocessEvent",e,t),e.type||i.setLastEventId(e.event_id||t.event_id),wH(s,e,t,r,this,i).then(a=>{if(a===null)return a;const l={...i.getPropagationContext(),...r?r.getPropagationContext():void 0};if(!(a.contexts&&a.contexts.trace)&&l){const{traceId:u,spanId:f,parentSpanId:p,dsc:m}=l;a.contexts={trace:Gr({trace_id:u,span_id:f,parent_span_id:p}),...a.contexts};const g=m||H1(u,this);a.sdkProcessingMetadata={dynamicSamplingContext:g,...a.sdkProcessingMetadata}}return a})}_captureEvent(e,t={},r){return this._processEvent(e,t,r).then(i=>i.event_id,i=>{if($t){const s=i;s.logLevel==="log"?qe.log(s.message):qe.warn(s)}})}_processEvent(e,t,r){const i=this.getOptions(),{sampleRate:s}=i,o=PH(e),a=IH(e),l=e.type||"error",c=`before send for type \`${l}\``,u=typeof s>"u"?void 0:hS(s);if(a&&typeof u=="number"&&Math.random()>u)return this.recordDroppedEvent("sample_rate","error",e),uS(new La(`Discarding event because it's not included in the random sample (sampling rate = ${s})`,"log"));const f=l==="replay_event"?"replay":l,m=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,t,r,m).then(g=>{if(g===null)throw this.recordDroppedEvent("event_processor",f,e),new La("An event processor returned `null`, will not send event.","log");if(t.data&&t.data.__sentry__===!0)return g;const y=dj(this,i,g,t);return fj(y,c)}).then(g=>{if(g===null){if(this.recordDroppedEvent("before_send",f,e),o){const S=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",S)}throw new La(`${c} returned \`null\`, will not send event.`,"log")}const v=r&&r.getSession();if(!o&&v&&this._updateSessionFromEvent(v,g),o){const _=g.sdkProcessingMetadata&&g.sdkProcessingMetadata.spanCountBeforeProcessing||0,S=g.spans?g.spans.length:0,E=_-S;E>0&&this.recordDroppedEvent("before_send","span",E)}const y=g.transaction_info;if(o&&y&&g.transaction!==e.transaction){const _="custom";g.transaction_info={...y,source:_}}return this.sendEvent(g,t),g}).then(null,g=>{throw g instanceof La?g:(this.captureException(g,{data:{__sentry__:!0},originalException:g}),new La(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${g}`))})}_process(e){this._numProcessing++,e.then(t=>(this._numProcessing--,t),t=>(this._numProcessing--,t))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map(([t,r])=>{const[i,s]=t.split(":");return{reason:i,category:s,quantity:r}})}_flushOutcomes(){$t&&qe.log("Flushing outcomes...");const e=this._clearOutcomes();if(e.length===0){$t&&qe.log("No outcomes to send");return}if(!this._dsn){$t&&qe.log("No dsn provided, will not send outcomes");return}$t&&qe.log("Sending outcomes:",e);const t=q7(e,this._options.tunnel&&z_(this._dsn));this.sendEnvelope(t)}}function fj(n,e){const t=`${e} must return \`null\` or a valid event.`;if(k1(n))return n.then(r=>{if(!ep(r)&&r!==null)throw new La(t);return r},r=>{throw new La(`${e} rejected with ${r}`)});if(!ep(n)&&n!==null)throw new La(t);return n}function dj(n,e,t,r){const{beforeSend:i,beforeSendTransaction:s,beforeSendSpan:o}=e;if(IH(t)&&i)return i(t,r);if(PH(t)){if(t.spans&&o){const a=[];for(const l of t.spans){const c=o(l);c?a.push(c):n.recordDroppedEvent("before_send","span")}t.spans=a}if(s){if(t.spans){const a=t.spans.length;t.sdkProcessingMetadata={...t.sdkProcessingMetadata,spanCountBeforeProcessing:a}}return s(t,r)}}return t}function IH(n){return n.type===void 0}function PH(n){return n.type==="transaction"}function hj(n,e){e.debug===!0&&($t?qe.enable():Bp(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),Fn().update(e.initialScope);const r=new n(e);return pj(r),r.init(),r}function pj(n){Fn().setClient(n)}const mj=64;function gj(n,e,t=N7(n.bufferSize||mj)){let r={};const i=o=>t.drain(o);function s(o){const a=[];if(qB(o,(f,p)=>{const m=QB(p);if(aH(r,m)){const g=gL(f,p);n.recordDroppedEvent("ratelimit_backoff",m,g)}else a.push(f)}),a.length===0)return Gl({});const l=ed(o[0],a),c=f=>{qB(l,(p,m)=>{const g=gL(p,m);n.recordDroppedEvent(f,QB(m),g)})},u=()=>e({body:j7(l)}).then(f=>(f.statusCode!==void 0&&(f.statusCode<200||f.statusCode>=300)&&$t&&qe.warn(`Sentry responded with status code ${f.statusCode} to sent event.`),r=lH(r,f),f),f=>{throw c("network_error"),f});return t.add(u).then(f=>f,f=>{if(f instanceof La)return $t&&qe.error("Skipped sending event because buffer is full."),c("queue_overflow"),Gl({});throw f})}return{send:s,flush:i}}function gL(n,e){if(!(e!=="event"&&e!=="transaction"))return Array.isArray(n)?n[1]:void 0}function _j(n,e){const t=e&&e.getDsn(),r=e&&e.getOptions().tunnel;return yj(n,t)||vj(n,r)}function vj(n,e){return e?_L(n)===_L(e):!1}function yj(n,e){return e?n.includes(e.host):!1}function _L(n){return n[n.length-1]==="/"?n.slice(0,-1):n}function DH(n,e,t=[e],r="npm"){const i=n._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${e}`,packages:t.map(s=>({name:`${r}:@sentry/${s}`,version:Vc})),version:Vc}),n._metadata=i}const xj=100;function Zc(n,e){const t=Zt(),r=lo();if(!t)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:s=xj}=t.getOptions();if(s<=0)return;const a={timestamp:G_(),...n},l=i?Bp(()=>i(a,e)):a;l!==null&&(t.emit&&t.emit("beforeAddBreadcrumb",l,e),r.addBreadcrumb(l,s))}let vL;const Sj="FunctionToString",yL=new WeakMap,Ej=()=>({name:Sj,setupOnce(){vL=Function.prototype.toString;try{Function.prototype.toString=function(...n){const e=kR(this),t=yL.has(Zt())&&e!==void 0?e:this;return vL.apply(t,n)}}catch{}},setup(n){yL.set(n,!0)}}),Aj=Ej,wj=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler"],Mj="InboundFilters",Tj=(n={})=>({name:Mj,processEvent(e,t,r){const i=r.getOptions(),s=bj(n,i);return Rj(e,s)?null:e}}),Cj=Tj;function bj(n={},e={}){return{allowUrls:[...n.allowUrls||[],...e.allowUrls||[]],denyUrls:[...n.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...n.ignoreErrors||[],...e.ignoreErrors||[],...n.disableErrorDefaults?[]:wj],ignoreTransactions:[...n.ignoreTransactions||[],...e.ignoreTransactions||[]],ignoreInternal:n.ignoreInternal!==void 0?n.ignoreInternal:!0}}function Rj(n,e){return e.ignoreInternal&&Nj(n)?($t&&qe.warn(`Event dropped due to being internal Sentry Error.
Event: ${_c(n)}`),!0):Ij(n,e.ignoreErrors)?($t&&qe.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${_c(n)}`),!0):Fj(n)?($t&&qe.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${_c(n)}`),!0):Pj(n,e.ignoreTransactions)?($t&&qe.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${_c(n)}`),!0):Dj(n,e.denyUrls)?($t&&qe.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${_c(n)}.
Url: ${mS(n)}`),!0):Bj(n,e.allowUrls)?!1:($t&&qe.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${_c(n)}.
Url: ${mS(n)}`),!0)}function Ij(n,e){return n.type||!e||!e.length?!1:Lj(n).some(t=>Gc(t,e))}function Pj(n,e){if(n.type!=="transaction"||!e||!e.length)return!1;const t=n.transaction;return t?Gc(t,e):!1}function Dj(n,e){if(!e||!e.length)return!1;const t=mS(n);return t?Gc(t,e):!1}function Bj(n,e){if(!e||!e.length)return!0;const t=mS(n);return t?Gc(t,e):!0}function Lj(n){const e=[];n.message&&e.push(n.message);let t;try{t=n.exception.values[n.exception.values.length-1]}catch{}return t&&t.value&&(e.push(t.value),t.type&&e.push(`${t.type}: ${t.value}`)),e}function Nj(n){try{return n.exception.values[0].type==="SentryError"}catch{}return!1}function kj(n=[]){for(let e=n.length-1;e>=0;e--){const t=n[e];if(t&&t.filename!=="<anonymous>"&&t.filename!=="[native code]")return t.filename||null}return null}function mS(n){try{let e;try{e=n.exception.values[0].stacktrace.frames}catch{}return e?kj(e):null}catch{return $t&&qe.error(`Cannot extract url for event ${_c(n)}`),null}}function Fj(n){return n.type||!n.exception||!n.exception.values||n.exception.values.length===0?!1:!n.message&&!n.exception.values.some(e=>e.stacktrace||e.type&&e.type!=="Error"||e.value)}const Oj="Dedupe",Uj=()=>{let n;return{name:Oj,processEvent(e){if(e.type)return e;try{if(zj(e,n))return $t&&qe.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return n=e}}},Hj=Uj;function zj(n,e){return e?!!(Gj(n,e)||Vj(n,e)):!1}function Gj(n,e){const t=n.message,r=e.message;return!(!t&&!r||t&&!r||!t&&r||t!==r||!LH(n,e)||!BH(n,e))}function Vj(n,e){const t=xL(e),r=xL(n);return!(!t||!r||t.type!==r.type||t.value!==r.value||!LH(n,e)||!BH(n,e))}function BH(n,e){let t=jB(n),r=jB(e);if(!t&&!r)return!0;if(t&&!r||!t&&r||(t=t,r=r,r.length!==t.length))return!1;for(let i=0;i<r.length;i++){const s=r[i],o=t[i];if(s.filename!==o.filename||s.lineno!==o.lineno||s.colno!==o.colno||s.function!==o.function)return!1}return!0}function LH(n,e){let t=n.fingerprint,r=e.fingerprint;if(!t&&!r)return!0;if(t&&!r||!t&&r)return!1;t=t,r=r;try{return t.join("")===r.join("")}catch{return!1}}function xL(n){return n.exception&&n.exception.values&&n.exception.values[0]}function Wj(n,e,t,r,i="auto.http.browser"){if(!n.fetchData)return;const s=Qc()&&e(n.fetchData.url);if(n.endTimestamp&&s){const g=n.fetchData.__span;if(!g)return;const v=r[g];v&&(Yj(v,n),delete r[g]);return}const o=Fn(),a=Zt(),{method:l,url:c}=n.fetchData,u=jj(c),f=u?_f(u).host:void 0,p=!!zi(),m=s&&p?ca({name:`${l} ${c}`,attributes:{url:c,type:"fetch","http.method":l,"http.url":u,"server.address":f,[Cr]:i,[qc]:"http.client"}}):new Np;if(n.fetchData.__span=m.spanContext().spanId,r[m.spanContext().spanId]=m,t(n.fetchData.url)&&a){const g=n.args[0];n.args[1]=n.args[1]||{};const v=n.args[1];v.headers=Xj(g,a,o,v,Qc()&&p?m:void 0)}return m}function Xj(n,e,t,r,i){const s=lo(),{traceId:o,spanId:a,sampled:l,dsc:c}={...s.getPropagationContext(),...t.getPropagationContext()},u=i?mH(i):FR(o,a,l),f=sH(c||(i?nd(i):H1(o,e))),p=r.headers||(typeof Request<"u"&&Ul(n,Request)?n.headers:void 0);if(p)if(typeof Headers<"u"&&Ul(p,Headers)){const m=new Headers(p);return m.append("sentry-trace",u),f&&m.append(fC,f),m}else if(Array.isArray(p)){const m=[...p,["sentry-trace",u]];return f&&m.push([fC,f]),m}else{const m="baggage"in p?p.baggage:void 0,g=[];return Array.isArray(m)?g.push(...m):m&&g.push(m),f&&g.push(f),{...p,"sentry-trace":u,baggage:g.length>0?g.join(","):void 0}}else return{"sentry-trace":u,baggage:f}}function jj(n){try{return new URL(n).href}catch{return}}function Yj(n,e){if(e.response){dH(n,e.response.status);const t=e.response&&e.response.headers&&e.response.headers.get("content-length");if(t){const r=parseInt(t);r>0&&n.setAttribute("http.response_content_length",r)}}else e.error&&n.setStatus({code:si,message:"internal_error"});n.end()}function Jj(n,e={},t=Fn()){const{message:r,name:i,email:s,url:o,source:a,associatedEventId:l,tags:c}=n,u={contexts:{feedback:Gr({contact_email:s,name:i,message:r,url:o,source:a,associated_event_id:l})},type:"feedback",level:"info",tags:c},f=t&&t.getClient()||Zt();return f&&f.emit("beforeSendFeedback",u,e),t.captureEvent(u,e)}const Ft=pn;let yC=0;function NH(){return yC>0}function Kj(){yC++,setTimeout(()=>{yC--})}function rp(n,e={},t){if(typeof n!="function")return n;try{const i=n.__sentry_wrapped__;if(i)return i;if(kR(n))return n}catch{return n}const r=function(){const i=Array.prototype.slice.call(arguments);try{const s=i.map(o=>rp(o,e));return n.apply(this,s)}catch(s){throw Kj(),zR(o=>{o.addEventProcessor(a=>(e.mechanism&&(cC(a,void 0),t_(a,e.mechanism)),a.extra={...a.extra,arguments:i},a)),XR(s)}),s}};try{for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}catch{}WU(r,n),Uo(n,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return n.name}})}catch{}return r}const da=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function jR(n,e){const t=YR(n,e),r={type:e&&e.name,value:eY(e)};return t.length&&(r.stacktrace={frames:t}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function $j(n,e,t,r){const i=Zt(),s=i&&i.getOptions().normalizeDepth,o=sY(e),a={__serialized__:nH(e,s)};if(o)return{exception:{values:[jR(n,o)]},extra:a};const l={exception:{values:[{type:N1(e)?e.constructor.name:r?"UnhandledRejection":"Error",value:rY(e,{isUnhandledRejection:r})}]},extra:a};if(t){const c=YR(n,t);c.length&&(l.exception.values[0].stacktrace={frames:c})}return l}function ww(n,e){return{exception:{values:[jR(n,e)]}}}function YR(n,e){const t=e.stacktrace||e.stack||"",r=Qj(e),i=Zj(e);try{return n(t,r,i)}catch{}return[]}const qj=/Minified React error #\d+;/i;function Qj(n){return n&&qj.test(n.message)?1:0}function Zj(n){return typeof n.framesToPop=="number"?n.framesToPop:0}function eY(n){const e=n&&n.message;return e?e.error&&typeof e.error.message=="string"?e.error.message:e:"No error message"}function tY(n,e,t,r){const i=t&&t.syntheticException||void 0,s=JR(n,e,i,r);return t_(s),s.level="error",t&&t.event_id&&(s.event_id=t.event_id),Gl(s)}function nY(n,e,t="info",r,i){const s=r&&r.syntheticException||void 0,o=xC(n,e,s,i);return o.level=t,r&&r.event_id&&(o.event_id=r.event_id),Gl(o)}function JR(n,e,t,r,i){let s;if(HU(e)&&e.error)return ww(n,e.error);if(OB(e)||JW(e)){const o=e;if("stack"in e)s=ww(n,e);else{const a=o.name||(OB(o)?"DOMError":"DOMException"),l=o.message?`${a}: ${o.message}`:a;s=xC(n,l,t,r),cC(s,l)}return"code"in o&&(s.tags={...s.tags,"DOMException.code":`${o.code}`}),s}return DR(e)?ww(n,e):ep(e)||N1(e)?(s=$j(n,e,t,i),t_(s,{synthetic:!0}),s):(s=xC(n,e,t,r),cC(s,`${e}`),t_(s,{synthetic:!0}),s)}function xC(n,e,t,r){const i={};if(r&&t){const s=YR(n,t);s.length&&(i.exception={values:[{value:e,stacktrace:{frames:s}}]})}if(BR(e)){const{__sentry_template_string__:s,__sentry_template_values__:o}=e;return i.logentry={message:s,params:o},i}return i.message=e,i}function rY(n,{isUnhandledRejection:e}){const t=d7(n),r=e?"promise rejection":"exception";return HU(n)?`Event \`ErrorEvent\` captured as ${r} with message \`${n.message}\``:N1(n)?`Event \`${iY(n)}\` (type=${n.type}) captured as ${r}`:`Object captured as ${r} with keys: ${t}`}function iY(n){try{const e=Object.getPrototypeOf(n);return e?e.constructor.name:void 0}catch{}}function sY(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const t=n[e];if(t instanceof Error)return t}}function oY(n,{metadata:e,tunnel:t,dsn:r}){const i={event_id:n.event_id,sent_at:new Date().toISOString(),...e&&e.sdk&&{sdk:{name:e.sdk.name,version:e.sdk.version}},...!!t&&!!r&&{dsn:z_(r)}},s=aY(n);return ed(i,[s])}function aY(n){return[{type:"user_report"},n]}class lY extends uj{constructor(e){const t={parentSpanIsAlwaysRootSpan:!0,...e},r=Ft.SENTRY_SDK_SOURCE||C7();DH(t,"browser",["browser"],r),super(t),t.sendClientReports&&Ft.document&&Ft.document.addEventListener("visibilitychange",()=>{Ft.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(e,t){return tY(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",r){return nY(this._options.stackParser,e,t,r,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled()){da&&qe.warn("SDK not enabled, will not capture user feedback.");return}const t=oY(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(t)}_prepareEvent(e,t,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,r)}}const eo=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,cY=(n,e)=>n>e[1]?"poor":n>e[0]?"needs-improvement":"good",kp=(n,e,t,r)=>{let i,s;return o=>{e.value>=0&&(o||r)&&(s=e.value-(i||0),(s||i===void 0)&&(i=e.value,e.delta=s,e.rating=cY(e.value,t),n(e)))}},zt=pn,uY=()=>`v3-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,W_=()=>zt.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],z1=()=>{const n=W_();return n&&n.activationStart||0},Fp=(n,e)=>{const t=W_();let r="navigate";return t&&(zt.document&&zt.document.prerendering||z1()>0?r="prerender":zt.document&&zt.document.wasDiscarded?r="restore":t.type&&(r=t.type.replace(/_/g,"-"))),{name:n,value:typeof e>"u"?-1:e,rating:"good",delta:0,entries:[],id:uY(),navigationType:r}},rd=(n,e,t)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(n)){const r=new PerformanceObserver(i=>{Promise.resolve().then(()=>{e(i.getEntries())})});return r.observe(Object.assign({type:n,buffered:!0},t||{})),r}}catch{}},X_=n=>{const e=t=>{(t.type==="pagehide"||zt.document&&zt.document.visibilityState==="hidden")&&n(t)};zt.document&&(addEventListener("visibilitychange",e,!0),addEventListener("pagehide",e,!0))},KR=n=>{let e=!1;return t=>{e||(n(t),e=!0)}};let r_=-1;const fY=()=>{r_=zt.document.visibilityState==="hidden"&&!zt.document.prerendering?0:1/0},gS=n=>{zt.document.visibilityState==="hidden"&&r_>-1&&(r_=n.type==="visibilitychange"?n.timeStamp:0,removeEventListener("visibilitychange",gS,!0),removeEventListener("prerenderingchange",gS,!0))},dY=()=>{addEventListener("visibilitychange",gS,!0),addEventListener("prerenderingchange",gS,!0)},G1=()=>(zt.document&&r_<0&&(fY(),dY()),{get firstHiddenTime(){return r_}}),j_=n=>{zt.document&&zt.document.prerendering?addEventListener("prerenderingchange",()=>n(),!0):n()},hY=[1800,3e3],pY=(n,e={})=>{j_(()=>{const t=G1(),r=Fp("FCP");let i;const o=rd("paint",a=>{a.forEach(l=>{l.name==="first-contentful-paint"&&(o.disconnect(),l.startTime<t.firstHiddenTime&&(r.value=Math.max(l.startTime-z1(),0),r.entries.push(l),i(!0)))})});o&&(i=kp(n,r,hY,e.reportAllChanges))})},mY=[.1,.25],gY=(n,e={})=>{pY(KR(()=>{const t=Fp("CLS",0);let r,i=0,s=[];const o=l=>{l.forEach(c=>{if(!c.hadRecentInput){const u=s[0],f=s[s.length-1];i&&u&&f&&c.startTime-f.startTime<1e3&&c.startTime-u.startTime<5e3?(i+=c.value,s.push(c)):(i=c.value,s=[c])}}),i>t.value&&(t.value=i,t.entries=s,r())},a=rd("layout-shift",o);a&&(r=kp(n,t,mY,e.reportAllChanges),X_(()=>{o(a.takeRecords()),r(!0)}),setTimeout(r,0))}))},_Y=[100,300],vY=(n,e={})=>{j_(()=>{const t=G1(),r=Fp("FID");let i;const s=l=>{l.startTime<t.firstHiddenTime&&(r.value=l.processingStart-l.startTime,r.entries.push(l),i(!0))},o=l=>{l.forEach(s)},a=rd("first-input",o);i=kp(n,r,_Y,e.reportAllChanges),a&&X_(KR(()=>{o(a.takeRecords()),a.disconnect()}))})};let kH=0,Mw=1/0,Bv=0;const yY=n=>{n.forEach(e=>{e.interactionId&&(Mw=Math.min(Mw,e.interactionId),Bv=Math.max(Bv,e.interactionId),kH=Bv?(Bv-Mw)/7+1:0)})};let SC;const xY=()=>SC?kH:performance.interactionCount||0,SY=()=>{"interactionCount"in performance||SC||(SC=rd("event",yY,{type:"event",buffered:!0,durationThreshold:0}))},EY=[200,500],AY=0,FH=()=>xY()-AY,SL=10,yl=[],Tw={},EL=n=>{const e=yl[yl.length-1],t=Tw[n.interactionId];if(t||yl.length<SL||e&&n.duration>e.latency){if(t)t.entries.push(n),t.latency=Math.max(t.latency,n.duration);else{const r={id:n.interactionId,latency:n.duration,entries:[n]};Tw[r.id]=r,yl.push(r)}yl.sort((r,i)=>i.latency-r.latency),yl.splice(SL).forEach(r=>{delete Tw[r.id]})}},wY=()=>{const n=Math.min(yl.length-1,Math.floor(FH()/50));return yl[n]},MY=(n,e={})=>{j_(()=>{SY();const t=Fp("INP");let r;const i=o=>{o.forEach(l=>{l.interactionId&&EL(l),l.entryType==="first-input"&&!yl.some(u=>u.entries.some(f=>l.duration===f.duration&&l.startTime===f.startTime))&&EL(l)});const a=wY();a&&a.latency!==t.value&&(t.value=a.latency,t.entries=a.entries,r())},s=rd("event",i,{durationThreshold:e.durationThreshold!=null?e.durationThreshold:40});r=kp(n,t,EY,e.reportAllChanges),s&&("PerformanceEventTiming"in zt&&"interactionId"in PerformanceEventTiming.prototype&&s.observe({type:"first-input",buffered:!0}),X_(()=>{i(s.takeRecords()),t.value<0&&FH()>0&&(t.value=0,t.entries=[]),r(!0)}))})},TY=[2500,4e3],AL={},CY=(n,e={})=>{j_(()=>{const t=G1(),r=Fp("LCP");let i;const s=a=>{const l=a[a.length-1];l&&l.startTime<t.firstHiddenTime&&(r.value=Math.max(l.startTime-z1(),0),r.entries=[l],i())},o=rd("largest-contentful-paint",s);if(o){i=kp(n,r,TY,e.reportAllChanges);const a=KR(()=>{AL[r.id]||(s(o.takeRecords()),o.disconnect(),AL[r.id]=!0,i(!0))});["keydown","click"].forEach(l=>{zt.document&&addEventListener(l,()=>setTimeout(a,0),!0)}),X_(a)}})},bY=[800,1800],EC=n=>{zt.document&&zt.document.prerendering?j_(()=>EC(n)):zt.document&&zt.document.readyState!=="complete"?addEventListener("load",()=>EC(n),!0):setTimeout(n,0)},RY=(n,e={})=>{const t=Fp("TTFB"),r=kp(n,t,bY,e.reportAllChanges);EC(()=>{const i=W_();if(i){const s=i.responseStart;if(s<=0||s>performance.now())return;t.value=Math.max(s-z1(),0),t.entries=[i],r(!0)}})},fg={},_S={};let OH,UH,HH,zH,GH;function $R(n,e=!1){return Y_("cls",n,PY,OH,e)}function VH(n,e=!1){return Y_("lcp",n,BY,HH,e)}function WH(n){return Y_("fid",n,DY,UH)}function IY(n){return Y_("ttfb",n,LY,zH)}function XH(n){return Y_("inp",n,NY,GH)}function ip(n,e){return jH(n,e),_S[n]||(kY(n),_S[n]=!0),YH(n,e)}function Op(n,e){const t=fg[n];if(!(!t||!t.length))for(const r of t)try{r(e)}catch(i){eo&&qe.error(`Error while triggering instrumentation handler.
Type: ${n}
Name: ${zl(r)}
Error:`,i)}}function PY(){return gY(n=>{Op("cls",{metric:n}),OH=n},{reportAllChanges:!0})}function DY(){return vY(n=>{Op("fid",{metric:n}),UH=n})}function BY(){return CY(n=>{Op("lcp",{metric:n}),HH=n},{reportAllChanges:!0})}function LY(){return RY(n=>{Op("ttfb",{metric:n}),zH=n})}function NY(){return MY(n=>{Op("inp",{metric:n}),GH=n})}function Y_(n,e,t,r,i=!1){jH(n,e);let s;return _S[n]||(s=t(),_S[n]=!0),r&&e({metric:r}),YH(n,e,i?s:void 0)}function kY(n){const e={};n==="event"&&(e.durationThreshold=0),rd(n,t=>{Op(n,{entries:t})},e)}function jH(n,e){fg[n]=fg[n]||[],fg[n].push(e)}function YH(n,e,t){return()=>{t&&t();const r=fg[n];if(!r)return;const i=r.indexOf(e);i!==-1&&r.splice(i,1)}}function FY(n){return"duration"in n}function Cw(n){return typeof n=="number"&&isFinite(n)}function sp(n,e,t,{...r}){const i=xn(n).start_timestamp;return i&&i>e&&typeof n.updateStartTime=="function"&&n.updateStartTime(e),pS(n,()=>{const s=ca({startTime:e,...r});return s&&s.end(t),s})}function JH(n){const e=Zt();if(!e)return;const{name:t,transaction:r,attributes:i,startTime:s}=n,{release:o,environment:a}=e.getOptions(),l=e.getIntegrationByName("Replay"),c=l&&l.getReplayId(),u=Fn(),f=u.getUser(),p=f!==void 0?f.email||f.id||f.ip_address:void 0;let m;try{m=u.getScopeData().contexts.profile.profile_id}catch{}const g={release:o,environment:a,user:p||void 0,profile_id:m||void 0,replay_id:c||void 0,transaction:r,"user_agent.original":zt.navigator&&zt.navigator.userAgent,...i};return ca({name:t,attributes:g,startTime:s,experimental:{standalone:!0}})}function qR(){return zt&&zt.addEventListener&&zt.performance}function Dr(n){return n/1e3}function OY(){let n=0,e,t;if(!HY())return;let r=!1;function i(){r||(r=!0,t&&UY(n,e,t),s())}const s=$R(({metric:o})=>{const a=o.entries[o.entries.length-1];a&&(n=o.value,e=a)},!0);X_(()=>{i()}),setTimeout(()=>{const o=Zt(),a=js([o,"optionalAccess",f=>f.on,"call",f=>f("startNavigationSpan",()=>{i(),a&&a()})]),l=zi(),c=l&&yi(l),u=c&&xn(c);u&&u.op==="pageload"&&(t=c.spanContext().spanId)},0)}function UY(n,e,t){eo&&qe.log(`Sending CLS span (${n})`);const r=Dr((ls||0)+(js([e,"optionalAccess",l=>l.startTime])||0)),i=Fn().getScopeData().transactionName,s=e?Hl(js([e,"access",l=>l.sources,"access",l=>l[0],"optionalAccess",l=>l.node])):"Layout shift",o=Gr({[Cr]:"auto.http.browser.cls",[qc]:"ui.webvital.cls",[GR]:js([e,"optionalAccess",l=>l.duration])||0,"sentry.pageload.span_id":t}),a=JH({name:s,transaction:i,attributes:o,startTime:r});js([a,"optionalAccess",l=>l.addEvent,"call",l=>l("cls",{[O1]:"",[U1]:n})]),js([a,"optionalAccess",l=>l.end,"call",l=>l(r)])}function HY(){try{return js([PerformanceObserver,"access",n=>n.supportedEntryTypes,"optionalAccess",n=>n.includes,"call",n=>n("layout-shift")])}catch{return!1}}const zY=2147483647;let wL=0,mi={},Ra,dg;function GY({recordClsStandaloneSpans:n}){const e=qR();if(e&&ls){e.mark&&zt.performance.mark("sentry-tracing-init");const t=JY(),r=YY(),i=KY(),s=n?OY():jY();return()=>{t(),r(),i(),s&&s()}}return()=>{}}function VY(){ip("longtask",({entries:n})=>{if(zi())for(const e of n){const t=Dr(ls+e.startTime),r=Dr(e.duration),i=ca({name:"Main UI thread blocked",op:"ui.long-task",startTime:t,attributes:{[Cr]:"auto.ui.browser.metrics"}});i&&i.end(t+r)}})}function WY(){new PerformanceObserver(e=>{if(zi())for(const t of e.getEntries()){if(!t.scripts[0])continue;const r=Dr(ls+t.startTime),i=Dr(t.duration),s={[Cr]:"auto.ui.browser.metrics"},o=t.scripts[0],{invoker:a,invokerType:l,sourceURL:c,sourceFunctionName:u,sourceCharPosition:f}=o;s["browser.script.invoker"]=a,s["browser.script.invoker_type"]=l,c&&(s["code.filepath"]=c),u&&(s["code.function"]=u),f!==-1&&(s["browser.script.source_char_position"]=f);const p=ca({name:"Main UI thread blocked",op:"ui.long-animation-frame",startTime:r,attributes:s});p&&p.end(r+i)}}).observe({type:"long-animation-frame",buffered:!0})}function XY(){ip("event",({entries:n})=>{if(zi()){for(const e of n)if(e.name==="click"){const t=Dr(ls+e.startTime),r=Dr(e.duration),i={name:Hl(e.target),op:`ui.interaction.${e.name}`,startTime:t,attributes:{[Cr]:"auto.ui.browser.metrics"}},s=GU(e.target);s&&(i.attributes["ui.component_name"]=s);const o=ca(i);o&&o.end(t+r)}}})}function jY(){return $R(({metric:n})=>{const e=n.entries[n.entries.length-1];e&&(eo&&qe.log(`[Measurements] Adding CLS ${n.value}`),mi.cls={value:n.value,unit:""},dg=e)},!0)}function YY(){return VH(({metric:n})=>{const e=n.entries[n.entries.length-1];e&&(eo&&qe.log("[Measurements] Adding LCP"),mi.lcp={value:n.value,unit:"millisecond"},Ra=e)},!0)}function JY(){return WH(({metric:n})=>{const e=n.entries[n.entries.length-1];if(!e)return;const t=Dr(ls),r=Dr(e.startTime);eo&&qe.log("[Measurements] Adding FID"),mi.fid={value:n.value,unit:"millisecond"},mi["mark.fid"]={value:t+r,unit:"second"}})}function KY(){return IY(({metric:n})=>{n.entries[n.entries.length-1]&&(eo&&qe.log("[Measurements] Adding TTFB"),mi.ttfb={value:n.value,unit:"millisecond"})})}function $Y(n,e){const t=qR();if(!t||!zt.performance.getEntries||!ls)return;eo&&qe.log("[Tracing] Adding & adjusting spans using Performance API");const r=Dr(ls),i=t.getEntries(),{op:s,start_timestamp:o}=xn(n);if(i.slice(wL).forEach(a=>{const l=Dr(a.startTime),c=Dr(Math.max(0,a.duration));if(!(s==="navigation"&&o&&r+l<o))switch(a.entryType){case"navigation":{QY(n,a,r);break}case"mark":case"paint":case"measure":{qY(n,a,l,c,r);const u=G1(),f=a.startTime<u.firstHiddenTime;a.name==="first-paint"&&f&&(eo&&qe.log("[Measurements] Adding FP"),mi.fp={value:a.startTime,unit:"millisecond"}),a.name==="first-contentful-paint"&&f&&(eo&&qe.log("[Measurements] Adding FCP"),mi.fcp={value:a.startTime,unit:"millisecond"});break}case"resource":{eJ(n,a,a.name,l,c,r);break}}}),wL=Math.max(i.length-1,0),tJ(n),s==="pageload"){rJ(mi);const a=mi["mark.fid"];a&&mi.fid&&(sp(n,a.value,a.value+Dr(mi.fid.value),{name:"first input delay",op:"ui.action",attributes:{[Cr]:"auto.ui.browser.metrics"}}),delete mi["mark.fid"]),(!("fcp"in mi)||!e.recordClsOnPageloadSpan)&&delete mi.cls,Object.entries(mi).forEach(([l,c])=>{PX(l,c.value,c.unit)}),n.setAttribute("performance.timeOrigin",r),nJ(n)}Ra=void 0,dg=void 0,mi={}}function qY(n,e,t,r,i){const s=W_(),o=Dr(s?s.requestStart:0),a=i+Math.max(t,o),l=i+t,c=l+r,u={[Cr]:"auto.resource.browser.metrics"};return a!==l&&(u["sentry.browser.measure_happened_before_request"]=!0,u["sentry.browser.measure_start_time"]=a),sp(n,a,c,{name:e.name,op:e.entryType,attributes:u}),a}function QY(n,e,t){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{Lv(n,e,r,t)}),Lv(n,e,"secureConnection",t,"TLS/SSL","connectEnd"),Lv(n,e,"fetch",t,"cache","domainLookupStart"),Lv(n,e,"domainLookup",t,"DNS"),ZY(n,e,t)}function Lv(n,e,t,r,i,s){const o=s?e[s]:e[`${t}End`],a=e[`${t}Start`];!a||!o||sp(n,r+Dr(a),r+Dr(o),{op:"browser",name:i||t,attributes:{[Cr]:"auto.ui.browser.metrics"}})}function ZY(n,e,t){const r=t+Dr(e.requestStart),i=t+Dr(e.responseEnd),s=t+Dr(e.responseStart);e.responseEnd&&(sp(n,r,i,{op:"browser",name:"request",attributes:{[Cr]:"auto.ui.browser.metrics"}}),sp(n,s,i,{op:"browser",name:"response",attributes:{[Cr]:"auto.ui.browser.metrics"}}))}function eJ(n,e,t,r,i,s){if(e.initiatorType==="xmlhttprequest"||e.initiatorType==="fetch")return;const o=_f(t),a={[Cr]:"auto.resource.browser.metrics"};bw(a,e,"transferSize","http.response_transfer_size"),bw(a,e,"encodedBodySize","http.response_content_length"),bw(a,e,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in e&&(a["resource.render_blocking_status"]=e.renderBlockingStatus),o.protocol&&(a["url.scheme"]=o.protocol.split(":").pop()),o.host&&(a["server.address"]=o.host),a["url.same_origin"]=t.includes(zt.location.origin);const l=s+r,c=l+i;sp(n,l,c,{name:t.replace(zt.location.origin,""),op:e.initiatorType?`resource.${e.initiatorType}`:"resource.other",attributes:a})}function tJ(n){const e=zt.navigator;if(!e)return;const t=e.connection;t&&(t.effectiveType&&n.setAttribute("effectiveConnectionType",t.effectiveType),t.type&&n.setAttribute("connectionType",t.type),Cw(t.rtt)&&(mi["connection.rtt"]={value:t.rtt,unit:"millisecond"})),Cw(e.deviceMemory)&&n.setAttribute("deviceMemory",`${e.deviceMemory} GB`),Cw(e.hardwareConcurrency)&&n.setAttribute("hardwareConcurrency",String(e.hardwareConcurrency))}function nJ(n){Ra&&(eo&&qe.log("[Measurements] Adding LCP Data"),Ra.element&&n.setAttribute("lcp.element",Hl(Ra.element)),Ra.id&&n.setAttribute("lcp.id",Ra.id),Ra.url&&n.setAttribute("lcp.url",Ra.url.trim().slice(0,200)),n.setAttribute("lcp.size",Ra.size)),dg&&dg.sources&&(eo&&qe.log("[Measurements] Adding CLS Data"),dg.sources.forEach((e,t)=>n.setAttribute(`cls.source.${t+1}`,Hl(e.node))))}function bw(n,e,t,r){const i=e[t];i!=null&&i<zY&&(n[r]=i)}function rJ(n){const e=W_();if(!e)return;const{responseStart:t,requestStart:r}=e;r<=t&&(eo&&qe.log("[Measurements] Adding TTFB Request Time"),n["ttfb.requestTime"]={value:t-r,unit:"millisecond"})}const iJ=1e3;let ML,AC,wC;function KH(n){const e="dom";uu(e,n),fu(e,sJ)}function sJ(){if(!zt.document)return;const n=No.bind(null,"dom"),e=TL(n,!0);zt.document.addEventListener("click",e,!1),zt.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(t=>{const r=zt[t]&&zt[t].prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(xs(r,"addEventListener",function(i){return function(s,o,a){if(s==="click"||s=="keypress")try{const l=this,c=l.__sentry_instrumentation_handlers__=l.__sentry_instrumentation_handlers__||{},u=c[s]=c[s]||{refCount:0};if(!u.handler){const f=TL(n);u.handler=f,i.call(this,s,f,a)}u.refCount++}catch{}return i.call(this,s,o,a)}}),xs(r,"removeEventListener",function(i){return function(s,o,a){if(s==="click"||s=="keypress")try{const l=this,c=l.__sentry_instrumentation_handlers__||{},u=c[s];u&&(u.refCount--,u.refCount<=0&&(i.call(this,s,u.handler,a),u.handler=void 0,delete c[s]),Object.keys(c).length===0&&delete l.__sentry_instrumentation_handlers__)}catch{}return i.call(this,s,o,a)}}))})}function oJ(n){if(n.type!==AC)return!1;try{if(!n.target||n.target._sentryId!==wC)return!1}catch{}return!0}function aJ(n,e){return n!=="keypress"?!1:!e||!e.tagName?!0:!(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable)}function TL(n,e=!1){return t=>{if(!t||t._sentryCaptured)return;const r=lJ(t);if(aJ(t.type,r))return;Uo(t,"_sentryCaptured",!0),r&&!r._sentryId&&Uo(r,"_sentryId",or());const i=t.type==="keypress"?"input":t.type;oJ(t)||(n({event:t,name:i,global:e}),AC=t.type,wC=r?r._sentryId:void 0),clearTimeout(ML),ML=zt.setTimeout(()=>{wC=void 0,AC=void 0},iJ)}}function lJ(n){try{return n.target}catch{return null}}let Nv;function V1(n){const e="history";uu(e,n),fu(e,cJ)}function cJ(){if(!nX())return;const n=zt.onpopstate;zt.onpopstate=function(...t){const r=zt.location.href,i=Nv;if(Nv=r,No("history",{from:i,to:r}),n)try{return n.apply(this,t)}catch{}};function e(t){return function(...r){const i=r.length>2?r[2]:void 0;if(i){const s=Nv,o=String(i);Nv=o,No("history",{from:s,to:o})}return t.apply(this,r)}}xs(zt.history,"pushState",e),xs(zt.history,"replaceState",e)}const vx={};function $H(n){const e=vx[n];if(e)return e;let t=zt[n];if(oC(t))return vx[n]=t.bind(zt);const r=zt.document;if(r&&typeof r.createElement=="function")try{const i=r.createElement("iframe");i.hidden=!0,r.head.appendChild(i);const s=i.contentWindow;s&&s[n]&&(t=s[n]),r.head.removeChild(i)}catch(i){eo&&qe.warn(`Could not create sandbox iframe for ${n} check, bailing to window.${n}: `,i)}return t&&(vx[n]=t.bind(zt))}function CL(n){vx[n]=void 0}function op(...n){return $H("setTimeout")(...n)}const nf="__sentry_xhr_v3__";function qH(n){const e="xhr";uu(e,n),fu(e,uJ)}function uJ(){if(!zt.XMLHttpRequest)return;const n=XMLHttpRequest.prototype;n.open=new Proxy(n.open,{apply(e,t,r){const i=vi()*1e3,s=Pl(r[0])?r[0].toUpperCase():void 0,o=fJ(r[1]);if(!s||!o)return e.apply(t,r);t[nf]={method:s,url:o,request_headers:{}},s==="POST"&&o.match(/sentry_key/)&&(t.__sentry_own_request__=!0);const a=()=>{const l=t[nf];if(l&&t.readyState===4){try{l.status_code=t.status}catch{}const c={endTimestamp:vi()*1e3,startTimestamp:i,xhr:t};No("xhr",c)}};return"onreadystatechange"in t&&typeof t.onreadystatechange=="function"?t.onreadystatechange=new Proxy(t.onreadystatechange,{apply(l,c,u){return a(),l.apply(c,u)}}):t.addEventListener("readystatechange",a),t.setRequestHeader=new Proxy(t.setRequestHeader,{apply(l,c,u){const[f,p]=u,m=c[nf];return m&&Pl(f)&&Pl(p)&&(m.request_headers[f.toLowerCase()]=p),l.apply(c,u)}}),e.apply(t,r)}}),n.send=new Proxy(n.send,{apply(e,t,r){const i=t[nf];if(!i)return e.apply(t,r);r[0]!==void 0&&(i.body=r[0]);const s={startTimestamp:vi()*1e3,xhr:t};return No("xhr",s),e.apply(t,r)}})}function fJ(n){if(Pl(n))return n;try{return n.toString()}catch{}}const Rw=[],yx=new Map;function dJ(){if(qR()&&ls){const e=hJ();return()=>{e()}}return()=>{}}const bL={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function hJ(){return XH(({metric:n})=>{if(n.value==null)return;const e=n.entries.find(g=>g.duration===n.value&&bL[g.name]);if(!e)return;const{interactionId:t}=e,r=bL[e.name],i=Dr(ls+e.startTime),s=Dr(n.value),o=zi(),a=o?yi(o):void 0,c=(t!=null?yx.get(t):void 0)||a,u=c?xn(c).description:Fn().getScopeData().transactionName,f=Hl(e.target),p=Gr({[Cr]:"auto.http.browser.inp",[qc]:`ui.interaction.${r}`,[GR]:e.duration}),m=JH({name:f,transaction:u,attributes:p,startTime:i});js([m,"optionalAccess",g=>g.addEvent,"call",g=>g("inp",{[O1]:"millisecond",[U1]:n.value})]),js([m,"optionalAccess",g=>g.end,"call",g=>g(i+s)])})}function pJ(n){const e=({entries:t})=>{const r=zi(),i=r&&yi(r);t.forEach(s=>{if(!FY(s)||!i)return;const o=s.interactionId;if(o!=null&&!yx.has(o)){if(Rw.length>10){const a=Rw.shift();yx.delete(a)}Rw.push(o),yx.set(o,i)}})};ip("event",e),ip("first-input",e)}function mJ(n,e=$H("fetch")){let t=0,r=0;function i(s){const o=s.body.length;t+=o,r++;const a={body:s.body,method:"POST",referrerPolicy:"origin",headers:n.headers,keepalive:t<=6e4&&r<15,...n.fetchOptions};if(!e)return CL("fetch"),uS("No fetch implementation available");try{return e(n.url,a).then(l=>(t-=o,r--,{statusCode:l.status,headers:{"x-sentry-rate-limits":l.headers.get("X-Sentry-Rate-Limits"),"retry-after":l.headers.get("Retry-After")}}))}catch(l){return CL("fetch"),t-=o,r--,uS(l)}}return gj(n,i)}const gJ=30,_J=50;function MC(n,e,t,r){const i={filename:n,function:e==="<anonymous>"?Ff:e,in_app:!0};return t!==void 0&&(i.lineno=t),r!==void 0&&(i.colno=r),i}const vJ=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,yJ=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,xJ=/\((\S*)(?::(\d+))(?::(\d+))\)/,SJ=n=>{const e=vJ.exec(n);if(e){const[,r,i,s]=e;return MC(r,Ff,+i,+s)}const t=yJ.exec(n);if(t){if(t[2]&&t[2].indexOf("eval")===0){const o=xJ.exec(t[2]);o&&(t[2]=o[1],t[3]=o[2],t[4]=o[3])}const[i,s]=QH(t[1]||Ff,t[2]);return MC(s,i,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}},EJ=[gJ,SJ],AJ=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,wJ=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,MJ=n=>{const e=AJ.exec(n);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const s=wJ.exec(e[3]);s&&(e[1]=e[1]||"eval",e[3]=s[1],e[4]=s[2],e[5]="")}let r=e[3],i=e[1]||Ff;return[i,r]=QH(i,r),MC(r,i,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}},TJ=[_J,MJ],CJ=[EJ,TJ],bJ=YU(...CJ),QH=(n,e)=>{const t=n.indexOf("safari-extension")!==-1,r=n.indexOf("safari-web-extension")!==-1;return t||r?[n.indexOf("@")!==-1?n.split("@")[0]:Ff,t?`safari-extension:${e}`:`safari-web-extension:${e}`]:[n,e]},kv=1024,RJ="Breadcrumbs",IJ=(n={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...n};return{name:RJ,setup(t){e.console&&g7(LJ(t)),e.dom&&KH(BJ(t,e.dom)),e.xhr&&qH(NJ(t)),e.fetch&&$U(kJ(t)),e.history&&V1(FJ(t)),e.sentry&&t.on("beforeSendEvent",DJ(t))}}},PJ=IJ;function DJ(n){return function(t){Zt()===n&&Zc({category:`sentry.${t.type==="transaction"?"transaction":"event"}`,event_id:t.event_id,level:t.level,message:_c(t)},{event:t})}}function BJ(n,e){return function(r){if(Zt()!==n)return;let i,s,o=typeof e=="object"?e.serializeAttribute:void 0,a=typeof e=="object"&&typeof e.maxStringLength=="number"?e.maxStringLength:void 0;a&&a>kv&&(da&&qe.warn(`\`dom.maxStringLength\` cannot exceed ${kv}, but a value of ${a} was configured. Sentry will use ${kv} instead.`),a=kv),typeof o=="string"&&(o=[o]);try{const c=r.event,u=OJ(c)?c.target:c;i=Hl(u,{keyAttrs:o,maxStringLength:a}),s=GU(u)}catch{i="<unknown>"}if(i.length===0)return;const l={category:`ui.${r.name}`,message:i};s&&(l.data={"ui.component_name":s}),Zc(l,{event:r.event,name:r.name,global:r.global})}}function LJ(n){return function(t){if(Zt()!==n)return;const r={category:"console",data:{arguments:t.args,logger:"console"},level:F7(t.level),message:UB(t.args," ")};if(t.level==="assert")if(t.args[0]===!1)r.message=`Assertion failed: ${UB(t.args.slice(1)," ")||"console.assert"}`,r.data.arguments=t.args.slice(1);else return;Zc(r,{input:t.args,level:t.level})}}function NJ(n){return function(t){if(Zt()!==n)return;const{startTimestamp:r,endTimestamp:i}=t,s=t.xhr[nf];if(!r||!i||!s)return;const{method:o,url:a,status_code:l,body:c}=s,u={method:o,url:a,status_code:l},f={xhr:t.xhr,input:c,startTimestamp:r,endTimestamp:i};Zc({category:"xhr",data:u,type:"http"},f)}}function kJ(n){return function(t){if(Zt()!==n)return;const{startTimestamp:r,endTimestamp:i}=t;if(i&&!(t.fetchData.url.match(/sentry_key/)&&t.fetchData.method==="POST"))if(t.error){const s=t.fetchData,o={data:t.error,input:t.args,startTimestamp:r,endTimestamp:i};Zc({category:"fetch",data:s,level:"error",type:"http"},o)}else{const s=t.response,o={...t.fetchData,status_code:s&&s.status},a={input:t.args,response:s,startTimestamp:r,endTimestamp:i};Zc({category:"fetch",data:o,type:"http"},a)}}}function FJ(n){return function(t){if(Zt()!==n)return;let r=t.from,i=t.to;const s=_f(Ft.location.href);let o=r?_f(r):void 0;const a=_f(i);(!o||!o.path)&&(o=s),s.protocol===a.protocol&&s.host===a.host&&(i=a.relative),s.protocol===o.protocol&&s.host===o.host&&(r=o.relative),Zc({category:"navigation",data:{from:r,to:i}})}}function OJ(n){return!!n&&!!n.target}const UJ=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],HJ="BrowserApiErrors",zJ=(n={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...n};return{name:HJ,setupOnce(){e.setTimeout&&xs(Ft,"setTimeout",RL),e.setInterval&&xs(Ft,"setInterval",RL),e.requestAnimationFrame&&xs(Ft,"requestAnimationFrame",VJ),e.XMLHttpRequest&&"XMLHttpRequest"in Ft&&xs(XMLHttpRequest.prototype,"send",WJ);const t=e.eventTarget;t&&(Array.isArray(t)?t:UJ).forEach(XJ)}}},GJ=zJ;function RL(n){return function(...e){const t=e[0];return e[0]=rp(t,{mechanism:{data:{function:zl(n)},handled:!1,type:"instrument"}}),n.apply(this,e)}}function VJ(n){return function(e){return n.apply(this,[rp(e,{mechanism:{data:{function:"requestAnimationFrame",handler:zl(n)},handled:!1,type:"instrument"}})])}}function WJ(n){return function(...e){const t=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(i=>{i in t&&typeof t[i]=="function"&&xs(t,i,function(s){const o={mechanism:{data:{function:i,handler:zl(s)},handled:!1,type:"instrument"}},a=kR(s);return a&&(o.mechanism.data.handler=zl(a)),rp(s,o)})}),n.apply(this,e)}}function XJ(n){const e=Ft,t=e[n]&&e[n].prototype;!t||!t.hasOwnProperty||!t.hasOwnProperty("addEventListener")||(xs(t,"addEventListener",function(r){return function(i,s,o){try{typeof s.handleEvent=="function"&&(s.handleEvent=rp(s.handleEvent,{mechanism:{data:{function:"handleEvent",handler:zl(s),target:n},handled:!1,type:"instrument"}}))}catch{}return r.apply(this,[i,rp(s,{mechanism:{data:{function:"addEventListener",handler:zl(s),target:n},handled:!1,type:"instrument"}}),o])}}),xs(t,"removeEventListener",function(r){return function(i,s,o){const a=s;try{const l=a&&a.__sentry_wrapped__;l&&r.call(this,i,l,o)}catch{}return r.call(this,i,a,o)}}))}const jJ="GlobalHandlers",YJ=(n={})=>{const e={onerror:!0,onunhandledrejection:!0,...n};return{name:jJ,setupOnce(){Error.stackTraceLimit=50},setup(t){e.onerror&&(KJ(t),IL("onerror")),e.onunhandledrejection&&($J(t),IL("onunhandledrejection"))}}},JJ=YJ;function KJ(n){QU(e=>{const{stackParser:t,attachStacktrace:r}=ZH();if(Zt()!==n||NH())return;const{msg:i,url:s,line:o,column:a,error:l}=e,c=ZJ(JR(t,l||i,void 0,r,!1),s,o,a);c.level="error",MH(c,{originalException:l,mechanism:{handled:!1,type:"onerror"}})})}function $J(n){ZU(e=>{const{stackParser:t,attachStacktrace:r}=ZH();if(Zt()!==n||NH())return;const i=qJ(e),s=LR(i)?QJ(i):JR(t,i,void 0,r,!0);s.level="error",MH(s,{originalException:i,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function qJ(n){if(LR(n))return n;try{if("reason"in n)return n.reason;if("detail"in n&&"reason"in n.detail)return n.detail.reason}catch{}return n}function QJ(n){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(n)}`}]}}}function ZJ(n,e,t,r){const i=n.exception=n.exception||{},s=i.values=i.values||[],o=s[0]=s[0]||{},a=o.stacktrace=o.stacktrace||{},l=a.frames=a.frames||[],c=isNaN(parseInt(r,10))?void 0:r,u=isNaN(parseInt(t,10))?void 0:t,f=Pl(e)&&e.length>0?e:NR();return l.length===0&&l.push({colno:c,filename:f,function:Ff,in_app:!0,lineno:u}),n}function IL(n){da&&qe.log(`Global Handler attached: ${n}`)}function ZH(){const n=Zt();return n&&n.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const eK=()=>({name:"HttpContext",preprocessEvent(n){if(!Ft.navigator&&!Ft.location&&!Ft.document)return;const e=n.request&&n.request.url||Ft.location&&Ft.location.href,{referrer:t}=Ft.document||{},{userAgent:r}=Ft.navigator||{},i={...n.request&&n.request.headers,...t&&{Referer:t},...r&&{"User-Agent":r}},s={...n.request,...e&&{url:e},headers:i};n.request=s}}),tK="cause",nK=5,rK="LinkedErrors",iK=(n={})=>{const e=n.limit||nK,t=n.key||tK;return{name:rK,preprocessEvent(r,i,s){const o=s.getOptions();ZW(jR,o.stackParser,o.maxValueLength,t,e,r,i)}}},sK=iK;function oK(n){return[Cj(),Aj(),GJ(),PJ(),JJ(),sK(),Hj(),eK()]}function aK(n={}){const e={defaultIntegrations:oK(),release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:Ft.SENTRY_RELEASE&&Ft.SENTRY_RELEASE.id?Ft.SENTRY_RELEASE.id:void 0,autoSessionTracking:!0,sendClientReports:!0};return n.defaultIntegrations==null&&delete n.defaultIntegrations,{...e,...n}}function lK(){const n=typeof Ft.window<"u"&&Ft;if(!n)return!1;const e=n.chrome?"chrome":"browser",t=n[e],r=t&&t.runtime&&t.runtime.id,i=Ft.location&&Ft.location.href||"",s=["chrome-extension:","moz-extension:","ms-browser-extension:","safari-web-extension:"],o=!!r&&Ft===Ft.top&&s.some(l=>i.startsWith(`${l}//`)),a=typeof n.nw<"u";return!!r&&!o&&!a}function cK(n={}){const e=aK(n);if(lK()){Bp(()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")});return}da&&(JU()||qe.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill."));const t={...e,stackParser:p7(e.stackParser||bJ),integrations:lj(e),transport:e.transport||mJ},r=hj(lY,t);return e.autoSessionTracking&&uK(),r}function uK(){if(typeof Ft.document>"u"){da&&qe.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}fL({ignoreDuration:!0}),dL(),V1(({from:n,to:e})=>{n!==void 0&&n!==e&&(fL({ignoreDuration:!0}),dL())})}const fK={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",debugIntegration:"debug",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",sessionTimingIntegration:"sessiontiming",browserProfilingIntegration:"browserprofiling"},PL=Ft;async function dK(n,e){const t=fK[n],r=PL.Sentry=PL.Sentry||{};if(!t)throw new Error(`Cannot lazy load integration: ${n}`);const i=r[n];if(typeof i=="function"&&!("_isShim"in i))return i;const s=hK(t),o=Ft.document.createElement("script");o.src=s,o.crossOrigin="anonymous",o.referrerPolicy="origin",e&&o.setAttribute("nonce",e);const a=new Promise((c,u)=>{o.addEventListener("load",()=>c()),o.addEventListener("error",u)});Ft.document.body.appendChild(o);try{await a}catch{throw new Error(`Error when loading integration: ${n}`)}const l=r[n];if(typeof l!="function")throw new Error(`Could not load integration: ${n}`);return l}function hK(n){const e=Zt(),t=e&&e.getOptions(),r=t&&t.cdnBaseUrl||"https://browser.sentry-cdn.com";return new URL(`/${Vc}/${n}.min.js`,r).toString()}const Xn=pn,QR="sentryReplaySession",pK="replay_event",ZR="Unable to send Replay",mK=3e5,gK=9e5,_K=5e3,vK=5500,yK=6e4,xK=5e3,SK=3,DL=15e4,Fv=5e3,EK=3e3,AK=300,eI=2e7,wK=4999,MK=15e3,BL=36e5;function TC(n,e){return n??e()}function i_(n){let e,t=n[0],r=1;for(;r<n.length;){const i=n[r],s=n[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&t==null)return;i==="access"||i==="optionalAccess"?(e=t,t=s(t)):(i==="call"||i==="optionalCall")&&(t=s((...o)=>t.call(e,...o)),e=void 0)}return t}var Jr;(function(n){n[n.Document=0]="Document",n[n.DocumentType=1]="DocumentType",n[n.Element=2]="Element",n[n.Text=3]="Text",n[n.CDATA=4]="CDATA",n[n.Comment=5]="Comment"})(Jr||(Jr={}));function TK(n){return n.nodeType===n.ELEMENT_NODE}function hg(n){const e=i_([n,"optionalAccess",t=>t.host]);return i_([e,"optionalAccess",t=>t.shadowRoot])===n}function pg(n){return Object.prototype.toString.call(n)==="[object ShadowRoot]"}function CK(n){return n.includes(" background-clip: text;")&&!n.includes(" -webkit-background-clip: text;")&&(n=n.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),n}function bK(n){const{cssText:e}=n;if(e.split('"').length<3)return e;const t=["@import",`url(${JSON.stringify(n.href)})`];return n.layerName===""?t.push("layer"):n.layerName&&t.push(`layer(${n.layerName})`),n.supportsText&&t.push(`supports(${n.supportsText})`),n.media.length&&t.push(n.media.mediaText),t.join(" ")+";"}function vS(n){try{const e=n.rules||n.cssRules;return e?CK(Array.from(e,e4).join("")):null}catch{return null}}function e4(n){let e;if(IK(n))try{e=vS(n.styleSheet)||bK(n)}catch{}else if(PK(n)&&n.selectorText.includes(":"))return RK(n.cssText);return e||n.cssText}function RK(n){const e=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return n.replace(e,"$1\\$2")}function IK(n){return"styleSheet"in n}function PK(n){return"selectorText"in n}class t4{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){if(!e)return-1;const t=i_([this,"access",r=>r.getMeta,"call",r=>r(e),"optionalAccess",r=>r.id]);return TC(t,()=>-1)}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const r=t.id;this.idNodeMap.set(r,e),this.nodeMetaMap.set(e,t)}replace(e,t){const r=this.getNode(e);if(r){const i=this.nodeMetaMap.get(r);i&&this.nodeMetaMap.set(t,i)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function DK(){return new t4}function W1({maskInputOptions:n,tagName:e,type:t}){return e==="OPTION"&&(e="SELECT"),!!(n[e.toLowerCase()]||t&&n[t]||t==="password"||e==="INPUT"&&!t&&n.text)}function s_({isMasked:n,element:e,value:t,maskInputFn:r}){let i=t||"";return n?(r&&(i=r(i,e)),"*".repeat(i.length)):i}function ap(n){return n.toLowerCase()}function CC(n){return n.toUpperCase()}const LL="__rrweb_original__";function BK(n){const e=n.getContext("2d");if(!e)return!0;const t=50;for(let r=0;r<n.width;r+=t)for(let i=0;i<n.height;i+=t){const s=e.getImageData,o=LL in s?s[LL]:s;if(new Uint32Array(o.call(e,r,i,Math.min(t,n.width-r),Math.min(t,n.height-i)).data.buffer).some(l=>l!==0))return!1}return!0}function tI(n){const e=n.type;return n.hasAttribute("data-rr-is-password")?"password":e?ap(e):null}function yS(n,e,t){return e==="INPUT"&&(t==="radio"||t==="checkbox")?n.getAttribute("value")||"":n.value}function n4(n,e){let t;try{t=new URL(n,TC(e,()=>window.location.href))}catch{return null}const r=/\.([0-9a-z]+)(?:$)/i,i=t.pathname.match(r);return TC(i_([i,"optionalAccess",s=>s[1]]),()=>null)}const NL={};function r4(n){const e=NL[n];if(e)return e;const t=window.document;let r=window[n];if(t&&typeof t.createElement=="function")try{const i=t.createElement("iframe");i.hidden=!0,t.head.appendChild(i);const s=i.contentWindow;s&&s[n]&&(r=s[n]),t.head.removeChild(i)}catch{}return NL[n]=r.bind(window)}function bC(...n){return r4("setTimeout")(...n)}function i4(...n){return r4("clearTimeout")(...n)}let LK=1;const NK=new RegExp("[^a-z0-9-_:]"),o_=-2;function nI(){return LK++}function kK(n){if(n instanceof HTMLFormElement)return"form";const e=ap(n.tagName);return NK.test(e)?"div":e}function FK(n){let e="";return n.indexOf("//")>-1?e=n.split("/").slice(0,3).join("/"):e=n.split("/")[0],e=e.split("?")[0],e}let wd,kL;const OK=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,UK=/^(?:[a-z+]+:)?\/\//i,HK=/^www\..*/i,zK=/^(data:)([^,]*),(.*)/i;function xS(n,e){return(n||"").replace(OK,(t,r,i,s,o,a)=>{const l=i||o||a,c=r||s||"";if(!l)return t;if(UK.test(l)||HK.test(l))return`url(${c}${l}${c})`;if(zK.test(l))return`url(${c}${l}${c})`;if(l[0]==="/")return`url(${c}${FK(e)+l}${c})`;const u=e.split("/"),f=l.split("/");u.pop();for(const p of f)p!=="."&&(p===".."?u.pop():u.push(p));return`url(${c}${u.join("/")}${c})`})}const GK=/^[^ \t\n\r\u000c]+/,VK=/^[, \t\n\r\u000c]+/;function WK(n,e){if(e.trim()==="")return e;let t=0;function r(s){let o;const a=s.exec(e.substring(t));return a?(o=a[0],t+=o.length,o):""}const i=[];for(;r(VK),!(t>=e.length);){let s=r(GK);if(s.slice(-1)===",")s=ph(n,s.substring(0,s.length-1)),i.push(s);else{let o="";s=ph(n,s);let a=!1;for(;;){const l=e.charAt(t);if(l===""){i.push((s+o).trim());break}else if(a)l===")"&&(a=!1);else if(l===","){t+=1,i.push((s+o).trim());break}else l==="("&&(a=!0);o+=l,t+=1}}}return i.join(", ")}function ph(n,e){if(!e||e.trim()==="")return e;const t=n.createElement("a");return t.href=e,t.href}function XK(n){return!!(n.tagName==="svg"||n.ownerSVGElement)}function rI(){const n=document.createElement("a");return n.href="",n.href}function s4(n,e,t,r,i,s){return r&&(t==="src"||t==="href"&&!(e==="use"&&r[0]==="#")||t==="xlink:href"&&r[0]!=="#"||t==="background"&&(e==="table"||e==="td"||e==="th")?ph(n,r):t==="srcset"?WK(n,r):t==="style"?xS(r,rI()):e==="object"&&t==="data"?ph(n,r):typeof s=="function"?s(t,r,i):r)}function o4(n,e,t){return(n==="video"||n==="audio")&&e==="autoplay"}function jK(n,e,t,r){try{if(r&&n.matches(r))return!1;if(typeof e=="string"){if(n.classList.contains(e))return!0}else for(let i=n.classList.length;i--;){const s=n.classList[i];if(e.test(s))return!0}if(t)return n.matches(t)}catch{}return!1}function YK(n,e){for(let t=n.classList.length;t--;){const r=n.classList[t];if(e.test(r))return!0}return!1}function rf(n,e,t=1/0,r=0){return!n||n.nodeType!==n.ELEMENT_NODE||r>t?-1:e(n)?r:rf(n.parentNode,e,t,r+1)}function mh(n,e){return t=>{const r=t;if(r===null)return!1;try{if(n){if(typeof n=="string"){if(r.matches(`.${n}`))return!0}else if(YK(r,n))return!0}return!!(e&&r.matches(e))}catch{return!1}}}function lp(n,e,t,r,i,s){try{const o=n.nodeType===n.ELEMENT_NODE?n:n.parentElement;if(o===null)return!1;if(o.tagName==="INPUT"){const c=o.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(c))return!0}let a=-1,l=-1;if(s){if(l=rf(o,mh(r,i)),l<0)return!0;a=rf(o,mh(e,t),l>=0?l:1/0)}else{if(a=rf(o,mh(e,t)),a<0)return!1;l=rf(o,mh(r,i),a>=0?a:1/0)}return a>=0?l>=0?a<=l:!0:l>=0?!1:!!s}catch{}return!!s}function JK(n,e,t){const r=n.contentWindow;if(!r)return;let i=!1,s;try{s=r.document.readyState}catch{return}if(s!=="complete"){const a=bC(()=>{i||(e(),i=!0)},t);n.addEventListener("load",()=>{i4(a),i=!0,e()});return}const o="about:blank";if(r.location.href!==o||n.src===o||n.src==="")return bC(e,0),n.addEventListener("load",e);n.addEventListener("load",e)}function KK(n,e,t){let r=!1,i;try{i=n.sheet}catch{return}if(i)return;const s=bC(()=>{r||(e(),r=!0)},t);n.addEventListener("load",()=>{i4(s),r=!0,e()})}function $K(n,e){const{doc:t,mirror:r,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:a,maskAttributeFn:l,maskTextClass:c,unmaskTextClass:u,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:m,maskInputOptions:g={},maskTextFn:v,maskInputFn:y,dataURLOptions:_={},inlineImages:S,recordCanvas:E,keepIframeSrcFn:w,newlyAddedElement:I=!1}=e,T=qK(t,r);switch(n.nodeType){case n.DOCUMENT_NODE:return n.compatMode!=="CSS1Compat"?{type:Jr.Document,childNodes:[],compatMode:n.compatMode}:{type:Jr.Document,childNodes:[]};case n.DOCUMENT_TYPE_NODE:return{type:Jr.DocumentType,name:n.name,publicId:n.publicId,systemId:n.systemId,rootId:T};case n.ELEMENT_NODE:return ZK(n,{doc:t,blockClass:i,blockSelector:s,unblockSelector:o,inlineStylesheet:m,maskAttributeFn:l,maskInputOptions:g,maskInputFn:y,dataURLOptions:_,inlineImages:S,recordCanvas:E,keepIframeSrcFn:w,newlyAddedElement:I,rootId:T,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:f,unmaskTextSelector:p});case n.TEXT_NODE:return QK(n,{maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:f,unmaskTextSelector:p,maskTextFn:v,maskInputOptions:g,maskInputFn:y,rootId:T});case n.CDATA_SECTION_NODE:return{type:Jr.CDATA,textContent:"",rootId:T};case n.COMMENT_NODE:return{type:Jr.Comment,textContent:n.textContent||"",rootId:T};default:return!1}}function qK(n,e){if(!e.hasNode(n))return;const t=e.getId(n);return t===1?void 0:t}function QK(n,e){const{maskAllText:t,maskTextClass:r,unmaskTextClass:i,maskTextSelector:s,unmaskTextSelector:o,maskTextFn:a,maskInputOptions:l,maskInputFn:c,rootId:u}=e,f=n.parentNode&&n.parentNode.tagName;let p=n.textContent;const m=f==="STYLE"?!0:void 0,g=f==="SCRIPT"?!0:void 0,v=f==="TEXTAREA"?!0:void 0;if(m&&p){try{n.nextSibling||n.previousSibling||i_([n,"access",_=>_.parentNode,"access",_=>_.sheet,"optionalAccess",_=>_.cssRules])&&(p=vS(n.parentNode.sheet))}catch(_){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${_}`,n)}p=xS(p,rI())}g&&(p="SCRIPT_PLACEHOLDER");const y=lp(n,r,s,i,o,t);if(!m&&!g&&!v&&p&&y&&(p=a?a(p,n.parentElement):p.replace(/[\S]/g,"*")),v&&p&&(l.textarea||y)&&(p=c?c(p,n.parentNode):p.replace(/[\S]/g,"*")),f==="OPTION"&&p){const _=W1({type:null,tagName:f,maskInputOptions:l});p=s_({isMasked:lp(n,r,s,i,o,_),element:n,value:p,maskInputFn:c})}return{type:Jr.Text,textContent:p||"",isStyle:m,rootId:u}}function ZK(n,e){const{doc:t,blockClass:r,blockSelector:i,unblockSelector:s,inlineStylesheet:o,maskInputOptions:a={},maskAttributeFn:l,maskInputFn:c,dataURLOptions:u={},inlineImages:f,recordCanvas:p,keepIframeSrcFn:m,newlyAddedElement:g=!1,rootId:v,maskAllText:y,maskTextClass:_,unmaskTextClass:S,maskTextSelector:E,unmaskTextSelector:w}=e,I=jK(n,r,i,s),T=kK(n);let b={};const P=n.attributes.length;for(let M=0;M<P;M++){const L=n.attributes[M];L.name&&!o4(T,L.name,L.value)&&(b[L.name]=s4(t,T,ap(L.name),L.value,n,l))}if(T==="link"&&o){const M=Array.from(t.styleSheets).find(U=>U.href===n.href);let L=null;M&&(L=vS(M)),L&&(delete b.rel,delete b.href,b._cssText=xS(L,M.href))}if(T==="style"&&n.sheet&&!(n.innerText||n.textContent||"").trim().length){const M=vS(n.sheet);M&&(b._cssText=xS(M,rI()))}if(T==="input"||T==="textarea"||T==="select"||T==="option"){const M=n,L=tI(M),U=yS(M,CC(T),L),X=M.checked;if(L!=="submit"&&L!=="button"&&U){const $=lp(M,_,E,S,w,W1({type:L,tagName:CC(T),maskInputOptions:a}));b.value=s_({isMasked:$,element:M,value:U,maskInputFn:c})}X&&(b.checked=X)}if(T==="option"&&(n.selected&&!a.select?b.selected=!0:delete b.selected),T==="canvas"&&p){if(n.__context==="2d")BK(n)||(b.rr_dataURL=n.toDataURL(u.type,u.quality));else if(!("__context"in n)){const M=n.toDataURL(u.type,u.quality),L=document.createElement("canvas");L.width=n.width,L.height=n.height;const U=L.toDataURL(u.type,u.quality);M!==U&&(b.rr_dataURL=M)}}if(T==="img"&&f){wd||(wd=t.createElement("canvas"),kL=wd.getContext("2d"));const M=n,L=M.crossOrigin;M.crossOrigin="anonymous";const U=()=>{M.removeEventListener("load",U);try{wd.width=M.naturalWidth,wd.height=M.naturalHeight,kL.drawImage(M,0,0),b.rr_dataURL=wd.toDataURL(u.type,u.quality)}catch(X){console.warn(`Cannot inline img src=${M.currentSrc}! Error: ${X}`)}L?b.crossOrigin=L:M.removeAttribute("crossorigin")};M.complete&&M.naturalWidth!==0?U():M.addEventListener("load",U)}if((T==="audio"||T==="video")&&(b.rr_mediaState=n.paused?"paused":"played",b.rr_mediaCurrentTime=n.currentTime),g||(n.scrollLeft&&(b.rr_scrollLeft=n.scrollLeft),n.scrollTop&&(b.rr_scrollTop=n.scrollTop)),I){const{width:M,height:L}=n.getBoundingClientRect();b={class:b.class,rr_width:`${M}px`,rr_height:`${L}px`}}T==="iframe"&&!m(b.src)&&(!I&&!n.contentDocument&&(b.rr_src=b.src),delete b.src);let C;try{customElements.get(T)&&(C=!0)}catch{}return{type:Jr.Element,tagName:T,attributes:b,childNodes:[],isSVG:XK(n)||void 0,needBlock:I,rootId:v,isCustom:C}}function Vn(n){return n==null?"":n.toLowerCase()}function e$(n,e){if(e.comment&&n.type===Jr.Comment)return!0;if(n.type===Jr.Element){if(e.script&&(n.tagName==="script"||n.tagName==="link"&&(n.attributes.rel==="preload"||n.attributes.rel==="modulepreload")&&n.attributes.as==="script"||n.tagName==="link"&&n.attributes.rel==="prefetch"&&typeof n.attributes.href=="string"&&n4(n.attributes.href)==="js"))return!0;if(e.headFavicon&&(n.tagName==="link"&&n.attributes.rel==="shortcut icon"||n.tagName==="meta"&&(Vn(n.attributes.name).match(/^msapplication-tile(image|color)$/)||Vn(n.attributes.name)==="application-name"||Vn(n.attributes.rel)==="icon"||Vn(n.attributes.rel)==="apple-touch-icon"||Vn(n.attributes.rel)==="shortcut icon")))return!0;if(n.tagName==="meta"){if(e.headMetaDescKeywords&&Vn(n.attributes.name).match(/^description|keywords$/))return!0;if(e.headMetaSocial&&(Vn(n.attributes.property).match(/^(og|twitter|fb):/)||Vn(n.attributes.name).match(/^(og|twitter):/)||Vn(n.attributes.name)==="pinterest"))return!0;if(e.headMetaRobots&&(Vn(n.attributes.name)==="robots"||Vn(n.attributes.name)==="googlebot"||Vn(n.attributes.name)==="bingbot"))return!0;if(e.headMetaHttpEquiv&&n.attributes["http-equiv"]!==void 0)return!0;if(e.headMetaAuthorship&&(Vn(n.attributes.name)==="author"||Vn(n.attributes.name)==="generator"||Vn(n.attributes.name)==="framework"||Vn(n.attributes.name)==="publisher"||Vn(n.attributes.name)==="progid"||Vn(n.attributes.property).match(/^article:/)||Vn(n.attributes.property).match(/^product:/)))return!0;if(e.headMetaVerification&&(Vn(n.attributes.name)==="google-site-verification"||Vn(n.attributes.name)==="yandex-verification"||Vn(n.attributes.name)==="csrf-token"||Vn(n.attributes.name)==="p:domain_verify"||Vn(n.attributes.name)==="verify-v1"||Vn(n.attributes.name)==="verification"||Vn(n.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function gh(n,e){const{doc:t,mirror:r,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:f,skipChild:p=!1,inlineStylesheet:m=!0,maskInputOptions:g={},maskAttributeFn:v,maskTextFn:y,maskInputFn:_,slimDOMOptions:S,dataURLOptions:E={},inlineImages:w=!1,recordCanvas:I=!1,onSerialize:T,onIframeLoad:b,iframeLoadTimeout:P=5e3,onStylesheetLoad:C,stylesheetLoadTimeout:M=5e3,keepIframeSrcFn:L=()=>!1,newlyAddedElement:U=!1}=e;let{preserveWhiteSpace:X=!0}=e;const $=$K(n,{doc:t,mirror:r,blockClass:i,blockSelector:s,maskAllText:a,unblockSelector:o,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:f,inlineStylesheet:m,maskInputOptions:g,maskAttributeFn:v,maskTextFn:y,maskInputFn:_,dataURLOptions:E,inlineImages:w,recordCanvas:I,keepIframeSrcFn:L,newlyAddedElement:U});if(!$)return console.warn(n,"not serialized"),null;let Q;r.hasNode(n)?Q=r.getId(n):e$($,S)||!X&&$.type===Jr.Text&&!$.isStyle&&!$.textContent.replace(/^\s+|\s+$/gm,"").length?Q=o_:Q=nI();const Y=Object.assign($,{id:Q});if(r.add(n,Y),Q===o_)return null;T&&T(n);let te=!p;if(Y.type===Jr.Element){te=te&&!Y.needBlock,delete Y.needBlock;const k=n.shadowRoot;k&&pg(k)&&(Y.isShadowHost=!0)}if((Y.type===Jr.Document||Y.type===Jr.Element)&&te){S.headWhitespace&&Y.type===Jr.Element&&Y.tagName==="head"&&(X=!1);const k={doc:t,mirror:r,blockClass:i,blockSelector:s,maskAllText:a,unblockSelector:o,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:f,skipChild:p,inlineStylesheet:m,maskInputOptions:g,maskAttributeFn:v,maskTextFn:y,maskInputFn:_,slimDOMOptions:S,dataURLOptions:E,inlineImages:w,recordCanvas:I,preserveWhiteSpace:X,onSerialize:T,onIframeLoad:b,iframeLoadTimeout:P,onStylesheetLoad:C,stylesheetLoadTimeout:M,keepIframeSrcFn:L};for(const K of Array.from(n.childNodes)){const F=gh(K,k);F&&Y.childNodes.push(F)}if(TK(n)&&n.shadowRoot)for(const K of Array.from(n.shadowRoot.childNodes)){const F=gh(K,k);F&&(pg(n.shadowRoot)&&(F.isShadow=!0),Y.childNodes.push(F))}}return n.parentNode&&hg(n.parentNode)&&pg(n.parentNode)&&(Y.isShadow=!0),Y.type===Jr.Element&&Y.tagName==="iframe"&&JK(n,()=>{const k=n.contentDocument;if(k&&b){const K=gh(k,{doc:k,mirror:r,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:f,skipChild:!1,inlineStylesheet:m,maskInputOptions:g,maskAttributeFn:v,maskTextFn:y,maskInputFn:_,slimDOMOptions:S,dataURLOptions:E,inlineImages:w,recordCanvas:I,preserveWhiteSpace:X,onSerialize:T,onIframeLoad:b,iframeLoadTimeout:P,onStylesheetLoad:C,stylesheetLoadTimeout:M,keepIframeSrcFn:L});K&&b(n,K)}},P),Y.type===Jr.Element&&Y.tagName==="link"&&typeof Y.attributes.rel=="string"&&(Y.attributes.rel==="stylesheet"||Y.attributes.rel==="preload"&&typeof Y.attributes.href=="string"&&n4(Y.attributes.href)==="css")&&KK(n,()=>{if(C){const k=gh(n,{doc:t,mirror:r,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:f,skipChild:!1,inlineStylesheet:m,maskInputOptions:g,maskAttributeFn:v,maskTextFn:y,maskInputFn:_,slimDOMOptions:S,dataURLOptions:E,inlineImages:w,recordCanvas:I,preserveWhiteSpace:X,onSerialize:T,onIframeLoad:b,iframeLoadTimeout:P,onStylesheetLoad:C,stylesheetLoadTimeout:M,keepIframeSrcFn:L});k&&C(n,k)}},M),Y}function t$(n,e){const{mirror:t=new t4,blockClass:r="rr-block",blockSelector:i=null,unblockSelector:s=null,maskAllText:o=!1,maskTextClass:a="rr-mask",unmaskTextClass:l=null,maskTextSelector:c=null,unmaskTextSelector:u=null,inlineStylesheet:f=!0,inlineImages:p=!1,recordCanvas:m=!1,maskAllInputs:g=!1,maskAttributeFn:v,maskTextFn:y,maskInputFn:_,slimDOM:S=!1,dataURLOptions:E,preserveWhiteSpace:w,onSerialize:I,onIframeLoad:T,iframeLoadTimeout:b,onStylesheetLoad:P,stylesheetLoadTimeout:C,keepIframeSrcFn:M=()=>!1}=e||{};return gh(n,{doc:n,mirror:t,blockClass:r,blockSelector:i,unblockSelector:s,maskAllText:o,maskTextClass:a,unmaskTextClass:l,maskTextSelector:c,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:f,maskInputOptions:g===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:g===!1?{}:g,maskAttributeFn:v,maskTextFn:y,maskInputFn:_,slimDOMOptions:S===!0||S==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:S==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:S===!1?{}:S,dataURLOptions:E,inlineImages:p,recordCanvas:m,preserveWhiteSpace:w,onSerialize:I,onIframeLoad:T,iframeLoadTimeout:b,onStylesheetLoad:P,stylesheetLoadTimeout:C,keepIframeSrcFn:M,newlyAddedElement:!1})}function vc(n){let e,t=n[0],r=1;for(;r<n.length;){const i=n[r],s=n[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&t==null)return;i==="access"||i==="optionalAccess"?(e=t,t=s(t)):(i==="call"||i==="optionalCall")&&(t=s((...o)=>t.call(e,...o)),e=void 0)}return t}function ts(n,e,t=document){const r={capture:!0,passive:!0};return t.addEventListener(n,e,r),()=>t.removeEventListener(n,e,r)}const qd=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let FL={map:{},getId(){return console.error(qd),-1},getNode(){return console.error(qd),null},removeNodeFromMap(){console.error(qd)},has(){return console.error(qd),!1},reset(){console.error(qd)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(FL=new Proxy(FL,{get(n,e,t){return e==="map"&&console.error(qd),Reflect.get(n,e,t)}}));function a_(n,e,t={}){let r=null,i=0;return function(...s){const o=Date.now();!i&&t.leading===!1&&(i=o);const a=e-(o-i),l=this;a<=0||a>e?(r&&(l$(r),r=null),i=o,n.apply(l,s)):!r&&t.trailing!==!1&&(r=X1(()=>{i=t.leading===!1?0:Date.now(),r=null,n.apply(l,s)},a))}}function a4(n,e,t,r,i=window){const s=i.Object.getOwnPropertyDescriptor(n,e);return i.Object.defineProperty(n,e,r?t:{set(o){X1(()=>{t.set.call(this,o)},0),s&&s.set&&s.set.call(this,o)}}),()=>a4(n,e,s||{},!0)}function iI(n,e,t){try{if(!(e in n))return()=>{};const r=n[e],i=t(r);return typeof i=="function"&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:r}})),n[e]=i,()=>{n[e]=r}}catch{return()=>{}}}let SS=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(SS=()=>new Date().getTime());function l4(n){const e=n.document;return{left:e.scrollingElement?e.scrollingElement.scrollLeft:n.pageXOffset!==void 0?n.pageXOffset:vc([e,"optionalAccess",t=>t.documentElement,"access",t=>t.scrollLeft])||vc([e,"optionalAccess",t=>t.body,"optionalAccess",t=>t.parentElement,"optionalAccess",t=>t.scrollLeft])||vc([e,"optionalAccess",t=>t.body,"optionalAccess",t=>t.scrollLeft])||0,top:e.scrollingElement?e.scrollingElement.scrollTop:n.pageYOffset!==void 0?n.pageYOffset:vc([e,"optionalAccess",t=>t.documentElement,"access",t=>t.scrollTop])||vc([e,"optionalAccess",t=>t.body,"optionalAccess",t=>t.parentElement,"optionalAccess",t=>t.scrollTop])||vc([e,"optionalAccess",t=>t.body,"optionalAccess",t=>t.scrollTop])||0}}function c4(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function u4(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function f4(n){return n?n.nodeType===n.ELEMENT_NODE?n:n.parentElement:null}function Gs(n,e,t,r,i){if(!n)return!1;const s=f4(n);if(!s)return!1;const o=mh(e,t);if(!i){const c=r&&s.matches(r);return o(s)&&!c}const a=rf(s,o);let l=-1;return a<0?!1:(r&&(l=rf(s,mh(null,r))),a>-1&&l<0?!0:a<l)}function n$(n,e){return e.getId(n)!==-1}function Iw(n,e){return e.getId(n)===o_}function d4(n,e){if(hg(n))return!1;const t=e.getId(n);return e.has(t)?n.parentNode&&n.parentNode.nodeType===n.DOCUMENT_NODE?!1:n.parentNode?d4(n.parentNode,e):!0:!0}function RC(n){return!!n.changedTouches}function r$(n=window){"NodeList"in n&&!n.NodeList.prototype.forEach&&(n.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in n&&!n.DOMTokenList.prototype.forEach&&(n.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do if(this===t)return!0;while(t=t&&t.parentNode);return!1})}function h4(n,e){return!!(n.nodeName==="IFRAME"&&e.getMeta(n))}function p4(n,e){return!!(n.nodeName==="LINK"&&n.nodeType===n.ELEMENT_NODE&&n.getAttribute&&n.getAttribute("rel")==="stylesheet"&&e.getMeta(n))}function IC(n){return!!vc([n,"optionalAccess",e=>e.shadowRoot])}class i${constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){return tX(this.styleIDMap.get(e),()=>-1)}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let r;return t===void 0?r=this.id++:r=t,this.styleIDMap.set(e,r),this.idStyleMap.set(r,e),r}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function m4(n){let e=null;return vc([n,"access",t=>t.getRootNode,"optionalCall",t=>t(),"optionalAccess",t=>t.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&n.getRootNode().host&&(e=n.getRootNode().host),e}function s$(n){let e=n,t;for(;t=m4(e);)e=t;return e}function o$(n){const e=n.ownerDocument;if(!e)return!1;const t=s$(n);return e.contains(t)}function g4(n){const e=n.ownerDocument;return e?e.contains(n)||o$(n):!1}const OL={};function sI(n){const e=OL[n];if(e)return e;const t=window.document;let r=window[n];if(t&&typeof t.createElement=="function")try{const i=t.createElement("iframe");i.hidden=!0,t.head.appendChild(i);const s=i.contentWindow;s&&s[n]&&(r=s[n]),t.head.removeChild(i)}catch{}return OL[n]=r.bind(window)}function a$(...n){return sI("requestAnimationFrame")(...n)}function X1(...n){return sI("setTimeout")(...n)}function l$(...n){return sI("clearTimeout")(...n)}var nn=(n=>(n[n.DomContentLoaded=0]="DomContentLoaded",n[n.Load=1]="Load",n[n.FullSnapshot=2]="FullSnapshot",n[n.IncrementalSnapshot=3]="IncrementalSnapshot",n[n.Meta=4]="Meta",n[n.Custom=5]="Custom",n[n.Plugin=6]="Plugin",n))(nn||{}),Gt=(n=>(n[n.Mutation=0]="Mutation",n[n.MouseMove=1]="MouseMove",n[n.MouseInteraction=2]="MouseInteraction",n[n.Scroll=3]="Scroll",n[n.ViewportResize=4]="ViewportResize",n[n.Input=5]="Input",n[n.TouchMove=6]="TouchMove",n[n.MediaInteraction=7]="MediaInteraction",n[n.StyleSheetRule=8]="StyleSheetRule",n[n.CanvasMutation=9]="CanvasMutation",n[n.Font=10]="Font",n[n.Log=11]="Log",n[n.Drag=12]="Drag",n[n.StyleDeclaration=13]="StyleDeclaration",n[n.Selection=14]="Selection",n[n.AdoptedStyleSheet=15]="AdoptedStyleSheet",n[n.CustomElement=16]="CustomElement",n))(Gt||{}),Ki=(n=>(n[n.MouseUp=0]="MouseUp",n[n.MouseDown=1]="MouseDown",n[n.Click=2]="Click",n[n.ContextMenu=3]="ContextMenu",n[n.DblClick=4]="DblClick",n[n.Focus=5]="Focus",n[n.Blur=6]="Blur",n[n.TouchStart=7]="TouchStart",n[n.TouchMove_Departed=8]="TouchMove_Departed",n[n.TouchEnd=9]="TouchEnd",n[n.TouchCancel=10]="TouchCancel",n))(Ki||{}),dl=(n=>(n[n.Mouse=0]="Mouse",n[n.Pen=1]="Pen",n[n.Touch=2]="Touch",n))(dl||{});function c$(n){let e,t=n[0],r=1;for(;r<n.length;){const i=n[r],s=n[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&t==null)return;i==="access"||i==="optionalAccess"?(e=t,t=s(t)):(i==="call"||i==="optionalCall")&&(t=s((...o)=>t.call(e,...o)),e=void 0)}return t}function UL(n){return"__ln"in n}class u${constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let r=0;r<e;r++)t=c$([t,"optionalAccess",i=>i.next])||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&UL(e.previousSibling)){const r=e.previousSibling.__ln.next;t.next=r,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,r&&(r.previous=t)}else if(e.nextSibling&&UL(e.nextSibling)&&e.nextSibling.__ln.previous){const r=e.nextSibling.__ln.previous;t.previous=r,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,r&&(r.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;t.next===null&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const HL=(n,e)=>`${n}@${e}`;class f${constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,r=new u$,i=l=>{let c=l,u=o_;for(;u===o_;)c=c&&c.nextSibling,u=c&&this.mirror.getId(c);return u},s=l=>{if(!l.parentNode||!g4(l))return;const c=hg(l.parentNode)?this.mirror.getId(m4(l)):this.mirror.getId(l.parentNode),u=i(l);if(c===-1||u===-1)return r.addNode(l);const f=gh(l,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:p=>{h4(p,this.mirror)&&!Gs(p,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(p),p4(p,this.mirror)&&this.stylesheetManager.trackLinkElement(p),IC(l)&&this.shadowDomManager.addShadowRoot(l.shadowRoot,this.doc)},onIframeLoad:(p,m)=>{Gs(p,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(p,m),p.contentWindow&&this.canvasManager.addWindow(p.contentWindow),this.shadowDomManager.observeAttachShadow(p))},onStylesheetLoad:(p,m)=>{this.stylesheetManager.attachLinkElement(p,m)}});f&&(e.push({parentId:c,nextId:u,node:f}),t.add(f.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const l of this.movedSet)zL(this.removes,l,this.mirror)&&!this.movedSet.has(l.parentNode)||s(l);for(const l of this.addedSet)!GL(this.droppedSet,l)&&!zL(this.removes,l,this.mirror)||GL(this.movedSet,l)?s(l):this.droppedSet.add(l);let o=null;for(;r.length;){let l=null;if(o){const c=this.mirror.getId(o.value.parentNode),u=i(o.value);c!==-1&&u!==-1&&(l=o)}if(!l){let c=r.tail;for(;c;){const u=c;if(c=c.previous,u){const f=this.mirror.getId(u.value.parentNode);if(i(u.value)===-1)continue;if(f!==-1){l=u;break}else{const m=u.value;if(m.parentNode&&m.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const g=m.parentNode.host;if(this.mirror.getId(g)!==-1){l=u;break}}}}}}if(!l){for(;r.head;)r.removeNode(r.head.value);break}o=l.previous,r.removeNode(l.value),s(l.value)}const a={texts:this.texts.map(l=>({id:this.mirror.getId(l.node),value:l.value})).filter(l=>!t.has(l.id)).filter(l=>this.mirror.has(l.id)),attributes:this.attributes.map(l=>{const{attributes:c}=l;if(typeof c.style=="string"){const u=JSON.stringify(l.styleDiff),f=JSON.stringify(l._unchangedStyles);u.length<c.style.length&&(u+f).split("var(").length===c.style.split("var(").length&&(c.style=l.styleDiff)}return{id:this.mirror.getId(l.node),attributes:c}}).filter(l=>!t.has(l.id)).filter(l=>this.mirror.has(l.id)),removes:this.removes,adds:e};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=e=>{if(!Iw(e.target,this.mirror))switch(e.type){case"characterData":{const t=e.target.textContent;!Gs(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&t!==e.oldValue&&this.texts.push({value:lp(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&t?this.maskTextFn?this.maskTextFn(t,f4(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const t=e.target;let r=e.attributeName,i=e.target.getAttribute(r);if(r==="value"){const o=tI(t),a=t.tagName;i=yS(t,a,o);const l=W1({maskInputOptions:this.maskInputOptions,tagName:a,type:o}),c=lp(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,l);i=s_({isMasked:c,element:t,value:i,maskInputFn:this.maskInputFn})}if(Gs(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||i===e.oldValue)return;let s=this.attributeMap.get(e.target);if(t.tagName==="IFRAME"&&r==="src"&&!this.keepIframeSrcFn(i))if(!t.contentDocument)r="rr_src";else return;if(s||(s={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(s),this.attributeMap.set(e.target,s)),r==="type"&&t.tagName==="INPUT"&&(e.oldValue||"").toLowerCase()==="password"&&t.setAttribute("data-rr-is-password","true"),!o4(t.tagName,r)&&(s.attributes[r]=s4(this.doc,ap(t.tagName),ap(r),i,t,this.maskAttributeFn),r==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const o=this.unattachedDoc.createElement("span");e.oldValue&&o.setAttribute("style",e.oldValue);for(const a of Array.from(t.style)){const l=t.style.getPropertyValue(a),c=t.style.getPropertyPriority(a);l!==o.style.getPropertyValue(a)||c!==o.style.getPropertyPriority(a)?c===""?s.styleDiff[a]=l:s.styleDiff[a]=[l,c]:s._unchangedStyles[a]=[l,c]}for(const a of Array.from(o.style))t.style.getPropertyValue(a)===""&&(s.styleDiff[a]=!1)}break}case"childList":{if(Gs(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach(t=>this.genAdds(t,e.target)),e.removedNodes.forEach(t=>{const r=this.mirror.getId(t),i=hg(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);Gs(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||Iw(t,this.mirror)||!n$(t,this.mirror)||(this.addedSet.has(t)?(PC(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&r===-1||d4(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[HL(r,i)]?PC(this.movedSet,t):this.removes.push({parentId:i,id:r,isShadow:hg(e.target)&&pg(e.target)?!0:void 0})),this.mapRemoves.push(t))});break}}},this.genAdds=(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!(this.addedSet.has(e)||this.movedSet.has(e))){if(this.mirror.hasNode(e)){if(Iw(e,this.mirror))return;this.movedSet.add(e);let r=null;t&&this.mirror.hasNode(t)&&(r=this.mirror.getId(t)),r&&r!==-1&&(this.movedMap[HL(this.mirror.getId(e),r)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);Gs(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(e.childNodes.forEach(r=>this.genAdds(r)),IC(e)&&e.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,e)}))}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(t=>{this[t]=e[t]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function PC(n,e){n.delete(e),e.childNodes.forEach(t=>PC(n,t))}function zL(n,e,t){return n.length===0?!1:_4(n,e,t)}function _4(n,e,t){const{parentNode:r}=e;if(!r)return!1;const i=t.getId(r);return n.some(s=>s.id===i)?!0:_4(n,r,t)}function GL(n,e){return n.size===0?!1:v4(n,e)}function v4(n,e){const{parentNode:t}=e;return t?n.has(t)?!0:v4(n,t):!1}let mg;function d$(n){mg=n}function h$(){mg=void 0}const yn=n=>mg?(...t)=>{try{return n(...t)}catch(r){if(mg&&mg(r)===!0)return()=>{};throw r}}:n;function ra(n){let e,t=n[0],r=1;for(;r<n.length;){const i=n[r],s=n[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&t==null)return;i==="access"||i==="optionalAccess"?(e=t,t=s(t)):(i==="call"||i==="optionalCall")&&(t=s((...o)=>t.call(e,...o)),e=void 0)}return t}const _h=[];function J_(n){try{if("composedPath"in n){const e=n.composedPath();if(e.length)return e[0]}else if("path"in n&&n.path.length)return n.path[0]}catch{}return n&&n.target}function y4(n,e){const t=new f$;_h.push(t),t.init(n);let r=window.MutationObserver||window.__rrMutationObserver;const i=ra([window,"optionalAccess",o=>o.Zone,"optionalAccess",o=>o.__symbol__,"optionalCall",o=>o("MutationObserver")]);i&&window[i]&&(r=window[i]);const s=new r(yn(o=>{n.onMutation&&n.onMutation(o)===!1||t.processMutations.bind(t)(o)}));return s.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function p$({mousemoveCb:n,sampling:e,doc:t,mirror:r}){if(e.mousemove===!1)return()=>{};const i=typeof e.mousemove=="number"?e.mousemove:50,s=typeof e.mousemoveCallback=="number"?e.mousemoveCallback:500;let o=[],a;const l=a_(yn(f=>{const p=Date.now()-a;n(o.map(m=>(m.timeOffset-=p,m)),f),o=[],a=null}),s),c=yn(a_(yn(f=>{const p=J_(f),{clientX:m,clientY:g}=RC(f)?f.changedTouches[0]:f;a||(a=SS()),o.push({x:m,y:g,id:r.getId(p),timeOffset:SS()-a}),l(typeof DragEvent<"u"&&f instanceof DragEvent?Gt.Drag:f instanceof MouseEvent?Gt.MouseMove:Gt.TouchMove)}),i,{trailing:!1})),u=[ts("mousemove",c,t),ts("touchmove",c,t),ts("drag",c,t)];return yn(()=>{u.forEach(f=>f())})}function m$({mouseInteractionCb:n,doc:e,mirror:t,blockClass:r,blockSelector:i,unblockSelector:s,sampling:o}){if(o.mouseInteraction===!1)return()=>{};const a=o.mouseInteraction===!0||o.mouseInteraction===void 0?{}:o.mouseInteraction,l=[];let c=null;const u=f=>p=>{const m=J_(p);if(Gs(m,r,i,s,!0))return;let g=null,v=f;if("pointerType"in p){switch(p.pointerType){case"mouse":g=dl.Mouse;break;case"touch":g=dl.Touch;break;case"pen":g=dl.Pen;break}g===dl.Touch?Ki[f]===Ki.MouseDown?v="TouchStart":Ki[f]===Ki.MouseUp&&(v="TouchEnd"):dl.Pen}else RC(p)&&(g=dl.Touch);g!==null?(c=g,(v.startsWith("Touch")&&g===dl.Touch||v.startsWith("Mouse")&&g===dl.Mouse)&&(g=null)):Ki[f]===Ki.Click&&(g=c,c=null);const y=RC(p)?p.changedTouches[0]:p;if(!y)return;const _=t.getId(m),{clientX:S,clientY:E}=y;yn(n)({type:Ki[v],id:_,x:S,y:E,...g!==null&&{pointerType:g}})};return Object.keys(Ki).filter(f=>Number.isNaN(Number(f))&&!f.endsWith("_Departed")&&a[f]!==!1).forEach(f=>{let p=ap(f);const m=u(f);if(window.PointerEvent)switch(Ki[f]){case Ki.MouseDown:case Ki.MouseUp:p=p.replace("mouse","pointer");break;case Ki.TouchStart:case Ki.TouchEnd:return}l.push(ts(p,m,e))}),yn(()=>{l.forEach(f=>f())})}function x4({scrollCb:n,doc:e,mirror:t,blockClass:r,blockSelector:i,unblockSelector:s,sampling:o}){const a=yn(a_(yn(l=>{const c=J_(l);if(!c||Gs(c,r,i,s,!0))return;const u=t.getId(c);if(c===e&&e.defaultView){const f=l4(e.defaultView);n({id:u,x:f.left,y:f.top})}else n({id:u,x:c.scrollLeft,y:c.scrollTop})}),o.scroll||100));return ts("scroll",a,e)}function g$({viewportResizeCb:n},{win:e}){let t=-1,r=-1;const i=yn(a_(yn(()=>{const s=c4(),o=u4();(t!==s||r!==o)&&(n({width:Number(o),height:Number(s)}),t=s,r=o)}),200));return ts("resize",i,e)}const _$=["INPUT","TEXTAREA","SELECT"],VL=new WeakMap;function v$({inputCb:n,doc:e,mirror:t,blockClass:r,blockSelector:i,unblockSelector:s,ignoreClass:o,ignoreSelector:a,maskInputOptions:l,maskInputFn:c,sampling:u,userTriggeredOnInput:f,maskTextClass:p,unmaskTextClass:m,maskTextSelector:g,unmaskTextSelector:v}){function y(b){let P=J_(b);const C=b.isTrusted,M=P&&CC(P.tagName);if(M==="OPTION"&&(P=P.parentElement),!P||!M||_$.indexOf(M)<0||Gs(P,r,i,s,!0))return;const L=P;if(L.classList.contains(o)||a&&L.matches(a))return;const U=tI(P);let X=yS(L,M,U),$=!1;const Q=W1({maskInputOptions:l,tagName:M,type:U}),Y=lp(P,p,g,m,v,Q);(U==="radio"||U==="checkbox")&&($=P.checked),X=s_({isMasked:Y,element:P,value:X,maskInputFn:c}),_(P,f?{text:X,isChecked:$,userTriggered:C}:{text:X,isChecked:$});const te=P.name;U==="radio"&&te&&$&&e.querySelectorAll(`input[type="radio"][name="${te}"]`).forEach(k=>{if(k!==P){const K=s_({isMasked:Y,element:k,value:yS(k,M,U),maskInputFn:c});_(k,f?{text:K,isChecked:!$,userTriggered:!1}:{text:K,isChecked:!$})}})}function _(b,P){const C=VL.get(b);if(!C||C.text!==P.text||C.isChecked!==P.isChecked){VL.set(b,P);const M=t.getId(b);yn(n)({...P,id:M})}}const E=(u.input==="last"?["change"]:["input","change"]).map(b=>ts(b,yn(y),e)),w=e.defaultView;if(!w)return()=>{E.forEach(b=>b())};const I=w.Object.getOwnPropertyDescriptor(w.HTMLInputElement.prototype,"value"),T=[[w.HTMLInputElement.prototype,"value"],[w.HTMLInputElement.prototype,"checked"],[w.HTMLSelectElement.prototype,"value"],[w.HTMLTextAreaElement.prototype,"value"],[w.HTMLSelectElement.prototype,"selectedIndex"],[w.HTMLOptionElement.prototype,"selected"]];return I&&I.set&&E.push(...T.map(b=>a4(b[0],b[1],{set(){yn(y)({target:this,isTrusted:!1})}},!1,w))),yn(()=>{E.forEach(b=>b())})}function ES(n){const e=[];function t(r,i){if(Ov("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||Ov("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||Ov("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||Ov("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){const o=Array.from(r.parentRule.cssRules).indexOf(r);i.unshift(o)}else if(r.parentStyleSheet){const o=Array.from(r.parentStyleSheet.cssRules).indexOf(r);i.unshift(o)}return i}return t(n,e)}function yc(n,e,t){let r,i;return n?(n.ownerNode?r=e.getId(n.ownerNode):i=t.getId(n),{styleId:i,id:r}):{}}function y$({styleSheetRuleCb:n,mirror:e,stylesheetManager:t},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const i=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(i,{apply:yn((u,f,p)=>{const[m,g]=p,{id:v,styleId:y}=yc(f,e,t.styleMirror);return(v&&v!==-1||y&&y!==-1)&&n({id:v,styleId:y,adds:[{rule:m,index:g}]}),u.apply(f,p)})});const s=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(s,{apply:yn((u,f,p)=>{const[m]=p,{id:g,styleId:v}=yc(f,e,t.styleMirror);return(g&&g!==-1||v&&v!==-1)&&n({id:g,styleId:v,removes:[{index:m}]}),u.apply(f,p)})});let o;r.CSSStyleSheet.prototype.replace&&(o=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(o,{apply:yn((u,f,p)=>{const[m]=p,{id:g,styleId:v}=yc(f,e,t.styleMirror);return(g&&g!==-1||v&&v!==-1)&&n({id:g,styleId:v,replace:m}),u.apply(f,p)})}));let a;r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:yn((u,f,p)=>{const[m]=p,{id:g,styleId:v}=yc(f,e,t.styleMirror);return(g&&g!==-1||v&&v!==-1)&&n({id:g,styleId:v,replaceSync:m}),u.apply(f,p)})}));const l={};Uv("CSSGroupingRule")?l.CSSGroupingRule=r.CSSGroupingRule:(Uv("CSSMediaRule")&&(l.CSSMediaRule=r.CSSMediaRule),Uv("CSSConditionRule")&&(l.CSSConditionRule=r.CSSConditionRule),Uv("CSSSupportsRule")&&(l.CSSSupportsRule=r.CSSSupportsRule));const c={};return Object.entries(l).forEach(([u,f])=>{c[u]={insertRule:f.prototype.insertRule,deleteRule:f.prototype.deleteRule},f.prototype.insertRule=new Proxy(c[u].insertRule,{apply:yn((p,m,g)=>{const[v,y]=g,{id:_,styleId:S}=yc(m.parentStyleSheet,e,t.styleMirror);return(_&&_!==-1||S&&S!==-1)&&n({id:_,styleId:S,adds:[{rule:v,index:[...ES(m),y||0]}]}),p.apply(m,g)})}),f.prototype.deleteRule=new Proxy(c[u].deleteRule,{apply:yn((p,m,g)=>{const[v]=g,{id:y,styleId:_}=yc(m.parentStyleSheet,e,t.styleMirror);return(y&&y!==-1||_&&_!==-1)&&n({id:y,styleId:_,removes:[{index:[...ES(m),v]}]}),p.apply(m,g)})})}),yn(()=>{r.CSSStyleSheet.prototype.insertRule=i,r.CSSStyleSheet.prototype.deleteRule=s,o&&(r.CSSStyleSheet.prototype.replace=o),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(l).forEach(([u,f])=>{f.prototype.insertRule=c[u].insertRule,f.prototype.deleteRule=c[u].deleteRule})})}function S4({mirror:n,stylesheetManager:e},t){let r=null;t.nodeName==="#document"?r=n.getId(t):r=n.getId(t.host);const i=t.nodeName==="#document"?ra([t,"access",o=>o.defaultView,"optionalAccess",o=>o.Document]):ra([t,"access",o=>o.ownerDocument,"optionalAccess",o=>o.defaultView,"optionalAccess",o=>o.ShadowRoot]),s=ra([i,"optionalAccess",o=>o.prototype])?Object.getOwnPropertyDescriptor(ra([i,"optionalAccess",o=>o.prototype]),"adoptedStyleSheets"):void 0;return r===null||r===-1||!i||!s?()=>{}:(Object.defineProperty(t,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get(){return ra([s,"access",o=>o.get,"optionalAccess",o=>o.call,"call",o=>o(this)])},set(o){const a=ra([s,"access",l=>l.set,"optionalAccess",l=>l.call,"call",l=>l(this,o)]);if(r!==null&&r!==-1)try{e.adoptStyleSheets(o,r)}catch{}return a}}),yn(()=>{Object.defineProperty(t,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get:s.get,set:s.set})}))}function x$({styleDeclarationCb:n,mirror:e,ignoreCSSAttributes:t,stylesheetManager:r},{win:i}){const s=i.CSSStyleDeclaration.prototype.setProperty;i.CSSStyleDeclaration.prototype.setProperty=new Proxy(s,{apply:yn((a,l,c)=>{const[u,f,p]=c;if(t.has(u))return s.apply(l,[u,f,p]);const{id:m,styleId:g}=yc(ra([l,"access",v=>v.parentRule,"optionalAccess",v=>v.parentStyleSheet]),e,r.styleMirror);return(m&&m!==-1||g&&g!==-1)&&n({id:m,styleId:g,set:{property:u,value:f,priority:p},index:ES(l.parentRule)}),a.apply(l,c)})});const o=i.CSSStyleDeclaration.prototype.removeProperty;return i.CSSStyleDeclaration.prototype.removeProperty=new Proxy(o,{apply:yn((a,l,c)=>{const[u]=c;if(t.has(u))return o.apply(l,[u]);const{id:f,styleId:p}=yc(ra([l,"access",m=>m.parentRule,"optionalAccess",m=>m.parentStyleSheet]),e,r.styleMirror);return(f&&f!==-1||p&&p!==-1)&&n({id:f,styleId:p,remove:{property:u},index:ES(l.parentRule)}),a.apply(l,c)})}),yn(()=>{i.CSSStyleDeclaration.prototype.setProperty=s,i.CSSStyleDeclaration.prototype.removeProperty=o})}function S$({mediaInteractionCb:n,blockClass:e,blockSelector:t,unblockSelector:r,mirror:i,sampling:s,doc:o}){const a=yn(c=>a_(yn(u=>{const f=J_(u);if(!f||Gs(f,e,t,r,!0))return;const{currentTime:p,volume:m,muted:g,playbackRate:v}=f;n({type:c,id:i.getId(f),currentTime:p,volume:m,muted:g,playbackRate:v})}),s.media||500)),l=[ts("play",a(0),o),ts("pause",a(1),o),ts("seeked",a(2),o),ts("volumechange",a(3),o),ts("ratechange",a(4),o)];return yn(()=>{l.forEach(c=>c())})}function E$({fontCb:n,doc:e}){const t=e.defaultView;if(!t)return()=>{};const r=[],i=new WeakMap,s=t.FontFace;t.FontFace=function(l,c,u){const f=new s(l,c,u);return i.set(f,{family:l,buffer:typeof c!="string",descriptors:u,fontSource:typeof c=="string"?c:JSON.stringify(Array.from(new Uint8Array(c)))}),f};const o=iI(e.fonts,"add",function(a){return function(l){return X1(yn(()=>{const c=i.get(l);c&&(n(c),i.delete(l))}),0),a.apply(this,[l])}});return r.push(()=>{t.FontFace=s}),r.push(o),yn(()=>{r.forEach(a=>a())})}function A$(n){const{doc:e,mirror:t,blockClass:r,blockSelector:i,unblockSelector:s,selectionCb:o}=n;let a=!0;const l=yn(()=>{const c=e.getSelection();if(!c||a&&ra([c,"optionalAccess",p=>p.isCollapsed]))return;a=c.isCollapsed||!1;const u=[],f=c.rangeCount||0;for(let p=0;p<f;p++){const m=c.getRangeAt(p),{startContainer:g,startOffset:v,endContainer:y,endOffset:_}=m;Gs(g,r,i,s,!0)||Gs(y,r,i,s,!0)||u.push({start:t.getId(g),startOffset:v,end:t.getId(y),endOffset:_})}o({ranges:u})});return l(),ts("selectionchange",l)}function w$({doc:n,customElementCb:e}){const t=n.defaultView;return!t||!t.customElements?()=>{}:iI(t.customElements,"define",function(i){return function(s,o,a){try{e({define:{name:s}})}catch{}return i.apply(this,[s,o,a])}})}function M$(n,e={}){const t=n.doc.defaultView;if(!t)return()=>{};let r;n.recordDOM&&(r=y4(n,n.doc));const i=p$(n),s=m$(n),o=x4(n),a=g$(n,{win:t}),l=v$(n),c=S$(n);let u=()=>{},f=()=>{},p=()=>{},m=()=>{};n.recordDOM&&(u=y$(n,{win:t}),f=S4(n,n.doc),p=x$(n,{win:t}),n.collectFonts&&(m=E$(n)));const g=A$(n),v=w$(n),y=[];for(const _ of n.plugins)y.push(_.observer(_.callback,t,_.options));return yn(()=>{_h.forEach(_=>_.reset()),ra([r,"optionalAccess",_=>_.disconnect,"call",_=>_()]),i(),s(),o(),a(),l(),c(),u(),f(),p(),m(),g(),v(),y.forEach(_=>_())})}function Ov(n){return typeof window[n]<"u"}function Uv(n){return!!(typeof window[n]<"u"&&window[n].prototype&&"insertRule"in window[n].prototype&&"deleteRule"in window[n].prototype)}class DC{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,r,i){const s=r||this.getIdToRemoteIdMap(e),o=i||this.getRemoteIdToIdMap(e);let a=s.get(t);return a||(a=this.generateIdFn(),s.set(t,a),o.set(a,t)),a}getIds(e,t){const r=this.getIdToRemoteIdMap(e),i=this.getRemoteIdToIdMap(e);return t.map(s=>this.getId(e,s,r,i))}getRemoteId(e,t,r){const i=r||this.getRemoteIdToIdMap(e);if(typeof t!="number")return t;const s=i.get(t);return s||-1}getRemoteIds(e,t){const r=this.getRemoteIdToIdMap(e);return t.map(i=>this.getRemoteId(e,i,r))}reset(e){if(!e){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}function WL(n){let e,t=n[0],r=1;for(;r<n.length;){const i=n[r],s=n[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&t==null)return;i==="access"||i==="optionalAccess"?(e=t,t=s(t)):(i==="call"||i==="optionalCall")&&(t=s((...o)=>t.call(e,...o)),e=void 0)}return t}class T${constructor(){this.crossOriginIframeMirror=new DC(nI),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class C${constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new DC(nI),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new DC(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),WL([this,"access",r=>r.loadListener,"optionalCall",r=>r(e)]),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const t=e;if(t.data.type!=="rrweb"||t.origin!==t.data.origin||!e.source)return;const i=this.crossOriginIframeMap.get(e.source);if(!i)return;const s=this.transformCrossOriginEvent(i,t.data.event);s&&this.wrappedEmit(s,t.data.isCheckout)}transformCrossOriginEvent(e,t){switch(t.type){case nn.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const r=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,r),this.patchRootIdOnNode(t.data.node,r),{timestamp:t.timestamp,type:nn.IncrementalSnapshot,data:{source:Gt.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case nn.Meta:case nn.Load:case nn.DomContentLoaded:return!1;case nn.Plugin:return t;case nn.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case nn.IncrementalSnapshot:switch(t.data.source){case Gt.Mutation:return t.data.adds.forEach(r=>{this.replaceIds(r,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(r.node,e);const i=this.crossOriginIframeRootIdMap.get(e);i&&this.patchRootIdOnNode(r.node,i)}),t.data.removes.forEach(r=>{this.replaceIds(r,e,["parentId","id"])}),t.data.attributes.forEach(r=>{this.replaceIds(r,e,["id"])}),t.data.texts.forEach(r=>{this.replaceIds(r,e,["id"])}),t;case Gt.Drag:case Gt.TouchMove:case Gt.MouseMove:return t.data.positions.forEach(r=>{this.replaceIds(r,e,["id"])}),t;case Gt.ViewportResize:return!1;case Gt.MediaInteraction:case Gt.MouseInteraction:case Gt.Scroll:case Gt.CanvasMutation:case Gt.Input:return this.replaceIds(t.data,e,["id"]),t;case Gt.StyleSheetRule:case Gt.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case Gt.Font:return t;case Gt.Selection:return t.data.ranges.forEach(r=>{this.replaceIds(r,e,["start","end"])}),t;case Gt.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),WL([t,"access",r=>r.data,"access",r=>r.styles,"optionalAccess",r=>r.forEach,"call",r=>r(i=>{this.replaceStyleIds(i,e,["styleId"])})]),t}}return!1}replace(e,t,r,i){for(const s of i)!Array.isArray(t[s])&&typeof t[s]!="number"||(Array.isArray(t[s])?t[s]=e.getIds(r,t[s]):t[s]=e.getId(r,t[s]));return t}replaceIds(e,t,r){return this.replace(this.crossOriginIframeMirror,e,t,r)}replaceStyleIds(e,t,r){return this.replace(this.crossOriginIframeStyleMirror,e,t,r)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(r=>{this.replaceIdOnNode(r,t)})}patchRootIdOnNode(e,t){e.type!==Jr.Document&&!e.rootId&&(e.rootId=t),"childNodes"in e&&e.childNodes.forEach(r=>{this.patchRootIdOnNode(r,t)})}}class b${init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class R${constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!pg(e)||this.shadowDoms.has(e))return;this.shadowDoms.add(e),this.bypassOptions.canvasManager.addShadowRoot(e);const r=y4({...this.bypassOptions,doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(x4({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),X1(()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(S4({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))},0)}observeAttachShadow(e){!e.contentWindow||!e.contentDocument||this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){const r=this;this.restoreHandlers.push(iI(e.prototype,"attachShadow",function(i){return function(s){const o=i.call(this,s);return this.shadowRoot&&g4(this)&&r.addShadowRoot(this.shadowRoot,t),o}}))}reset(){this.restoreHandlers.forEach(e=>{try{e()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}}class XL{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class I${constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new i$,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(e.length===0)return;const r={id:t,styleIds:[]},i=[];for(const s of e){let o;this.styleMirror.has(s)?o=this.styleMirror.getId(s):(o=this.styleMirror.add(s),i.push({styleId:o,rules:Array.from(s.rules||CSSRule,(a,l)=>({rule:e4(a),index:l}))})),r.styleIds.push(o)}i.length>0&&(r.styles=i),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class P${constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){a$(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(e,t){const r=this.nodeMap.get(e);return r&&Array.from(r).some(i=>i!==t)}add(e,t){this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}let Sr,AS;try{if(Array.from([1],n=>n*2)[0]!==2){const n=document.createElement("iframe");document.body.appendChild(n),Array.from=js([n,"access",e=>e.contentWindow,"optionalAccess",e=>e.Array,"access",e=>e.from])||Array.from,document.body.removeChild(n)}}catch(n){console.debug("Unable to override Array.from",n)}const qo=DK();function Dl(n={}){const{emit:e,checkoutEveryNms:t,checkoutEveryNth:r,blockClass:i="rr-block",blockSelector:s=null,unblockSelector:o=null,ignoreClass:a="rr-ignore",ignoreSelector:l=null,maskAllText:c=!1,maskTextClass:u="rr-mask",unmaskTextClass:f=null,maskTextSelector:p=null,unmaskTextSelector:m=null,inlineStylesheet:g=!0,maskAllInputs:v,maskInputOptions:y,slimDOMOptions:_,maskAttributeFn:S,maskInputFn:E,maskTextFn:w,maxCanvasSize:I=null,packFn:T,sampling:b={},dataURLOptions:P={},mousemoveWait:C,recordDOM:M=!0,recordCanvas:L=!1,recordCrossOriginIframes:U=!1,recordAfter:X=n.recordAfter==="DOMContentLoaded"?n.recordAfter:"load",userTriggeredOnInput:$=!1,collectFonts:Q=!1,inlineImages:Y=!1,plugins:te,keepIframeSrcFn:k=()=>!1,ignoreCSSAttributes:K=new Set([]),errorHandler:F,onMutation:ie,getCanvasManager:me}=n;d$(F);const Ne=U?window.parent===window:!0;let ce=!1;if(!Ne)try{window.parent.document&&(ce=!1)}catch{ce=!0}if(Ne&&!e)throw new Error("emit function is required");C!==void 0&&b.mousemove===void 0&&(b.mousemove=C),qo.reset();const xe=v===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:y!==void 0?y:{},Ae=_===!0||_==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:_==="all",headMetaDescKeywords:_==="all"}:_||{};r$();let Ie,Xe=0;const it=V=>{for(const O of te||[])O.eventProcessor&&(V=O.eventProcessor(V));return T&&!ce&&(V=T(V)),V};Sr=(V,O)=>{const le=V;if(le.timestamp=SS(),js([_h,"access",Se=>Se[0],"optionalAccess",Se=>Se.isFrozen,"call",Se=>Se()])&&le.type!==nn.FullSnapshot&&!(le.type===nn.IncrementalSnapshot&&le.data.source===Gt.Mutation)&&_h.forEach(Se=>Se.unfreeze()),Ne)js([e,"optionalCall",Se=>Se(it(le),O)]);else if(ce){const Se={type:"rrweb",event:it(le),origin:window.location.origin,isCheckout:O};window.parent.postMessage(Se,"*")}if(le.type===nn.FullSnapshot)Ie=le,Xe=0;else if(le.type===nn.IncrementalSnapshot){if(le.data.source===Gt.Mutation&&le.data.isAttachIframe)return;Xe++;const Se=r&&Xe>=r,ve=t&&Ie&&le.timestamp-Ie.timestamp>t;(Se||ve)&&Ke(!0)}};const Qe=V=>{Sr({type:nn.IncrementalSnapshot,data:{source:Gt.Mutation,...V}})},Ge=V=>Sr({type:nn.IncrementalSnapshot,data:{source:Gt.Scroll,...V}}),z=V=>Sr({type:nn.IncrementalSnapshot,data:{source:Gt.CanvasMutation,...V}}),pe=V=>Sr({type:nn.IncrementalSnapshot,data:{source:Gt.AdoptedStyleSheet,...V}}),Me=new I$({mutationCb:Qe,adoptedStyleSheetCb:pe}),Be=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new T$:new C$({mirror:qo,mutationCb:Qe,stylesheetManager:Me,recordCrossOriginIframes:U,wrappedEmit:Sr});for(const V of te||[])V.getMirror&&V.getMirror({nodeMirror:qo,crossOriginIframeMirror:Be.crossOriginIframeMirror,crossOriginIframeStyleMirror:Be.crossOriginIframeStyleMirror});const ye=new P$,oe=B$(me,{mirror:qo,win:window,mutationCb:V=>Sr({type:nn.IncrementalSnapshot,data:{source:Gt.CanvasMutation,...V}}),recordCanvas:L,blockClass:i,blockSelector:s,unblockSelector:o,maxCanvasSize:I,sampling:b.canvas,dataURLOptions:P,errorHandler:F}),Ue=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new b$:new R$({mutationCb:Qe,scrollCb:Ge,bypassOptions:{onMutation:ie,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:c,maskTextClass:u,unmaskTextClass:f,maskTextSelector:p,unmaskTextSelector:m,inlineStylesheet:g,maskInputOptions:xe,dataURLOptions:P,maskAttributeFn:S,maskTextFn:w,maskInputFn:E,recordCanvas:L,inlineImages:Y,sampling:b,slimDOMOptions:Ae,iframeManager:Be,stylesheetManager:Me,canvasManager:oe,keepIframeSrcFn:k,processedNodeManager:ye},mirror:qo}),Ke=(V=!1)=>{if(!M)return;Sr({type:nn.Meta,data:{href:window.location.href,width:u4(),height:c4()}},V),Me.reset(),Ue.init(),_h.forEach(le=>le.lock());const O=t$(document,{mirror:qo,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:c,maskTextClass:u,unmaskTextClass:f,maskTextSelector:p,unmaskTextSelector:m,inlineStylesheet:g,maskAllInputs:xe,maskAttributeFn:S,maskInputFn:E,maskTextFn:w,slimDOM:Ae,dataURLOptions:P,recordCanvas:L,inlineImages:Y,onSerialize:le=>{h4(le,qo)&&Be.addIframe(le),p4(le,qo)&&Me.trackLinkElement(le),IC(le)&&Ue.addShadowRoot(le.shadowRoot,document)},onIframeLoad:(le,Se)=>{Be.attachIframe(le,Se),le.contentWindow&&oe.addWindow(le.contentWindow),Ue.observeAttachShadow(le)},onStylesheetLoad:(le,Se)=>{Me.attachLinkElement(le,Se)},keepIframeSrcFn:k});if(!O)return console.warn("Failed to snapshot the document");Sr({type:nn.FullSnapshot,data:{node:O,initialOffset:l4(window)}}),_h.forEach(le=>le.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Me.adoptStyleSheets(document.adoptedStyleSheets,qo.getId(document))};AS=Ke;try{const V=[],O=Se=>yn(M$)({onMutation:ie,mutationCb:Qe,mousemoveCb:(ve,Ce)=>Sr({type:nn.IncrementalSnapshot,data:{source:Ce,positions:ve}}),mouseInteractionCb:ve=>Sr({type:nn.IncrementalSnapshot,data:{source:Gt.MouseInteraction,...ve}}),scrollCb:Ge,viewportResizeCb:ve=>Sr({type:nn.IncrementalSnapshot,data:{source:Gt.ViewportResize,...ve}}),inputCb:ve=>Sr({type:nn.IncrementalSnapshot,data:{source:Gt.Input,...ve}}),mediaInteractionCb:ve=>Sr({type:nn.IncrementalSnapshot,data:{source:Gt.MediaInteraction,...ve}}),styleSheetRuleCb:ve=>Sr({type:nn.IncrementalSnapshot,data:{source:Gt.StyleSheetRule,...ve}}),styleDeclarationCb:ve=>Sr({type:nn.IncrementalSnapshot,data:{source:Gt.StyleDeclaration,...ve}}),canvasMutationCb:z,fontCb:ve=>Sr({type:nn.IncrementalSnapshot,data:{source:Gt.Font,...ve}}),selectionCb:ve=>{Sr({type:nn.IncrementalSnapshot,data:{source:Gt.Selection,...ve}})},customElementCb:ve=>{Sr({type:nn.IncrementalSnapshot,data:{source:Gt.CustomElement,...ve}})},blockClass:i,ignoreClass:a,ignoreSelector:l,maskAllText:c,maskTextClass:u,unmaskTextClass:f,maskTextSelector:p,unmaskTextSelector:m,maskInputOptions:xe,inlineStylesheet:g,sampling:b,recordDOM:M,recordCanvas:L,inlineImages:Y,userTriggeredOnInput:$,collectFonts:Q,doc:Se,maskAttributeFn:S,maskInputFn:E,maskTextFn:w,keepIframeSrcFn:k,blockSelector:s,unblockSelector:o,slimDOMOptions:Ae,dataURLOptions:P,mirror:qo,iframeManager:Be,stylesheetManager:Me,shadowDomManager:Ue,processedNodeManager:ye,canvasManager:oe,ignoreCSSAttributes:K,plugins:js([te,"optionalAccess",ve=>ve.filter,"call",ve=>ve(Ce=>Ce.observer),"optionalAccess",ve=>ve.map,"call",ve=>ve(Ce=>({observer:Ce.observer,options:Ce.options,callback:lt=>Sr({type:nn.Plugin,data:{plugin:Ce.name,payload:lt}})}))])||[]},{});Be.addLoadListener(Se=>{try{V.push(O(Se.contentDocument))}catch(ve){console.warn(ve)}});const le=()=>{Ke(),V.push(O(document))};return document.readyState==="interactive"||document.readyState==="complete"?le():(V.push(ts("DOMContentLoaded",()=>{Sr({type:nn.DomContentLoaded,data:{}}),X==="DOMContentLoaded"&&le()})),V.push(ts("load",()=>{Sr({type:nn.Load,data:{}}),X==="load"&&le()},window))),()=>{V.forEach(Se=>Se()),ye.destroy(),AS=void 0,h$()}}catch(V){console.warn(V)}}function D$(n){if(!AS)throw new Error("please take full snapshot after start recording");AS(n)}Dl.mirror=qo;Dl.takeFullSnapshot=D$;function B$(n,e){try{return n?n(e):new XL}catch{return console.warn("Unable to initialize CanvasManager"),new XL}}const kt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,jL=["info","warn","error","log"],xx="[Replay] ";function Pw(n,e="info"){Zc({category:"console",data:{logger:"replay"},level:e,message:`${xx}${n}`},{level:e})}function L$(){let n=!1,e=!1;const t={exception:()=>{},infoTick:()=>{},setConfig:r=>{n=r.captureExceptions,e=r.traceInternals}};return kt?(jL.forEach(r=>{t[r]=(...i)=>{qe[r](xx,...i),e&&Pw(i[0])}}),t.exception=(r,...i)=>{t.error&&t.error(...i),qe.error(xx,r),n?XR(r):e&&Pw(r)},t.infoTick=(...r)=>{qe.info(xx,...r),e&&setTimeout(()=>Pw(r[0]),0)}):jL.forEach(r=>{t[r]=()=>{}}),t}const Ht=L$(),N$=3,k$=5;function oI(n){return n>9999999999?n:n*1e3}function Dw(n){return n>9999999999?n/1e3:n}function K_(n,e){e.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(e.category)?n.triggerUserActivity():n.checkAndHandleExpiredSession(),n.addUpdate(()=>(n.throttledAddEvent({type:nn.Custom,timestamp:(e.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:Da(e,10,1e3)}}),e.category==="console")))}const F$="button,a";function E4(n){return n.closest(F$)||n}function A4(n){const e=w4(n);return!e||!(e instanceof Element)?e:E4(e)}function w4(n){return O$(n)?n.target:n}function O$(n){return typeof n=="object"&&!!n&&"target"in n}let xc;function U$(n){return xc||(xc=[],H$()),xc.push(n),()=>{const e=xc?xc.indexOf(n):-1;e>-1&&xc.splice(e,1)}}function H$(){xs(Xn,"open",function(n){return function(...e){if(xc)try{xc.forEach(t=>t())}catch{}return n.apply(Xn,e)}})}const z$=new Set([Gt.Mutation,Gt.StyleSheetRule,Gt.StyleDeclaration,Gt.AdoptedStyleSheet,Gt.CanvasMutation,Gt.Selection,Gt.MediaInteraction]);function G$(n,e,t){n.handleClick(e,t)}class V${constructor(e,t,r=K_){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=t.timeout/1e3,this._threshold=t.threshold/1e3,this._scollTimeout=t.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=t.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){const e=U$(()=>{this._lastMutation=YL()});this._teardown=()=>{e(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,t){if(X$(t,this._ignoreSelector)||!j$(e))return;const r={timestamp:Dw(e.timestamp),clickBreadcrumb:e,clickCount:0,node:t};this._clicks.some(i=>i.node===r.node&&Math.abs(i.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(e=Date.now()){this._lastMutation=Dw(e)}registerScroll(e=Date.now()){this._lastScroll=Dw(e)}registerClick(e){const t=E4(e);this._handleMultiClick(t)}_handleMultiClick(e){this._getClicks(e).forEach(t=>{t.clickCount++})}_getClicks(e){return this._clicks.filter(t=>t.node===e)}_checkClicks(){const e=[],t=YL();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=t&&e.push(r)});for(const r of e){const i=this._clicks.indexOf(r);i>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(i,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const t=this._replay,r=e.scrollAfter&&e.scrollAfter<=this._scollTimeout,i=e.mutationAfter&&e.mutationAfter<=this._threshold,s=!r&&!i,{clickCount:o,clickBreadcrumb:a}=e;if(s){const l=Math.min(e.mutationAfter||this._timeout,this._timeout)*1e3,c=l<this._timeout*1e3?"mutation":"timeout",u={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:Xn.location.href,route:t.getCurrentRoute(),timeAfterClickMs:l,endReason:c,clickCount:o||1}};this._addBreadcrumbEvent(t,u);return}if(o>1){const l={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:Xn.location.href,route:t.getCurrentRoute(),clickCount:o,metric:!0}};this._addBreadcrumbEvent(t,l)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=op(()=>this._checkClicks(),1e3)}}const W$=["A","BUTTON","INPUT"];function X$(n,e){return!!(!W$.includes(n.tagName)||n.tagName==="INPUT"&&!["submit","button"].includes(n.getAttribute("type")||"")||n.tagName==="A"&&(n.hasAttribute("download")||n.hasAttribute("target")&&n.getAttribute("target")!=="_self")||e&&n.matches(e))}function j$(n){return!!(n.data&&typeof n.data.nodeId=="number"&&n.timestamp)}function YL(){return Date.now()/1e3}function Y$(n,e){try{if(!J$(e))return;const{source:t}=e.data;if(z$.has(t)&&n.registerMutation(e.timestamp),t===Gt.Scroll&&n.registerScroll(e.timestamp),K$(e)){const{type:r,id:i}=e.data,s=Dl.mirror.getNode(i);s instanceof HTMLElement&&r===Ki.Click&&n.registerClick(s)}}catch{}}function J$(n){return n.type===N$}function K$(n){return n.data.source===Gt.MouseInteraction}function Fa(n){return{timestamp:Date.now()/1e3,type:"default",...n}}var wS;(function(n){n[n.Document=0]="Document",n[n.DocumentType=1]="DocumentType",n[n.Element=2]="Element",n[n.Text=3]="Text",n[n.CDATA=4]="CDATA",n[n.Comment=5]="Comment"})(wS||(wS={}));const $$=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function q$(n){const e={};!n["data-sentry-component"]&&n["data-sentry-element"]&&(n["data-sentry-component"]=n["data-sentry-element"]);for(const t in n)if($$.has(t)){let r=t;(t==="data-testid"||t==="data-test-id")&&(r="testId"),e[r]=n[t]}return e}const Q$=n=>e=>{if(!n.isEnabled())return;const t=Z$(e);if(!t)return;const r=e.name==="click",i=r?e.event:void 0;r&&n.clickDetector&&i&&i.target&&!i.altKey&&!i.metaKey&&!i.ctrlKey&&!i.shiftKey&&G$(n.clickDetector,t,A4(e.event)),K_(n,t)};function M4(n,e){const t=Dl.mirror.getId(n),r=t&&Dl.mirror.getNode(t),i=r&&Dl.mirror.getMeta(r),s=i&&tq(i)?i:null;return{message:e,data:s?{nodeId:t,node:{id:t,tagName:s.tagName,textContent:Array.from(s.childNodes).map(o=>o.type===wS.Text&&o.textContent).filter(Boolean).map(o=>o.trim()).join(""),attributes:q$(s.attributes)}}:{}}}function Z$(n){const{target:e,message:t}=eq(n);return Fa({category:`ui.${n.name}`,...M4(e,t)})}function eq(n){const e=n.name==="click";let t,r=null;try{r=e?A4(n.event):w4(n.event),t=Hl(r,{maxStringLength:200})||"<unknown>"}catch{t="<unknown>"}return{target:r,message:t}}function tq(n){return n.type===wS.Element}function nq(n,e){if(!n.isEnabled())return;n.updateUserActivity();const t=rq(e);t&&K_(n,t)}function rq(n){const{metaKey:e,shiftKey:t,ctrlKey:r,altKey:i,key:s,target:o}=n;if(!o||iq(o)||!s)return null;const a=e||r||i,l=s.length===1;if(!a&&l)return null;const c=Hl(o,{maxStringLength:200})||"<unknown>",u=M4(o,c);return Fa({category:"ui.keyDown",message:c,data:{...u.data,metaKey:e,shiftKey:t,ctrlKey:r,altKey:i,key:s}})}function iq(n){return n.tagName==="INPUT"||n.tagName==="TEXTAREA"||n.isContentEditable}const sq={resource:uq,paint:lq,navigation:cq};function Hv(n,e){return({metric:t})=>void e.replayPerformanceEntries.push(n(t))}function oq(n){return n.map(aq).filter(Boolean)}function aq(n){const e=sq[n.entryType];return e?e(n):null}function cp(n){return((ls||Xn.performance.timeOrigin)+n)/1e3}function lq(n){const{duration:e,entryType:t,name:r,startTime:i}=n,s=cp(i);return{type:t,name:r,start:s,end:s+e,data:void 0}}function cq(n){const{entryType:e,name:t,decodedBodySize:r,duration:i,domComplete:s,encodedBodySize:o,domContentLoadedEventStart:a,domContentLoadedEventEnd:l,domInteractive:c,loadEventStart:u,loadEventEnd:f,redirectCount:p,startTime:m,transferSize:g,type:v}=n;return i===0?null:{type:`${e}.${v}`,start:cp(m),end:cp(s),name:t,data:{size:g,decodedBodySize:r,encodedBodySize:o,duration:i,domInteractive:c,domContentLoadedEventStart:a,domContentLoadedEventEnd:l,loadEventStart:u,loadEventEnd:f,domComplete:s,redirectCount:p}}}function uq(n){const{entryType:e,initiatorType:t,name:r,responseEnd:i,startTime:s,decodedBodySize:o,encodedBodySize:a,responseStatus:l,transferSize:c}=n;return["fetch","xmlhttprequest"].includes(t)?null:{type:`${e}.${t}`,start:cp(s),end:cp(i),name:r,data:{size:c,statusCode:l,decodedBodySize:o,encodedBodySize:a}}}function fq(n){const e=n.entries[n.entries.length-1],t=e&&e.element?[e.element]:void 0;return j1(n,"largest-contentful-paint",t)}function dq(n){return n.sources!==void 0}function hq(n){const e=[],t=[];for(const r of n.entries)if(dq(r)){const i=[];for(const s of r.sources)if(s.node){t.push(s.node);const o=Dl.mirror.getId(s.node);o&&i.push(o)}e.push({value:r.value,nodeIds:i.length?i:void 0})}return j1(n,"cumulative-layout-shift",t,e)}function pq(n){const e=n.entries[n.entries.length-1],t=e&&e.target?[e.target]:void 0;return j1(n,"first-input-delay",t)}function mq(n){const e=n.entries[n.entries.length-1],t=e&&e.target?[e.target]:void 0;return j1(n,"interaction-to-next-paint",t)}function j1(n,e,t,r){const i=n.value,s=n.rating,o=cp(i);return{type:"web-vital",name:e,start:o,end:o,data:{value:i,size:i,rating:s,nodeIds:t?t.map(a=>Dl.mirror.getId(a)):void 0,attributions:r}}}function gq(n){function e(i){n.performanceEntries.includes(i)||n.performanceEntries.push(i)}function t({entries:i}){i.forEach(e)}const r=[];return["navigation","paint","resource"].forEach(i=>{r.push(ip(i,t))}),r.push(VH(Hv(fq,n)),$R(Hv(hq,n)),WH(Hv(pq,n)),XH(Hv(mq,n))),()=>{r.forEach(i=>i())}}const _q='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}},L=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},O=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},j=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},q=function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&j(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}},B=function(t){return 10+(t.filename?t.filename.length+1:0)},G=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(O(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();var H=function(){function t(t,n){this.c=L(),this.v=1,G.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),G.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=O(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=L();i.p(n.dictionary),j(t,2,i.d())}}(r,this.o),this.v=0),n&&j(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),J="undefined"!=typeof TextEncoder&&new TextEncoder,K="undefined"!=typeof TextDecoder&&new TextDecoder;try{K.decode(F,{stream:!0})}catch(t){}var N=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(P(t),this.d=n||!1)},t}();function P(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(J)return J.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}function Q(t){return function(t,n){n||(n={});var r=S(),e=t.length;r.p(t);var i=O(t,n,B(n),8),a=i.length;return q(i,n),j(i,a-8,r.d()),j(i,a-4,e),i}(P(t))}const R=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new H,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new N(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},V={clear:()=>{R.clear()},addEvent:t=>R.addEvent(t),finish:()=>R.finish(),compress:t=>Q(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in V&&"function"==typeof V[n])try{const t=V[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function vq(){const n=new Blob([_q]);return URL.createObjectURL(n)}class aI extends Error{constructor(){super(`Event buffer exceeded maximum size of ${eI}.`)}}class T4{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const t=JSON.stringify(e).length;if(this._totalSize+=t,this._totalSize>eI)throw new aI;this.events.push(e)}finish(){return new Promise(e=>{const t=this.events;this.clear(),e(JSON.stringify(t))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map(t=>t.timestamp).sort()[0];return e?oI(e):null}}class yq{constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((e,t)=>{this._worker.addEventListener("message",({data:r})=>{r.success?e():t()},{once:!0}),this._worker.addEventListener("error",r=>{t(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){kt&&Ht.info("Destroying compression worker"),this._worker.terminate()}postMessage(e,t){const r=this._getAndIncrementId();return new Promise((i,s)=>{const o=({data:a})=>{const l=a;if(l.method===e&&l.id===r){if(this._worker.removeEventListener("message",o),!l.success){kt&&Ht.error("Error in compression worker: ",l.response),s(new Error("Error in compression worker"));return}i(l.response)}};this._worker.addEventListener("message",o),this._worker.postMessage({id:r,method:e,arg:t})})}_getAndIncrementId(){return this._id++}}class xq{constructor(e){this._worker=new yq(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const t=oI(e.timestamp);(!this._earliestTimestamp||t<this._earliestTimestamp)&&(this._earliestTimestamp=t);const r=JSON.stringify(e);return this._totalSize+=r.length,this._totalSize>eI?Promise.reject(new aI):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,e=>{kt&&Ht.exception(e,'Sending "clear" message to worker failed',e)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}}class Sq{constructor(e){this._fallback=new T4,this._compression=new xq(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(e){kt&&Ht.exception(e,"Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:t}=this._fallback,r=[];for(const i of e)r.push(this._compression.addEvent(i));this._compression.hasCheckout=t,this._used=this._compression;try{await Promise.all(r)}catch(i){kt&&Ht.exception(i,"Failed to add events when switching buffers.")}}}function Eq({useCompression:n,workerUrl:e}){if(n&&window.Worker){const t=Aq(e);if(t)return t}return kt&&Ht.info("Using simple buffer"),new T4}function Aq(n){try{const e=n||wq();if(!e)return;kt&&Ht.info(`Using compression worker${n?` from ${n}`:""}`);const t=new Worker(e);return new Sq(t)}catch(e){kt&&Ht.exception(e,"Failed to create compression worker")}}function wq(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?vq():""}function lI(){try{return"sessionStorage"in Xn&&!!Xn.sessionStorage}catch{return!1}}function Mq(n){Tq(),n.session=void 0}function Tq(){if(lI())try{Xn.sessionStorage.removeItem(QR)}catch{}}function C4(n){return n===void 0?!1:Math.random()<n}function b4(n){const e=Date.now(),t=n.id||or(),r=n.started||e,i=n.lastActivity||e,s=n.segmentId||0,o=n.sampled,a=n.previousSessionId;return{id:t,started:r,lastActivity:i,segmentId:s,sampled:o,previousSessionId:a}}function cI(n){if(lI())try{Xn.sessionStorage.setItem(QR,JSON.stringify(n))}catch{}}function Cq(n,e){return C4(n)?"session":e?"buffer":!1}function JL({sessionSampleRate:n,allowBuffering:e,stickySession:t=!1},{previousSessionId:r}={}){const i=Cq(n,e),s=b4({sampled:i,previousSessionId:r});return t&&cI(s),s}function bq(){if(!lI())return null;try{const n=Xn.sessionStorage.getItem(QR);if(!n)return null;const e=JSON.parse(n);return kt&&Ht.infoTick("Loading existing session"),b4(e)}catch{return null}}function BC(n,e,t=+new Date){return n===null||e===void 0||e<0?!0:e===0?!1:n+e<=t}function R4(n,{maxReplayDuration:e,sessionIdleExpire:t,targetTime:r=Date.now()}){return BC(n.started,e,r)||BC(n.lastActivity,t,r)}function I4(n,{sessionIdleExpire:e,maxReplayDuration:t}){return!(!R4(n,{sessionIdleExpire:e,maxReplayDuration:t})||n.sampled==="buffer"&&n.segmentId===0)}function Bw({sessionIdleExpire:n,maxReplayDuration:e,previousSessionId:t},r){const i=r.stickySession&&bq();return i?I4(i,{sessionIdleExpire:n,maxReplayDuration:e})?(kt&&Ht.infoTick("Session in sessionStorage is expired, creating new one..."),JL(r,{previousSessionId:i.id})):i:(kt&&Ht.infoTick("Creating new session"),JL(r,{previousSessionId:t}))}function Rq(n){return n.type===nn.Custom}function uI(n,e,t){return D4(n,e)?(P4(n,e,t),!0):!1}function Iq(n,e,t){return D4(n,e)?P4(n,e,t):Promise.resolve(null)}async function P4(n,e,t){if(!n.eventBuffer)return null;try{t&&n.recordingMode==="buffer"&&n.eventBuffer.clear(),t&&(n.eventBuffer.hasCheckout=!0);const r=n.getOptions(),i=Pq(e,r.beforeAddRecordingEvent);return i?await n.eventBuffer.addEvent(i):void 0}catch(r){const i=r&&r instanceof aI?"addEventSizeExceeded":"addEvent";n.handleException(r),await n.stop({reason:i});const s=Zt();s&&s.recordDroppedEvent("internal_sdk_error","replay")}}function D4(n,e){if(!n.eventBuffer||n.isPaused()||!n.isEnabled())return!1;const t=oI(e.timestamp);return t+n.timeouts.sessionIdlePause<Date.now()?!1:t>n.getContext().initialTimestamp+n.getOptions().maxReplayDuration?(kt&&Ht.infoTick(`Skipping event with timestamp ${t} because it is after maxReplayDuration`),!1):!0}function Pq(n,e){try{if(typeof e=="function"&&Rq(n))return e(n)}catch(t){return kt&&Ht.exception(t,"An error occured in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return n}function fI(n){return!n.type}function LC(n){return n.type==="transaction"}function Dq(n){return n.type==="replay_event"}function KL(n){return n.type==="feedback"}function Bq(n){return(e,t)=>{if(!n.isEnabled()||!fI(e)&&!LC(e))return;const r=t&&t.statusCode;if(!(!r||r<200||r>=300)){if(LC(e)){Lq(n,e);return}Nq(n,e)}}}function Lq(n,e){const t=n.getContext();e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id&&t.traceIds.size<100&&t.traceIds.add(e.contexts.trace.trace_id)}function Nq(n,e){const t=n.getContext();if(e.event_id&&t.errorIds.size<100&&t.errorIds.add(e.event_id),n.recordingMode!=="buffer"||!e.tags||!e.tags.replayId)return;const{beforeErrorSampling:r}=n.getOptions();typeof r=="function"&&!r(e)||op(()=>{n.sendBufferedReplayOrFlush()})}function kq(n){return e=>{!n.isEnabled()||!fI(e)||Fq(n,e)}}function Fq(n,e){const t=e.exception&&e.exception.values&&e.exception.values[0]&&e.exception.values[0].value;if(typeof t=="string"&&(t.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||t.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const r=Fa({category:"replay.hydrate-error",data:{url:NR()}});K_(n,r)}}function Oq(n){const e=Zt();e&&e.on("beforeAddBreadcrumb",t=>Uq(n,t))}function Uq(n,e){if(!n.isEnabled()||!B4(e))return;const t=Hq(e);t&&K_(n,t)}function Hq(n){return!B4(n)||["fetch","xhr","sentry.event","sentry.transaction"].includes(n.category)||n.category.startsWith("ui.")?null:n.category==="console"?zq(n):Fa(n)}function zq(n){const e=n.data&&n.data.arguments;if(!Array.isArray(e)||e.length===0)return Fa(n);let t=!1;const r=e.map(i=>{if(!i)return i;if(typeof i=="string")return i.length>Fv?(t=!0,`${i.slice(0,Fv)}`):i;if(typeof i=="object")try{const s=Da(i,7);return JSON.stringify(s).length>Fv?(t=!0,`${JSON.stringify(s,null,2).slice(0,Fv)}`):s}catch{}return i});return Fa({...n,data:{...n.data,arguments:r,...t?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function B4(n){return!!n.category}function Gq(n,e){return n.type||!n.exception||!n.exception.values||!n.exception.values.length?!1:!!(e.originalException&&e.originalException.__rrweb__)}function Vq(n,e){n.triggerUserActivity(),n.addUpdate(()=>e.timestamp?(n.throttledAddEvent({type:nn.Custom,timestamp:e.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:e.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:e.event_id}}}}),!1):!0)}function Wq(n,e){return n.recordingMode!=="buffer"||e.message===ZR||!e.exception||e.type?!1:C4(n.getOptions().errorSampleRate)}function Xq(n){return Object.assign((e,t)=>n.isEnabled()?Dq(e)?(delete e.breadcrumbs,e):!fI(e)&&!LC(e)&&!KL(e)||!n.checkAndHandleExpiredSession()?e:KL(e)?(n.flush(),e.contexts.feedback.replay_id=n.getSessionId(),Vq(n,e),e):Gq(e,t)&&!n.getOptions()._experiments.captureExceptions?(kt&&Ht.log("Ignoring error from rrweb internals",e),null):((Wq(n,e)||n.recordingMode==="session")&&(e.tags={...e.tags,replayId:n.getSessionId()}),e):e,{id:"Replay"})}function Y1(n,e){return e.map(({type:t,start:r,end:i,name:s,data:o})=>{const a=n.throttledAddEvent({type:nn.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:t,description:s,startTimestamp:r,endTimestamp:i,data:o}}});return typeof a=="string"?Promise.resolve(null):a})}function jq(n){const{from:e,to:t}=n,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:t,data:{previous:e}}}function Yq(n){return e=>{if(!n.isEnabled())return;const t=jq(e);t!==null&&(n.getContext().urls.push(t.name),n.triggerUserActivity(),n.addUpdate(()=>(Y1(n,[t]),!1)))}}function Jq(n,e){return kt&&n.getOptions()._experiments.traceInternals?!1:_j(e,Zt())}function L4(n,e){n.isEnabled()&&e!==null&&(Jq(n,e.name)||n.addUpdate(()=>(Y1(n,[e]),!0)))}function J1(n){if(!n)return;const e=new TextEncoder;try{if(typeof n=="string")return e.encode(n).length;if(n instanceof URLSearchParams)return e.encode(n.toString()).length;if(n instanceof FormData){const t=O4(n);return e.encode(t).length}if(n instanceof Blob)return n.size;if(n instanceof ArrayBuffer)return n.byteLength}catch{}}function N4(n){if(!n)return;const e=parseInt(n,10);return isNaN(e)?void 0:e}function k4(n){try{if(typeof n=="string")return[n];if(n instanceof URLSearchParams)return[n.toString()];if(n instanceof FormData)return[O4(n)];if(!n)return[void 0]}catch(e){return kt&&Ht.exception(e,"Failed to serialize body",n),[void 0,"BODY_PARSE_ERROR"]}return kt&&Ht.info("Skipping network body because of body type",n),[void 0,"UNPARSEABLE_BODY_TYPE"]}function MS(n,e){if(!n)return{headers:{},size:void 0,_meta:{warnings:[e]}};const t={...n._meta},r=t.warnings||[];return t.warnings=[...r,e],n._meta=t,n}function F4(n,e){if(!e)return null;const{startTimestamp:t,endTimestamp:r,url:i,method:s,statusCode:o,request:a,response:l}=e;return{type:n,start:t/1e3,end:r/1e3,name:i,data:Gr({method:s,statusCode:o,request:a,response:l})}}function l_(n){return{headers:{},size:n,_meta:{warnings:["URL_SKIPPED"]}}}function Wc(n,e,t){if(!e&&Object.keys(n).length===0)return;if(!e)return{headers:n};if(!t)return{headers:n,size:e};const r={headers:n,size:e},{body:i,warnings:s}=Kq(t);return r.body=i,s&&s.length>0&&(r._meta={warnings:s}),r}function NC(n,e){return Object.entries(n).reduce((t,[r,i])=>{const s=r.toLowerCase();return e.includes(s)&&n[r]&&(t[s]=i),t},{})}function O4(n){return new URLSearchParams(n).toString()}function Kq(n){if(!n||typeof n!="string")return{body:n};const e=n.length>DL,t=$q(n);if(e){const r=n.slice(0,DL);return t?{body:r,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${r}`,warnings:["TEXT_TRUNCATED"]}}if(t)try{return{body:JSON.parse(n)}}catch{}return{body:n}}function $q(n){const e=n[0],t=n[n.length-1];return e==="["&&t==="]"||e==="{"&&t==="}"}function TS(n,e){const t=qq(n);return Gc(t,e)}function qq(n,e=Xn.document.baseURI){if(n.startsWith("http://")||n.startsWith("https://")||n.startsWith(Xn.location.origin))return n;const t=new URL(n,e);if(t.origin!==new URL(e).origin)return n;const r=t.href;return!n.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function Qq(n,e,t){try{const r=await eQ(n,e,t),i=F4("resource.fetch",r);L4(t.replay,i)}catch(r){kt&&Ht.exception(r,"Failed to capture fetch breadcrumb")}}function Zq(n,e){const{input:t,response:r}=e,i=t?U4(t):void 0,s=J1(i),o=r?N4(r.headers.get("content-length")):void 0;s!==void 0&&(n.data.request_body_size=s),o!==void 0&&(n.data.response_body_size=o)}async function eQ(n,e,t){const r=Date.now(),{startTimestamp:i=r,endTimestamp:s=r}=e,{url:o,method:a,status_code:l=0,request_body_size:c,response_body_size:u}=n.data,f=TS(o,t.networkDetailAllowUrls)&&!TS(o,t.networkDetailDenyUrls),p=f?tQ(t,e.input,c):l_(c),m=await nQ(f,t,e.response,u);return{startTimestamp:i,endTimestamp:s,url:o,method:a,statusCode:l,request:p,response:m}}function tQ({networkCaptureBodies:n,networkRequestHeaders:e},t,r){const i=t?sQ(t,e):{};if(!n)return Wc(i,r,void 0);const s=U4(t),[o,a]=k4(s),l=Wc(i,r,o);return a?MS(l,a):l}async function nQ(n,{networkCaptureBodies:e,networkResponseHeaders:t},r,i){if(!n&&i!==void 0)return l_(i);const s=r?H4(r.headers,t):{};if(!r||!e&&i!==void 0)return Wc(s,i,void 0);const[o,a]=await iQ(r),l=rQ(o,{networkCaptureBodies:e,responseBodySize:i,captureDetails:n,headers:s});return a?MS(l,a):l}function rQ(n,{networkCaptureBodies:e,responseBodySize:t,captureDetails:r,headers:i}){try{const s=n&&n.length&&t===void 0?J1(n):t;return r?e?Wc(i,s,n):Wc(i,s,void 0):l_(s)}catch(s){return kt&&Ht.exception(s,"Failed to serialize response body"),Wc(i,t,void 0)}}async function iQ(n){const e=oQ(n);if(!e)return[void 0,"BODY_PARSE_ERROR"];try{return[await aQ(e)]}catch(t){return kt&&Ht.exception(t,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"]}}function U4(n=[]){if(!(n.length!==2||typeof n[1]!="object"))return n[1].body}function H4(n,e){const t={};return e.forEach(r=>{n.get(r)&&(t[r]=n.get(r))}),t}function sQ(n,e){return n.length===1&&typeof n[0]!="string"?$L(n[0],e):n.length===2?$L(n[1],e):{}}function $L(n,e){if(!n)return{};const t=n.headers;return t?t instanceof Headers?H4(t,e):Array.isArray(t)?{}:NC(t,e):{}}function oQ(n){try{return n.clone()}catch(e){kt&&Ht.exception(e,"Failed to clone response body")}}function aQ(n){return new Promise((e,t)=>{const r=op(()=>t(new Error("Timeout while trying to read response body")),500);lQ(n).then(i=>e(i),i=>t(i)).finally(()=>clearTimeout(r))})}async function lQ(n){return await n.text()}async function cQ(n,e,t){try{const r=fQ(n,e,t),i=F4("resource.xhr",r);L4(t.replay,i)}catch(r){kt&&Ht.exception(r,"Failed to capture xhr breadcrumb")}}function uQ(n,e){const{xhr:t,input:r}=e;if(!t)return;const i=J1(r),s=t.getResponseHeader("content-length")?N4(t.getResponseHeader("content-length")):mQ(t.response,t.responseType);i!==void 0&&(n.data.request_body_size=i),s!==void 0&&(n.data.response_body_size=s)}function fQ(n,e,t){const r=Date.now(),{startTimestamp:i=r,endTimestamp:s=r,input:o,xhr:a}=e,{url:l,method:c,status_code:u=0,request_body_size:f,response_body_size:p}=n.data;if(!l)return null;if(!a||!TS(l,t.networkDetailAllowUrls)||TS(l,t.networkDetailDenyUrls)){const T=l_(f),b=l_(p);return{startTimestamp:i,endTimestamp:s,url:l,method:c,statusCode:u,request:T,response:b}}const m=a[nf],g=m?NC(m.request_headers,t.networkRequestHeaders):{},v=NC(dQ(a),t.networkResponseHeaders),[y,_]=t.networkCaptureBodies?k4(o):[void 0],[S,E]=t.networkCaptureBodies?hQ(a):[void 0],w=Wc(g,f,y),I=Wc(v,p,S);return{startTimestamp:i,endTimestamp:s,url:l,method:c,statusCode:u,request:_?MS(w,_):w,response:E?MS(I,E):I}}function dQ(n){const e=n.getAllResponseHeaders();return e?e.split(`\r
`).reduce((t,r)=>{const[i,s]=r.split(": ");return s&&(t[i.toLowerCase()]=s),t},{}):{}}function hQ(n){const e=[];try{return[n.responseText]}catch(t){e.push(t)}try{return pQ(n.response,n.responseType)}catch(t){e.push(t)}return kt&&Ht.warn("Failed to get xhr response body",...e),[void 0]}function pQ(n,e){try{if(typeof n=="string")return[n];if(n instanceof Document)return[n.body.outerHTML];if(e==="json"&&n&&typeof n=="object")return[JSON.stringify(n)];if(!n)return[void 0]}catch(t){return kt&&Ht.exception(t,"Failed to serialize body",n),[void 0,"BODY_PARSE_ERROR"]}return kt&&Ht.info("Skipping network body because of body type",n),[void 0,"UNPARSEABLE_BODY_TYPE"]}function mQ(n,e){try{const t=e==="json"&&n&&typeof n=="object"?JSON.stringify(n):n;return J1(t)}catch{return}}function gQ(n){const e=Zt();try{const{networkDetailAllowUrls:t,networkDetailDenyUrls:r,networkCaptureBodies:i,networkRequestHeaders:s,networkResponseHeaders:o}=n.getOptions(),a={replay:n,networkDetailAllowUrls:t,networkDetailDenyUrls:r,networkCaptureBodies:i,networkRequestHeaders:s,networkResponseHeaders:o};e&&e.on("beforeAddBreadcrumb",(l,c)=>_Q(a,l,c))}catch{}}function _Q(n,e,t){if(e.data)try{vQ(e)&&xQ(t)&&(uQ(e,t),cQ(e,t,n)),yQ(e)&&SQ(t)&&(Zq(e,t),Qq(e,t,n))}catch(r){kt&&Ht.exception(r,"Error when enriching network breadcrumb")}}function vQ(n){return n.category==="xhr"}function yQ(n){return n.category==="fetch"}function xQ(n){return n&&n.xhr}function SQ(n){return n&&n.response}function EQ(n){const e=Zt();KH(Q$(n)),V1(Yq(n)),Oq(n),gQ(n);const t=Xq(n);tj(t),e&&(e.on("beforeSendEvent",kq(n)),e.on("afterSendEvent",Bq(n)),e.on("createDsc",r=>{const i=n.getSessionId();i&&n.isEnabled()&&n.recordingMode==="session"&&n.checkAndHandleExpiredSession()&&(r.replay_id=i)}),e.on("spanStart",r=>{n.lastActiveSpan=r}),e.on("spanEnd",r=>{n.lastActiveSpan=r}),e.on("beforeSendFeedback",(r,i)=>{const s=n.getSessionId();i&&i.includeReplay&&n.isEnabled()&&s&&r.contexts&&r.contexts.feedback&&(r.contexts.feedback.replay_id=s)}))}async function AQ(n){try{return Promise.all(Y1(n,[wQ(Xn.performance.memory)]))}catch{return[]}}function wQ(n){const{jsHeapSizeLimit:e,totalJSHeapSize:t,usedJSHeapSize:r}=n,i=Date.now()/1e3;return{type:"memory",name:"memory",start:i,end:i,data:{memory:{jsHeapSizeLimit:e,totalJSHeapSize:t,usedJSHeapSize:r}}}}function MQ(n,e,t){let r,i,s;const o=t&&t.maxWait?Math.max(t.maxWait,e):0;function a(){return l(),r=n(),r}function l(){i!==void 0&&clearTimeout(i),s!==void 0&&clearTimeout(s),i=s=void 0}function c(){return i!==void 0||s!==void 0?a():r}function u(){return i&&clearTimeout(i),i=op(a,e),o&&s===void 0&&(s=op(a,o)),r}return u.cancel=l,u.flush=c,u}function TQ(n){let e=!1;return(t,r)=>{if(!n.checkAndHandleExpiredSession()){kt&&Ht.warn("Received replay event after session expired.");return}const i=r||!e;e=!0,n.clickDetector&&Y$(n.clickDetector,t),n.addUpdate(()=>{if(n.recordingMode==="buffer"&&i&&n.setInitialState(),!uI(n,t,i))return!0;if(!i)return!1;if(bQ(n,i),n.session&&n.session.previousSessionId)return!0;if(n.recordingMode==="buffer"&&n.session&&n.eventBuffer){const s=n.eventBuffer.getEarliestTimestamp();s&&(kt&&Ht.info(`Updating session start time to earliest event in buffer to ${new Date(s)}`),n.session.started=s,n.getOptions().stickySession&&cI(n.session))}return n.recordingMode==="session"&&n.flush(),!0})}}function CQ(n){const e=n.getOptions();return{type:nn.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:n.isRecordingCanvas(),sessionSampleRate:e.sessionSampleRate,errorSampleRate:e.errorSampleRate,useCompressionOption:e.useCompression,blockAllMedia:e.blockAllMedia,maskAllText:e.maskAllText,maskAllInputs:e.maskAllInputs,useCompression:n.eventBuffer?n.eventBuffer.type==="worker":!1,networkDetailHasUrls:e.networkDetailAllowUrls.length>0,networkCaptureBodies:e.networkCaptureBodies,networkRequestHasHeaders:e.networkRequestHeaders.length>0,networkResponseHasHeaders:e.networkResponseHeaders.length>0}}}}function bQ(n,e){!e||!n.session||n.session.segmentId!==0||uI(n,CQ(n),!1)}function RQ(n,e,t,r){return ed(oH(n,OR(n),r,t),[[{type:"replay_event"},n],[{type:"replay_recording",length:typeof e=="string"?new TextEncoder().encode(e).length:e.length},e]])}function IQ({recordingData:n,headers:e}){let t;const r=`${JSON.stringify(e)}
`;if(typeof n=="string")t=`${r}${n}`;else{const s=new TextEncoder().encode(r);t=new Uint8Array(s.length+n.length),t.set(s),t.set(n,s.length)}return t}async function PQ({client:n,scope:e,replayId:t,event:r}){const i=typeof n._integrations=="object"&&n._integrations!==null&&!Array.isArray(n._integrations)?Object.keys(n._integrations):void 0,s={event_id:t,integrations:i};n.emit("preprocessEvent",r,s);const o=await wH(n.getOptions(),r,s,e,n,lo());if(!o)return null;o.platform=o.platform||"javascript";const a=n.getSdkMetadata(),{name:l,version:c}=a&&a.sdk||{};return o.sdk={...o.sdk,name:l||"sentry.javascript.unknown",version:c||"0.0.0"},o}async function DQ({recordingData:n,replayId:e,segmentId:t,eventContext:r,timestamp:i,session:s}){const o=IQ({recordingData:n,headers:{segment_id:t}}),{urls:a,errorIds:l,traceIds:c,initialTimestamp:u}=r,f=Zt(),p=Fn(),m=f&&f.getTransport(),g=f&&f.getDsn();if(!f||!m||!g||!s.sampled)return Gl({});const v={type:pK,replay_start_timestamp:u/1e3,timestamp:i/1e3,error_ids:l,trace_ids:c,urls:a,replay_id:e,segment_id:t,replay_type:s.sampled},y=await PQ({scope:p,client:f,replayId:e,event:v});if(!y)return f.recordDroppedEvent("event_processor","replay",v),kt&&Ht.info("An event processor returned `null`, will not send event."),Gl({});delete y.sdkProcessingMetadata;const _=RQ(y,o,g,f.getOptions().tunnel);let S;try{S=await m.send(_)}catch(w){const I=new Error(ZR);try{I.cause=w}catch{}throw I}if(typeof S.statusCode=="number"&&(S.statusCode<200||S.statusCode>=300))throw new z4(S.statusCode);const E=lH({},S);if(aH(E,"replay"))throw new G4(E);return S}class z4 extends Error{constructor(e){super(`Transport returned status code ${e}`)}}class G4 extends Error{constructor(e){super("Rate limit hit"),this.rateLimits=e}}async function V4(n,e={count:0,interval:xK}){const{recordingData:t,options:r}=n;if(t.length)try{return await DQ(n),!0}catch(i){if(i instanceof z4||i instanceof G4)throw i;if(TH("Replays",{_retryCount:e.count}),kt&&r._experiments&&r._experiments.captureExceptions&&XR(i),e.count>=SK){const s=new Error(`${ZR} - max retries exceeded`);try{s.cause=i}catch{}throw s}return e.interval*=++e.count,new Promise((s,o)=>{op(async()=>{try{await V4(n,e),s(!0)}catch(a){o(a)}},e.interval)})}}const W4="__THROTTLED",BQ="__SKIPPED";function LQ(n,e,t){const r=new Map,i=a=>{const l=a-t;r.forEach((c,u)=>{u<l&&r.delete(u)})},s=()=>[...r.values()].reduce((a,l)=>a+l,0);let o=!1;return(...a)=>{const l=Math.floor(Date.now()/1e3);if(i(l),s()>=e){const u=o;return o=!0,u?BQ:W4}o=!1;const c=r.get(l)||0;return r.set(l,c+1),n(...a)}}class Sc{constructor({options:e,recordingOptions:t}){Sc.prototype.__init.call(this),Sc.prototype.__init2.call(this),Sc.prototype.__init3.call(this),Sc.prototype.__init4.call(this),Sc.prototype.__init5.call(this),Sc.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:mK,sessionIdleExpire:gK},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=t,this._options=e,this._debouncedFlush=MQ(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=LQ((o,a)=>Iq(this,o,a),300,5);const{slowClickTimeout:r,slowClickIgnoreSelectors:i}=this.getOptions(),s=r?{threshold:Math.min(EK,r),timeout:r,scrollTimeout:AK,ignoreSelector:i?i.join(","):""}:void 0;if(s&&(this.clickDetector=new V$(this,s)),kt){const o=e._experiments;Ht.setConfig({captureExceptions:!!o.captureExceptions,traceInternals:!!o.traceInternals})}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(e){kt&&Ht.exception(e)}initializeSampling(e){const{errorSampleRate:t,sessionSampleRate:r}=this._options,i=t<=0&&r<=0;if(this._requiresManualStart=i,!i){if(this._initializeSessionForSampling(e),!this.session){kt&&Ht.exception(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",kt&&Ht.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session"){kt&&Ht.info("Recording is already in progress");return}if(this._isEnabled&&this.recordingMode==="buffer"){kt&&Ht.info("Buffering is in progress, call `flush()` to save the replay");return}kt&&Ht.infoTick("Starting replay in session mode"),this._updateUserActivity();const e=Bw({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this._initializeRecording()}startBuffering(){if(this._isEnabled){kt&&Ht.info("Buffering is in progress, call `flush()` to save the replay");return}kt&&Ht.infoTick("Starting replay in buffer mode");const e=Bw({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const e=this._canvas;this._stopRecording=Dl({...this._recordingOptions,...this.recordingMode==="buffer"&&{checkoutEveryNms:yK},emit:TQ(this),onMutation:this._onMutationHandler,...e?{recordCanvas:e.recordCanvas,getCanvasManager:e.getCanvasManager,sampling:e.sampling,dataURLOptions:e.dataURLOptions}:{}})}catch(e){this.handleException(e)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this.handleException(e),!1}}async stop({forceFlush:e=!1,reason:t}={}){if(this._isEnabled){this._isEnabled=!1;try{kt&&Ht.info(`Stopping Replay${t?` triggered by ${t}`:""}`),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),e&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,Mq(this)}catch(r){this.handleException(r)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),kt&&Ht.info("Pausing replay"))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),kt&&Ht.info("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:e=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const t=Date.now();kt&&Ht.info("Converting buffer to session"),await this.flushImmediate();const r=this.stopRecording();!e||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this._updateUserActivity(t),this._updateSessionActivity(t),this._maybeSaveSession()),this.startRecording())}addUpdate(e){const t=e();this.recordingMode!=="buffer"&&t!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(this._lastActivity&&BC(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const e=`${Xn.location.pathname}${Xn.location.hash}${Xn.location.search}`,t=`${Xn.location.origin}${e}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=t,this._context.initialTimestamp=Date.now(),this._context.urls.push(t)}throttledAddEvent(e,t){const r=this._throttledAddEvent(e,t);if(r===W4){const i=Fa({category:"replay.throttled"});this.addUpdate(()=>!uI(this,{type:k$,timestamp:i.timestamp||0,data:{tag:"breadcrumb",payload:i,metric:!0}}))}return r}getCurrentRoute(){const e=this.lastActiveSpan||zi(),t=e&&yi(e),i=(t&&xn(t).data||{})[ka];if(!(!t||!i||!["route","custom"].includes(i)))return xn(t).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=Eq({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(e){const t=this._options.errorSampleRate>0,r=Bw({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:t});this.session=r}_checkSession(){if(!this.session)return!1;const e=this.session;return I4(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(e),!1):!0}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{Xn.document.addEventListener("visibilitychange",this._handleVisibilityChange),Xn.addEventListener("blur",this._handleWindowBlur),Xn.addEventListener("focus",this._handleWindowFocus),Xn.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(EQ(this),this._hasInitializedCoreListeners=!0)}catch(e){this.handleException(e)}this._performanceCleanupCallback=gq(this)}_removeListeners(){try{Xn.document.removeEventListener("visibilitychange",this._handleVisibilityChange),Xn.removeEventListener("blur",this._handleWindowBlur),Xn.removeEventListener("focus",this._handleWindowFocus),Xn.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this.handleException(e)}}__init(){this._handleVisibilityChange=()=>{Xn.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const e=Fa({category:"ui.blur"});this._doChangeToBackgroundTasks(e)}}__init3(){this._handleWindowFocus=()=>{const e=Fa({category:"ui.focus"});this._doChangeToForegroundTasks(e)}}__init4(){this._handleKeyboardEvent=e=>{nq(this,e)}}_doChangeToBackgroundTasks(e){!this.session||R4(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush())}_doChangeToForegroundTasks(e){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){kt&&Ht.info("Document has become active, but session has expired");return}e&&this._createCustomBreadcrumb(e)}_updateUserActivity(e=Date.now()){this._lastActivity=e}_updateSessionActivity(e=Date.now()){this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate(()=>{this.throttledAddEvent({type:nn.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})})}_addPerformanceEntries(){const e=oq(this.performanceEntries).concat(this.replayPerformanceEntries);return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(Y1(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:t}=this;if(!e||!t||this._requiresManualStart||e.segmentId)return;const r=t.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){const e=this.getSessionId();if(!this.session||!this.eventBuffer||!e){kt&&Ht.error("No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!(!this.eventBuffer||!this.eventBuffer.hasEvents)&&(await AQ(this),!!this.eventBuffer&&e===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const t=Date.now();if(t-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const r=this._popEventContext(),i=this.session.segmentId++;this._maybeSaveSession();const s=await this.eventBuffer.finish();await V4({replayId:e,recordingData:s,segmentId:i,eventContext:r,session:this.session,options:this.getOptions(),timestamp:t})}catch(t){this.handleException(t),this.stop({reason:"sendReplay"});const r=Zt();r&&r.recordDroppedEvent("send_error","replay")}}__init5(){this._flush=async({force:e=!1}={})=>{if(!this._isEnabled&&!e)return;if(!this.checkAndHandleExpiredSession()){kt&&Ht.error("Attempting to finish replay event after session expired.");return}if(!this.session)return;const t=this.session.started,i=Date.now()-t;this._debouncedFlush.cancel();const s=i<this._options.minReplayDuration,o=i>this._options.maxReplayDuration+5e3;if(s||o){kt&&Ht.info(`Session duration (${Math.floor(i/1e3)}s) is too ${s?"short":"long"}, not sending replay.`),s&&this._debouncedFlush();return}const a=this.eventBuffer;if(a&&this.session.segmentId===0&&!a.hasCheckout&&kt&&Ht.info("Flushing initial segment without checkout."),!this._flushLock){this._flushLock=this._runFlush(),await this._flushLock,this._flushLock=void 0;return}try{await this._flushLock}catch(l){kt&&Ht.error(l)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&cI(this.session)}__init6(){this._onMutationHandler=e=>{const t=e.length,r=this._options.mutationLimit,i=this._options.mutationBreadcrumbLimit,s=r&&t>r;if(t>i||s){const o=Fa({category:"replay.mutations",data:{count:t,limit:s}});this._createCustomBreadcrumb(o)}return s?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}}function vm(n,e){return[...n,...e].join(",")}function NQ({mask:n,unmask:e,block:t,unblock:r,ignore:i}){const s=['base[href="/"]'],o=vm(n,[".sentry-mask","[data-sentry-mask]"]),a=vm(e,[]);return{maskTextSelector:o,unmaskTextSelector:a,blockSelector:vm(t,[".sentry-block","[data-sentry-block]",...s]),unblockSelector:vm(r,[]),ignoreSelector:vm(i,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}function kQ({el:n,key:e,maskAttributes:t,maskAllText:r,privacyOptions:i,value:s}){return!r||i.unmaskTextSelector&&n.matches(i.unmaskTextSelector)?s:t.includes(e)||e==="value"&&n.tagName==="INPUT"&&["submit","button"].includes(n.getAttribute("type")||"")?s.replace(/[\S]/g,"*"):s}const qL='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',FQ=["content-length","content-type","accept"];let QL=!1;const OQ=n=>new K1(n);class K1{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:e=_K,flushMaxDelay:t=vK,minReplayDuration:r=wK,maxReplayDuration:i=BL,stickySession:s=!0,useCompression:o=!0,workerUrl:a,_experiments:l={},maskAllText:c=!0,maskAllInputs:u=!0,blockAllMedia:f=!0,mutationBreadcrumbLimit:p=750,mutationLimit:m=1e4,slowClickTimeout:g=7e3,slowClickIgnoreSelectors:v=[],networkDetailAllowUrls:y=[],networkDetailDenyUrls:_=[],networkCaptureBodies:S=!0,networkRequestHeaders:E=[],networkResponseHeaders:w=[],mask:I=[],maskAttributes:T=["title","placeholder"],unmask:b=[],block:P=[],unblock:C=[],ignore:M=[],maskFn:L,beforeAddRecordingEvent:U,beforeErrorSampling:X}={}){this.name=K1.id;const $=NQ({mask:I,unmask:b,block:P,unblock:C,ignore:M});if(this._recordingOptions={maskAllInputs:u,maskAllText:c,maskInputOptions:{password:!0},maskTextFn:L,maskInputFn:L,maskAttributeFn:(Q,Y,te)=>kQ({maskAttributes:T,maskAllText:c,privacyOptions:$,key:Q,value:Y,el:te}),...$,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:Q=>{try{Q.__rrweb__=!0}catch{}}},this._initialOptions={flushMinDelay:e,flushMaxDelay:t,minReplayDuration:Math.min(r,MK),maxReplayDuration:Math.min(i,BL),stickySession:s,useCompression:o,workerUrl:a,blockAllMedia:f,maskAllInputs:u,maskAllText:c,mutationBreadcrumbLimit:p,mutationLimit:m,slowClickTimeout:g,slowClickIgnoreSelectors:v,networkDetailAllowUrls:y,networkDetailDenyUrls:_,networkCaptureBodies:S,networkRequestHeaders:ZL(E),networkResponseHeaders:ZL(w),beforeAddRecordingEvent:U,beforeErrorSampling:X,_experiments:l},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${qL}`:qL),this._isInitialized&&lC())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return QL}set _isInitialized(e){QL=e}afterAllSetup(e){!lC()||this._replay||(this._setup(e),this._initialize(e))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(e){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(e):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(){if(!(!this._replay||!this._replay.isEnabled()))return this._replay.getSessionId()}_initialize(e){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(e),this._replay.initializeSampling())}_setup(e){const t=UQ(this._initialOptions,e);this._replay=new Sc({options:t,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(e){try{const t=e.getIntegrationByName("ReplayCanvas");if(!t)return;this._replay._canvas=t.getOptions()}catch{}}}K1.__initStatic();function UQ(n,e){const t=e.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...Gr(n)},i=hS(t.replaysSessionSampleRate),s=hS(t.replaysOnErrorSampleRate);return i==null&&s==null&&Bp(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),i!=null&&(r.sessionSampleRate=i),s!=null&&(r.errorSampleRate=s),r}function ZL(n){return[...FQ,...n.map(e=>e.toLowerCase())]}const Oa=pn,Ln=Oa.document,Xm=Oa.navigator,X4="Report a Bug",HQ="Cancel",zQ="Send Bug Report",GQ="Confirm",VQ="Report a Bug",WQ="your.email@example.org",XQ="Email",jQ="What's the bug? What did you expect?",YQ="Description",JQ="Your Name",KQ="Name",$Q="Thank you for your report!",qQ="(required)",QQ="Add a screenshot",ZQ="Remove screenshot",eZ="widget",tZ="api",nZ=5e3,rZ=(n,e={includeReplay:!0})=>{if(!n.message)throw new Error("Unable to submit feedback with empty message");const t=Zt();if(!t)throw new Error("No client setup, cannot send feedback.");n.tags&&Object.keys(n.tags).length&&Fn().setTags(n.tags);const r=Jj({source:tZ,url:NR(),...n},e);return new Promise((i,s)=>{const o=setTimeout(()=>s("Unable to determine if Feedback was correctly sent."),5e3),a=t.on("afterSendEvent",(l,c)=>{if(l.event_id===r)return clearTimeout(o),a(),c&&typeof c.statusCode=="number"&&c.statusCode>=200&&c.statusCode<300&&i(r),c&&typeof c.statusCode=="number"&&c.statusCode===0?s("Unable to send Feedback. This is because of network issues, or because you are using an ad-blocker."):c&&typeof c.statusCode=="number"&&c.statusCode===403?s("Unable to send Feedback. This could be because this domain is not in your list of allowed domains."):s("Unable to send Feedback. This could be because of network issues, or because you are using an ad-blocker")})})},Sx=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function iZ(){return!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(Xm.userAgent)||/Macintosh/i.test(Xm.userAgent)&&Xm.maxTouchPoints&&Xm.maxTouchPoints>1||!isSecureContext)}function zv(n,e){return{...n,...e,tags:{...n.tags,...e.tags},onFormOpen:()=>{e.onFormOpen&&e.onFormOpen(),n.onFormOpen&&n.onFormOpen()},onFormClose:()=>{e.onFormClose&&e.onFormClose(),n.onFormClose&&n.onFormClose()},onSubmitSuccess:t=>{e.onSubmitSuccess&&e.onSubmitSuccess(t),n.onSubmitSuccess&&n.onSubmitSuccess(t)},onSubmitError:t=>{e.onSubmitError&&e.onSubmitError(t),n.onSubmitError&&n.onSubmitError(t)},onFormSubmitted:()=>{e.onFormSubmitted&&e.onFormSubmitted(),n.onFormSubmitted&&n.onFormSubmitted()},themeDark:{...n.themeDark,...e.themeDark},themeLight:{...n.themeLight,...e.themeLight}}}function sZ(n){const e=Ln.createElement("style");return e.textContent=`
.widget__actor {
  position: fixed;
  z-index: var(--z-index);
  margin: var(--page-margin);
  inset: var(--actor-inset);

  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px;

  font-family: inherit;
  font-size: var(--font-size);
  font-weight: 600;
  line-height: 1.14em;
  text-decoration: none;

  background: var(--actor-background, var(--background));
  border-radius: var(--actor-border-radius, 1.7em/50%);
  border: var(--actor-border, var(--border));
  box-shadow: var(--actor-box-shadow, var(--box-shadow));
  color: var(--actor-color, var(--foreground));
  fill: var(--actor-color, var(--foreground));
  cursor: pointer;
  opacity: 1;
  transition: transform 0.2s ease-in-out;
  transform: translate(0, 0) scale(1);
}
.widget__actor[aria-hidden="true"] {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
  transform: translate(0, 16px) scale(0.98);
}

.widget__actor:hover {
  background: var(--actor-hover-background, var(--background));
  filter: var(--interactive-filter);
}

.widget__actor svg {
  width: 1.14em;
  height: 1.14em;
}

@media (max-width: 600px) {
  .widget__actor span {
    display: none;
  }
}
`,n&&e.setAttribute("nonce",n),e}function Xs(n,e){return Object.entries(e).forEach(([t,r])=>{n.setAttributeNS(null,t,r)}),n}const Md=20,oZ="http://www.w3.org/2000/svg";function aZ(){const n=a=>Oa.document.createElementNS(oZ,a),e=Xs(n("svg"),{width:`${Md}`,height:`${Md}`,viewBox:`0 0 ${Md} ${Md}`,fill:"var(--foreground)"}),t=Xs(n("g"),{clipPath:"url(#clip0_57_80)"}),r=Xs(n("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});e.appendChild(t).appendChild(r);const i=n("defs"),s=Xs(n("clipPath"),{id:"clip0_57_80"}),o=Xs(n("rect"),{width:`${Md}`,height:`${Md}`,fill:"white"});return s.appendChild(o),i.appendChild(s),e.appendChild(i).appendChild(s).appendChild(o),e}function lZ({triggerLabel:n,triggerAriaLabel:e,shadow:t,styleNonce:r}){const i=Ln.createElement("button");if(i.type="button",i.className="widget__actor",i.ariaHidden="false",i.ariaLabel=e||n||X4,i.appendChild(aZ()),n){const o=Ln.createElement("span");o.appendChild(Ln.createTextNode(n)),i.appendChild(o)}const s=sZ(r);return{el:i,appendToDom(){t.appendChild(s),t.appendChild(i)},removeFromDom(){t.removeChild(i),t.removeChild(s)},show(){i.ariaHidden="false"},hide(){i.ariaHidden="true"}}}const j4="rgba(88, 74, 192, 1)",cZ={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:j4,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},eN={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:j4,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(235, 230, 239, 0.15)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function tN(n){return`
  --foreground: ${n.foreground};
  --background: ${n.background};
  --accent-foreground: ${n.accentForeground};
  --accent-background: ${n.accentBackground};
  --success-color: ${n.successColor};
  --error-color: ${n.errorColor};
  --border: ${n.border};
  --box-shadow: ${n.boxShadow};
  --outline: ${n.outline};
  --interactive-filter: ${n.interactiveFilter};
  `}function uZ({colorScheme:n,themeDark:e,themeLight:t,styleNonce:r}){const i=Ln.createElement("style");return i.textContent=`
:host {
  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;
  --font-size: 14px;
  --z-index: 100000;

  --page-margin: 16px;
  --inset: auto 0 0 auto;
  --actor-inset: var(--inset);

  font-family: var(--font-family);
  font-size: var(--font-size);

  ${n!=="system"?"color-scheme: only light;":""}

  ${tN(n==="dark"?{...eN,...e}:{...cZ,...t})}
}

${n==="system"?`
@media (prefers-color-scheme: dark) {
  :host {
    ${tN({...eN,...e})}
  }
}`:""}
}
`,r&&i.setAttribute("nonce",r),i}const fZ=({lazyLoadIntegration:n,getModalIntegration:e,getScreenshotIntegration:t})=>({id:i="sentry-feedback",autoInject:s=!0,showBranding:o=!0,isEmailRequired:a=!1,isNameRequired:l=!1,showEmail:c=!0,showName:u=!0,enableScreenshot:f=!0,useSentryUser:p={email:"email",name:"username"},tags:m,styleNonce:g,scriptNonce:v,colorScheme:y="system",themeLight:_={},themeDark:S={},addScreenshotButtonLabel:E=QQ,cancelButtonLabel:w=HQ,confirmButtonLabel:I=GQ,emailLabel:T=XQ,emailPlaceholder:b=WQ,formTitle:P=VQ,isRequiredLabel:C=qQ,messageLabel:M=YQ,messagePlaceholder:L=jQ,nameLabel:U=KQ,namePlaceholder:X=JQ,removeScreenshotButtonLabel:$=ZQ,submitButtonLabel:Q=zQ,successMessageText:Y=$Q,triggerLabel:te=X4,triggerAriaLabel:k="",onFormOpen:K,onFormClose:F,onSubmitSuccess:ie,onSubmitError:me,onFormSubmitted:Ne}={})=>{const ce={id:i,autoInject:s,showBranding:o,isEmailRequired:a,isNameRequired:l,showEmail:c,showName:u,enableScreenshot:f,useSentryUser:p,tags:m,styleNonce:g,scriptNonce:v,colorScheme:y,themeDark:S,themeLight:_,triggerLabel:te,triggerAriaLabel:k,cancelButtonLabel:w,submitButtonLabel:Q,confirmButtonLabel:I,formTitle:P,emailLabel:T,emailPlaceholder:b,messageLabel:M,messagePlaceholder:L,nameLabel:U,namePlaceholder:X,successMessageText:Y,isRequiredLabel:C,addScreenshotButtonLabel:E,removeScreenshotButtonLabel:$,onFormClose:F,onFormOpen:K,onSubmitError:me,onSubmitSuccess:ie,onFormSubmitted:Ne};let xe=null,Ae=[];const Ie=z=>{if(!xe){const pe=Ln.createElement("div");pe.id=String(z.id),Ln.body.appendChild(pe),xe=pe.attachShadow({mode:"open"}),xe.appendChild(uZ(z))}return xe},Xe=async(z,pe,Me)=>{const Be=Zt(),ye=Be&&Be.getIntegrationByName(z);if(ye)return ye;const Ue=(pe&&pe()||await n(Me,v))();return Be&&Be.addIntegration(Ue),Ue},it=async z=>{const pe=z.enableScreenshot&&iZ(),[Me,Be]=await Promise.all([Xe("FeedbackModal",e,"feedbackModalIntegration"),pe?Xe("FeedbackScreenshot",t,"feedbackScreenshotIntegration"):void 0]);if(!Me)throw Sx&&qe.error("[Feedback] Missing feedback modal integration. Try using `feedbackSyncIntegration` in your `Sentry.init`."),new Error("[Feedback] Missing feedback modal integration!");pe&&!Be&&Sx&&qe.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots.");const ye=Me.createDialog({options:{...z,onFormClose:()=>{ye&&ye.close(),z.onFormClose&&z.onFormClose()},onFormSubmitted:()=>{ye&&ye.close(),z.onFormSubmitted&&z.onFormSubmitted()}},screenshotIntegration:pe?Be:void 0,sendFeedback:rZ,shadow:Ie(z)});return ye},Qe=(z,pe={})=>{const Me=zv(ce,pe),Be=typeof z=="string"?Ln.querySelector(z):typeof z.addEventListener=="function"?z:null;if(!Be)throw Sx&&qe.error("[Feedback] Unable to attach to target element"),new Error("Unable to attach to target element");let ye=null;const oe=async()=>{ye||(ye=await it({...Me,onFormSubmitted:()=>{ye&&ye.removeFromDom(),Me.onFormSubmitted&&Me.onFormSubmitted()}})),ye.appendToDom(),ye.open()};Be.addEventListener("click",oe);const Ue=()=>{Ae=Ae.filter(Ke=>Ke!==Ue),ye&&ye.removeFromDom(),ye=null,Be.removeEventListener("click",oe)};return Ae.push(Ue),Ue},Ge=(z={})=>{const pe=zv(ce,z),Me=Ie(pe),Be=lZ({triggerLabel:pe.triggerLabel,triggerAriaLabel:pe.triggerAriaLabel,shadow:Me,styleNonce:g});return Qe(Be.el,{...pe,onFormOpen(){Be.hide()},onFormClose(){Be.show()},onFormSubmitted(){Be.show()}}),Be};return{name:"Feedback",setupOnce(){!lC()||!ce.autoInject||(Ln.readyState==="loading"?Ln.addEventListener("DOMContentLoaded",()=>Ge().appendToDom()):Ge().appendToDom())},attachTo:Qe,createWidget(z={}){const pe=Ge(zv(ce,z));return pe.appendToDom(),pe},async createForm(z={}){return it(zv(ce,z))},remove(){xe&&(xe.parentElement&&xe.parentElement.remove(),xe=null),Ae.forEach(z=>z()),Ae=[]}}};var $1,zn,Y4,qu,nN,J4,kC,c_={},dI=[],dZ=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,hI=Array.isArray;function Cc(n,e){for(var t in e)n[t]=e[t];return n}function K4(n){var e=n.parentNode;e&&e.removeChild(n)}function an(n,e,t){var r,i,s,o={};for(s in e)s=="key"?r=e[s]:s=="ref"?i=e[s]:o[s]=e[s];if(arguments.length>2&&(o.children=arguments.length>3?$1.call(arguments,2):t),typeof n=="function"&&n.defaultProps!=null)for(s in n.defaultProps)o[s]===void 0&&(o[s]=n.defaultProps[s]);return Ex(n,o,r,i,null)}function Ex(n,e,t,r,i){var s={type:n,props:e,key:t,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:i??++Y4,__i:-1,__u:0};return i==null&&zn.vnode!=null&&zn.vnode(s),s}function $_(n){return n.children}function Ax(n,e){this.props=n,this.context=e}function up(n,e){if(e==null)return n.__?up(n.__,n.__i+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?up(n):null}function hZ(n,e,t){var r,i=n.__v,s=i.__e,o=n.__P;if(o)return(r=Cc({},i)).__v=i.__v+1,zn.vnode&&zn.vnode(r),pI(o,r,i,n.__n,o.ownerSVGElement!==void 0,32&i.__u?[s]:null,e,s??up(i),!!(32&i.__u),t),r.__.__k[r.__i]=r,r.__d=void 0,r.__e!=s&&$4(r),r}function $4(n){var e,t;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return $4(n)}}function rN(n){(!n.__d&&(n.__d=!0)&&qu.push(n)&&!CS.__r++||nN!==zn.debounceRendering)&&((nN=zn.debounceRendering)||J4)(CS)}function CS(){var n,e,t,r=[],i=[];for(qu.sort(kC);n=qu.shift();)n.__d&&(t=qu.length,e=hZ(n,r,i)||e,t===0||qu.length>t?(FC(r,e,i),i.length=r.length=0,e=void 0,qu.sort(kC)):e&&zn.__c&&zn.__c(e,dI));e&&FC(r,e,i),CS.__r=0}function q4(n,e,t,r,i,s,o,a,l,c,u){var f,p,m,g,v,y=r&&r.__k||dI,_=e.length;for(t.__d=l,pZ(t,e,y),l=t.__d,f=0;f<_;f++)(m=t.__k[f])!=null&&typeof m!="boolean"&&typeof m!="function"&&(p=m.__i===-1?c_:y[m.__i]||c_,m.__i=f,pI(n,m,p,i,s,o,a,l,c,u),g=m.__e,m.ref&&p.ref!=m.ref&&(p.ref&&mI(p.ref,null,m),u.push(m.ref,m.__c||g,m)),v==null&&g!=null&&(v=g),65536&m.__u||p.__k===m.__k?l=Q4(m,l,n):typeof m.type=="function"&&m.__d!==void 0?l=m.__d:g&&(l=g.nextSibling),m.__d=void 0,m.__u&=-196609);t.__d=l,t.__e=v}function pZ(n,e,t){var r,i,s,o,a,l=e.length,c=t.length,u=c,f=0;for(n.__k=[],r=0;r<l;r++)(i=n.__k[r]=(i=e[r])==null||typeof i=="boolean"||typeof i=="function"?null:typeof i=="string"||typeof i=="number"||typeof i=="bigint"||i.constructor==String?Ex(null,i,null,null,i):hI(i)?Ex($_,{children:i},null,null,null):i.constructor===void 0&&i.__b>0?Ex(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i)!=null?(i.__=n,i.__b=n.__b+1,a=mZ(i,t,o=r+f,u),i.__i=a,s=null,a!==-1&&(u--,(s=t[a])&&(s.__u|=131072)),s==null||s.__v===null?(a==-1&&f--,typeof i.type!="function"&&(i.__u|=65536)):a!==o&&(a===o+1?f++:a>o?u>l-o?f+=a-o:f--:f=a<o&&a==o-1?a-o:0,a!==r+f&&(i.__u|=65536))):(s=t[r])&&s.key==null&&s.__e&&(s.__e==n.__d&&(n.__d=up(s)),OC(s,s,!1),t[r]=null,u--);if(u)for(r=0;r<c;r++)(s=t[r])!=null&&!(131072&s.__u)&&(s.__e==n.__d&&(n.__d=up(s)),OC(s,s))}function Q4(n,e,t){var r,i;if(typeof n.type=="function"){for(r=n.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=n,e=Q4(r[i],e,t));return e}n.__e!=e&&(t.insertBefore(n.__e,e||null),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function mZ(n,e,t,r){var i=n.key,s=n.type,o=t-1,a=t+1,l=e[t];if(l===null||l&&i==l.key&&s===l.type)return t;if(r>(l!=null&&!(131072&l.__u)?1:0))for(;o>=0||a<e.length;){if(o>=0){if((l=e[o])&&!(131072&l.__u)&&i==l.key&&s===l.type)return o;o--}if(a<e.length){if((l=e[a])&&!(131072&l.__u)&&i==l.key&&s===l.type)return a;a++}}return-1}function iN(n,e,t){e[0]==="-"?n.setProperty(e,t??""):n[e]=t==null?"":typeof t!="number"||dZ.test(e)?t:t+"px"}function Gv(n,e,t,r,i){var s;e:if(e==="style")if(typeof t=="string")n.style.cssText=t;else{if(typeof r=="string"&&(n.style.cssText=r=""),r)for(e in r)t&&e in t||iN(n.style,e,"");if(t)for(e in t)r&&t[e]===r[e]||iN(n.style,e,t[e])}else if(e[0]==="o"&&e[1]==="n")s=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in n?e.toLowerCase().slice(2):e.slice(2),n.l||(n.l={}),n.l[e+s]=t,t?r?t.u=r.u:(t.u=Date.now(),n.addEventListener(e,s?oN:sN,s)):n.removeEventListener(e,s?oN:sN,s);else{if(i)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e!=="rowSpan"&&e!=="colSpan"&&e!=="role"&&e in n)try{n[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!=="-"?n.removeAttribute(e):n.setAttribute(e,t))}}function sN(n){if(this.l){var e=this.l[n.type+!1];if(n.t){if(n.t<=e.u)return}else n.t=Date.now();return e(zn.event?zn.event(n):n)}}function oN(n){if(this.l)return this.l[n.type+!0](zn.event?zn.event(n):n)}function pI(n,e,t,r,i,s,o,a,l,c){var u,f,p,m,g,v,y,_,S,E,w,I,T,b,P,C=e.type;if(e.constructor!==void 0)return null;128&t.__u&&(l=!!(32&t.__u),s=[a=e.__e=t.__e]),(u=zn.__b)&&u(e);e:if(typeof C=="function")try{if(_=e.props,S=(u=C.contextType)&&r[u.__c],E=u?S?S.props.value:u.__:r,t.__c?y=(f=e.__c=t.__c).__=f.__E:("prototype"in C&&C.prototype.render?e.__c=f=new C(_,E):(e.__c=f=new Ax(_,E),f.constructor=C,f.render=_Z),S&&S.sub(f),f.props=_,f.state||(f.state={}),f.context=E,f.__n=r,p=f.__d=!0,f.__h=[],f._sb=[]),f.__s==null&&(f.__s=f.state),C.getDerivedStateFromProps!=null&&(f.__s==f.state&&(f.__s=Cc({},f.__s)),Cc(f.__s,C.getDerivedStateFromProps(_,f.__s))),m=f.props,g=f.state,f.__v=e,p)C.getDerivedStateFromProps==null&&f.componentWillMount!=null&&f.componentWillMount(),f.componentDidMount!=null&&f.__h.push(f.componentDidMount);else{if(C.getDerivedStateFromProps==null&&_!==m&&f.componentWillReceiveProps!=null&&f.componentWillReceiveProps(_,E),!f.__e&&(f.shouldComponentUpdate!=null&&f.shouldComponentUpdate(_,f.__s,E)===!1||e.__v===t.__v)){for(e.__v!==t.__v&&(f.props=_,f.state=f.__s,f.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.forEach(function(M){M&&(M.__=e)}),w=0;w<f._sb.length;w++)f.__h.push(f._sb[w]);f._sb=[],f.__h.length&&o.push(f);break e}f.componentWillUpdate!=null&&f.componentWillUpdate(_,f.__s,E),f.componentDidUpdate!=null&&f.__h.push(function(){f.componentDidUpdate(m,g,v)})}if(f.context=E,f.props=_,f.__P=n,f.__e=!1,I=zn.__r,T=0,"prototype"in C&&C.prototype.render){for(f.state=f.__s,f.__d=!1,I&&I(e),u=f.render(f.props,f.state,f.context),b=0;b<f._sb.length;b++)f.__h.push(f._sb[b]);f._sb=[]}else do f.__d=!1,I&&I(e),u=f.render(f.props,f.state,f.context),f.state=f.__s;while(f.__d&&++T<25);f.state=f.__s,f.getChildContext!=null&&(r=Cc(Cc({},r),f.getChildContext())),p||f.getSnapshotBeforeUpdate==null||(v=f.getSnapshotBeforeUpdate(m,g)),q4(n,hI(P=u!=null&&u.type===$_&&u.key==null?u.props.children:u)?P:[P],e,t,r,i,s,o,a,l,c),f.base=e.__e,e.__u&=-161,f.__h.length&&o.push(f),y&&(f.__E=f.__=null)}catch(M){e.__v=null,l||s!=null?(e.__e=a,e.__u|=l?160:32,s[s.indexOf(a)]=null):(e.__e=t.__e,e.__k=t.__k),zn.__e(M,e,t)}else s==null&&e.__v===t.__v?(e.__k=t.__k,e.__e=t.__e):e.__e=gZ(t.__e,e,t,r,i,s,o,l,c);(u=zn.diffed)&&u(e)}function FC(n,e,t){for(var r=0;r<t.length;r++)mI(t[r],t[++r],t[++r]);zn.__c&&zn.__c(e,n),n.some(function(i){try{n=i.__h,i.__h=[],n.some(function(s){s.call(i)})}catch(s){zn.__e(s,i.__v)}})}function gZ(n,e,t,r,i,s,o,a,l){var c,u,f,p,m,g,v,y=t.props,_=e.props,S=e.type;if(S==="svg"&&(i=!0),s!=null){for(c=0;c<s.length;c++)if((m=s[c])&&"setAttribute"in m==!!S&&(S?m.localName===S:m.nodeType===3)){n=m,s[c]=null;break}}if(n==null){if(S===null)return document.createTextNode(_);n=i?document.createElementNS("http://www.w3.org/2000/svg",S):document.createElement(S,_.is&&_),s=null,a=!1}if(S===null)y===_||a&&n.data===_||(n.data=_);else{if(s=s&&$1.call(n.childNodes),y=t.props||c_,!a&&s!=null)for(y={},c=0;c<n.attributes.length;c++)y[(m=n.attributes[c]).name]=m.value;for(c in y)m=y[c],c=="children"||(c=="dangerouslySetInnerHTML"?f=m:c==="key"||c in _||Gv(n,c,null,m,i));for(c in _)m=_[c],c=="children"?p=m:c=="dangerouslySetInnerHTML"?u=m:c=="value"?g=m:c=="checked"?v=m:c==="key"||a&&typeof m!="function"||y[c]===m||Gv(n,c,m,y[c],i);if(u)a||f&&(u.__html===f.__html||u.__html===n.innerHTML)||(n.innerHTML=u.__html),e.__k=[];else if(f&&(n.innerHTML=""),q4(n,hI(p)?p:[p],e,t,r,i&&S!=="foreignObject",s,o,s?s[0]:t.__k&&up(t,0),a,l),s!=null)for(c=s.length;c--;)s[c]!=null&&K4(s[c]);a||(c="value",g!==void 0&&(g!==n[c]||S==="progress"&&!g||S==="option"&&g!==y[c])&&Gv(n,c,g,y[c],!1),c="checked",v!==void 0&&v!==n[c]&&Gv(n,c,v,y[c],!1))}return n}function mI(n,e,t){try{typeof n=="function"?n(e):n.current=e}catch(r){zn.__e(r,t)}}function OC(n,e,t){var r,i;if(zn.unmount&&zn.unmount(n),(r=n.ref)&&(r.current&&r.current!==n.__e||mI(r,null,e)),(r=n.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){zn.__e(s,e)}r.base=r.__P=null,n.__c=void 0}if(r=n.__k)for(i=0;i<r.length;i++)r[i]&&OC(r[i],e,t||typeof n.type!="function");t||n.__e==null||K4(n.__e),n.__=n.__e=n.__d=void 0}function _Z(n,e,t){return this.constructor(n,t)}function vZ(n,e,t){var r,i,s,o;zn.__&&zn.__(n,e),i=(r=typeof t=="function")?null:e.__k,s=[],o=[],pI(e,n=(!r&&t||e).__k=an($_,null,[n]),i||c_,c_,e.ownerSVGElement!==void 0,!r&&t?[t]:i?null:e.firstChild?$1.call(e.childNodes):null,s,!r&&t?t:i?i.__e:e.firstChild,r,o),n.__d=void 0,FC(s,n,o)}$1=dI.slice,zn={__e:function(n,e,t,r){for(var i,s,o;e=e.__;)if((i=e.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(n)),o=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(n,r||{}),o=i.__d),o)return i.__E=i}catch(a){n=a}throw n}},Y4=0,Ax.prototype.setState=function(n,e){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Cc({},this.state),typeof n=="function"&&(n=n(Cc({},t),this.props)),n&&Cc(t,n),n!=null&&this.__v&&(e&&this._sb.push(e),rN(this))},Ax.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),rN(this))},Ax.prototype.render=$_,qu=[],J4=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,kC=function(n,e){return n.__v.__b-e.__v.__b},CS.__r=0;var Vl,Hn,Lw,aN,fp=0,Z4=[],wx=[],dr=zn,lN=dr.__b,cN=dr.__r,uN=dr.diffed,fN=dr.__c,dN=dr.unmount,hN=dr.__;function id(n,e){dr.__h&&dr.__h(Hn,n,fp||e),fp=0;var t=Hn.__H||(Hn.__H={__:[],__h:[]});return n>=t.__.length&&t.__.push({__V:wx}),t.__[n]}function Bh(n){return fp=1,ez(nz,n)}function ez(n,e,t){var r=id(Vl++,2);if(r.t=n,!r.__c&&(r.__=[t?t(e):nz(void 0,e),function(a){var l=r.__N?r.__N[0]:r.__[0],c=r.t(l,a);l!==c&&(r.__N=[c,r.__[1]],r.__c.setState({}))}],r.__c=Hn,!Hn.u)){var i=function(a,l,c){if(!r.__c.__H)return!0;var u=r.__c.__H.__.filter(function(p){return!!p.__c});if(u.every(function(p){return!p.__N}))return!s||s.call(this,a,l,c);var f=!1;return u.forEach(function(p){if(p.__N){var m=p.__[0];p.__=p.__N,p.__N=void 0,m!==p.__[0]&&(f=!0)}}),!(!f&&r.__c.props===a)&&(!s||s.call(this,a,l,c))};Hn.u=!0;var s=Hn.shouldComponentUpdate,o=Hn.componentWillUpdate;Hn.componentWillUpdate=function(a,l,c){if(this.__e){var u=s;s=void 0,i(a,l,c),s=u}o&&o.call(this,a,l,c)},Hn.shouldComponentUpdate=i}return r.__N||r.__}function yZ(n,e){var t=id(Vl++,3);!dr.__s&&gI(t.__H,e)&&(t.__=n,t.i=e,Hn.__H.__h.push(t))}function tz(n,e){var t=id(Vl++,4);!dr.__s&&gI(t.__H,e)&&(t.__=n,t.i=e,Hn.__h.push(t))}function xZ(n){return fp=5,q_(function(){return{current:n}},[])}function SZ(n,e,t){fp=6,tz(function(){return typeof n=="function"?(n(e()),function(){return n(null)}):n?(n.current=e(),function(){return n.current=null}):void 0},t==null?t:t.concat(n))}function q_(n,e){var t=id(Vl++,7);return gI(t.__H,e)?(t.__V=n(),t.i=e,t.__h=n,t.__V):t.__}function Lh(n,e){return fp=8,q_(function(){return n},e)}function EZ(n){var e=Hn.context[n.__c],t=id(Vl++,9);return t.c=n,e?(t.__==null&&(t.__=!0,e.sub(Hn)),e.props.value):n.__}function AZ(n,e){dr.useDebugValue&&dr.useDebugValue(e?e(n):n)}function wZ(n){var e=id(Vl++,10),t=Bh();return e.__=n,Hn.componentDidCatch||(Hn.componentDidCatch=function(r,i){e.__&&e.__(r,i),t[1](r)}),[t[0],function(){t[1](void 0)}]}function MZ(){var n=id(Vl++,11);if(!n.__){for(var e=Hn.__v;e!==null&&!e.__m&&e.__!==null;)e=e.__;var t=e.__m||(e.__m=[0,0]);n.__="P"+t[0]+"-"+t[1]++}return n.__}function TZ(){for(var n;n=Z4.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(Mx),n.__H.__h.forEach(UC),n.__H.__h=[]}catch(e){n.__H.__h=[],dr.__e(e,n.__v)}}dr.__b=function(n){Hn=null,lN&&lN(n)},dr.__=function(n,e){e.__k&&e.__k.__m&&(n.__m=e.__k.__m),hN&&hN(n,e)},dr.__r=function(n){cN&&cN(n),Vl=0;var e=(Hn=n.__c).__H;e&&(Lw===Hn?(e.__h=[],Hn.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.__V=wx,t.__N=t.i=void 0})):(e.__h.forEach(Mx),e.__h.forEach(UC),e.__h=[],Vl=0)),Lw=Hn},dr.diffed=function(n){uN&&uN(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(Z4.push(e)!==1&&aN===dr.requestAnimationFrame||((aN=dr.requestAnimationFrame)||CZ)(TZ)),e.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.__V!==wx&&(t.__=t.__V),t.i=void 0,t.__V=wx})),Lw=Hn=null},dr.__c=function(n,e){e.some(function(t){try{t.__h.forEach(Mx),t.__h=t.__h.filter(function(r){return!r.__||UC(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],dr.__e(r,t.__v)}}),fN&&fN(n,e)},dr.unmount=function(n){dN&&dN(n);var e,t=n.__c;t&&t.__H&&(t.__H.__.forEach(function(r){try{Mx(r)}catch(i){e=i}}),t.__H=void 0,e&&dr.__e(e,t.__v))};var pN=typeof requestAnimationFrame=="function";function CZ(n){var e,t=function(){clearTimeout(r),pN&&cancelAnimationFrame(e),setTimeout(n)},r=setTimeout(t,100);pN&&(e=requestAnimationFrame(t))}function Mx(n){var e=Hn,t=n.__c;typeof t=="function"&&(n.__c=void 0,t()),Hn=e}function UC(n){var e=Hn;n.__c=n.__(),Hn=e}function gI(n,e){return!n||n.length!==e.length||e.some(function(t,r){return t!==n[r]})}function nz(n,e){return typeof e=="function"?e(n):e}const bZ={__proto__:null,useCallback:Lh,useContext:EZ,useDebugValue:AZ,useEffect:yZ,useErrorBoundary:wZ,useId:MZ,useImperativeHandle:SZ,useLayoutEffect:tz,useMemo:q_,useReducer:ez,useRef:xZ,useState:Bh},RZ="http://www.w3.org/2000/svg";function IZ(){const n=r=>Ln.createElementNS(RZ,r),e=Xs(n("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),t=Xs(n("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return e.appendChild(t),e}const mN="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/DialogHeader.tsx";function PZ({options:n}){const e=q_(()=>({__html:IZ().outerHTML}),[]);return an("h2",{class:"dialog__header",__self:this,__source:{fileName:mN,lineNumber:16}},n.formTitle,n.showBranding?an("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:e,__self:this,__source:{fileName:mN,lineNumber:19}}):null)}function DZ(n,e){const t=[];return e.isNameRequired&&!n.name&&t.push(e.nameLabel),e.isEmailRequired&&!n.email&&t.push(e.emailLabel),n.message||t.push(e.messageLabel),t}const rr="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Form.tsx";function Nw(n,e){const t=n.get(e);return typeof t=="string"?t.trim():""}function BZ({options:n,defaultEmail:e,defaultName:t,onFormClose:r,onSubmit:i,onSubmitSuccess:s,onSubmitError:o,showEmail:a,showName:l,screenshotInput:c}){const{tags:u,addScreenshotButtonLabel:f,removeScreenshotButtonLabel:p,cancelButtonLabel:m,emailLabel:g,emailPlaceholder:v,isEmailRequired:y,isNameRequired:_,messageLabel:S,messagePlaceholder:E,nameLabel:w,namePlaceholder:I,submitButtonLabel:T,isRequiredLabel:b}=n,[P,C]=Bh(null),[M,L]=Bh(!1),U=c&&c.input,[X,$]=Bh(null),Q=Lh(k=>{$(k),L(!1)},[]),Y=Lh(k=>{const K=DZ(k,{emailLabel:g,isEmailRequired:y,isNameRequired:_,messageLabel:S,nameLabel:w});return K.length>0?C(`Please enter in the following required fields: ${K.join(", ")}`):C(null),K.length===0},[g,y,_,S,w]),te=Lh(async k=>{try{if(k.preventDefault(),!(k.target instanceof HTMLFormElement))return;const K=new FormData(k.target),F=await(c&&M?c.value():void 0),ie={name:Nw(K,"name"),email:Nw(K,"email"),message:Nw(K,"message"),attachments:F?[F]:void 0};if(!Y(ie))return;try{await i({name:ie.name,email:ie.email,message:ie.message,source:eZ,tags:u},{attachments:ie.attachments}),s(ie)}catch(me){Sx&&qe.error(me),C(me),o(me)}}catch{}},[c&&M,s,o]);return an("form",{class:"form",onSubmit:te,__self:this,__source:{fileName:rr,lineNumber:144}},U&&M?an(U,{onError:Q,__self:this,__source:{fileName:rr,lineNumber:146}}):null,an("div",{class:"form__right","data-sentry-feedback":!0,__self:this,__source:{fileName:rr,lineNumber:149}},an("div",{class:"form__top",__self:this,__source:{fileName:rr,lineNumber:150}},P?an("div",{class:"form__error-container",__self:this,__source:{fileName:rr,lineNumber:151}},P):null,l?an("label",{for:"name",class:"form__label",__self:this,__source:{fileName:rr,lineNumber:154}},an(kw,{label:w,isRequiredLabel:b,isRequired:_,__self:this,__source:{fileName:rr,lineNumber:155}}),an("input",{class:"form__input",defaultValue:t,id:"name",name:"name",placeholder:I,required:_,type:"text",__self:this,__source:{fileName:rr,lineNumber:156}})):an("input",{"aria-hidden":!0,value:t,name:"name",type:"hidden",__self:this,__source:{fileName:rr,lineNumber:167}}),a?an("label",{for:"email",class:"form__label",__self:this,__source:{fileName:rr,lineNumber:171}},an(kw,{label:g,isRequiredLabel:b,isRequired:y,__self:this,__source:{fileName:rr,lineNumber:172}}),an("input",{class:"form__input",defaultValue:e,id:"email",name:"email",placeholder:v,required:y,type:"email",__self:this,__source:{fileName:rr,lineNumber:173}})):an("input",{"aria-hidden":!0,value:e,name:"email",type:"hidden",__self:this,__source:{fileName:rr,lineNumber:184}}),an("label",{for:"message",class:"form__label",__self:this,__source:{fileName:rr,lineNumber:187}},an(kw,{label:S,isRequiredLabel:b,isRequired:!0,__self:this,__source:{fileName:rr,lineNumber:188}}),an("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:E,required:!0,rows:5,__self:this,__source:{fileName:rr,lineNumber:189}})),U?an("label",{for:"screenshot",class:"form__label",__self:this,__source:{fileName:rr,lineNumber:201}},an("button",{class:"btn btn--default",type:"button",onClick:()=>{$(null),L(k=>!k)},__self:this,__source:{fileName:rr,lineNumber:202}},M?p:f),X?an("div",{class:"form__error-container",__self:this,__source:{fileName:rr,lineNumber:212}},X.message):null):null),an("div",{class:"btn-group",__self:this,__source:{fileName:rr,lineNumber:216}},an("button",{class:"btn btn--primary",type:"submit",__self:this,__source:{fileName:rr,lineNumber:217}},T),an("button",{class:"btn btn--default",type:"button",onClick:r,__self:this,__source:{fileName:rr,lineNumber:220}},m))))}function kw({label:n,isRequired:e,isRequiredLabel:t}){return an("span",{class:"form__label__text",__self:this,__source:{fileName:rr,lineNumber:239}},n,e&&an("span",{class:"form__label__text--required",__self:this,__source:{fileName:rr,lineNumber:241}},t))}const Vv=16,gN=17,LZ="http://www.w3.org/2000/svg";function NZ(){const n=l=>Oa.document.createElementNS(LZ,l),e=Xs(n("svg"),{width:`${Vv}`,height:`${gN}`,viewBox:`0 0 ${Vv} ${gN}`,fill:"inherit"}),t=Xs(n("g"),{clipPath:"url(#clip0_57_156)"}),r=Xs(n("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),i=Xs(n("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});e.appendChild(t).append(i,r);const s=n("defs"),o=Xs(n("clipPath"),{id:"clip0_57_156"}),a=Xs(n("rect"),{width:`${Vv}`,height:`${Vv}`,fill:"white",transform:"translate(0 0.5)"});return o.appendChild(a),s.appendChild(o),e.appendChild(s).appendChild(o).appendChild(a),e}const sl="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Dialog.tsx";function kZ({open:n,onFormSubmitted:e,...t}){const r=t.options,i=q_(()=>({__html:NZ().outerHTML}),[]),[s,o]=Bh(null),a=Lh(()=>{s&&(clearTimeout(s),o(null)),e()},[s]),l=Lh(c=>{t.onSubmitSuccess(c),o(setTimeout(()=>{e(),o(null)},nZ))},[e]);return an($_,{__self:this,__source:{fileName:sl,lineNumber:48}},s?an("div",{class:"success__position",onClick:a,__self:this,__source:{fileName:sl,lineNumber:50}},an("div",{class:"success__content",__self:this,__source:{fileName:sl,lineNumber:51}},r.successMessageText,an("span",{class:"success__icon",dangerouslySetInnerHTML:i,__self:this,__source:{fileName:sl,lineNumber:53}}))):an("dialog",{class:"dialog",onClick:r.onFormClose,open:n,__self:this,__source:{fileName:sl,lineNumber:57}},an("div",{class:"dialog__position",__self:this,__source:{fileName:sl,lineNumber:58}},an("div",{class:"dialog__content",onClick:c=>{c.stopPropagation()},__self:this,__source:{fileName:sl,lineNumber:59}},an(PZ,{options:r,__self:this,__source:{fileName:sl,lineNumber:66}}),an(BZ,{...t,onSubmitSuccess:l,__self:this,__source:{fileName:sl,lineNumber:67}})))))}const FZ=`
.dialog {
  position: fixed;
  z-index: var(--z-index);
  margin: 0;
  inset: 0;

  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  height: 100vh;
  width: 100vw;

  color: var(--dialog-color, var(--foreground));
  fill: var(--dialog-color, var(--foreground));
  line-height: 1.75em;

  background-color: rgba(0, 0, 0, 0.05);
  border: none;
  inset: 0;
  opacity: 1;
  transition: opacity 0.2s ease-in-out;
}

.dialog__position {
  position: fixed;
  z-index: var(--z-index);
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  display: flex;
  max-height: calc(100vh - (2 * var(--page-margin)));
}
@media (max-width: 600px) {
  .dialog__position {
    inset: var(--page-margin);
    padding: 0;
  }
}

.dialog__position:has(.editor) {
  inset: var(--page-margin);
  padding: 0;
}

.dialog:not([open]) {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}
.dialog:not([open]) .dialog__content {
  transform: translate(0, -16px) scale(0.98);
}

.dialog__content {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: var(--dialog-padding, 24px);
  max-width: 100%;
  width: 100%;
  max-height: 100%;
  overflow: auto;

  background: var(--dialog-background, var(--background));
  border-radius: var(--dialog-border-radius, 20px);
  border: var(--dialog-border, var(--border));
  box-shadow: var(--dialog-box-shadow, var(--box-shadow));
  transform: translate(0, 0) scale(1);
  transition: transform 0.2s ease-in-out;
}
`,OZ=`
.dialog__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-weight: var(--dialog-header-weight, 600);
  margin: 0;
}

.brand-link {
  display: inline-flex;
}
.brand-link:focus-visible {
  outline: var(--outline);
}
`,UZ=`
.form {
  display: flex;
  overflow: auto;
  flex-direction: row;
  gap: 16px;
  flex: 1 0;
}

.form__right {
  flex: 0 0 var(--form-width, 272px);
  width: var(--form-width, 272px);
  display: flex;
  overflow: auto;
  flex-direction: column;
  justify-content: space-between;
  gap: 20px;
}

@media (max-width: 600px) {
  .form__right {
    width: auto;
  }
}

.form__top {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form__error-container {
  color: var(--error-color);
  fill: var(--error-color);
}

.form__label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin: 0px;
}

.form__label__text {
  display: flex;
  gap: 4px;
  align-items: center;
}

.form__label__text--required {
  font-size: 0.85em;
}

.form__input {
  font-family: inherit;
  line-height: inherit;
  background: transparent;
  box-sizing: border-box;
  border: var(--input-border, var(--border));
  border-radius: var(--input-border-radius, 6px);
  color: var(--input-color, inherit);
  fill: var(--input-color, inherit);
  font-size: var(--input-font-size, inherit);
  font-weight: var(--input-font-weight, 500);
  padding: 6px 12px;
}

.form__input::placeholder {
  opacity: 0.65;
  color: var(--input-placeholder-color, inherit);
  filter: var(--interactive-filter);
}

.form__input:focus-visible {
  outline: var(--input-focus-outline, var(--outline));
}

.form__input--textarea {
  font-family: inherit;
  resize: vertical;
}

.error {
  color: var(--error-color);
  fill: var(--error-color);
}
`,HZ=`
.btn-group {
  display: grid;
  gap: 8px;
}

.btn {
  line-height: inherit;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  cursor: pointer;
  font-family: inherit;
  font-size: var(--button-font-size, inherit);
  font-weight: var(--button-font-weight, 600);
  padding: var(--button-padding, 6px 16px);
}
.btn[disabled] {
  opacity: 0.6;
  pointer-events: none;
}

.btn--primary {
  color: var(--button-primary-color, var(--accent-foreground));
  fill: var(--button-primary-color, var(--accent-foreground));
  background: var(--button-primary-background, var(--accent-background));
  border: var(--button-primary-border, var(--border));
  border-radius: var(--button-primary-border-radius, 6px);
  font-weight: var(--button-primary-font-weight, 500);
}
.btn--primary:hover {
  color: var(--button-primary-hover-color, var(--accent-foreground));
  fill: var(--button-primary-hover-color, var(--accent-foreground));
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
}
.btn--primary:focus-visible {
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
  outline: var(--button-primary-focus-outline, var(--outline));
}

.btn--default {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-background, var(--background));
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  font-weight: var(--button-font-weight, 500);
}
.btn--default:hover {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
}
.btn--default:focus-visible {
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
  outline: var(--button-focus-outline, var(--outline));
}
`,zZ=`
.success__position {
  position: fixed;
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  z-index: var(--z-index);
}
.success__content {
  background: var(--success-background, var(--background));
  border: var(--success-border, var(--border));
  border-radius: var(--success-border-radius, 1.7em/50%);
  box-shadow: var(--success-box-shadow, var(--box-shadow));
  font-weight: var(--success-font-weight, 600);
  color: var(--success-color);
  fill: var(--success-color);
  padding: 12px 24px;
  line-height: 1.75em;

  display: grid;
  align-items: center;
  grid-auto-flow: column;
  gap: 6px;
  cursor: default;
}

.success__icon {
  display: flex;
}
`;function GZ(n){const e=Ln.createElement("style");return e.textContent=`
:host {
  --dialog-inset: var(--inset);
}

${FZ}
${OZ}
${UZ}
${HZ}
${zZ}
`,n&&e.setAttribute("nonce",n),e}const VZ="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/integration.tsx";function WZ(){const n=Fn().getUser(),e=lo().getUser(),t=cH().getUser();return n&&Object.keys(n).length?n:e&&Object.keys(e).length?e:t}const XZ=()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:n,screenshotIntegration:e,sendFeedback:t,shadow:r})=>{const i=r,s=n.useSentryUser,o=WZ(),a=Ln.createElement("div"),l=GZ(n.styleNonce);let c="";const u={get el(){return a},appendToDom(){!i.contains(l)&&!i.contains(a)&&(i.appendChild(l),i.appendChild(a))},removeFromDom(){i.removeChild(a),i.removeChild(l),Ln.body.style.overflow=c},open(){p(!0),n.onFormOpen&&n.onFormOpen(),c=Ln.body.style.overflow,Ln.body.style.overflow="hidden"},close(){p(!1),Ln.body.style.overflow=c}},f=e&&e.createInput({h:an,hooks:bZ,dialog:u,options:n}),p=m=>{vZ(an(kZ,{options:n,screenshotInput:f,showName:n.showName||n.isNameRequired,showEmail:n.showEmail||n.isEmailRequired,defaultName:s&&o&&o[s.name]||"",defaultEmail:s&&o&&o[s.email]||"",onFormClose:()=>{p(!1),n.onFormClose&&n.onFormClose()},onSubmit:t,onSubmitSuccess:g=>{p(!1),n.onSubmitSuccess&&n.onSubmitSuccess(g)},onSubmitError:g=>{n.onSubmitError&&n.onSubmitError(g)},onFormSubmitted:()=>{n.onFormSubmitted&&n.onFormSubmitted()},open:m,__self:void 0,__source:{fileName:VZ,lineNumber:67}}),a)};return u}}),jZ="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/screenshot/components/CropCorner.tsx";function YZ({h:n}){return function({top:t,left:r,corner:i,onGrabButton:s}){return n("button",{class:`editor__crop-corner editor__crop-corner--${i} `,style:{top:t,left:r},onMouseDown:o=>{o.preventDefault(),s(o,i)},onClick:o=>{o.preventDefault()},__self:this,__source:{fileName:jZ,lineNumber:22}})}}function JZ(n){const e=Ln.createElement("style"),t="#1A141F",r="#302735";return e.textContent=`
.editor {
  padding: 10px;
  padding-top: 65px;
  padding-bottom: 65px;
  flex-grow: 1;

  background-color: ${t};
  background-image: repeating-linear-gradient(
      -145deg,
      transparent,
      transparent 8px,
      ${t} 8px,
      ${t} 11px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 15px,
      ${r} 15px,
      ${r} 16px
    );
}

.editor__canvas-container {
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.editor__canvas-container canvas {
  object-fit: contain;
  position: relative;
}

.editor__crop-btn-group {
  padding: 8px;
  gap: 8px;
  border-radius: var(--menu-border-radius, 6px);
  background: var(--button-primary-background, var(--background));
  width: 175px;
  position: absolute;
}

.editor__crop-corner {
  width: 30px;
  height: 30px;
  position: absolute;
  background: none;
  border: 3px solid #ffffff;
}

.editor__crop-corner--top-left {
  cursor: nwse-resize;
  border-right: none;
  border-bottom: none;
}
.editor__crop-corner--top-right {
  cursor: nesw-resize;
  border-left: none;
  border-bottom: none;
}
.editor__crop-corner--bottom-left {
  cursor: nesw-resize;
  border-right: none;
  border-top: none;
}
.editor__crop-corner--bottom-right {
  cursor: nwse-resize;
  border-left: none;
  border-top: none;
}
`,n&&e.setAttribute("nonce",n),e}function KZ({hooks:n}){return function({onBeforeScreenshot:t,onScreenshot:r,onAfterScreenshot:i,onError:s}){n.useEffect(()=>{(async()=>{t();const a=await Xm.mediaDevices.getDisplayMedia({video:{width:Oa.innerWidth*Oa.devicePixelRatio,height:Oa.innerHeight*Oa.devicePixelRatio},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),l=Ln.createElement("video");await new Promise((c,u)=>{l.srcObject=a,l.onloadedmetadata=()=>{r(l),a.getTracks().forEach(f=>f.stop()),c()},l.play().catch(u)}),i()})().catch(s)},[])}}const xo="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/screenshot/components/ScreenshotEditor.tsx",jm=30,hl=3,rc=jm+hl,ps=Oa.devicePixelRatio,ym=n=>({x:Math.min(n.startX,n.endX),y:Math.min(n.startY,n.endY),width:Math.abs(n.startX-n.endX),height:Math.abs(n.startY-n.endY)}),Fw=n=>{const e=n.clientHeight,t=n.clientWidth,r=n.width/n.height;let i=e*r,s=e;i>t&&(i=t,s=t/r);const o=(t-i)/2,a=(e-s)/2;return{startX:o,startY:a,endX:i+o,endY:s+a}};function $Z({h:n,hooks:e,imageBuffer:t,dialog:r,options:i}){const s=KZ({hooks:e});return function({onError:a}){const l=e.useMemo(()=>({__html:JZ(i.styleNonce).innerText}),[]),c=YZ({h:n}),u=e.useRef(null),f=e.useRef(null),p=e.useRef(null),[m,g]=e.useState({startX:0,startY:0,endX:0,endY:0}),[v,y]=e.useState(!1),[_,S]=e.useState(!1);e.useEffect(()=>{Oa.addEventListener("resize",E,!1)},[]);function E(){const C=p.current,M=ym(Fw(t));if(C){C.width=M.width*ps,C.height=M.height*ps,C.style.width=`${M.width}px`,C.style.height=`${M.height}px`;const U=C.getContext("2d");U&&U.scale(ps,ps)}const L=f.current;L&&(L.style.width=`${M.width}px`,L.style.height=`${M.height}px`),g({startX:0,startY:0,endX:M.width,endY:M.height})}e.useEffect(()=>{const C=p.current;if(!C)return;const M=C.getContext("2d");if(!M)return;const L=ym(Fw(t)),U=ym(m);M.clearRect(0,0,L.width,L.height),M.fillStyle="rgba(0, 0, 0, 0.5)",M.fillRect(0,0,L.width,L.height),M.clearRect(U.x,U.y,U.width,U.height),M.strokeStyle="#ffffff",M.lineWidth=3,M.strokeRect(U.x+1,U.y+1,U.width-2,U.height-2),M.strokeStyle="#000000",M.lineWidth=1,M.strokeRect(U.x+3,U.y+3,U.width-6,U.height-6)},[m]);function w(C,M){y(!1),S(!0);const L=I(M),U=()=>{Ln.removeEventListener("mousemove",L),Ln.removeEventListener("mouseup",U),y(!0),S(!1)};Ln.addEventListener("mouseup",U),Ln.addEventListener("mousemove",L)}const I=e.useCallback(C=>function(M){if(!p.current)return;const L=p.current,U=L.getBoundingClientRect(),X=M.clientX-U.x,$=M.clientY-U.y;switch(C){case"top-left":g(Q=>({...Q,startX:Math.min(Math.max(0,X),Q.endX-rc),startY:Math.min(Math.max(0,$),Q.endY-rc)}));break;case"top-right":g(Q=>({...Q,endX:Math.max(Math.min(X,L.width/ps),Q.startX+rc),startY:Math.min(Math.max(0,$),Q.endY-rc)}));break;case"bottom-left":g(Q=>({...Q,startX:Math.min(Math.max(0,X),Q.endX-rc),endY:Math.max(Math.min($,L.height/ps),Q.startY+rc)}));break;case"bottom-right":g(Q=>({...Q,endX:Math.max(Math.min(X,L.width/ps),Q.startX+rc),endY:Math.max(Math.min($,L.height/ps),Q.startY+rc)}));break}},[]),T=e.useRef({initialX:0,initialY:0});function b(C){if(_)return;T.current={initialX:C.clientX,initialY:C.clientY};const M=U=>{const X=p.current;if(!X)return;const $=U.clientX-T.current.initialX,Q=U.clientY-T.current.initialY;g(Y=>{const te=Math.max(0,Math.min(Y.startX+$,X.width/ps-(Y.endX-Y.startX))),k=Math.max(0,Math.min(Y.startY+Q,X.height/ps-(Y.endY-Y.startY))),K=te+(Y.endX-Y.startX),F=k+(Y.endY-Y.startY);return T.current.initialX=U.clientX,T.current.initialY=U.clientY,{startX:te,startY:k,endX:K,endY:F}})},L=()=>{Ln.removeEventListener("mousemove",M),Ln.removeEventListener("mouseup",L)};Ln.addEventListener("mousemove",M),Ln.addEventListener("mouseup",L)}function P(){const C=Ln.createElement("canvas"),M=ym(Fw(t)),L=ym(m);C.width=L.width*ps,C.height=L.height*ps;const U=C.getContext("2d");U&&t&&U.drawImage(t,L.x/M.width*t.width,L.y/M.height*t.height,L.width/M.width*t.width,L.height/M.height*t.height,0,0,C.width,C.height);const X=t.getContext("2d");X&&(X.clearRect(0,0,t.width,t.height),t.width=C.width,t.height=C.height,t.style.width=`${L.width}px`,t.style.height=`${L.height}px`,X.drawImage(C,0,0),E())}return s({onBeforeScreenshot:e.useCallback(()=>{r.el.style.display="none"},[]),onScreenshot:e.useCallback(C=>{const M=t.getContext("2d");if(!M)throw new Error("Could not get canvas context");t.width=C.videoWidth,t.height=C.videoHeight,t.style.width="100%",t.style.height="100%",M.drawImage(C,0,0)},[t]),onAfterScreenshot:e.useCallback(()=>{r.el.style.display="block";const C=u.current;C&&C.appendChild(t),E()},[]),onError:e.useCallback(C=>{r.el.style.display="block",a(C)},[])}),n("div",{class:"editor",__self:this,__source:{fileName:xo,lineNumber:315}},n("style",{nonce:i.styleNonce,dangerouslySetInnerHTML:l,__self:this,__source:{fileName:xo,lineNumber:316}}),n("div",{class:"editor__canvas-container",ref:u,__self:this,__source:{fileName:xo,lineNumber:317}},n("div",{class:"editor__crop-container",style:{position:"absolute",zIndex:1},ref:f,__self:this,__source:{fileName:xo,lineNumber:318}},n("canvas",{onMouseDown:b,style:{position:"absolute",cursor:v?"move":"auto"},ref:p,__self:this,__source:{fileName:xo,lineNumber:319}}),n(c,{left:m.startX-hl,top:m.startY-hl,onGrabButton:w,corner:"top-left",__self:this,__source:{fileName:xo,lineNumber:324}}),n(c,{left:m.endX-jm+hl,top:m.startY-hl,onGrabButton:w,corner:"top-right",__self:this,__source:{fileName:xo,lineNumber:330}}),n(c,{left:m.startX-hl,top:m.endY-jm+hl,onGrabButton:w,corner:"bottom-left",__self:this,__source:{fileName:xo,lineNumber:336}}),n(c,{left:m.endX-jm+hl,top:m.endY-jm+hl,onGrabButton:w,corner:"bottom-right",__self:this,__source:{fileName:xo,lineNumber:342}}),n("div",{style:{left:Math.max(0,m.endX-191),top:Math.max(0,m.endY+8),display:v?"flex":"none"},class:"editor__crop-btn-group",__self:this,__source:{fileName:xo,lineNumber:348}},n("button",{onClick:C=>{C.preventDefault(),p.current&&g({startX:0,startY:0,endX:p.current.width/ps,endY:p.current.height/ps}),y(!1)},class:"btn btn--default",__self:this,__source:{fileName:xo,lineNumber:356}},i.cancelButtonLabel),n("button",{onClick:C=>{C.preventDefault(),P(),y(!1)},class:"btn btn--primary",__self:this,__source:{fileName:xo,lineNumber:373}},i.confirmButtonLabel)))))}}const qZ=()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:({h:n,hooks:e,dialog:t,options:r})=>{const i=Ln.createElement("canvas");return{input:$Z({h:n,hooks:e,imageBuffer:i,dialog:t,options:r}),value:async()=>{const s=await new Promise(o=>{i.toBlob(o,"image/png")});if(s)return{data:new Uint8Array(await s.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}}),QZ=fZ({lazyLoadIntegration:dK,getModalIntegration:()=>XZ,getScreenshotIntegration:()=>qZ}),_N=new WeakMap,Ow=new Map,HC={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0};function ZZ(n,e){const{traceFetch:t,traceXHR:r,shouldCreateSpanForRequest:i,enableHTTPTimings:s,tracePropagationTargets:o}={traceFetch:HC.traceFetch,traceXHR:HC.traceXHR,...e},a=typeof i=="function"?i:u=>!0,l=u=>ree(u,o),c={};t&&(n.addEventProcessor(u=>(u.type==="transaction"&&u.spans&&u.spans.forEach(f=>{if(f.op==="http.client"){const p=Ow.get(f.span_id);p&&(f.timestamp=p/1e3,Ow.delete(f.span_id))}}),u)),x7(u=>{if(u.response){const f=_N.get(u.response);f&&u.endTimestamp&&Ow.set(f,u.endTimestamp)}}),$U(u=>{const f=Wj(u,a,l,c);if(u.response&&u.fetchData.__span&&_N.set(u.response,u.fetchData.__span),f){const p=rz(u.fetchData.url),m=p?_f(p).host:void 0;f.setAttributes({"http.url":p,"server.address":m})}s&&f&&vN(f)})),r&&qH(u=>{const f=iee(u,a,l,c);s&&f&&vN(f)})}function eee(n){return n.entryType==="resource"&&"initiatorType"in n&&typeof n.nextHopProtocol=="string"&&(n.initiatorType==="fetch"||n.initiatorType==="xmlhttprequest")}function vN(n){const{url:e}=xn(n).data||{};if(!e||typeof e!="string")return;const t=ip("resource",({entries:r})=>{r.forEach(i=>{eee(i)&&i.name.endsWith(e)&&(nee(i).forEach(o=>n.setAttribute(...o)),setTimeout(t))})})}function tee(n){let e="unknown",t="unknown",r="";for(const i of n){if(i==="/"){[e,t]=n.split("/");break}if(!isNaN(Number(i))){e=r==="h"?"http":r,t=n.split(r)[1];break}r+=i}return r===n&&(e=r),{name:e,version:t}}function Ca(n=0){return((ls||performance.timeOrigin)+n)/1e3}function nee(n){const{name:e,version:t}=tee(n.nextHopProtocol),r=[];return r.push(["network.protocol.version",t],["network.protocol.name",e]),ls?[...r,["http.request.redirect_start",Ca(n.redirectStart)],["http.request.fetch_start",Ca(n.fetchStart)],["http.request.domain_lookup_start",Ca(n.domainLookupStart)],["http.request.domain_lookup_end",Ca(n.domainLookupEnd)],["http.request.connect_start",Ca(n.connectStart)],["http.request.secure_connection_start",Ca(n.secureConnectionStart)],["http.request.connection_end",Ca(n.connectEnd)],["http.request.request_start",Ca(n.requestStart)],["http.request.response_start",Ca(n.responseStart)],["http.request.response_end",Ca(n.responseEnd)]]:r}function ree(n,e){const t=Ft.location&&Ft.location.href;if(t){let r,i;try{r=new URL(n,t),i=new URL(t).origin}catch{return!1}const s=r.origin===i;return e?Gc(r.toString(),e)||s&&Gc(r.pathname,e):s}else{const r=!!n.match(/^\/(?!\/)/);return e?Gc(n,e):r}}function iee(n,e,t,r){const i=n.xhr,s=i&&i[nf];if(!i||i.__sentry_own_request__||!s)return;const o=Qc()&&e(s.url);if(n.endTimestamp&&o){const p=i.__sentry_xhr_span_id__;if(!p)return;const m=r[p];m&&s.status_code!==void 0&&(dH(m,s.status_code),m.end(),delete r[p]);return}const a=rz(s.url),l=a?_f(a).host:void 0,c=!!zi(),u=o&&c?ca({name:`${s.method} ${s.url}`,attributes:{type:"xhr","http.method":s.method,"http.url":a,url:s.url,"server.address":l,[Cr]:"auto.http.browser",[qc]:"http.client"}}):new Np;i.__sentry_xhr_span_id__=u.spanContext().spanId,r[i.__sentry_xhr_span_id__]=u;const f=Zt();return i.setRequestHeader&&t(s.url)&&f&&see(i,f,Qc()&&c?u:void 0),u}function see(n,e,t){const r=Fn(),i=lo(),{traceId:s,spanId:o,sampled:a,dsc:l}={...i.getPropagationContext(),...r.getPropagationContext()},c=t&&Qc()?mH(t):FR(s,o,a),u=sH(l||(t?nd(t):H1(s,e)));oee(n,c,u)}function oee(n,e,t){try{n.setRequestHeader("sentry-trace",e),t&&n.setRequestHeader(fC,t)}catch{}}function rz(n){try{return new URL(n,Ft.location.origin).href}catch{return}}function aee(){Ft&&Ft.document?Ft.document.addEventListener("visibilitychange",()=>{const n=zi();if(!n)return;const e=yi(n);if(Ft.document.hidden&&e){const t="cancelled",{op:r,status:i}=xn(e);da&&qe.log(`[Tracing] Transaction: ${t} -> since tab moved to the background, op: ${r}`),i||e.setStatus({code:si,message:t}),e.setAttribute("sentry.cancellation_reason","document.hidden"),e.end()}}):da&&qe.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const lee="BrowserTracing",cee={..._x,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,_experiments:{},...HC},iz=(n={})=>{EX();const{enableInp:e,enableLongTask:t,enableLongAnimationFrame:r,_experiments:{enableInteractions:i,enableStandaloneClsSpans:s},beforeStartSpan:o,idleTimeout:a,finalTimeout:l,childSpanTimeout:c,markBackgroundSpan:u,traceFetch:f,traceXHR:p,shouldCreateSpanForRequest:m,enableHTTPTimings:g,instrumentPageLoad:v,instrumentNavigation:y}={...cee,...n},_=GY({recordClsStandaloneSpans:s||!1});e&&dJ(),r&&pn.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?WY():t&&VY(),i&&XY();const S={name:void 0,source:void 0};function E(w,I){const T=I.op==="pageload",b=o?o(I):I,P=b.attributes||{};I.name!==b.name&&(P[ka]="custom",b.attributes=P),S.name=b.name,S.source=P[ka];const C=AH(b,{idleTimeout:a,finalTimeout:l,childSpanTimeout:c,disableAutoFinish:T,beforeSpanEnd:L=>{_(),$Y(L,{recordClsOnPageloadSpan:!s})}});function M(){["interactive","complete"].includes(Ft.document.readyState)&&w.emit("idleSpanEnableAutoFinish",C)}return T&&Ft.document&&(Ft.document.addEventListener("readystatechange",()=>{M()}),M()),C}return{name:lee,afterAllSetup(w){let I,T=Ft.location&&Ft.location.href;w.on("startNavigationSpan",b=>{Zt()===w&&(I&&!xn(I).timestamp&&(da&&qe.log(`[Tracing] Finishing current root span with op: ${xn(I).op}`),I.end()),I=E(w,{op:"navigation",...b}))}),w.on("startPageLoadSpan",(b,P={})=>{if(Zt()!==w)return;I&&!xn(I).timestamp&&(da&&qe.log(`[Tracing] Finishing current root span with op: ${xn(I).op}`),I.end());const C=P.sentryTrace||yN("sentry-trace"),M=P.baggage||yN("baggage"),L=W7(C,M);Fn().setPropagationContext(L),I=E(w,{op:"pageload",...b})}),w.on("spanEnd",b=>{const P=xn(b).op;if(b!==yi(b)||P!=="navigation"&&P!=="pageload")return;const C=Fn(),M=C.getPropagationContext();C.setPropagationContext({...M,sampled:M.sampled!==void 0?M.sampled:td(b),dsc:M.dsc||nd(b)})}),Ft.location&&(v&&sz(w,{name:Ft.location.pathname,startTime:ls?ls/1e3:void 0,attributes:{[ka]:"url",[Cr]:"auto.pageload.browser"}}),y&&V1(({to:b,from:P})=>{if(P===void 0&&T&&T.indexOf(b)!==-1){T=void 0;return}P!==b&&(T=void 0,uee(w,{name:Ft.location.pathname,attributes:{[ka]:"url",[Cr]:"auto.navigation.browser"}}))})),u&&aee(),i&&fee(a,l,c,S),e&&pJ(),ZZ(w,{traceFetch:f,traceXHR:p,tracePropagationTargets:w.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:m,enableHTTPTimings:g})}}};function sz(n,e,t){n.emit("startPageLoadSpan",e,t),Fn().setTransactionName(e.name);const r=zi();return(r&&xn(r).op)==="pageload"?r:void 0}function uee(n,e){lo().setPropagationContext(fS()),Fn().setPropagationContext(fS()),n.emit("startNavigationSpan",e),Fn().setTransactionName(e.name);const t=zi();return(t&&xn(t).op)==="navigation"?t:void 0}function yN(n){const e=r7(`meta[name=${n}]`);return e?e.getAttribute("content"):void 0}function fee(n,e,t,r){let i;const s=()=>{const o="ui.action.click",a=zi(),l=a&&yi(a);if(l){const c=xn(l).op;if(["navigation","pageload"].includes(c)){da&&qe.warn(`[Tracing] Did not create ${o} span because a pageload or navigation span is in progress.`);return}}if(i&&(i.setAttribute(mC,"interactionInterrupted"),i.end(),i=void 0),!r.name){da&&qe.warn(`[Tracing] Did not create ${o} transaction because _latestRouteName is missing.`);return}i=AH({name:r.name,op:o,attributes:{[ka]:r.source||"url"}},{idleTimeout:n,finalTimeout:e,childSpanTimeout:t})};Ft.document&&addEventListener("click",s,{once:!1,capture:!0})}function dee(n){const e={...n};return DH(e,"react"),TH("react",{version:se.version}),cK(e)}var oz={exports:{}},kn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var di=typeof Symbol=="function"&&Symbol.for,_I=di?Symbol.for("react.element"):60103,vI=di?Symbol.for("react.portal"):60106,q1=di?Symbol.for("react.fragment"):60107,Q1=di?Symbol.for("react.strict_mode"):60108,Z1=di?Symbol.for("react.profiler"):60114,eE=di?Symbol.for("react.provider"):60109,tE=di?Symbol.for("react.context"):60110,yI=di?Symbol.for("react.async_mode"):60111,nE=di?Symbol.for("react.concurrent_mode"):60111,rE=di?Symbol.for("react.forward_ref"):60112,iE=di?Symbol.for("react.suspense"):60113,hee=di?Symbol.for("react.suspense_list"):60120,sE=di?Symbol.for("react.memo"):60115,oE=di?Symbol.for("react.lazy"):60116,pee=di?Symbol.for("react.block"):60121,mee=di?Symbol.for("react.fundamental"):60117,gee=di?Symbol.for("react.responder"):60118,_ee=di?Symbol.for("react.scope"):60119;function co(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case _I:switch(n=n.type,n){case yI:case nE:case q1:case Z1:case Q1:case iE:return n;default:switch(n=n&&n.$$typeof,n){case tE:case rE:case oE:case sE:case eE:return n;default:return e}}case vI:return e}}}function az(n){return co(n)===nE}kn.AsyncMode=yI;kn.ConcurrentMode=nE;kn.ContextConsumer=tE;kn.ContextProvider=eE;kn.Element=_I;kn.ForwardRef=rE;kn.Fragment=q1;kn.Lazy=oE;kn.Memo=sE;kn.Portal=vI;kn.Profiler=Z1;kn.StrictMode=Q1;kn.Suspense=iE;kn.isAsyncMode=function(n){return az(n)||co(n)===yI};kn.isConcurrentMode=az;kn.isContextConsumer=function(n){return co(n)===tE};kn.isContextProvider=function(n){return co(n)===eE};kn.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===_I};kn.isForwardRef=function(n){return co(n)===rE};kn.isFragment=function(n){return co(n)===q1};kn.isLazy=function(n){return co(n)===oE};kn.isMemo=function(n){return co(n)===sE};kn.isPortal=function(n){return co(n)===vI};kn.isProfiler=function(n){return co(n)===Z1};kn.isStrictMode=function(n){return co(n)===Q1};kn.isSuspense=function(n){return co(n)===iE};kn.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===q1||n===nE||n===Z1||n===Q1||n===iE||n===hee||typeof n=="object"&&n!==null&&(n.$$typeof===oE||n.$$typeof===sE||n.$$typeof===eE||n.$$typeof===tE||n.$$typeof===rE||n.$$typeof===mee||n.$$typeof===gee||n.$$typeof===_ee||n.$$typeof===pee)};kn.typeOf=co;oz.exports=kn;var vee=oz.exports,xI=vee,yee={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},xee={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},See={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},lz={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},SI={};SI[xI.ForwardRef]=See;SI[xI.Memo]=lz;function xN(n){return xI.isMemo(n)?lz:SI[n.$$typeof]||yee}var Eee=Object.defineProperty,Aee=Object.getOwnPropertyNames,SN=Object.getOwnPropertySymbols,wee=Object.getOwnPropertyDescriptor,Mee=Object.getPrototypeOf,EN=Object.prototype;function cz(n,e,t){if(typeof e!="string"){if(EN){var r=Mee(e);r&&r!==EN&&cz(n,r,t)}var i=Aee(e);SN&&(i=i.concat(SN(e)));for(var s=xN(n),o=xN(e),a=0;a<i.length;++a){var l=i[a];if(!xee[l]&&!(t&&t[l])&&!(o&&o[l])&&!(s&&s[l])){var c=wee(e,l);try{Eee(n,l,c)}catch{}}}}return n}var Tee=cz;const Cee=N_(Tee),bee="ui.react.render",Ree="ui.react.update",Iee="ui.react.mount",Pee="unknown";class uz extends se.Component{static __initStatic(){this.defaultProps={disabled:!1,includeRender:!0,includeUpdates:!0}}constructor(e){super(e);const{name:t,disabled:r=!1}=this.props;r||(this._mountSpan=ca({name:`<${t}>`,onlyIfParent:!0,op:Iee,attributes:{[Cr]:"auto.ui.react.profiler","ui.component_name":t}}))}componentDidMount(){this._mountSpan&&this._mountSpan.end()}shouldComponentUpdate({updateProps:e,includeUpdates:t=!0}){if(t&&this._mountSpan&&e!==this.props.updateProps){const r=Object.keys(e).filter(i=>e[i]!==this.props.updateProps[i]);if(r.length>0){const i=vi();this._updateSpan=pS(this._mountSpan,()=>ca({name:`<${this.props.name}>`,onlyIfParent:!0,op:Ree,startTime:i,attributes:{[Cr]:"auto.ui.react.profiler","ui.component_name":this.props.name,"ui.react.changed_props":r}}))}}return!0}componentDidUpdate(){this._updateSpan&&(this._updateSpan.end(),this._updateSpan=void 0)}componentWillUnmount(){const e=vi(),{name:t,includeRender:r=!0}=this.props;if(this._mountSpan&&r){const i=xn(this._mountSpan).timestamp;pS(this._mountSpan,()=>{const s=ca({onlyIfParent:!0,name:`<${t}>`,op:bee,startTime:i,attributes:{[Cr]:"auto.ui.react.profiler","ui.component_name":t}});s&&s.end(e)})}}render(){return this.props.children}}uz.__initStatic();function Dee(n,e){const t=n.displayName||n.name||Pee,r=i=>se.createElement(uz,{...e,name:t,updateProps:i},se.createElement(n,{...i}));return r.displayName=`profiler(${t})`,Cee(r,n),r}const Bee=new WeakSet;function Lee(n){const e=iz({...n,instrumentPageLoad:!1,instrumentNavigation:!1}),{useEffect:t,useLocation:r,useNavigationType:i,createRoutesFromChildren:s,matchRoutes:o,stripBasename:a,instrumentPageLoad:l=!0,instrumentNavigation:c=!0}=n;return{...e,setup(){},afterAllSetup(u){e.afterAllSetup(u);const f=Ft&&Ft.location&&Ft.location.pathname;l&&f&&sz(u,{name:f,attributes:{[ka]:"url",[qc]:"pageload",[Cr]:"auto.pageload.react.reactrouter_v6"}}),c&&Bee.add(u)}}}function gl(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function fz(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var to={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},dp={duration:.5,overwrite:!1,delay:0},EI,Fi,sr,Po=1e8,Yn=1/Po,zC=Math.PI*2,Nee=zC/4,kee=0,dz=Math.sqrt,Fee=Math.cos,Oee=Math.sin,fi=function(e){return typeof e=="string"},Tr=function(e){return typeof e=="function"},Wl=function(e){return typeof e=="number"},AI=function(e){return typeof e>"u"},Ka=function(e){return typeof e=="object"},Ms=function(e){return e!==!1},wI=function(){return typeof window<"u"},Wv=function(e){return Tr(e)||fi(e)},hz=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Oi=Array.isArray,GC=/(?:-?\.?\d|\.)+/gi,pz=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,vh=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Uw=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,mz=/[+-]=-?[.\d]+/,gz=/[^,'"\[\]\s]+/gi,Uee=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,mr,Ia,VC,MI,io={},bS={},_z,vz=function(e){return(bS=Uf(e,io))&&Rs},TI=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},u_=function(e,t){return!t&&console.warn(e)},yz=function(e,t){return e&&(io[e]=t)&&bS&&(bS[e]=t)||io},f_=function(){return 0},Hee={suppressEvents:!0,isStart:!0,kill:!1},Tx={suppressEvents:!0,kill:!1},zee={suppressEvents:!0},CI={},Xc=[],WC={},xz,Vs={},Hw={},AN=30,Cx=[],bI="",RI=function(e){var t=e[0],r,i;if(Ka(t)||Tr(t)||(e=[e]),!(r=(t._gsap||{}).harness)){for(i=Cx.length;i--&&!Cx[i].targetTest(t););r=Cx[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new Wz(e[i],r)))||e.splice(i,1);return e},xf=function(e){return e._gsap||RI(Do(e))[0]._gsap},Sz=function(e,t,r){return(r=e[t])&&Tr(r)?e[t]():AI(r)&&e.getAttribute&&e.getAttribute(t)||r},Ts=function(e,t){return(e=e.split(",")).forEach(t)||e},Ir=function(e){return Math.round(e*1e5)/1e5||0},li=function(e){return Math.round(e*1e7)/1e7||0},Nh=function(e,t){var r=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),r==="+"?e+i:r==="-"?e-i:r==="*"?e*i:e/i},Gee=function(e,t){for(var r=t.length,i=0;e.indexOf(t[i])<0&&++i<r;);return i<r},RS=function(){var e=Xc.length,t=Xc.slice(0),r,i;for(WC={},Xc.length=0,r=0;r<e;r++)i=t[r],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},Ez=function(e,t,r,i){Xc.length&&!Fi&&RS(),e.render(t,r,Fi&&t<0&&(e._initted||e._startAt)),Xc.length&&!Fi&&RS()},Az=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(gz).length<2?t:fi(e)?e.trim():e},wz=function(e){return e},Ho=function(e,t){for(var r in t)r in e||(e[r]=t[r]);return e},Vee=function(e){return function(t,r){for(var i in r)i in t||i==="duration"&&e||i==="ease"||(t[i]=r[i])}},Uf=function(e,t){for(var r in t)e[r]=t[r];return e},wN=function n(e,t){for(var r in t)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(e[r]=Ka(t[r])?n(e[r]||(e[r]={}),t[r]):t[r]);return e},IS=function(e,t){var r={},i;for(i in e)i in t||(r[i]=e[i]);return r},gg=function(e){var t=e.parent||mr,r=e.keyframes?Vee(Oi(e.keyframes)):Ho;if(Ms(e.inherit))for(;t;)r(e,t.vars.defaults),t=t.parent||t._dp;return e},Wee=function(e,t){for(var r=e.length,i=r===t.length;i&&r--&&e[r]===t[r];);return r<0},Mz=function(e,t,r,i,s){var o=e[i],a;if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[r],e[r]=t),t._next?t._next._prev=t:e[i]=t,t._prev=o,t.parent=t._dp=e,t},aE=function(e,t,r,i){r===void 0&&(r="_first"),i===void 0&&(i="_last");var s=t._prev,o=t._next;s?s._next=o:e[r]===t&&(e[r]=o),o?o._prev=s:e[i]===t&&(e[i]=s),t._next=t._prev=t.parent=null},eu=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Sf=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},Xee=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},XC=function(e,t,r,i){return e._startAt&&(Fi?e._startAt.revert(Tx):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},jee=function n(e){return!e||e._ts&&n(e.parent)},MN=function(e){return e._repeat?hp(e._tTime,e=e.duration()+e._rDelay)*e:0},hp=function(e,t){var r=Math.floor(e/=t);return e&&r===e?r-1:r},PS=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},lE=function(e){return e._end=li(e._start+(e._tDur/Math.abs(e._ts||e._rts||Yn)||0))},cE=function(e,t){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=li(r._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),lE(e),r._dirty||Sf(r,e)),e},Tz=function(e,t){var r;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(r=PS(e.rawTime(),t),(!t._dur||Q_(0,t.totalDuration(),r)-t._tTime>Yn)&&t.render(r,!0)),Sf(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-Yn}},Na=function(e,t,r,i){return t.parent&&eu(t),t._start=li((Wl(r)?r:r||e!==mr?Eo(e,r,t):e._time)+t._delay),t._end=li(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),Mz(e,t,"_first","_last",e._sort?"_start":0),jC(t)||(e._recent=t),i||Tz(e,t),e._ts<0&&cE(e,e._tTime),e},Cz=function(e,t){return(io.ScrollTrigger||TI("scrollTrigger",t))&&io.ScrollTrigger.create(t,e)},bz=function(e,t,r,i,s){if(PI(e,t,s),!e._initted)return 1;if(!r&&e._pt&&!Fi&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&xz!==Ys.frame)return Xc.push(e),e._lazy=[s,i],1},Yee=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},jC=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},Jee=function(e,t,r,i){var s=e.ratio,o=t<0||!t&&(!e._start&&Yee(e)&&!(!e._initted&&jC(e))||(e._ts<0||e._dp._ts<0)&&!jC(e))?0:1,a=e._rDelay,l=0,c,u,f;if(a&&e._repeat&&(l=Q_(0,e._tDur,t),u=hp(l,a),e._yoyo&&u&1&&(o=1-o),u!==hp(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||Fi||i||e._zTime===Yn||!t&&e._zTime){if(!e._initted&&bz(e,t,i,r,l))return;for(f=e._zTime,e._zTime=t||(r?Yn:0),r||(r=t&&!f),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,c=e._pt;c;)c.r(o,c.d),c=c._next;t<0&&XC(e,t,r,!0),e._onUpdate&&!r&&qs(e,"onUpdate"),l&&e._repeat&&!r&&e.parent&&qs(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&eu(e,1),!r&&!Fi&&(qs(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},Kee=function(e,t,r){var i;if(r>t)for(i=e._first;i&&i._start<=r;){if(i.data==="isPause"&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=r;){if(i.data==="isPause"&&i._start<t)return i;i=i._prev}},pp=function(e,t,r,i){var s=e._repeat,o=li(t)||0,a=e._tTime/e._tDur;return a&&!i&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:li(o*(s+1)+e._rDelay*s):o,a>0&&!i&&cE(e,e._tTime=e._tDur*a),e.parent&&lE(e),r||Sf(e.parent,e),e},TN=function(e){return e instanceof ns?Sf(e):pp(e,e._dur)},$ee={_start:0,endTime:f_,totalDuration:f_},Eo=function n(e,t,r){var i=e.labels,s=e._recent||$ee,o=e.duration()>=Po?s.endTime(!1):e._dur,a,l,c;return fi(t)&&(isNaN(t)||t in i)?(l=t.charAt(0),c=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(a<0?s:r).totalDuration()/100:1)):a<0?(t in i||(i[t]=o),i[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),c&&r&&(l=l/100*(Oi(r)?r[0]:r).totalDuration()),a>1?n(e,t.substr(0,a-1),r)+l:o+l)):t==null?o:+t},_g=function(e,t,r){var i=Wl(t[1]),s=(i?2:1)+(e<2?0:1),o=t[s],a,l;if(i&&(o.duration=t[1]),o.parent=r,e){for(a=o,l=r;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=Ms(l.vars.inherit)&&l.parent;o.immediateRender=Ms(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new Hr(t[0],o,t[s+1])},du=function(e,t){return e||e===0?t(e):t},Q_=function(e,t,r){return r<e?e:r>t?t:r},ki=function(e,t){return!fi(e)||!(t=Uee.exec(e))?"":t[1]},qee=function(e,t,r){return du(r,function(i){return Q_(e,t,i)})},YC=[].slice,Rz=function(e,t){return e&&Ka(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Ka(e[0]))&&!e.nodeType&&e!==Ia},Qee=function(e,t,r){return r===void 0&&(r=[]),e.forEach(function(i){var s;return fi(i)&&!t||Rz(i,1)?(s=r).push.apply(s,Do(i)):r.push(i)})||r},Do=function(e,t,r){return sr&&!t&&sr.selector?sr.selector(e):fi(e)&&!r&&(VC||!mp())?YC.call((t||MI).querySelectorAll(e),0):Oi(e)?Qee(e,r):Rz(e)?YC.call(e,0):e?[e]:[]},JC=function(e){return e=Do(e)[0]||u_("Invalid scope")||{},function(t){var r=e.current||e.nativeElement||e;return Do(t,r.querySelectorAll?r:r===e?u_("Invalid scope")||MI.createElement("div"):e)}},Iz=function(e){return e.sort(function(){return .5-Math.random()})},Pz=function(e){if(Tr(e))return e;var t=Ka(e)?e:{each:e},r=Ef(t.ease),i=t.from||0,s=parseFloat(t.base)||0,o={},a=i>0&&i<1,l=isNaN(i)||a,c=t.axis,u=i,f=i;return fi(i)?u=f={center:.5,edges:.5,end:1}[i]||0:!a&&l&&(u=i[0],f=i[1]),function(p,m,g){var v=(g||t).length,y=o[v],_,S,E,w,I,T,b,P,C;if(!y){if(C=t.grid==="auto"?0:(t.grid||[1,Po])[1],!C){for(b=-Po;b<(b=g[C++].getBoundingClientRect().left)&&C<v;);C<v&&C--}for(y=o[v]=[],_=l?Math.min(C,v)*u-.5:i%C,S=C===Po?0:l?v*f/C-.5:i/C|0,b=0,P=Po,T=0;T<v;T++)E=T%C-_,w=S-(T/C|0),y[T]=I=c?Math.abs(c==="y"?w:E):dz(E*E+w*w),I>b&&(b=I),I<P&&(P=I);i==="random"&&Iz(y),y.max=b-P,y.min=P,y.v=v=(parseFloat(t.amount)||parseFloat(t.each)*(C>v?v-1:c?c==="y"?v/C:C:Math.max(C,v/C))||0)*(i==="edges"?-1:1),y.b=v<0?s-v:s,y.u=ki(t.amount||t.each)||0,r=r&&v<0?zz(r):r}return v=(y[p]-y.min)/y.max||0,li(y.b+(r?r(v):v)*y.v)+y.u}},KC=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var i=li(Math.round(parseFloat(r)/e)*e*t);return(i-i%1)/t+(Wl(r)?0:ki(r))}},Dz=function(e,t){var r=Oi(e),i,s;return!r&&Ka(e)&&(i=r=e.radius||Po,e.values?(e=Do(e.values),(s=!Wl(e[0]))&&(i*=i)):e=KC(e.increment)),du(t,r?Tr(e)?function(o){return s=e(o),Math.abs(s-o)<=i?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),c=Po,u=0,f=e.length,p,m;f--;)s?(p=e[f].x-a,m=e[f].y-l,p=p*p+m*m):p=Math.abs(e[f]-a),p<c&&(c=p,u=f);return u=!i||c<=i?e[u]:o,s||u===o||Wl(o)?u:u+ki(o)}:KC(e))},Bz=function(e,t,r,i){return du(Oi(e)?!t:r===!0?!!(r=0):!i,function(){return Oi(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(t-e+r*.99))/r)*r*i)/i})},Zee=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(i){return t.reduce(function(s,o){return o(s)},i)}},ete=function(e,t){return function(r){return e(parseFloat(r))+(t||ki(r))}},tte=function(e,t,r){return Nz(e,t,0,1,r)},Lz=function(e,t,r){return du(r,function(i){return e[~~t(i)]})},nte=function n(e,t,r){var i=t-e;return Oi(e)?Lz(e,n(0,e.length),t):du(r,function(s){return(i+(s-e)%i)%i+e})},rte=function n(e,t,r){var i=t-e,s=i*2;return Oi(e)?Lz(e,n(0,e.length-1),t):du(r,function(o){return o=(s+(o-e)%s)%s||0,e+(o>i?s-o:o)})},d_=function(e){for(var t=0,r="",i,s,o,a;~(i=e.indexOf("random(",t));)o=e.indexOf(")",i),a=e.charAt(i+7)==="[",s=e.substr(i+7,o-i-7).match(a?gz:GC),r+=e.substr(t,i-t)+Bz(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return r+e.substr(t,e.length-t)},Nz=function(e,t,r,i,s){var o=t-e,a=i-r;return du(s,function(l){return r+((l-e)/o*a||0)})},ite=function n(e,t,r,i){var s=isNaN(e+t)?0:function(m){return(1-m)*e+m*t};if(!s){var o=fi(e),a={},l,c,u,f,p;if(r===!0&&(i=1)&&(r=null),o)e={p:e},t={p:t};else if(Oi(e)&&!Oi(t)){for(u=[],f=e.length,p=f-2,c=1;c<f;c++)u.push(n(e[c-1],e[c]));f--,s=function(g){g*=f;var v=Math.min(p,~~g);return u[v](g-v)},r=t}else i||(e=Uf(Oi(e)?[]:{},e));if(!u){for(l in t)II.call(a,e,l,"get",t[l]);s=function(g){return LI(g,a)||(o?e.p:e)}}}return du(r,s)},CN=function(e,t,r){var i=e.labels,s=Po,o,a,l;for(o in i)a=i[o]-t,a<0==!!r&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},qs=function(e,t,r){var i=e.vars,s=i[t],o=sr,a=e._ctx,l,c,u;if(s)return l=i[t+"Params"],c=i.callbackScope||e,r&&Xc.length&&RS(),a&&(sr=a),u=l?s.apply(c,l):s.call(c),sr=o,u},Ym=function(e){return eu(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Fi),e.progress()<1&&qs(e,"onInterrupt"),e},yh,kz=[],Fz=function(e){if(e)if(e=!e.name&&e.default||e,wI()||e.headless){var t=e.name,r=Tr(e),i=t&&!r&&e.init?function(){this._props=[]}:e,s={init:f_,render:LI,add:II,kill:xte,modifier:yte,rawVars:0},o={targetTest:0,get:0,getSetter:BI,aliases:{},register:0};if(mp(),e!==i){if(Vs[t])return;Ho(i,Ho(IS(e,s),o)),Uf(i.prototype,Uf(s,IS(e,o))),Vs[i.prop=t]=i,e.targetTest&&(Cx.push(i),CI[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}yz(t,i),e.register&&e.register(Rs,i,Cs)}else kz.push(e)},Un=255,Jm={aqua:[0,Un,Un],lime:[0,Un,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Un],navy:[0,0,128],white:[Un,Un,Un],olive:[128,128,0],yellow:[Un,Un,0],orange:[Un,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Un,0,0],pink:[Un,192,203],cyan:[0,Un,Un],transparent:[Un,Un,Un,0]},zw=function(e,t,r){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(r-t)*e*6:e<.5?r:e*3<2?t+(r-t)*(2/3-e)*6:t)*Un+.5|0},Oz=function(e,t,r){var i=e?Wl(e)?[e>>16,e>>8&Un,e&Un]:0:Jm.black,s,o,a,l,c,u,f,p,m,g;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Jm[e])i=Jm[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&Un,i&Un,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&Un,e&Un]}else if(e.substr(0,3)==="hsl"){if(i=g=e.match(GC),!t)l=+i[0]%360/360,c=+i[1]/100,u=+i[2]/100,o=u<=.5?u*(c+1):u+c-u*c,s=u*2-o,i.length>3&&(i[3]*=1),i[0]=zw(l+1/3,s,o),i[1]=zw(l,s,o),i[2]=zw(l-1/3,s,o);else if(~e.indexOf("="))return i=e.match(pz),r&&i.length<4&&(i[3]=1),i}else i=e.match(GC)||Jm.transparent;i=i.map(Number)}return t&&!g&&(s=i[0]/Un,o=i[1]/Un,a=i[2]/Un,f=Math.max(s,o,a),p=Math.min(s,o,a),u=(f+p)/2,f===p?l=c=0:(m=f-p,c=u>.5?m/(2-f-p):m/(f+p),l=f===s?(o-a)/m+(o<a?6:0):f===o?(a-s)/m+2:(s-o)/m+4,l*=60),i[0]=~~(l+.5),i[1]=~~(c*100+.5),i[2]=~~(u*100+.5)),r&&i.length<4&&(i[3]=1),i},Uz=function(e){var t=[],r=[],i=-1;return e.split(jc).forEach(function(s){var o=s.match(vh)||[];t.push.apply(t,o),r.push(i+=o.length+1)}),t.c=r,t},bN=function(e,t,r){var i="",s=(e+i).match(jc),o=t?"hsla(":"rgba(",a=0,l,c,u,f;if(!s)return e;if(s=s.map(function(p){return(p=Oz(p,t,1))&&o+(t?p[0]+","+p[1]+"%,"+p[2]+"%,"+p[3]:p.join(","))+")"}),r&&(u=Uz(e),l=r.c,l.join(i)!==u.c.join(i)))for(c=e.replace(jc,"1").split(vh),f=c.length-1;a<f;a++)i+=c[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(u.length?u:s.length?s:r).shift());if(!c)for(c=e.split(jc),f=c.length-1;a<f;a++)i+=c[a]+s[a];return i+c[f]},jc=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Jm)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),ste=/hsl[a]?\(/,Hz=function(e){var t=e.join(" "),r;if(jc.lastIndex=0,jc.test(t))return r=ste.test(t),e[1]=bN(e[1],r),e[0]=bN(e[0],r,Uz(e[1])),!0},h_,Ys=function(){var n=Date.now,e=500,t=33,r=n(),i=r,s=1e3/240,o=s,a=[],l,c,u,f,p,m,g=function v(y){var _=n()-i,S=y===!0,E,w,I,T;if((_>e||_<0)&&(r+=_-t),i+=_,I=i-r,E=I-o,(E>0||S)&&(T=++f.frame,p=I-f.time*1e3,f.time=I=I/1e3,o+=E+(E>=s?4:s-E),w=1),S||(l=c(v)),w)for(m=0;m<a.length;m++)a[m](I,p,T,y)};return f={time:0,frame:0,tick:function(){g(!0)},deltaRatio:function(y){return p/(1e3/(y||60))},wake:function(){_z&&(!VC&&wI()&&(Ia=VC=window,MI=Ia.document||{},io.gsap=Rs,(Ia.gsapVersions||(Ia.gsapVersions=[])).push(Rs.version),vz(bS||Ia.GreenSockGlobals||!Ia.gsap&&Ia||{}),kz.forEach(Fz)),u=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&f.sleep(),c=u||function(y){return setTimeout(y,o-f.time*1e3+1|0)},h_=1,g(2))},sleep:function(){(u?cancelAnimationFrame:clearTimeout)(l),h_=0,c=f_},lagSmoothing:function(y,_){e=y||1/0,t=Math.min(_||33,e)},fps:function(y){s=1e3/(y||240),o=f.time*1e3+s},add:function(y,_,S){var E=_?function(w,I,T,b){y(w,I,T,b),f.remove(E)}:y;return f.remove(y),a[S?"unshift":"push"](E),mp(),E},remove:function(y,_){~(_=a.indexOf(y))&&a.splice(_,1)&&m>=_&&m--},_listeners:a},f}(),mp=function(){return!h_&&Ys.wake()},gn={},ote=/^[\d.\-M][\d.\-,\s]/,ate=/["']/g,lte=function(e){for(var t={},r=e.substr(1,e.length-3).split(":"),i=r[0],s=1,o=r.length,a,l,c;s<o;s++)l=r[s],a=s!==o-1?l.lastIndexOf(","):l.length,c=l.substr(0,a),t[i]=isNaN(c)?c.replace(ate,"").trim():+c,i=l.substr(a+1).trim();return t},cte=function(e){var t=e.indexOf("(")+1,r=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<r?e.indexOf(")",r+1):r)},ute=function(e){var t=(e+"").split("("),r=gn[t[0]];return r&&t.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[lte(t[1])]:cte(e).split(",").map(Az)):gn._CE&&ote.test(e)?gn._CE("",e):r},zz=function(e){return function(t){return 1-e(1-t)}},Gz=function n(e,t){for(var r=e._first,i;r;)r instanceof ns?n(r,t):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==t&&(r.timeline?n(r.timeline,t):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=t)),r=r._next},Ef=function(e,t){return e&&(Tr(e)?e:gn[e]||ute(e))||t},sd=function(e,t,r,i){r===void 0&&(r=function(l){return 1-t(1-l)}),i===void 0&&(i=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:r,easeInOut:i},o;return Ts(e,function(a){gn[a]=io[a]=s,gn[o=a.toLowerCase()]=r;for(var l in s)gn[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=gn[a+"."+l]=s[l]}),s},Vz=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},Gw=function n(e,t,r){var i=t>=1?t:1,s=(r||(e?.3:.45))/(t<1?t:1),o=s/zC*(Math.asin(1/i)||0),a=function(u){return u===1?1:i*Math.pow(2,-10*u)*Oee((u-o)*s)+1},l=e==="out"?a:e==="in"?function(c){return 1-a(1-c)}:Vz(a);return s=zC/s,l.config=function(c,u){return n(e,c,u)},l},Vw=function n(e,t){t===void 0&&(t=1.70158);var r=function(o){return o?--o*o*((t+1)*o+t)+1:0},i=e==="out"?r:e==="in"?function(s){return 1-r(1-s)}:Vz(r);return i.config=function(s){return n(e,s)},i};Ts("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;sd(n+",Power"+(t-1),e?function(r){return Math.pow(r,t)}:function(r){return r},function(r){return 1-Math.pow(1-r,t)},function(r){return r<.5?Math.pow(r*2,t)/2:1-Math.pow((1-r)*2,t)/2})});gn.Linear.easeNone=gn.none=gn.Linear.easeIn;sd("Elastic",Gw("in"),Gw("out"),Gw());(function(n,e){var t=1/e,r=2*t,i=2.5*t,s=function(a){return a<t?n*a*a:a<r?n*Math.pow(a-1.5/e,2)+.75:a<i?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};sd("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);sd("Expo",function(n){return n?Math.pow(2,10*(n-1)):0});sd("Circ",function(n){return-(dz(1-n*n)-1)});sd("Sine",function(n){return n===1?1:-Fee(n*Nee)+1});sd("Back",Vw("in"),Vw("out"),Vw());gn.SteppedEase=gn.steps=io.SteppedEase={config:function(e,t){e===void 0&&(e=1);var r=1/e,i=e+(t?0:1),s=t?1:0,o=1-Yn;return function(a){return((i*Q_(0,o,a)|0)+s)*r}}};dp.ease=gn["quad.out"];Ts("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return bI+=n+","+n+"Params,"});var Wz=function(e,t){this.id=kee++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:Sz,this.set=t?t.getSetter:BI},p_=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,pp(this,+t.duration,1,1),this.data=t.data,sr&&(this._ctx=sr,sr.data.push(this)),h_||Ys.wake()}var e=n.prototype;return e.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,pp(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,i){if(mp(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(cE(this,r),!s._dp||s.parent||Tz(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&Na(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===Yn||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),Ez(this,r,i)),this},e.time=function(r,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+MN(this))%(this._dur+this._rDelay)||(r?this._dur:0),i):this._time},e.totalProgress=function(r,i){return arguments.length?this.totalTime(this.totalDuration()*r,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(r,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+MN(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(r,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*s,i):this._repeat?hp(this._tTime,s)+1:1},e.timeScale=function(r,i){if(!arguments.length)return this._rts===-Yn?0:this._rts;if(this._rts===r)return this;var s=this.parent&&this._ts?PS(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-Yn?0:this._rts,this.totalTime(Q_(-Math.abs(this._delay),this._tDur,s),i!==!1),lE(this),Xee(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(mp(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Yn&&(this._tTime-=Yn)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=r;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&Na(i,this,r-this._delay),this}return this._start},e.endTime=function(r){return this._start+(Ms(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var i=this.parent||this._dp;return i?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?PS(i.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){r===void 0&&(r=zee);var i=Fi;return Fi=r,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),Fi=i,this},e.globalTime=function(r){for(var i=this,s=arguments.length?r:i.rawTime();i;)s=i._start+s/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(r):s},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,TN(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var i=this._time;return this._rDelay=r,TN(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,i){return this.totalTime(Eo(this,r),Ms(i))},e.restart=function(r,i){return this.play().totalTime(r?-this._delay:0,Ms(i))},e.play=function(r,i){return r!=null&&this.seek(r,i),this.reversed(!1).paused(!1)},e.reverse=function(r,i){return r!=null&&this.seek(r||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(r,i){return r!=null&&this.seek(r,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-Yn:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Yn,this},e.isActive=function(){var r=this.parent||this._dp,i=this._start,s;return!!(!r||this._ts&&this._initted&&r.isActive()&&(s=r.rawTime(!0))>=i&&s<this.endTime(!0)-Yn)},e.eventCallback=function(r,i,s){var o=this.vars;return arguments.length>1?(i?(o[r]=i,s&&(o[r+"Params"]=s),r==="onUpdate"&&(this._onUpdate=i)):delete o[r],this):o[r]},e.then=function(r){var i=this;return new Promise(function(s){var o=Tr(r)?r:wz,a=function(){var c=i.then;i.then=null,Tr(o)&&(o=o(i))&&(o.then||o===i)&&(i.then=c),s(o),i.then=c};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?a():i._prom=a})},e.kill=function(){Ym(this)},n}();Ho(p_.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Yn,_prom:0,_ps:!1,_rts:1});var ns=function(n){fz(e,n);function e(r,i){var s;return r===void 0&&(r={}),s=n.call(this,r)||this,s.labels={},s.smoothChildTiming=!!r.smoothChildTiming,s.autoRemoveChildren=!!r.autoRemoveChildren,s._sort=Ms(r.sortChildren),mr&&Na(r.parent||mr,gl(s),i),r.reversed&&s.reverse(),r.paused&&s.paused(!0),r.scrollTrigger&&Cz(gl(s),r.scrollTrigger),s}var t=e.prototype;return t.to=function(i,s,o){return _g(0,arguments,this),this},t.from=function(i,s,o){return _g(1,arguments,this),this},t.fromTo=function(i,s,o,a){return _g(2,arguments,this),this},t.set=function(i,s,o){return s.duration=0,s.parent=this,gg(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Hr(i,s,Eo(this,o),1),this},t.call=function(i,s,o){return Na(this,Hr.delayedCall(0,i,s),o)},t.staggerTo=function(i,s,o,a,l,c,u){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=c,o.onCompleteParams=u,o.parent=this,new Hr(i,o,Eo(this,l)),this},t.staggerFrom=function(i,s,o,a,l,c,u){return o.runBackwards=1,gg(o).immediateRender=Ms(o.immediateRender),this.staggerTo(i,s,o,a,l,c,u)},t.staggerFromTo=function(i,s,o,a,l,c,u,f){return a.startAt=o,gg(a).immediateRender=Ms(a.immediateRender),this.staggerTo(i,s,a,l,c,u,f)},t.render=function(i,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,u=i<=0?0:li(i),f=this._zTime<0!=i<0&&(this._initted||!c),p,m,g,v,y,_,S,E,w,I,T,b;if(this!==mr&&u>l&&i>=0&&(u=l),u!==this._tTime||o||f){if(a!==this._time&&c&&(u+=this._time-a,i+=this._time-a),p=u,w=this._start,E=this._ts,_=!E,f&&(c||(a=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(T=this._yoyo,y=c+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(y*100+i,s,o);if(p=li(u%y),u===l?(v=this._repeat,p=c):(v=~~(u/y),v&&v===u/y&&(p=c,v--),p>c&&(p=c)),I=hp(this._tTime,y),!a&&this._tTime&&I!==v&&this._tTime-I*y-this._dur<=0&&(I=v),T&&v&1&&(p=c-p,b=1),v!==I&&!this._lock){var P=T&&I&1,C=P===(T&&v&1);if(v<I&&(P=!P),a=P?0:u%c?c:u,this._lock=1,this.render(a||(b?0:li(v*y)),s,!c)._lock=0,this._tTime=u,!s&&this.parent&&qs(this,"onRepeat"),this.vars.repeatRefresh&&!b&&(this.invalidate()._lock=1),a&&a!==this._time||_!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,C&&(this._lock=2,a=P?c:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!b&&this.invalidate()),this._lock=0,!this._ts&&!_)return this;Gz(this,b)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(S=Kee(this,li(a),li(p)),S&&(u-=p-(p=S._start))),this._tTime=u,this._time=p,this._act=!E,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,a=0),!a&&p&&!s&&!v&&(qs(this,"onStart"),this._tTime!==u))return this;if(p>=a&&i>=0)for(m=this._first;m;){if(g=m._next,(m._act||p>=m._start)&&m._ts&&S!==m){if(m.parent!==this)return this.render(i,s,o);if(m.render(m._ts>0?(p-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(p-m._start)*m._ts,s,o),p!==this._time||!this._ts&&!_){S=0,g&&(u+=this._zTime=-Yn);break}}m=g}else{m=this._last;for(var M=i<0?i:p;m;){if(g=m._prev,(m._act||M<=m._end)&&m._ts&&S!==m){if(m.parent!==this)return this.render(i,s,o);if(m.render(m._ts>0?(M-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(M-m._start)*m._ts,s,o||Fi&&(m._initted||m._startAt)),p!==this._time||!this._ts&&!_){S=0,g&&(u+=this._zTime=M?-Yn:Yn);break}}m=g}}if(S&&!s&&(this.pause(),S.render(p>=a?0:-Yn)._zTime=p>=a?1:-1,this._ts))return this._start=w,lE(this),this.render(i,s,o);this._onUpdate&&!s&&qs(this,"onUpdate",!0),(u===l&&this._tTime>=this.totalDuration()||!u&&a)&&(w===this._start||Math.abs(E)!==Math.abs(this._ts))&&(this._lock||((i||!c)&&(u===l&&this._ts>0||!u&&this._ts<0)&&eu(this,1),!s&&!(i<0&&!a)&&(u||a||!l)&&(qs(this,u===l&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(i,s){var o=this;if(Wl(s)||(s=Eo(this,s,i)),!(i instanceof p_)){if(Oi(i))return i.forEach(function(a){return o.add(a,s)}),this;if(fi(i))return this.addLabel(i,s);if(Tr(i))i=Hr.delayedCall(0,i);else return this}return this!==i?Na(this,i,s):this},t.getChildren=function(i,s,o,a){i===void 0&&(i=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-Po);for(var l=[],c=this._first;c;)c._start>=a&&(c instanceof Hr?s&&l.push(c):(o&&l.push(c),i&&l.push.apply(l,c.getChildren(!0,s,o)))),c=c._next;return l},t.getById=function(i){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===i)return s[o]},t.remove=function(i){return fi(i)?this.removeLabel(i):Tr(i)?this.killTweensOf(i):(aE(this,i),i===this._recent&&(this._recent=this._last),Sf(this))},t.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=li(Ys.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),n.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},t.addLabel=function(i,s){return this.labels[i]=Eo(this,s),this},t.removeLabel=function(i){return delete this.labels[i],this},t.addPause=function(i,s,o){var a=Hr.delayedCall(0,s||f_,o);return a.data="isPause",this._hasPause=1,Na(this,a,Eo(this,i))},t.removePause=function(i){var s=this._first;for(i=Eo(this,i);s;)s._start===i&&s.data==="isPause"&&eu(s),s=s._next},t.killTweensOf=function(i,s,o){for(var a=this.getTweensOf(i,o),l=a.length;l--;)bc!==a[l]&&a[l].kill(i,s);return this},t.getTweensOf=function(i,s){for(var o=[],a=Do(i),l=this._first,c=Wl(s),u;l;)l instanceof Hr?Gee(l._targets,a)&&(c?(!bc||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(u=l.getTweensOf(a,s)).length&&o.push.apply(o,u),l=l._next;return o},t.tweenTo=function(i,s){s=s||{};var o=this,a=Eo(o,i),l=s,c=l.startAt,u=l.onStart,f=l.onStartParams,p=l.immediateRender,m,g=Hr.to(o,Ho({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale())||Yn,onStart:function(){if(o.pause(),!m){var y=s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale());g._dur!==y&&pp(g,y,0,1).render(g._time,!0,!0),m=1}u&&u.apply(g,f||[])}},s));return p?g.render(0):g},t.tweenFromTo=function(i,s,o){return this.tweenTo(s,Ho({startAt:{time:Eo(this,i)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(i){return i===void 0&&(i=this._time),CN(this,Eo(this,i))},t.previousLabel=function(i){return i===void 0&&(i=this._time),CN(this,Eo(this,i),1)},t.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+Yn)},t.shiftChildren=function(i,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,c;a;)a._start>=o&&(a._start+=i,a._end+=i),a=a._next;if(s)for(c in l)l[c]>=o&&(l[c]+=i);return Sf(this)},t.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return n.prototype.invalidate.call(this,i)},t.clear=function(i){i===void 0&&(i=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),Sf(this)},t.totalDuration=function(i){var s=0,o=this,a=o._last,l=Po,c,u,f;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-i:i));if(o._dirty){for(f=o.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),u=a._start,u>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,Na(o,a,u-a._delay,1)._lock=0):l=u,u<0&&a._ts&&(s-=u,(!f&&!o._dp||f&&f.smoothChildTiming)&&(o._start+=u/o._ts,o._time-=u,o._tTime-=u),o.shiftChildren(-u,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=c;pp(o,o===mr&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(i){if(mr._ts&&(Ez(mr,PS(i,mr)),xz=Ys.frame),Ys.frame>=AN){AN+=to.autoSleep||120;var s=mr._first;if((!s||!s._ts)&&to.autoSleep&&Ys._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Ys.sleep()}}},e}(p_);Ho(ns.prototype,{_lock:0,_hasPause:0,_forcing:0});var fte=function(e,t,r,i,s,o,a){var l=new Cs(this._pt,e,t,0,1,$z,null,s),c=0,u=0,f,p,m,g,v,y,_,S;for(l.b=r,l.e=i,r+="",i+="",(_=~i.indexOf("random("))&&(i=d_(i)),o&&(S=[r,i],o(S,e,t),r=S[0],i=S[1]),p=r.match(Uw)||[];f=Uw.exec(i);)g=f[0],v=i.substring(c,f.index),m?m=(m+1)%5:v.substr(-5)==="rgba("&&(m=1),g!==p[u++]&&(y=parseFloat(p[u-1])||0,l._pt={_next:l._pt,p:v||u===1?v:",",s:y,c:g.charAt(1)==="="?Nh(y,g)-y:parseFloat(g)-y,m:m&&m<4?Math.round:0},c=Uw.lastIndex);return l.c=c<i.length?i.substring(c,i.length):"",l.fp=a,(mz.test(i)||_)&&(l.e=0),this._pt=l,l},II=function(e,t,r,i,s,o,a,l,c,u){Tr(i)&&(i=i(s||0,e,o));var f=e[t],p=r!=="get"?r:Tr(f)?c?e[t.indexOf("set")||!Tr(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():f,m=Tr(f)?c?gte:Jz:DI,g;if(fi(i)&&(~i.indexOf("random(")&&(i=d_(i)),i.charAt(1)==="="&&(g=Nh(p,i)+(ki(p)||0),(g||g===0)&&(i=g))),!u||p!==i||$C)return!isNaN(p*i)&&i!==""?(g=new Cs(this._pt,e,t,+p||0,i-(p||0),typeof f=="boolean"?vte:Kz,0,m),c&&(g.fp=c),a&&g.modifier(a,this,e),this._pt=g):(!f&&!(t in e)&&TI(t,i),fte.call(this,e,t,p,i,m,l||to.stringFilter,c))},dte=function(e,t,r,i,s){if(Tr(e)&&(e=vg(e,s,t,r,i)),!Ka(e)||e.style&&e.nodeType||Oi(e)||hz(e))return fi(e)?vg(e,s,t,r,i):e;var o={},a;for(a in e)o[a]=vg(e[a],s,t,r,i);return o},Xz=function(e,t,r,i,s,o){var a,l,c,u;if(Vs[e]&&(a=new Vs[e]).init(s,a.rawVars?t[e]:dte(t[e],i,s,o,r),r,i,o)!==!1&&(r._pt=l=new Cs(r._pt,s,e,0,1,a.render,a,0,a.priority),r!==yh))for(c=r._ptLookup[r._targets.indexOf(s)],u=a._props.length;u--;)c[a._props[u]]=l;return a},bc,$C,PI=function n(e,t,r){var i=e.vars,s=i.ease,o=i.startAt,a=i.immediateRender,l=i.lazy,c=i.onUpdate,u=i.runBackwards,f=i.yoyoEase,p=i.keyframes,m=i.autoRevert,g=e._dur,v=e._startAt,y=e._targets,_=e.parent,S=_&&_.data==="nested"?_.vars.targets:y,E=e._overwrite==="auto"&&!EI,w=e.timeline,I,T,b,P,C,M,L,U,X,$,Q,Y,te;if(w&&(!p||!s)&&(s="none"),e._ease=Ef(s,dp.ease),e._yEase=f?zz(Ef(f===!0?s:f,dp.ease)):0,f&&e._yoyo&&!e._repeat&&(f=e._yEase,e._yEase=e._ease,e._ease=f),e._from=!w&&!!i.runBackwards,!w||p&&!i.stagger){if(U=y[0]?xf(y[0]).harness:0,Y=U&&i[U.prop],I=IS(i,CI),v&&(v._zTime<0&&v.progress(1),t<0&&u&&a&&!m?v.render(-1,!0):v.revert(u&&g?Tx:Hee),v._lazy=0),o){if(eu(e._startAt=Hr.set(y,Ho({data:"isStart",overwrite:!1,parent:_,immediateRender:!0,lazy:!v&&Ms(l),startAt:null,delay:0,onUpdate:c&&function(){return qs(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Fi||!a&&!m)&&e._startAt.revert(Tx),a&&g&&t<=0&&r<=0){t&&(e._zTime=t);return}}else if(u&&g&&!v){if(t&&(a=!1),b=Ho({overwrite:!1,data:"isFromStart",lazy:a&&!v&&Ms(l),immediateRender:a,stagger:0,parent:_},I),Y&&(b[U.prop]=Y),eu(e._startAt=Hr.set(y,b)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Fi?e._startAt.revert(Tx):e._startAt.render(-1,!0)),e._zTime=t,!a)n(e._startAt,Yn,Yn);else if(!t)return}for(e._pt=e._ptCache=0,l=g&&Ms(l)||l&&!g,T=0;T<y.length;T++){if(C=y[T],L=C._gsap||RI(y)[T]._gsap,e._ptLookup[T]=$={},WC[L.id]&&Xc.length&&RS(),Q=S===y?T:S.indexOf(C),U&&(X=new U).init(C,Y||I,e,Q,S)!==!1&&(e._pt=P=new Cs(e._pt,C,X.name,0,1,X.render,X,0,X.priority),X._props.forEach(function(k){$[k]=P}),X.priority&&(M=1)),!U||Y)for(b in I)Vs[b]&&(X=Xz(b,I,e,Q,C,S))?X.priority&&(M=1):$[b]=P=II.call(e,C,b,"get",I[b],Q,S,0,i.stringFilter);e._op&&e._op[T]&&e.kill(C,e._op[T]),E&&e._pt&&(bc=e,mr.killTweensOf(C,$,e.globalTime(t)),te=!e.parent,bc=0),e._pt&&l&&(WC[L.id]=1)}M&&qz(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!te,p&&t<=0&&w.render(Po,!0,!0)},hte=function(e,t,r,i,s,o,a,l){var c=(e._pt&&e._ptCache||(e._ptCache={}))[t],u,f,p,m;if(!c)for(c=e._ptCache[t]=[],p=e._ptLookup,m=e._targets.length;m--;){if(u=p[m][t],u&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==t&&u.fp!==t;)u=u._next;if(!u)return $C=1,e.vars[t]="+=0",PI(e,a),$C=0,l?u_(t+" not eligible for reset"):1;c.push(u)}for(m=c.length;m--;)f=c[m],u=f._pt||f,u.s=(i||i===0)&&!s?i:u.s+(i||0)+o*u.c,u.c=r-u.s,f.e&&(f.e=Ir(r)+ki(f.e)),f.b&&(f.b=u.s+ki(f.b))},pte=function(e,t){var r=e[0]?xf(e[0]).harness:0,i=r&&r.aliases,s,o,a,l;if(!i)return t;s=Uf({},t);for(o in i)if(o in s)for(l=i[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},mte=function(e,t,r,i){var s=t.ease||i||"power1.inOut",o,a;if(Oi(t))a=r[e]||(r[e]=[]),t.forEach(function(l,c){return a.push({t:c/(t.length-1)*100,v:l,e:s})});else for(o in t)a=r[o]||(r[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:s})},vg=function(e,t,r,i,s){return Tr(e)?e.call(t,r,i,s):fi(e)&&~e.indexOf("random(")?d_(e):e},jz=bI+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Yz={};Ts(jz+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return Yz[n]=1});var Hr=function(n){fz(e,n);function e(r,i,s,o){var a;typeof i=="number"&&(s.duration=i,i=s,s=null),a=n.call(this,o?i:gg(i))||this;var l=a.vars,c=l.duration,u=l.delay,f=l.immediateRender,p=l.stagger,m=l.overwrite,g=l.keyframes,v=l.defaults,y=l.scrollTrigger,_=l.yoyoEase,S=i.parent||mr,E=(Oi(r)||hz(r)?Wl(r[0]):"length"in i)?[r]:Do(r),w,I,T,b,P,C,M,L;if(a._targets=E.length?RI(E):u_("GSAP target "+r+" not found. https://gsap.com",!to.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=m,g||p||Wv(c)||Wv(u)){if(i=a.vars,w=a.timeline=new ns({data:"nested",defaults:v||{},targets:S&&S.data==="nested"?S.vars.targets:E}),w.kill(),w.parent=w._dp=gl(a),w._start=0,p||Wv(c)||Wv(u)){if(b=E.length,M=p&&Pz(p),Ka(p))for(P in p)~jz.indexOf(P)&&(L||(L={}),L[P]=p[P]);for(I=0;I<b;I++)T=IS(i,Yz),T.stagger=0,_&&(T.yoyoEase=_),L&&Uf(T,L),C=E[I],T.duration=+vg(c,gl(a),I,C,E),T.delay=(+vg(u,gl(a),I,C,E)||0)-a._delay,!p&&b===1&&T.delay&&(a._delay=u=T.delay,a._start+=u,T.delay=0),w.to(C,T,M?M(I,C,E):0),w._ease=gn.none;w.duration()?c=u=0:a.timeline=0}else if(g){gg(Ho(w.vars.defaults,{ease:"none"})),w._ease=Ef(g.ease||i.ease||"none");var U=0,X,$,Q;if(Oi(g))g.forEach(function(Y){return w.to(E,Y,">")}),w.duration();else{T={};for(P in g)P==="ease"||P==="easeEach"||mte(P,g[P],T,g.easeEach);for(P in T)for(X=T[P].sort(function(Y,te){return Y.t-te.t}),U=0,I=0;I<X.length;I++)$=X[I],Q={ease:$.e,duration:($.t-(I?X[I-1].t:0))/100*c},Q[P]=$.v,w.to(E,Q,U),U+=Q.duration;w.duration()<c&&w.to({},{duration:c-w.duration()})}}c||a.duration(c=w.duration())}else a.timeline=0;return m===!0&&!EI&&(bc=gl(a),mr.killTweensOf(E),bc=0),Na(S,gl(a),s),i.reversed&&a.reverse(),i.paused&&a.paused(!0),(f||!c&&!g&&a._start===li(S._time)&&Ms(f)&&jee(gl(a))&&S.data!=="nested")&&(a._tTime=-Yn,a.render(Math.max(0,-u)||0)),y&&Cz(gl(a),y),a}var t=e.prototype;return t.render=function(i,s,o){var a=this._time,l=this._tDur,c=this._dur,u=i<0,f=i>l-Yn&&!u?l:i<Yn?0:i,p,m,g,v,y,_,S,E,w;if(!c)Jee(this,i,s,o);else if(f!==this._tTime||!i||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u){if(p=f,E=this.timeline,this._repeat){if(v=c+this._rDelay,this._repeat<-1&&u)return this.totalTime(v*100+i,s,o);if(p=li(f%v),f===l?(g=this._repeat,p=c):(g=~~(f/v),g&&g===li(f/v)&&(p=c,g--),p>c&&(p=c)),_=this._yoyo&&g&1,_&&(w=this._yEase,p=c-p),y=hp(this._tTime,v),p===a&&!o&&this._initted&&g===y)return this._tTime=f,this;g!==y&&(E&&this._yEase&&Gz(E,_),this.vars.repeatRefresh&&!_&&!this._lock&&this._time!==v&&this._initted&&(this._lock=o=1,this.render(li(v*g),!0).invalidate()._lock=0))}if(!this._initted){if(bz(this,u?i:p,o,s,f))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&g!==y))return this;if(c!==this._dur)return this.render(i,s,o)}if(this._tTime=f,this._time=p,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=S=(w||this._ease)(p/c),this._from&&(this.ratio=S=1-S),p&&!a&&!s&&!g&&(qs(this,"onStart"),this._tTime!==f))return this;for(m=this._pt;m;)m.r(S,m.d),m=m._next;E&&E.render(i<0?i:E._dur*E._ease(p/this._dur),s,o)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(u&&XC(this,i,s,o),qs(this,"onUpdate")),this._repeat&&g!==y&&this.vars.onRepeat&&!s&&this.parent&&qs(this,"onRepeat"),(f===this._tDur||!f)&&this._tTime===f&&(u&&!this._onUpdate&&XC(this,i,!0,!0),(i||!c)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&eu(this,1),!s&&!(u&&!a)&&(f||a||_)&&(qs(this,f===l?"onComplete":"onReverseComplete",!0),this._prom&&!(f<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),n.prototype.invalidate.call(this,i)},t.resetTo=function(i,s,o,a,l){h_||Ys.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),u;return this._initted||PI(this,c),u=this._ease(c/this._dur),hte(this,i,s,o,a,u,c,l)?this.resetTo(i,s,o,a,1):(cE(this,0),this.parent||Mz(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(i,s){if(s===void 0&&(s="all"),!i&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?Ym(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,bc&&bc.vars.overwrite!==!0)._first||Ym(this),this.parent&&o!==this.timeline.totalDuration()&&pp(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=i?Do(i):a,c=this._ptLookup,u=this._pt,f,p,m,g,v,y,_;if((!s||s==="all")&&Wee(a,l))return s==="all"&&(this._pt=0),Ym(this);for(f=this._op=this._op||[],s!=="all"&&(fi(s)&&(v={},Ts(s,function(S){return v[S]=1}),s=v),s=pte(a,s)),_=a.length;_--;)if(~l.indexOf(a[_])){p=c[_],s==="all"?(f[_]=s,g=p,m={}):(m=f[_]=f[_]||{},g=s);for(v in g)y=p&&p[v],y&&((!("kill"in y.d)||y.d.kill(v)===!0)&&aE(this,y,"_pt"),delete p[v]),m!=="all"&&(m[v]=1)}return this._initted&&!this._pt&&u&&Ym(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return _g(1,arguments)},e.delayedCall=function(i,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(i,s,o){return _g(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,o){return mr.killTweensOf(i,s,o)},e}(p_);Ho(Hr.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Ts("staggerTo,staggerFrom,staggerFromTo",function(n){Hr[n]=function(){var e=new ns,t=YC.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var DI=function(e,t,r){return e[t]=r},Jz=function(e,t,r){return e[t](r)},gte=function(e,t,r,i){return e[t](i.fp,r)},_te=function(e,t,r){return e.setAttribute(t,r)},BI=function(e,t){return Tr(e[t])?Jz:AI(e[t])&&e.setAttribute?_te:DI},Kz=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},vte=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},$z=function(e,t){var r=t._pt,i="";if(!e&&t.b)i=t.b;else if(e===1&&t.e)i=t.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*e):Math.round((r.s+r.c*e)*1e4)/1e4)+i,r=r._next;i+=t.c}t.set(t.t,t.p,i,t)},LI=function(e,t){for(var r=t._pt;r;)r.r(e,r.d),r=r._next},yte=function(e,t,r,i){for(var s=this._pt,o;s;)o=s._next,s.p===i&&s.modifier(e,t,r),s=o},xte=function(e){for(var t=this._pt,r,i;t;)i=t._next,t.p===e&&!t.op||t.op===e?aE(this,t,"_pt"):t.dep||(r=1),t=i;return!r},Ste=function(e,t,r,i){i.mSet(e,t,i.m.call(i.tween,r,i.mt),i)},qz=function(e){for(var t=e._pt,r,i,s,o;t;){for(r=t._next,i=s;i&&i.pr>t.pr;)i=i._next;(t._prev=i?i._prev:o)?t._prev._next=t:s=t,(t._next=i)?i._prev=t:o=t,t=r}e._pt=s},Cs=function(){function n(t,r,i,s,o,a,l,c,u){this.t=r,this.s=s,this.c=o,this.p=i,this.r=a||Kz,this.d=l||this,this.set=c||DI,this.pr=u||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(r,i,s){this.mSet=this.mSet||this.set,this.set=Ste,this.m=r,this.mt=s,this.tween=i},n}();Ts(bI+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return CI[n]=1});io.TweenMax=io.TweenLite=Hr;io.TimelineLite=io.TimelineMax=ns;mr=new ns({sortChildren:!1,defaults:dp,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});to.stringFilter=Hz;var Af=[],bx={},Ete=[],RN=0,Ate=0,Ww=function(e){return(bx[e]||Ete).map(function(t){return t()})},qC=function(){var e=Date.now(),t=[];e-RN>2&&(Ww("matchMediaInit"),Af.forEach(function(r){var i=r.queries,s=r.conditions,o,a,l,c;for(a in i)o=Ia.matchMedia(i[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,c=1);c&&(r.revert(),l&&t.push(r))}),Ww("matchMediaRevert"),t.forEach(function(r){return r.onMatch(r,function(i){return r.add(null,i)})}),RN=e,Ww("matchMedia"))},Qz=function(){function n(t,r){this.selector=r&&JC(r),this.data=[],this._r=[],this.isReverted=!1,this.id=Ate++,t&&this.add(t)}var e=n.prototype;return e.add=function(r,i,s){Tr(r)&&(s=i,i=r,r=Tr);var o=this,a=function(){var c=sr,u=o.selector,f;return c&&c!==o&&c.data.push(o),s&&(o.selector=JC(s)),sr=o,f=i.apply(o,arguments),Tr(f)&&o._r.push(f),sr=c,o.selector=u,o.isReverted=!1,f};return o.last=a,r===Tr?a(o,function(l){return o.add(null,l)}):r?o[r]=a:a},e.ignore=function(r){var i=sr;sr=null,r(this),sr=i},e.getTweens=function(){var r=[];return this.data.forEach(function(i){return i instanceof n?r.push.apply(r,i.getTweens()):i instanceof Hr&&!(i.parent&&i.parent.data==="nested")&&r.push(i)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,i){var s=this;if(r?function(){for(var a=s.getTweens(),l=s.data.length,c;l--;)c=s.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(u){return a.splice(a.indexOf(u),1)}));for(a.map(function(u){return{g:u._dur||u._delay||u._sat&&!u._sat.vars.immediateRender?u.globalTime(0):-1/0,t:u}}).sort(function(u,f){return f.g-u.g||-1/0}).forEach(function(u){return u.t.revert(r)}),l=s.data.length;l--;)c=s.data[l],c instanceof ns?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof Hr)&&c.revert&&c.revert(r);s._r.forEach(function(u){return u(r,s)}),s.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),i)for(var o=Af.length;o--;)Af[o].id===this.id&&Af.splice(o,1)},e.revert=function(r){this.kill(r||{})},n}(),wte=function(){function n(t){this.contexts=[],this.scope=t,sr&&sr.data.push(this)}var e=n.prototype;return e.add=function(r,i,s){Ka(r)||(r={matches:r});var o=new Qz(0,s||this.scope),a=o.conditions={},l,c,u;sr&&!o.selector&&(o.selector=sr.selector),this.contexts.push(o),i=o.add("onMatch",i),o.queries=r;for(c in r)c==="all"?u=1:(l=Ia.matchMedia(r[c]),l&&(Af.indexOf(o)<0&&Af.push(o),(a[c]=l.matches)&&(u=1),l.addListener?l.addListener(qC):l.addEventListener("change",qC)));return u&&i(o,function(f){return o.add(null,f)}),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(i){return i.kill(r,!0)})},n}(),DS={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(function(i){return Fz(i)})},timeline:function(e){return new ns(e)},getTweensOf:function(e,t){return mr.getTweensOf(e,t)},getProperty:function(e,t,r,i){fi(e)&&(e=Do(e)[0]);var s=xf(e||{}).get,o=r?wz:Az;return r==="native"&&(r=""),e&&(t?o((Vs[t]&&Vs[t].get||s)(e,t,r,i)):function(a,l,c){return o((Vs[a]&&Vs[a].get||s)(e,a,l,c))})},quickSetter:function(e,t,r){if(e=Do(e),e.length>1){var i=e.map(function(u){return Rs.quickSetter(u,t,r)}),s=i.length;return function(u){for(var f=s;f--;)i[f](u)}}e=e[0]||{};var o=Vs[t],a=xf(e),l=a.harness&&(a.harness.aliases||{})[t]||t,c=o?function(u){var f=new o;yh._pt=0,f.init(e,r?u+r:u,yh,0,[e]),f.render(1,f),yh._pt&&LI(1,yh)}:a.set(e,l);return o?c:function(u){return c(e,l,r?u+r:u,a,1)}},quickTo:function(e,t,r){var i,s=Rs.to(e,Uf((i={},i[t]="+=0.1",i.paused=!0,i),r||{})),o=function(l,c,u){return s.resetTo(t,l,c,u)};return o.tween=s,o},isTweening:function(e){return mr.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Ef(e.ease,dp.ease)),wN(dp,e||{})},config:function(e){return wN(to,e||{})},registerEffect:function(e){var t=e.name,r=e.effect,i=e.plugins,s=e.defaults,o=e.extendTimeline;(i||"").split(",").forEach(function(a){return a&&!Vs[a]&&!io[a]&&u_(t+" effect requires "+a+" plugin.")}),Hw[t]=function(a,l,c){return r(Do(a),Ho(l||{},s),c)},o&&(ns.prototype[t]=function(a,l,c){return this.add(Hw[t](a,Ka(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){gn[e]=Ef(t)},parseEase:function(e,t){return arguments.length?Ef(e,t):gn},getById:function(e){return mr.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var r=new ns(e),i,s;for(r.smoothChildTiming=Ms(e.smoothChildTiming),mr.remove(r),r._dp=0,r._time=r._tTime=mr._time,i=mr._first;i;)s=i._next,(t||!(!i._dur&&i instanceof Hr&&i.vars.onComplete===i._targets[0]))&&Na(r,i,i._start-i._delay),i=s;return Na(mr,r,0),r},context:function(e,t){return e?new Qz(e,t):sr},matchMedia:function(e){return new wte(e)},matchMediaRefresh:function(){return Af.forEach(function(e){var t=e.conditions,r,i;for(i in t)t[i]&&(t[i]=!1,r=1);r&&e.revert()})||qC()},addEventListener:function(e,t){var r=bx[e]||(bx[e]=[]);~r.indexOf(t)||r.push(t)},removeEventListener:function(e,t){var r=bx[e],i=r&&r.indexOf(t);i>=0&&r.splice(i,1)},utils:{wrap:nte,wrapYoyo:rte,distribute:Pz,random:Bz,snap:Dz,normalize:tte,getUnit:ki,clamp:qee,splitColor:Oz,toArray:Do,selector:JC,mapRange:Nz,pipe:Zee,unitize:ete,interpolate:ite,shuffle:Iz},install:vz,effects:Hw,ticker:Ys,updateRoot:ns.updateRoot,plugins:Vs,globalTimeline:mr,core:{PropTween:Cs,globals:yz,Tween:Hr,Timeline:ns,Animation:p_,getCache:xf,_removeLinkedListItem:aE,reverting:function(){return Fi},context:function(e){return e&&sr&&(sr.data.push(e),e._ctx=sr),sr},suppressOverwrites:function(e){return EI=e}}};Ts("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return DS[n]=Hr[n]});Ys.add(ns.updateRoot);yh=DS.to({},{duration:0});var Mte=function(e,t){for(var r=e._pt;r&&r.p!==t&&r.op!==t&&r.fp!==t;)r=r._next;return r},Tte=function(e,t){var r=e._targets,i,s,o;for(i in t)for(s=r.length;s--;)o=e._ptLookup[s][i],o&&(o=o.d)&&(o._pt&&(o=Mte(o,i)),o&&o.modifier&&o.modifier(t[i],e,r[s],i))},Xw=function(e,t){return{name:e,rawVars:1,init:function(i,s,o){o._onInit=function(a){var l,c;if(fi(s)&&(l={},Ts(s,function(u){return l[u]=1}),s=l),t){l={};for(c in s)l[c]=t(s[c]);s=l}Tte(a,s)}}}},Rs=DS.registerPlugin({name:"attr",init:function(e,t,r,i,s){var o,a,l;this.tween=r;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],i,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var r=t._pt;r;)Fi?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",init:function(e,t){for(var r=t.length;r--;)this.add(e,r,e[r]||0,t[r],0,0,0,0,0,1)}},Xw("roundProps",KC),Xw("modifiers"),Xw("snap",Dz))||DS;Hr.version=ns.version=Rs.version="3.12.5";_z=1;wI()&&mp();gn.Power0;gn.Power1;gn.Power2;gn.Power3;gn.Power4;gn.Linear;gn.Quad;gn.Cubic;gn.Quart;gn.Quint;gn.Strong;gn.Elastic;gn.Back;gn.SteppedEase;gn.Bounce;gn.Sine;gn.Expo;gn.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var IN,Rc,kh,NI,sf,PN,kI,Cte=function(){return typeof window<"u"},Xl={},Wu=180/Math.PI,Fh=Math.PI/180,Td=Math.atan2,DN=1e8,FI=/([A-Z])/g,bte=/(left|right|width|margin|padding|x)/i,Rte=/[\s,\(]\S/,Ua={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},QC=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Ite=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Pte=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},Dte=function(e,t){var r=t.s+t.c*e;t.set(t.t,t.p,~~(r+(r<0?-.5:.5))+t.u,t)},Zz=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},eG=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},Bte=function(e,t,r){return e.style[t]=r},Lte=function(e,t,r){return e.style.setProperty(t,r)},Nte=function(e,t,r){return e._gsap[t]=r},kte=function(e,t,r){return e._gsap.scaleX=e._gsap.scaleY=r},Fte=function(e,t,r,i,s){var o=e._gsap;o.scaleX=o.scaleY=r,o.renderTransform(s,o)},Ote=function(e,t,r,i,s){var o=e._gsap;o[t]=r,o.renderTransform(s,o)},gr="transform",bs=gr+"Origin",Ute=function n(e,t){var r=this,i=this.target,s=i.style,o=i._gsap;if(e in Xl&&s){if(this.tfm=this.tfm||{},e!=="transform")e=Ua[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return r.tfm[a]=xl(i,a)}):this.tfm[e]=o.x?o[e]:xl(i,e),e===bs&&(this.tfm.zOrigin=o.zOrigin);else return Ua.transform.split(",").forEach(function(a){return n.call(r,a,t)});if(this.props.indexOf(gr)>=0)return;o.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(bs,t,"")),e=gr}(s||t)&&this.props.push(e,t,s[e])},tG=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},Hte=function(){var e=this.props,t=this.target,r=t.style,i=t._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?t[e[s]]=e[s+2]:e[s+2]?r[e[s]]=e[s+2]:r.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(FI,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)i[o]=this.tfm[o];i.svg&&(i.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=kI(),(!s||!s.isStart)&&!r[gr]&&(tG(r),i.zOrigin&&r[bs]&&(r[bs]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},nG=function(e,t){var r={target:e,props:[],revert:Hte,save:Ute};return e._gsap||Rs.core.getCache(e),t&&t.split(",").forEach(function(i){return r.save(i)}),r},rG,ZC=function(e,t){var r=Rc.createElementNS?Rc.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Rc.createElement(e);return r&&r.style?r:Rc.createElement(e)},Wa=function n(e,t,r){var i=getComputedStyle(e);return i[t]||i.getPropertyValue(t.replace(FI,"-$1").toLowerCase())||i.getPropertyValue(t)||!r&&n(e,gp(t)||t,1)||""},BN="O,Moz,ms,Ms,Webkit".split(","),gp=function(e,t,r){var i=t||sf,s=i.style,o=5;if(e in s&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(BN[o]+e in s););return o<0?null:(o===3?"ms":o>=0?BN[o]:"")+e},eb=function(){Cte()&&window.document&&(IN=window,Rc=IN.document,kh=Rc.documentElement,sf=ZC("div")||{style:{}},ZC("div"),gr=gp(gr),bs=gr+"Origin",sf.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",rG=!!gp("perspective"),kI=Rs.core.reverting,NI=1)},jw=function n(e){var t=ZC("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,i=this.nextSibling,s=this.style.cssText,o;if(kh.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(o=this._gsapBBox());return r&&(i?r.insertBefore(this,i):r.appendChild(this)),kh.removeChild(t),this.style.cssText=s,o},LN=function(e,t){for(var r=t.length;r--;)if(e.hasAttribute(t[r]))return e.getAttribute(t[r])},iG=function(e){var t;try{t=e.getBBox()}catch{t=jw.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===jw||(t=jw.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+LN(e,["x","cx","x1"])||0,y:+LN(e,["y","cy","y1"])||0,width:0,height:0}:t},sG=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&iG(e))},Hf=function(e,t){if(t){var r=e.style,i;t in Xl&&t!==bs&&(t=gr),r.removeProperty?(i=t.substr(0,2),(i==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),r.removeProperty(i==="--"?t:t.replace(FI,"-$1").toLowerCase())):r.removeAttribute(t)}},Ic=function(e,t,r,i,s,o){var a=new Cs(e._pt,t,r,0,1,o?eG:Zz);return e._pt=a,a.b=i,a.e=s,e._props.push(r),a},NN={deg:1,rad:1,turn:1},zte={grid:1,flex:1},tu=function n(e,t,r,i){var s=parseFloat(r)||0,o=(r+"").trim().substr((s+"").length)||"px",a=sf.style,l=bte.test(t),c=e.tagName.toLowerCase()==="svg",u=(c?"client":"offset")+(l?"Width":"Height"),f=100,p=i==="px",m=i==="%",g,v,y,_;if(i===o||!s||NN[i]||NN[o])return s;if(o!=="px"&&!p&&(s=n(e,t,r,"px")),_=e.getCTM&&sG(e),(m||o==="%")&&(Xl[t]||~t.indexOf("adius")))return g=_?e.getBBox()[l?"width":"height"]:e[u],Ir(m?s/g*f:s/100*g);if(a[l?"width":"height"]=f+(p?o:i),v=~t.indexOf("adius")||i==="em"&&e.appendChild&&!c?e:e.parentNode,_&&(v=(e.ownerSVGElement||{}).parentNode),(!v||v===Rc||!v.appendChild)&&(v=Rc.body),y=v._gsap,y&&m&&y.width&&l&&y.time===Ys.time&&!y.uncache)return Ir(s/y.width*f);if(m&&(t==="height"||t==="width")){var S=e.style[t];e.style[t]=f+i,g=e[u],S?e.style[t]=S:Hf(e,t)}else(m||o==="%")&&!zte[Wa(v,"display")]&&(a.position=Wa(e,"position")),v===e&&(a.position="static"),v.appendChild(sf),g=sf[u],v.removeChild(sf),a.position="absolute";return l&&m&&(y=xf(v),y.time=Ys.time,y.width=v[u]),Ir(p?g*s/f:g&&s?f/g*s:0)},xl=function(e,t,r,i){var s;return NI||eb(),t in Ua&&t!=="transform"&&(t=Ua[t],~t.indexOf(",")&&(t=t.split(",")[0])),Xl[t]&&t!=="transform"?(s=g_(e,i),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:LS(Wa(e,bs))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||i||~(s+"").indexOf("calc("))&&(s=BS[t]&&BS[t](e,t,r)||Wa(e,t)||Sz(e,t)||(t==="opacity"?1:0))),r&&!~(s+"").trim().indexOf(" ")?tu(e,t,s,r)+r:s},Gte=function(e,t,r,i){if(!r||r==="none"){var s=gp(t,e,1),o=s&&Wa(e,s,1);o&&o!==r?(t=s,r=o):t==="borderColor"&&(r=Wa(e,"borderTopColor"))}var a=new Cs(this._pt,e.style,t,0,1,$z),l=0,c=0,u,f,p,m,g,v,y,_,S,E,w,I;if(a.b=r,a.e=i,r+="",i+="",i==="auto"&&(v=e.style[t],e.style[t]=i,i=Wa(e,t)||i,v?e.style[t]=v:Hf(e,t)),u=[r,i],Hz(u),r=u[0],i=u[1],p=r.match(vh)||[],I=i.match(vh)||[],I.length){for(;f=vh.exec(i);)y=f[0],S=i.substring(l,f.index),g?g=(g+1)%5:(S.substr(-5)==="rgba("||S.substr(-5)==="hsla(")&&(g=1),y!==(v=p[c++]||"")&&(m=parseFloat(v)||0,w=v.substr((m+"").length),y.charAt(1)==="="&&(y=Nh(m,y)+w),_=parseFloat(y),E=y.substr((_+"").length),l=vh.lastIndex-E.length,E||(E=E||to.units[t]||w,l===i.length&&(i+=E,a.e+=E)),w!==E&&(m=tu(e,t,v,E)||0),a._pt={_next:a._pt,p:S||c===1?S:",",s:m,c:_-m,m:g&&g<4||t==="zIndex"?Math.round:0});a.c=l<i.length?i.substring(l,i.length):""}else a.r=t==="display"&&i==="none"?eG:Zz;return mz.test(i)&&(a.e=0),this._pt=a,a},kN={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Vte=function(e){var t=e.split(" "),r=t[0],i=t[1]||"50%";return(r==="top"||r==="bottom"||i==="left"||i==="right")&&(e=r,r=i,i=e),t[0]=kN[r]||r,t[1]=kN[i]||i,t.join(" ")},Wte=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var r=t.t,i=r.style,s=t.u,o=r._gsap,a,l,c;if(s==="all"||s===!0)i.cssText="",l=1;else for(s=s.split(","),c=s.length;--c>-1;)a=s[c],Xl[a]&&(l=1,a=a==="transformOrigin"?bs:gr),Hf(r,a);l&&(Hf(r,gr),o&&(o.svg&&r.removeAttribute("transform"),g_(r,1),o.uncache=1,tG(i)))}},BS={clearProps:function(e,t,r,i,s){if(s.data!=="isFromStart"){var o=e._pt=new Cs(e._pt,t,r,0,0,Wte);return o.u=i,o.pr=-10,o.tween=s,e._props.push(r),1}}},m_=[1,0,0,1,0,0],oG={},aG=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},FN=function(e){var t=Wa(e,gr);return aG(t)?m_:t.substr(7).match(pz).map(Ir)},OI=function(e,t){var r=e._gsap||xf(e),i=e.style,s=FN(e),o,a,l,c;return r.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?m_:s):(s===m_&&!e.offsetParent&&e!==kh&&!r.svg&&(l=i.display,i.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(c=1,a=e.nextElementSibling,kh.appendChild(e)),s=FN(e),l?i.display=l:Hf(e,"display"),c&&(a?o.insertBefore(e,a):o?o.appendChild(e):kh.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},tb=function(e,t,r,i,s,o){var a=e._gsap,l=s||OI(e,!0),c=a.xOrigin||0,u=a.yOrigin||0,f=a.xOffset||0,p=a.yOffset||0,m=l[0],g=l[1],v=l[2],y=l[3],_=l[4],S=l[5],E=t.split(" "),w=parseFloat(E[0])||0,I=parseFloat(E[1])||0,T,b,P,C;r?l!==m_&&(b=m*y-g*v)&&(P=w*(y/b)+I*(-v/b)+(v*S-y*_)/b,C=w*(-g/b)+I*(m/b)-(m*S-g*_)/b,w=P,I=C):(T=iG(e),w=T.x+(~E[0].indexOf("%")?w/100*T.width:w),I=T.y+(~(E[1]||E[0]).indexOf("%")?I/100*T.height:I)),i||i!==!1&&a.smooth?(_=w-c,S=I-u,a.xOffset=f+(_*m+S*v)-_,a.yOffset=p+(_*g+S*y)-S):a.xOffset=a.yOffset=0,a.xOrigin=w,a.yOrigin=I,a.smooth=!!i,a.origin=t,a.originIsAbsolute=!!r,e.style[bs]="0px 0px",o&&(Ic(o,a,"xOrigin",c,w),Ic(o,a,"yOrigin",u,I),Ic(o,a,"xOffset",f,a.xOffset),Ic(o,a,"yOffset",p,a.yOffset)),e.setAttribute("data-svg-origin",w+" "+I)},g_=function(e,t){var r=e._gsap||new Wz(e);if("x"in r&&!t&&!r.uncache)return r;var i=e.style,s=r.scaleX<0,o="px",a="deg",l=getComputedStyle(e),c=Wa(e,bs)||"0",u,f,p,m,g,v,y,_,S,E,w,I,T,b,P,C,M,L,U,X,$,Q,Y,te,k,K,F,ie,me,Ne,ce,xe;return u=f=p=v=y=_=S=E=w=0,m=g=1,r.svg=!!(e.getCTM&&sG(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(i[gr]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[gr]!=="none"?l[gr]:"")),i.scale=i.rotate=i.translate="none"),b=OI(e,r.svg),r.svg&&(r.uncache?(k=e.getBBox(),c=r.xOrigin-k.x+"px "+(r.yOrigin-k.y)+"px",te=""):te=!t&&e.getAttribute("data-svg-origin"),tb(e,te||c,!!te||r.originIsAbsolute,r.smooth!==!1,b)),I=r.xOrigin||0,T=r.yOrigin||0,b!==m_&&(L=b[0],U=b[1],X=b[2],$=b[3],u=Q=b[4],f=Y=b[5],b.length===6?(m=Math.sqrt(L*L+U*U),g=Math.sqrt($*$+X*X),v=L||U?Td(U,L)*Wu:0,S=X||$?Td(X,$)*Wu+v:0,S&&(g*=Math.abs(Math.cos(S*Fh))),r.svg&&(u-=I-(I*L+T*X),f-=T-(I*U+T*$))):(xe=b[6],Ne=b[7],F=b[8],ie=b[9],me=b[10],ce=b[11],u=b[12],f=b[13],p=b[14],P=Td(xe,me),y=P*Wu,P&&(C=Math.cos(-P),M=Math.sin(-P),te=Q*C+F*M,k=Y*C+ie*M,K=xe*C+me*M,F=Q*-M+F*C,ie=Y*-M+ie*C,me=xe*-M+me*C,ce=Ne*-M+ce*C,Q=te,Y=k,xe=K),P=Td(-X,me),_=P*Wu,P&&(C=Math.cos(-P),M=Math.sin(-P),te=L*C-F*M,k=U*C-ie*M,K=X*C-me*M,ce=$*M+ce*C,L=te,U=k,X=K),P=Td(U,L),v=P*Wu,P&&(C=Math.cos(P),M=Math.sin(P),te=L*C+U*M,k=Q*C+Y*M,U=U*C-L*M,Y=Y*C-Q*M,L=te,Q=k),y&&Math.abs(y)+Math.abs(v)>359.9&&(y=v=0,_=180-_),m=Ir(Math.sqrt(L*L+U*U+X*X)),g=Ir(Math.sqrt(Y*Y+xe*xe)),P=Td(Q,Y),S=Math.abs(P)>2e-4?P*Wu:0,w=ce?1/(ce<0?-ce:ce):0),r.svg&&(te=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!aG(Wa(e,gr)),te&&e.setAttribute("transform",te))),Math.abs(S)>90&&Math.abs(S)<270&&(s?(m*=-1,S+=v<=0?180:-180,v+=v<=0?180:-180):(g*=-1,S+=S<=0?180:-180)),t=t||r.uncache,r.x=u-((r.xPercent=u&&(!t&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+o,r.y=f-((r.yPercent=f&&(!t&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-f)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+o,r.z=p+o,r.scaleX=Ir(m),r.scaleY=Ir(g),r.rotation=Ir(v)+a,r.rotationX=Ir(y)+a,r.rotationY=Ir(_)+a,r.skewX=S+a,r.skewY=E+a,r.transformPerspective=w+o,(r.zOrigin=parseFloat(c.split(" ")[2])||!t&&r.zOrigin||0)&&(i[bs]=LS(c)),r.xOffset=r.yOffset=0,r.force3D=to.force3D,r.renderTransform=r.svg?jte:rG?lG:Xte,r.uncache=0,r},LS=function(e){return(e=e.split(" "))[0]+" "+e[1]},Yw=function(e,t,r){var i=ki(t);return Ir(parseFloat(t)+parseFloat(tu(e,"x",r+"px",i)))+i},Xte=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,lG(e,t)},Cu="0deg",xm="0px",bu=") ",lG=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,l=r.z,c=r.rotation,u=r.rotationY,f=r.rotationX,p=r.skewX,m=r.skewY,g=r.scaleX,v=r.scaleY,y=r.transformPerspective,_=r.force3D,S=r.target,E=r.zOrigin,w="",I=_==="auto"&&e&&e!==1||_===!0;if(E&&(f!==Cu||u!==Cu)){var T=parseFloat(u)*Fh,b=Math.sin(T),P=Math.cos(T),C;T=parseFloat(f)*Fh,C=Math.cos(T),o=Yw(S,o,b*C*-E),a=Yw(S,a,-Math.sin(T)*-E),l=Yw(S,l,P*C*-E+E)}y!==xm&&(w+="perspective("+y+bu),(i||s)&&(w+="translate("+i+"%, "+s+"%) "),(I||o!==xm||a!==xm||l!==xm)&&(w+=l!==xm||I?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+bu),c!==Cu&&(w+="rotate("+c+bu),u!==Cu&&(w+="rotateY("+u+bu),f!==Cu&&(w+="rotateX("+f+bu),(p!==Cu||m!==Cu)&&(w+="skew("+p+", "+m+bu),(g!==1||v!==1)&&(w+="scale("+g+", "+v+bu),S.style[gr]=w||"translate(0, 0)"},jte=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,l=r.rotation,c=r.skewX,u=r.skewY,f=r.scaleX,p=r.scaleY,m=r.target,g=r.xOrigin,v=r.yOrigin,y=r.xOffset,_=r.yOffset,S=r.forceCSS,E=parseFloat(o),w=parseFloat(a),I,T,b,P,C;l=parseFloat(l),c=parseFloat(c),u=parseFloat(u),u&&(u=parseFloat(u),c+=u,l+=u),l||c?(l*=Fh,c*=Fh,I=Math.cos(l)*f,T=Math.sin(l)*f,b=Math.sin(l-c)*-p,P=Math.cos(l-c)*p,c&&(u*=Fh,C=Math.tan(c-u),C=Math.sqrt(1+C*C),b*=C,P*=C,u&&(C=Math.tan(u),C=Math.sqrt(1+C*C),I*=C,T*=C)),I=Ir(I),T=Ir(T),b=Ir(b),P=Ir(P)):(I=f,P=p,T=b=0),(E&&!~(o+"").indexOf("px")||w&&!~(a+"").indexOf("px"))&&(E=tu(m,"x",o,"px"),w=tu(m,"y",a,"px")),(g||v||y||_)&&(E=Ir(E+g-(g*I+v*b)+y),w=Ir(w+v-(g*T+v*P)+_)),(i||s)&&(C=m.getBBox(),E=Ir(E+i/100*C.width),w=Ir(w+s/100*C.height)),C="matrix("+I+","+T+","+b+","+P+","+E+","+w+")",m.setAttribute("transform",C),S&&(m.style[gr]=C)},Yte=function(e,t,r,i,s){var o=360,a=fi(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?Wu:1),c=l-i,u=i+c+"deg",f,p;return a&&(f=s.split("_")[1],f==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-o)),f==="cw"&&c<0?c=(c+o*DN)%o-~~(c/o)*o:f==="ccw"&&c>0&&(c=(c-o*DN)%o-~~(c/o)*o)),e._pt=p=new Cs(e._pt,t,r,i,c,Ite),p.e=u,p.u="deg",e._props.push(r),p},ON=function(e,t){for(var r in t)e[r]=t[r];return e},Jte=function(e,t,r){var i=ON({},r._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=r.style,a,l,c,u,f,p,m,g;i.svg?(c=r.getAttribute("transform"),r.setAttribute("transform",""),o[gr]=t,a=g_(r,1),Hf(r,gr),r.setAttribute("transform",c)):(c=getComputedStyle(r)[gr],o[gr]=t,a=g_(r,1),o[gr]=c);for(l in Xl)c=i[l],u=a[l],c!==u&&s.indexOf(l)<0&&(m=ki(c),g=ki(u),f=m!==g?tu(r,l,c,g):parseFloat(c),p=parseFloat(u),e._pt=new Cs(e._pt,a,l,f,p-f,QC),e._pt.u=g||0,e._props.push(l));ON(a,i)};Ts("padding,margin,Width,Radius",function(n,e){var t="Top",r="Right",i="Bottom",s="Left",o=(e<3?[t,r,i,s]:[t+s,t+r,i+r,i+s]).map(function(a){return e<2?n+a:"border"+a+n});BS[e>1?"border"+n:n]=function(a,l,c,u,f){var p,m;if(arguments.length<4)return p=o.map(function(g){return xl(a,g,c)}),m=p.join(" "),m.split(p[0]).length===5?p[0]:m;p=(u+"").split(" "),m={},o.forEach(function(g,v){return m[g]=p[v]=p[v]||p[(v-1)/2|0]}),a.init(l,m,f)}});var cG={name:"css",register:eb,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,r,i,s){var o=this._props,a=e.style,l=r.vars.startAt,c,u,f,p,m,g,v,y,_,S,E,w,I,T,b,P;NI||eb(),this.styles=this.styles||nG(e),P=this.styles.props,this.tween=r;for(v in t)if(v!=="autoRound"&&(u=t[v],!(Vs[v]&&Xz(v,t,r,i,e,s)))){if(m=typeof u,g=BS[v],m==="function"&&(u=u.call(r,i,e,s),m=typeof u),m==="string"&&~u.indexOf("random(")&&(u=d_(u)),g)g(this,e,v,u,r)&&(b=1);else if(v.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(v)+"").trim(),u+="",jc.lastIndex=0,jc.test(c)||(y=ki(c),_=ki(u)),_?y!==_&&(c=tu(e,v,c,_)+_):y&&(u+=y),this.add(a,"setProperty",c,u,i,s,0,0,v),o.push(v),P.push(v,0,a[v]);else if(m!=="undefined"){if(l&&v in l?(c=typeof l[v]=="function"?l[v].call(r,i,e,s):l[v],fi(c)&&~c.indexOf("random(")&&(c=d_(c)),ki(c+"")||c==="auto"||(c+=to.units[v]||ki(xl(e,v))||""),(c+"").charAt(1)==="="&&(c=xl(e,v))):c=xl(e,v),p=parseFloat(c),S=m==="string"&&u.charAt(1)==="="&&u.substr(0,2),S&&(u=u.substr(2)),f=parseFloat(u),v in Ua&&(v==="autoAlpha"&&(p===1&&xl(e,"visibility")==="hidden"&&f&&(p=0),P.push("visibility",0,a.visibility),Ic(this,a,"visibility",p?"inherit":"hidden",f?"inherit":"hidden",!f)),v!=="scale"&&v!=="transform"&&(v=Ua[v],~v.indexOf(",")&&(v=v.split(",")[0]))),E=v in Xl,E){if(this.styles.save(v),w||(I=e._gsap,I.renderTransform&&!t.parseTransform||g_(e,t.parseTransform),T=t.smoothOrigin!==!1&&I.smooth,w=this._pt=new Cs(this._pt,a,gr,0,1,I.renderTransform,I,0,-1),w.dep=1),v==="scale")this._pt=new Cs(this._pt,I,"scaleY",I.scaleY,(S?Nh(I.scaleY,S+f):f)-I.scaleY||0,QC),this._pt.u=0,o.push("scaleY",v),v+="X";else if(v==="transformOrigin"){P.push(bs,0,a[bs]),u=Vte(u),I.svg?tb(e,u,0,T,0,this):(_=parseFloat(u.split(" ")[2])||0,_!==I.zOrigin&&Ic(this,I,"zOrigin",I.zOrigin,_),Ic(this,a,v,LS(c),LS(u)));continue}else if(v==="svgOrigin"){tb(e,u,1,T,0,this);continue}else if(v in oG){Yte(this,I,v,p,S?Nh(p,S+u):u);continue}else if(v==="smoothOrigin"){Ic(this,I,"smooth",I.smooth,u);continue}else if(v==="force3D"){I[v]=u;continue}else if(v==="transform"){Jte(this,u,e);continue}}else v in a||(v=gp(v)||v);if(E||(f||f===0)&&(p||p===0)&&!Rte.test(u)&&v in a)y=(c+"").substr((p+"").length),f||(f=0),_=ki(u)||(v in to.units?to.units[v]:y),y!==_&&(p=tu(e,v,c,_)),this._pt=new Cs(this._pt,E?I:a,v,p,(S?Nh(p,S+f):f)-p,!E&&(_==="px"||v==="zIndex")&&t.autoRound!==!1?Dte:QC),this._pt.u=_||0,y!==_&&_!=="%"&&(this._pt.b=c,this._pt.r=Pte);else if(v in a)Gte.call(this,e,v,c,S?S+u:u);else if(v in e)this.add(e,v,c||e[v],S?S+u:u,i,s);else if(v!=="parseTransform"){TI(v,u);continue}E||(v in a?P.push(v,0,a[v]):P.push(v,1,c||e[v])),o.push(v)}}b&&qz(this)},render:function(e,t){if(t.tween._time||!kI())for(var r=t._pt;r;)r.r(e,r.d),r=r._next;else t.styles.revert()},get:xl,aliases:Ua,getSetter:function(e,t,r){var i=Ua[t];return i&&i.indexOf(",")<0&&(t=i),t in Xl&&t!==bs&&(e._gsap.x||xl(e,"x"))?r&&PN===r?t==="scale"?kte:Nte:(PN=r||{})&&(t==="scale"?Fte:Ote):e.style&&!AI(e.style[t])?Bte:~t.indexOf("-")?Lte:BI(e,t)},core:{_removeProperty:Hf,_getMatrix:OI}};Rs.utils.checkPrefix=gp;Rs.core.getStyleSaver=nG;(function(n,e,t,r){var i=Ts(n+","+e+","+t,function(s){Xl[s]=1});Ts(e,function(s){to.units[s]="deg",oG[s]=1}),Ua[i[13]]=n+","+e,Ts(r,function(s){var o=s.split(":");Ua[o[1]]=i[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Ts("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){to.units[n]="px"});Rs.registerPlugin(cG);var hr=Rs.registerPlugin(cG)||Rs;hr.core.Tween;/*!
 * @gsap/react 2.1.1
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/let UN=typeof window<"u"?se.useLayoutEffect:se.useEffect,HN=n=>n&&!Array.isArray(n)&&typeof n=="object",Xv=[],Kte={},uG=hr;const hu=(n,e=Xv)=>{let t=Kte;HN(n)?(t=n,n=null,e="dependencies"in t?t.dependencies:Xv):HN(e)&&(t=e,e="dependencies"in t?t.dependencies:Xv),n&&typeof n!="function"&&console.warn("First parameter must be a function or config object");const{scope:r,revertOnUpdate:i}=t,s=se.useRef(!1),o=se.useRef(uG.context(()=>{},r)),a=se.useRef(c=>o.current.add(null,c)),l=e&&e.length&&!i;return UN(()=>{if(n&&o.current.add(n,r),!l||!s.current)return()=>o.current.revert()},e),l&&UN(()=>(s.current=!0,()=>o.current.revert()),Xv),{context:o.current,contextSafe:a.current}};hu.register=n=>{uG=n};hu.headless=!0;const $te="/apple-website/assets/videos/hero.mp4",qte="/apple-website/assets/videos/smallHero.mp4",Qte="/apple-website/assets/videos/highlight-first.mp4",Zte="/apple-website/assets/videos/hightlight-third.mp4",ene="/apple-website/assets/videos/hightlight-sec.mp4",tne="/apple-website/assets/videos/hightlight-fourth.mp4",nne="/apple-website/assets/videos/explore.mp4",rne="/apple-website/assets/videos/frame.mp4",ine="/apple-website/assets/images/apple.svg",sne="/apple-website/assets/images/search.svg",one="/apple-website/assets/images/bag.svg",ane="/apple-website/assets/images/watch.svg",lne="/apple-website/assets/images/right.svg",cne="/apple-website/assets/images/replay.svg",une="/apple-website/assets/images/play.svg",fne="/apple-website/assets/images/pause.svg",dne="/apple-website/assets/images/yellow.jpg",hne="/apple-website/assets/images/blue.jpg",pne="/apple-website/assets/images/white.jpg",mne="/apple-website/assets/images/black.jpg",gne="/apple-website/assets/images/explore1.jpg",_ne="/apple-website/assets/images/explore2.jpg",vne="/apple-website/assets/images/chip.jpeg",yne="/apple-website/assets/images/frame.png",zN=$te,GN=qte,xne=Qte,Sne=Zte,Ene=ene,Ane=tne,wne=nne,Mne=rne,Tne=ine,Cne=sne,bne=one,Rne=ane,Ine=lne,Pne=cne,Dne=une,Bne=fne,fG=dne,Lne=hne,Nne=pne,kne=mne,Fne=gne,One=_ne,Une=vne,Hne=yne,zne=()=>{const[n,e]=se.useState(window.innerWidth<760?GN:zN),t=()=>{window.innerWidth<760?e(GN):e(zN)};return se.useEffect(()=>(window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}),[]),hu(()=>{hr.to("#hero",{opacity:1,delay:2}),hr.to("#cta",{opacity:1,y:-50,delay:2})},[]),ae.jsxs("section",{className:"w-full nav-height bg-black relative",children:[ae.jsxs("div",{className:"h-5/6 w-full flex-center flex-col",children:[ae.jsx("p",{id:"hero",className:"hero-title",children:"iPhone 15 Pro"}),ae.jsx("div",{className:"md:w-10/12 w-9-12 ",children:ae.jsx("video",{className:"pointer-events-none",autoPlay:!0,muted:!0,playsInline:!0,children:ae.jsx("source",{src:n,type:"video/mp4"})},n)})]}),ae.jsxs("div",{id:"cta",className:"flex flex-col items-center opacity-0 translate-y-20",children:[ae.jsx("a",{href:"#highlights",className:"btn",children:"Buy"}),ae.jsx("p",{className:"font-normal text-xl",children:"From $199/month or $999"})]})]})};function Gne(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Vne(n,e,t){return e&&Gne(n.prototype,e),n}/*!
 * Observer 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var gi,Rx,Js,Pc,Dc,Oh,dG,Xu,yg,hG,bl,Qo,pG,mG=function(){return gi||typeof window<"u"&&(gi=window.gsap)&&gi.registerPlugin&&gi},gG=1,xh=[],un=[],Xa=[],xg=Date.now,nb=function(e,t){return t},Wne=function(){var e=yg.core,t=e.bridge||{},r=e._scrollers,i=e._proxies;r.push.apply(r,un),i.push.apply(i,Xa),un=r,Xa=i,nb=function(o,a){return t[o](a)}},Yc=function(e,t){return~Xa.indexOf(e)&&Xa[Xa.indexOf(e)+1][t]},Sg=function(e){return!!~hG.indexOf(e)},Ji=function(e,t,r,i,s){return e.addEventListener(t,r,{passive:i!==!1,capture:!!s})},ji=function(e,t,r,i){return e.removeEventListener(t,r,!!i)},jv="scrollLeft",Yv="scrollTop",rb=function(){return bl&&bl.isPressed||un.cache++},NS=function(e,t){var r=function i(s){if(s||s===0){gG&&(Js.history.scrollRestoration="manual");var o=bl&&bl.isPressed;s=i.v=Math.round(s)||(bl&&bl.iOS?1:0),e(s),i.cacheID=un.cache,o&&nb("ss",s)}else(t||un.cache!==i.cacheID||nb("ref"))&&(i.cacheID=un.cache,i.v=e());return i.v+i.offset};return r.offset=0,e&&r},rs={s:jv,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:NS(function(n){return arguments.length?Js.scrollTo(n,Yr.sc()):Js.pageXOffset||Pc[jv]||Dc[jv]||Oh[jv]||0})},Yr={s:Yv,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:rs,sc:NS(function(n){return arguments.length?Js.scrollTo(rs.sc(),n):Js.pageYOffset||Pc[Yv]||Dc[Yv]||Oh[Yv]||0})},gs=function(e,t){return(t&&t._ctx&&t._ctx.selector||gi.utils.toArray)(e)[0]||(typeof e=="string"&&gi.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},nu=function(e,t){var r=t.s,i=t.sc;Sg(e)&&(e=Pc.scrollingElement||Dc);var s=un.indexOf(e),o=i===Yr.sc?1:2;!~s&&(s=un.push(e)-1),un[s+o]||Ji(e,"scroll",rb);var a=un[s+o],l=a||(un[s+o]=NS(Yc(e,r),!0)||(Sg(e)?i:NS(function(c){return arguments.length?e[r]=c:e[r]})));return l.target=e,a||(l.smooth=gi.getProperty(e,"scrollBehavior")==="smooth"),l},ib=function(e,t,r){var i=e,s=e,o=xg(),a=o,l=t||50,c=Math.max(500,l*3),u=function(g,v){var y=xg();v||y-o>l?(s=i,i=g,a=o,o=y):r?i+=g:i=s+(g-s)/(y-a)*(o-a)},f=function(){s=i=r?0:i,a=o=0},p=function(g){var v=a,y=s,_=xg();return(g||g===0)&&g!==i&&u(g),o===a||_-a>c?0:(i+(r?y:-y))/((r?_:o)-v)*1e3};return{update:u,reset:f,getVelocity:p}},Sm=function(e,t){return t&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},VN=function(e){var t=Math.max.apply(Math,e),r=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(r)?t:r},_G=function(){yg=gi.core.globals().ScrollTrigger,yg&&yg.core&&Wne()},vG=function(e){return gi=e||mG(),!Rx&&gi&&typeof document<"u"&&document.body&&(Js=window,Pc=document,Dc=Pc.documentElement,Oh=Pc.body,hG=[Js,Pc,Dc,Oh],gi.utils.clamp,pG=gi.core.context||function(){},Xu="onpointerenter"in Oh?"pointer":"mouse",dG=Br.isTouch=Js.matchMedia&&Js.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in Js||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,Qo=Br.eventTypes=("ontouchstart"in Dc?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in Dc?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return gG=0},500),_G(),Rx=1),Rx};rs.op=Yr;un.cache=0;var Br=function(){function n(t){this.init(t)}var e=n.prototype;return e.init=function(r){Rx||vG(gi)||console.warn("Please gsap.registerPlugin(Observer)"),yg||_G();var i=r.tolerance,s=r.dragMinimum,o=r.type,a=r.target,l=r.lineHeight,c=r.debounce,u=r.preventDefault,f=r.onStop,p=r.onStopDelay,m=r.ignore,g=r.wheelSpeed,v=r.event,y=r.onDragStart,_=r.onDragEnd,S=r.onDrag,E=r.onPress,w=r.onRelease,I=r.onRight,T=r.onLeft,b=r.onUp,P=r.onDown,C=r.onChangeX,M=r.onChangeY,L=r.onChange,U=r.onToggleX,X=r.onToggleY,$=r.onHover,Q=r.onHoverEnd,Y=r.onMove,te=r.ignoreCheck,k=r.isNormalizer,K=r.onGestureStart,F=r.onGestureEnd,ie=r.onWheel,me=r.onEnable,Ne=r.onDisable,ce=r.onClick,xe=r.scrollSpeed,Ae=r.capture,Ie=r.allowClicks,Xe=r.lockAxis,it=r.onLockAxis;this.target=a=gs(a)||Dc,this.vars=r,m&&(m=gi.utils.toArray(m)),i=i||1e-9,s=s||0,g=g||1,xe=xe||1,o=o||"wheel,touch,pointer",c=c!==!1,l||(l=parseFloat(Js.getComputedStyle(Oh).lineHeight)||22);var Qe,Ge,z,pe,Me,Be,ye,oe=this,Ue=0,Ke=0,V=r.passive||!u,O=nu(a,rs),le=nu(a,Yr),Se=O(),ve=le(),Ce=~o.indexOf("touch")&&!~o.indexOf("pointer")&&Qo[0]==="pointerdown",lt=Sg(a),Oe=a.ownerDocument||Pc,Ze=[0,0,0],_t=[0,0,0],He=0,nt=function(){return He=xg()},St=function(ft,rn){return(oe.event=ft)&&m&&~m.indexOf(ft.target)||rn&&Ce&&ft.pointerType!=="touch"||te&&te(ft,rn)},Et=function(){oe._vx.reset(),oe._vy.reset(),Ge.pause(),f&&f(oe)},Ye=function(){var ft=oe.deltaX=VN(Ze),rn=oe.deltaY=VN(_t),et=Math.abs(ft)>=i,Lt=Math.abs(rn)>=i;L&&(et||Lt)&&L(oe,ft,rn,Ze,_t),et&&(I&&oe.deltaX>0&&I(oe),T&&oe.deltaX<0&&T(oe),C&&C(oe),U&&oe.deltaX<0!=Ue<0&&U(oe),Ue=oe.deltaX,Ze[0]=Ze[1]=Ze[2]=0),Lt&&(P&&oe.deltaY>0&&P(oe),b&&oe.deltaY<0&&b(oe),M&&M(oe),X&&oe.deltaY<0!=Ke<0&&X(oe),Ke=oe.deltaY,_t[0]=_t[1]=_t[2]=0),(pe||z)&&(Y&&Y(oe),z&&(S(oe),z=!1),pe=!1),Be&&!(Be=!1)&&it&&it(oe),Me&&(ie(oe),Me=!1),Qe=0},re=function(ft,rn,et){Ze[et]+=ft,_t[et]+=rn,oe._vx.update(ft),oe._vy.update(rn),c?Qe||(Qe=requestAnimationFrame(Ye)):Ye()},Pe=function(ft,rn){Xe&&!ye&&(oe.axis=ye=Math.abs(ft)>Math.abs(rn)?"x":"y",Be=!0),ye!=="y"&&(Ze[2]+=ft,oe._vx.update(ft,!0)),ye!=="x"&&(_t[2]+=rn,oe._vy.update(rn,!0)),c?Qe||(Qe=requestAnimationFrame(Ye)):Ye()},je=function(ft){if(!St(ft,1)){ft=Sm(ft,u);var rn=ft.clientX,et=ft.clientY,Lt=rn-oe.x,xt=et-oe.y,Pt=oe.isDragging;oe.x=rn,oe.y=et,(Pt||Math.abs(oe.startX-rn)>=s||Math.abs(oe.startY-et)>=s)&&(S&&(z=!0),Pt||(oe.isDragging=!0),Pe(Lt,xt),Pt||y&&y(oe))}},ee=oe.onPress=function(yt){St(yt,1)||yt&&yt.button||(oe.axis=ye=null,Ge.pause(),oe.isPressed=!0,yt=Sm(yt),Ue=Ke=0,oe.startX=oe.x=yt.clientX,oe.startY=oe.y=yt.clientY,oe._vx.reset(),oe._vy.reset(),Ji(k?a:Oe,Qo[1],je,V,!0),oe.deltaX=oe.deltaY=0,E&&E(oe))},Te=oe.onRelease=function(yt){if(!St(yt,1)){ji(k?a:Oe,Qo[1],je,!0);var ft=!isNaN(oe.y-oe.startY),rn=oe.isDragging,et=rn&&(Math.abs(oe.x-oe.startX)>3||Math.abs(oe.y-oe.startY)>3),Lt=Sm(yt);!et&&ft&&(oe._vx.reset(),oe._vy.reset(),u&&Ie&&gi.delayedCall(.08,function(){if(xg()-He>300&&!yt.defaultPrevented){if(yt.target.click)yt.target.click();else if(Oe.createEvent){var xt=Oe.createEvent("MouseEvents");xt.initMouseEvent("click",!0,!0,Js,1,Lt.screenX,Lt.screenY,Lt.clientX,Lt.clientY,!1,!1,!1,!1,0,null),yt.target.dispatchEvent(xt)}}})),oe.isDragging=oe.isGesturing=oe.isPressed=!1,f&&rn&&!k&&Ge.restart(!0),_&&rn&&_(oe),w&&w(oe,et)}},ue=function(ft){return ft.touches&&ft.touches.length>1&&(oe.isGesturing=!0)&&K(ft,oe.isDragging)},Re=function(){return(oe.isGesturing=!1)||F(oe)},We=function(ft){if(!St(ft)){var rn=O(),et=le();re((rn-Se)*xe,(et-ve)*xe,1),Se=rn,ve=et,f&&Ge.restart(!0)}},ht=function(ft){if(!St(ft)){ft=Sm(ft,u),ie&&(Me=!0);var rn=(ft.deltaMode===1?l:ft.deltaMode===2?Js.innerHeight:1)*g;re(ft.deltaX*rn,ft.deltaY*rn,0),f&&!k&&Ge.restart(!0)}},Ct=function(ft){if(!St(ft)){var rn=ft.clientX,et=ft.clientY,Lt=rn-oe.x,xt=et-oe.y;oe.x=rn,oe.y=et,pe=!0,f&&Ge.restart(!0),(Lt||xt)&&Pe(Lt,xt)}},jt=function(ft){oe.event=ft,$(oe)},cn=function(ft){oe.event=ft,Q(oe)},Ot=function(ft){return St(ft)||Sm(ft,u)&&ce(oe)};Ge=oe._dc=gi.delayedCall(p||.25,Et).pause(),oe.deltaX=oe.deltaY=0,oe._vx=ib(0,50,!0),oe._vy=ib(0,50,!0),oe.scrollX=O,oe.scrollY=le,oe.isDragging=oe.isGesturing=oe.isPressed=!1,pG(this),oe.enable=function(yt){return oe.isEnabled||(Ji(lt?Oe:a,"scroll",rb),o.indexOf("scroll")>=0&&Ji(lt?Oe:a,"scroll",We,V,Ae),o.indexOf("wheel")>=0&&Ji(a,"wheel",ht,V,Ae),(o.indexOf("touch")>=0&&dG||o.indexOf("pointer")>=0)&&(Ji(a,Qo[0],ee,V,Ae),Ji(Oe,Qo[2],Te),Ji(Oe,Qo[3],Te),Ie&&Ji(a,"click",nt,!0,!0),ce&&Ji(a,"click",Ot),K&&Ji(Oe,"gesturestart",ue),F&&Ji(Oe,"gestureend",Re),$&&Ji(a,Xu+"enter",jt),Q&&Ji(a,Xu+"leave",cn),Y&&Ji(a,Xu+"move",Ct)),oe.isEnabled=!0,yt&&yt.type&&ee(yt),me&&me(oe)),oe},oe.disable=function(){oe.isEnabled&&(xh.filter(function(yt){return yt!==oe&&Sg(yt.target)}).length||ji(lt?Oe:a,"scroll",rb),oe.isPressed&&(oe._vx.reset(),oe._vy.reset(),ji(k?a:Oe,Qo[1],je,!0)),ji(lt?Oe:a,"scroll",We,Ae),ji(a,"wheel",ht,Ae),ji(a,Qo[0],ee,Ae),ji(Oe,Qo[2],Te),ji(Oe,Qo[3],Te),ji(a,"click",nt,!0),ji(a,"click",Ot),ji(Oe,"gesturestart",ue),ji(Oe,"gestureend",Re),ji(a,Xu+"enter",jt),ji(a,Xu+"leave",cn),ji(a,Xu+"move",Ct),oe.isEnabled=oe.isPressed=oe.isDragging=!1,Ne&&Ne(oe))},oe.kill=oe.revert=function(){oe.disable();var yt=xh.indexOf(oe);yt>=0&&xh.splice(yt,1),bl===oe&&(bl=0)},xh.push(oe),k&&Sg(a)&&(bl=oe),oe.enable(v)},Vne(n,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),n}();Br.version="3.12.5";Br.create=function(n){return new Br(n)};Br.register=vG;Br.getAll=function(){return xh.slice()};Br.getById=function(n){return xh.filter(function(e){return e.vars.id===n})[0]};mG()&&gi.registerPlugin(Br);/*!
 * ScrollTrigger 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var gt,Qd,mn,fr,ia,$n,yG,kS,__,Eg,Km,Jv,Bi,uE,sb,Zi,WN,XN,Zd,xG,Jw,SG,qi,ob,EG,AG,pc,ab,UI,Uh,HI,FS,lb,Kw,Kv=1,Li=Date.now,$w=Li(),ko=0,$m=0,jN=function(e,t,r){var i=zs(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return r["_"+t+"Clamp"]=i,i?e.substr(6,e.length-7):e},YN=function(e,t){return t&&(!zs(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},Xne=function n(){return $m&&requestAnimationFrame(n)},JN=function(){return uE=1},KN=function(){return uE=0},Pa=function(e){return e},qm=function(e){return Math.round(e*1e5)/1e5||0},wG=function(){return typeof window<"u"},MG=function(){return gt||wG()&&(gt=window.gsap)&&gt.registerPlugin&&gt},zf=function(e){return!!~yG.indexOf(e)},TG=function(e){return(e==="Height"?HI:mn["inner"+e])||ia["client"+e]||$n["client"+e]},CG=function(e){return Yc(e,"getBoundingClientRect")||(zf(e)?function(){return Lx.width=mn.innerWidth,Lx.height=HI,Lx}:function(){return Al(e)})},jne=function(e,t,r){var i=r.d,s=r.d2,o=r.a;return(o=Yc(e,"getBoundingClientRect"))?function(){return o()[i]}:function(){return(t?TG(s):e["client"+s])||0}},Yne=function(e,t){return!t||~Xa.indexOf(e)?CG(e):function(){return Lx}},Ha=function(e,t){var r=t.s,i=t.d2,s=t.d,o=t.a;return Math.max(0,(r="scroll"+i)&&(o=Yc(e,r))?o()-CG(e)()[s]:zf(e)?(ia[r]||$n[r])-TG(i):e[r]-e["offset"+i])},$v=function(e,t){for(var r=0;r<Zd.length;r+=3)(!t||~t.indexOf(Zd[r+1]))&&e(Zd[r],Zd[r+1],Zd[r+2])},zs=function(e){return typeof e=="string"},is=function(e){return typeof e=="function"},Qm=function(e){return typeof e=="number"},ju=function(e){return typeof e=="object"},Em=function(e,t,r){return e&&e.progress(t?0:1)&&r&&e.pause()},qw=function(e,t){if(e.enabled){var r=e._ctx?e._ctx.add(function(){return t(e)}):t(e);r&&r.totalTime&&(e.callbackAnimation=r)}},Cd=Math.abs,bG="left",RG="top",zI="right",GI="bottom",wf="width",Mf="height",Ag="Right",wg="Left",Mg="Top",Tg="Bottom",Ur="padding",Co="margin",_p="Width",VI="Height",Xr="px",bo=function(e){return mn.getComputedStyle(e)},Jne=function(e){var t=bo(e).position;e.style.position=t==="absolute"||t==="fixed"?t:"relative"},$N=function(e,t){for(var r in t)r in e||(e[r]=t[r]);return e},Al=function(e,t){var r=t&&bo(e)[sb]!=="matrix(1, 0, 0, 1, 0, 0)"&&gt.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),i=e.getBoundingClientRect();return r&&r.progress(0).kill(),i},OS=function(e,t){var r=t.d2;return e["offset"+r]||e["client"+r]||0},IG=function(e){var t=[],r=e.labels,i=e.duration(),s;for(s in r)t.push(r[s]/i);return t},Kne=function(e){return function(t){return gt.utils.snap(IG(e),t)}},WI=function(e){var t=gt.utils.snap(e),r=Array.isArray(e)&&e.slice(0).sort(function(i,s){return i-s});return r?function(i,s,o){o===void 0&&(o=.001);var a;if(!s)return t(i);if(s>0){for(i-=o,a=0;a<r.length;a++)if(r[a]>=i)return r[a];return r[a-1]}else for(a=r.length,i+=o;a--;)if(r[a]<=i)return r[a];return r[0]}:function(i,s,o){o===void 0&&(o=.001);var a=t(i);return!s||Math.abs(a-i)<o||a-i<0==s<0?a:t(s<0?i-e:i+e)}},$ne=function(e){return function(t,r){return WI(IG(e))(t,r.direction)}},qv=function(e,t,r,i){return r.split(",").forEach(function(s){return e(t,s,i)})},oi=function(e,t,r,i,s){return e.addEventListener(t,r,{passive:!i,capture:!!s})},ii=function(e,t,r,i){return e.removeEventListener(t,r,!!i)},Qv=function(e,t,r){r=r&&r.wheelHandler,r&&(e(t,"wheel",r),e(t,"touchmove",r))},qN={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},Zv={toggleActions:"play",anticipatePin:0},US={top:0,left:0,center:.5,bottom:1,right:1},Ix=function(e,t){if(zs(e)){var r=e.indexOf("="),i=~r?+(e.charAt(r-1)+1)*parseFloat(e.substr(r+1)):0;~r&&(e.indexOf("%")>r&&(i*=t/100),e=e.substr(0,r-1)),e=i+(e in US?US[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},ey=function(e,t,r,i,s,o,a,l){var c=s.startColor,u=s.endColor,f=s.fontSize,p=s.indent,m=s.fontWeight,g=fr.createElement("div"),v=zf(r)||Yc(r,"pinType")==="fixed",y=e.indexOf("scroller")!==-1,_=v?$n:r,S=e.indexOf("start")!==-1,E=S?c:u,w="border-color:"+E+";font-size:"+f+";color:"+E+";font-weight:"+m+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return w+="position:"+((y||l)&&v?"fixed;":"absolute;"),(y||l||!v)&&(w+=(i===Yr?zI:GI)+":"+(o+parseFloat(p))+"px;"),a&&(w+="box-sizing:border-box;text-align:left;width:"+a.offsetWidth+"px;"),g._isStart=S,g.setAttribute("class","gsap-marker-"+e+(t?" marker-"+t:"")),g.style.cssText=w,g.innerText=t||t===0?e+"-"+t:e,_.children[0]?_.insertBefore(g,_.children[0]):_.appendChild(g),g._offset=g["offset"+i.op.d2],Px(g,0,i,S),g},Px=function(e,t,r,i){var s={display:"block"},o=r[i?"os2":"p2"],a=r[i?"p2":"os2"];e._isFlipped=i,s[r.a+"Percent"]=i?-100:0,s[r.a]=i?"1px":0,s["border"+o+_p]=1,s["border"+a+_p]=0,s[r.p]=t+"px",gt.set(e,s)},on=[],cb={},v_,QN=function(){return Li()-ko>34&&(v_||(v_=requestAnimationFrame(Bl)))},bd=function(){(!qi||!qi.isPressed||qi.startX>$n.clientWidth)&&(un.cache++,qi?v_||(v_=requestAnimationFrame(Bl)):Bl(),ko||Vf("scrollStart"),ko=Li())},Qw=function(){AG=mn.innerWidth,EG=mn.innerHeight},Zm=function(){un.cache++,!Bi&&!SG&&!fr.fullscreenElement&&!fr.webkitFullscreenElement&&(!ob||AG!==mn.innerWidth||Math.abs(mn.innerHeight-EG)>mn.innerHeight*.25)&&kS.restart(!0)},Gf={},qne=[],PG=function n(){return ii(ln,"scrollEnd",n)||of(!0)},Vf=function(e){return Gf[e]&&Gf[e].map(function(t){return t()})||qne},Us=[],DG=function(e){for(var t=0;t<Us.length;t+=5)(!e||Us[t+4]&&Us[t+4].query===e)&&(Us[t].style.cssText=Us[t+1],Us[t].getBBox&&Us[t].setAttribute("transform",Us[t+2]||""),Us[t+3].uncache=1)},XI=function(e,t){var r;for(Zi=0;Zi<on.length;Zi++)r=on[Zi],r&&(!t||r._ctx===t)&&(e?r.kill(1):r.revert(!0,!0));FS=!0,t&&DG(t),t||Vf("revert")},BG=function(e,t){un.cache++,(t||!es)&&un.forEach(function(r){return is(r)&&r.cacheID++&&(r.rec=0)}),zs(e)&&(mn.history.scrollRestoration=UI=e)},es,Tf=0,ZN,Qne=function(){if(ZN!==Tf){var e=ZN=Tf;requestAnimationFrame(function(){return e===Tf&&of(!0)})}},LG=function(){$n.appendChild(Uh),HI=!qi&&Uh.offsetHeight||mn.innerHeight,$n.removeChild(Uh)},ek=function(e){return __(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(t){return t.style.display=e?"none":"block"})},of=function(e,t){if(ko&&!e&&!FS){oi(ln,"scrollEnd",PG);return}LG(),es=ln.isRefreshing=!0,un.forEach(function(i){return is(i)&&++i.cacheID&&(i.rec=i())});var r=Vf("refreshInit");xG&&ln.sort(),t||XI(),un.forEach(function(i){is(i)&&(i.smooth&&(i.target.style.scrollBehavior="auto"),i(0))}),on.slice(0).forEach(function(i){return i.refresh()}),FS=!1,on.forEach(function(i){if(i._subPinOffset&&i.pin){var s=i.vars.horizontal?"offsetWidth":"offsetHeight",o=i.pin[s];i.revert(!0,1),i.adjustPinSpacing(i.pin[s]-o),i.refresh()}}),lb=1,ek(!0),on.forEach(function(i){var s=Ha(i.scroller,i._dir),o=i.vars.end==="max"||i._endClamp&&i.end>s,a=i._startClamp&&i.start>=s;(o||a)&&i.setPositions(a?s-1:i.start,o?Math.max(a?s:i.start+1,s):i.end,!0)}),ek(!1),lb=0,r.forEach(function(i){return i&&i.render&&i.render(-1)}),un.forEach(function(i){is(i)&&(i.smooth&&requestAnimationFrame(function(){return i.target.style.scrollBehavior="smooth"}),i.rec&&i(i.rec))}),BG(UI,1),kS.pause(),Tf++,es=2,Bl(2),on.forEach(function(i){return is(i.vars.onRefresh)&&i.vars.onRefresh(i)}),es=ln.isRefreshing=!1,Vf("refresh")},ub=0,Dx=1,Cg,Bl=function(e){if(e===2||!es&&!FS){ln.isUpdating=!0,Cg&&Cg.update(0);var t=on.length,r=Li(),i=r-$w>=50,s=t&&on[0].scroll();if(Dx=ub>s?-1:1,es||(ub=s),i&&(ko&&!uE&&r-ko>200&&(ko=0,Vf("scrollEnd")),Km=$w,$w=r),Dx<0){for(Zi=t;Zi-- >0;)on[Zi]&&on[Zi].update(0,i);Dx=1}else for(Zi=0;Zi<t;Zi++)on[Zi]&&on[Zi].update(0,i);ln.isUpdating=!1}v_=0},fb=[bG,RG,GI,zI,Co+Tg,Co+Ag,Co+Mg,Co+wg,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],Bx=fb.concat([wf,Mf,"boxSizing","max"+_p,"max"+VI,"position",Co,Ur,Ur+Mg,Ur+Ag,Ur+Tg,Ur+wg]),Zne=function(e,t,r){Hh(r);var i=e._gsap;if(i.spacerIsNative)Hh(i.spacerState);else if(e._gsap.swappedIn){var s=t.parentNode;s&&(s.insertBefore(e,t),s.removeChild(t))}e._gsap.swappedIn=!1},Zw=function(e,t,r,i){if(!e._gsap.swappedIn){for(var s=fb.length,o=t.style,a=e.style,l;s--;)l=fb[s],o[l]=r[l];o.position=r.position==="absolute"?"absolute":"relative",r.display==="inline"&&(o.display="inline-block"),a[GI]=a[zI]="auto",o.flexBasis=r.flexBasis||"auto",o.overflow="visible",o.boxSizing="border-box",o[wf]=OS(e,rs)+Xr,o[Mf]=OS(e,Yr)+Xr,o[Ur]=a[Co]=a[RG]=a[bG]="0",Hh(i),a[wf]=a["max"+_p]=r[wf],a[Mf]=a["max"+VI]=r[Mf],a[Ur]=r[Ur],e.parentNode!==t&&(e.parentNode.insertBefore(t,e),t.appendChild(e)),e._gsap.swappedIn=!0}},ere=/([A-Z])/g,Hh=function(e){if(e){var t=e.t.style,r=e.length,i=0,s,o;for((e.t._gsap||gt.core.getCache(e.t)).uncache=1;i<r;i+=2)o=e[i+1],s=e[i],o?t[s]=o:t[s]&&t.removeProperty(s.replace(ere,"-$1").toLowerCase())}},ty=function(e){for(var t=Bx.length,r=e.style,i=[],s=0;s<t;s++)i.push(Bx[s],r[Bx[s]]);return i.t=e,i},tre=function(e,t,r){for(var i=[],s=e.length,o=r?8:0,a;o<s;o+=2)a=e[o],i.push(a,a in t?t[a]:e[o+1]);return i.t=e.t,i},Lx={left:0,top:0},tk=function(e,t,r,i,s,o,a,l,c,u,f,p,m,g){is(e)&&(e=e(l)),zs(e)&&e.substr(0,3)==="max"&&(e=p+(e.charAt(4)==="="?Ix("0"+e.substr(3),r):0));var v=m?m.time():0,y,_,S;if(m&&m.seek(0),isNaN(e)||(e=+e),Qm(e))m&&(e=gt.utils.mapRange(m.scrollTrigger.start,m.scrollTrigger.end,0,p,e)),a&&Px(a,r,i,!0);else{is(t)&&(t=t(l));var E=(e||"0").split(" "),w,I,T,b;S=gs(t,l)||$n,w=Al(S)||{},(!w||!w.left&&!w.top)&&bo(S).display==="none"&&(b=S.style.display,S.style.display="block",w=Al(S),b?S.style.display=b:S.style.removeProperty("display")),I=Ix(E[0],w[i.d]),T=Ix(E[1]||"0",r),e=w[i.p]-c[i.p]-u+I+s-T,a&&Px(a,T,i,r-T<20||a._isStart&&T>20),r-=r-T}if(g&&(l[g]=e||-.001,e<0&&(e=0)),o){var P=e+r,C=o._isStart;y="scroll"+i.d2,Px(o,P,i,C&&P>20||!C&&(f?Math.max($n[y],ia[y]):o.parentNode[y])<=P+1),f&&(c=Al(a),f&&(o.style[i.op.p]=c[i.op.p]-i.op.m-o._offset+Xr))}return m&&S&&(y=Al(S),m.seek(p),_=Al(S),m._caScrollDist=y[i.p]-_[i.p],e=e/m._caScrollDist*p),m&&m.seek(v),m?e:Math.round(e)},nre=/(webkit|moz|length|cssText|inset)/i,nk=function(e,t,r,i){if(e.parentNode!==t){var s=e.style,o,a;if(t===$n){e._stOrig=s.cssText,a=bo(e);for(o in a)!+o&&!nre.test(o)&&a[o]&&typeof s[o]=="string"&&o!=="0"&&(s[o]=a[o]);s.top=r,s.left=i}else s.cssText=e._stOrig;gt.core.getCache(e).uncache=1,t.appendChild(e)}},NG=function(e,t,r){var i=t,s=i;return function(o){var a=Math.round(e());return a!==i&&a!==s&&Math.abs(a-i)>3&&Math.abs(a-s)>3&&(o=a,r&&r()),s=i,i=o,o}},ny=function(e,t,r){var i={};i[t.p]="+="+r,gt.set(e,i)},rk=function(e,t){var r=nu(e,t),i="_scroll"+t.p2,s=function o(a,l,c,u,f){var p=o.tween,m=l.onComplete,g={};c=c||r();var v=NG(r,c,function(){p.kill(),o.tween=0});return f=u&&f||0,u=u||a-c,p&&p.kill(),l[i]=a,l.inherit=!1,l.modifiers=g,g[i]=function(){return v(c+u*p.ratio+f*p.ratio*p.ratio)},l.onUpdate=function(){un.cache++,o.tween&&Bl()},l.onComplete=function(){o.tween=0,m&&m.call(p)},p=o.tween=gt.to(e,l),p};return e[i]=r,r.wheelHandler=function(){return s.tween&&s.tween.kill()&&(s.tween=0)},oi(e,"wheel",r.wheelHandler),ln.isTouch&&oi(e,"touchmove",r.wheelHandler),s},ln=function(){function n(t,r){Qd||n.register(gt)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),ab(this),this.init(t,r)}var e=n.prototype;return e.init=function(r,i){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!$m){this.update=this.refresh=this.kill=Pa;return}r=$N(zs(r)||Qm(r)||r.nodeType?{trigger:r}:r,Zv);var s=r,o=s.onUpdate,a=s.toggleClass,l=s.id,c=s.onToggle,u=s.onRefresh,f=s.scrub,p=s.trigger,m=s.pin,g=s.pinSpacing,v=s.invalidateOnRefresh,y=s.anticipatePin,_=s.onScrubComplete,S=s.onSnapComplete,E=s.once,w=s.snap,I=s.pinReparent,T=s.pinSpacer,b=s.containerAnimation,P=s.fastScrollEnd,C=s.preventOverlaps,M=r.horizontal||r.containerAnimation&&r.horizontal!==!1?rs:Yr,L=!f&&f!==0,U=gs(r.scroller||mn),X=gt.core.getCache(U),$=zf(U),Q=("pinType"in r?r.pinType:Yc(U,"pinType")||$&&"fixed")==="fixed",Y=[r.onEnter,r.onLeave,r.onEnterBack,r.onLeaveBack],te=L&&r.toggleActions.split(" "),k="markers"in r?r.markers:Zv.markers,K=$?0:parseFloat(bo(U)["border"+M.p2+_p])||0,F=this,ie=r.onRefreshInit&&function(){return r.onRefreshInit(F)},me=jne(U,$,M),Ne=Yne(U,$),ce=0,xe=0,Ae=0,Ie=nu(U,M),Xe,it,Qe,Ge,z,pe,Me,Be,ye,oe,Ue,Ke,V,O,le,Se,ve,Ce,lt,Oe,Ze,_t,He,nt,St,Et,Ye,re,Pe,je,ee,Te,ue,Re,We,ht,Ct,jt,cn;if(F._startClamp=F._endClamp=!1,F._dir=M,y*=45,F.scroller=U,F.scroll=b?b.time.bind(b):Ie,Ge=Ie(),F.vars=r,i=i||r.animation,"refreshPriority"in r&&(xG=1,r.refreshPriority===-9999&&(Cg=F)),X.tweenScroll=X.tweenScroll||{top:rk(U,Yr),left:rk(U,rs)},F.tweenTo=Xe=X.tweenScroll[M.p],F.scrubDuration=function(et){ue=Qm(et)&&et,ue?Te?Te.duration(et):Te=gt.to(i,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:ue,paused:!0,onComplete:function(){return _&&_(F)}}):(Te&&Te.progress(1).kill(),Te=0)},i&&(i.vars.lazy=!1,i._initted&&!F.isReverted||i.vars.immediateRender!==!1&&r.immediateRender!==!1&&i.duration()&&i.render(0,!0,!0),F.animation=i.pause(),i.scrollTrigger=F,F.scrubDuration(f),je=0,l||(l=i.vars.id)),w&&((!ju(w)||w.push)&&(w={snapTo:w}),"scrollBehavior"in $n.style&&gt.set($?[$n,ia]:U,{scrollBehavior:"auto"}),un.forEach(function(et){return is(et)&&et.target===($?fr.scrollingElement||ia:U)&&(et.smooth=!1)}),Qe=is(w.snapTo)?w.snapTo:w.snapTo==="labels"?Kne(i):w.snapTo==="labelsDirectional"?$ne(i):w.directional!==!1?function(et,Lt){return WI(w.snapTo)(et,Li()-xe<500?0:Lt.direction)}:gt.utils.snap(w.snapTo),Re=w.duration||{min:.1,max:2},Re=ju(Re)?Eg(Re.min,Re.max):Eg(Re,Re),We=gt.delayedCall(w.delay||ue/2||.1,function(){var et=Ie(),Lt=Li()-xe<500,xt=Xe.tween;if((Lt||Math.abs(F.getVelocity())<10)&&!xt&&!uE&&ce!==et){var Pt=(et-pe)/O,In=i&&!L?i.totalProgress():Pt,Nt=Lt?0:(In-ee)/(Li()-Km)*1e3||0,vt=gt.utils.clamp(-Pt,1-Pt,Cd(Nt/2)*Nt/.185),er=Pt+(w.inertia===!1?0:vt),Bn,N,H=w,ne=H.onStart,D=H.onInterrupt,G=H.onComplete;if(Bn=Qe(er,F),Qm(Bn)||(Bn=er),N=Math.round(pe+Bn*O),et<=Me&&et>=pe&&N!==et){if(xt&&!xt._initted&&xt.data<=Cd(N-et))return;w.inertia===!1&&(vt=Bn-Pt),Xe(N,{duration:Re(Cd(Math.max(Cd(er-In),Cd(Bn-In))*.185/Nt/.05||0)),ease:w.ease||"power3",data:Cd(N-et),onInterrupt:function(){return We.restart(!0)&&D&&D(F)},onComplete:function(){F.update(),ce=Ie(),i&&(Te?Te.resetTo("totalProgress",Bn,i._tTime/i._tDur):i.progress(Bn)),je=ee=i&&!L?i.totalProgress():F.progress,S&&S(F),G&&G(F)}},et,vt*O,N-et-vt*O),ne&&ne(F,Xe.tween)}}else F.isActive&&ce!==et&&We.restart(!0)}).pause()),l&&(cb[l]=F),p=F.trigger=gs(p||m!==!0&&m),cn=p&&p._gsap&&p._gsap.stRevert,cn&&(cn=cn(F)),m=m===!0?p:gs(m),zs(a)&&(a={targets:p,className:a}),m&&(g===!1||g===Co||(g=!g&&m.parentNode&&m.parentNode.style&&bo(m.parentNode).display==="flex"?!1:Ur),F.pin=m,it=gt.core.getCache(m),it.spacer?le=it.pinState:(T&&(T=gs(T),T&&!T.nodeType&&(T=T.current||T.nativeElement),it.spacerIsNative=!!T,T&&(it.spacerState=ty(T))),it.spacer=Ce=T||fr.createElement("div"),Ce.classList.add("pin-spacer"),l&&Ce.classList.add("pin-spacer-"+l),it.pinState=le=ty(m)),r.force3D!==!1&&gt.set(m,{force3D:!0}),F.spacer=Ce=it.spacer,Pe=bo(m),nt=Pe[g+M.os2],Oe=gt.getProperty(m),Ze=gt.quickSetter(m,M.a,Xr),Zw(m,Ce,Pe),ve=ty(m)),k){Ke=ju(k)?$N(k,qN):qN,oe=ey("scroller-start",l,U,M,Ke,0),Ue=ey("scroller-end",l,U,M,Ke,0,oe),lt=oe["offset"+M.op.d2];var Ot=gs(Yc(U,"content")||U);Be=this.markerStart=ey("start",l,Ot,M,Ke,lt,0,b),ye=this.markerEnd=ey("end",l,Ot,M,Ke,lt,0,b),b&&(jt=gt.quickSetter([Be,ye],M.a,Xr)),!Q&&!(Xa.length&&Yc(U,"fixedMarkers")===!0)&&(Jne($?$n:U),gt.set([oe,Ue],{force3D:!0}),Et=gt.quickSetter(oe,M.a,Xr),re=gt.quickSetter(Ue,M.a,Xr))}if(b){var yt=b.vars.onUpdate,ft=b.vars.onUpdateParams;b.eventCallback("onUpdate",function(){F.update(0,0,1),yt&&yt.apply(b,ft||[])})}if(F.previous=function(){return on[on.indexOf(F)-1]},F.next=function(){return on[on.indexOf(F)+1]},F.revert=function(et,Lt){if(!Lt)return F.kill(!0);var xt=et!==!1||!F.enabled,Pt=Bi;xt!==F.isReverted&&(xt&&(ht=Math.max(Ie(),F.scroll.rec||0),Ae=F.progress,Ct=i&&i.progress()),Be&&[Be,ye,oe,Ue].forEach(function(In){return In.style.display=xt?"none":"block"}),xt&&(Bi=F,F.update(xt)),m&&(!I||!F.isActive)&&(xt?Zne(m,Ce,le):Zw(m,Ce,bo(m),St)),xt||F.update(xt),Bi=Pt,F.isReverted=xt)},F.refresh=function(et,Lt,xt,Pt){if(!((Bi||!F.enabled)&&!Lt)){if(m&&et&&ko){oi(n,"scrollEnd",PG);return}!es&&ie&&ie(F),Bi=F,Xe.tween&&!xt&&(Xe.tween.kill(),Xe.tween=0),Te&&Te.pause(),v&&i&&i.revert({kill:!1}).invalidate(),F.isReverted||F.revert(!0,!0),F._subPinOffset=!1;var In=me(),Nt=Ne(),vt=b?b.duration():Ha(U,M),er=O<=.01,Bn=0,N=Pt||0,H=ju(xt)?xt.end:r.end,ne=r.endTrigger||p,D=ju(xt)?xt.start:r.start||(r.start===0||!p?0:m?"0 0":"0 100%"),G=F.pinnedContainer=r.pinnedContainer&&gs(r.pinnedContainer,F),j=p&&Math.max(0,on.indexOf(F))||0,Z=j,J,de,_e,we,ge,Ve,ke,Fe,st,ut,dt,bt,tt;for(k&&ju(xt)&&(bt=gt.getProperty(oe,M.p),tt=gt.getProperty(Ue,M.p));Z--;)Ve=on[Z],Ve.end||Ve.refresh(0,1)||(Bi=F),ke=Ve.pin,ke&&(ke===p||ke===m||ke===G)&&!Ve.isReverted&&(ut||(ut=[]),ut.unshift(Ve),Ve.revert(!0,!0)),Ve!==on[Z]&&(j--,Z--);for(is(D)&&(D=D(F)),D=jN(D,"start",F),pe=tk(D,p,In,M,Ie(),Be,oe,F,Nt,K,Q,vt,b,F._startClamp&&"_startClamp")||(m?-.001:0),is(H)&&(H=H(F)),zs(H)&&!H.indexOf("+=")&&(~H.indexOf(" ")?H=(zs(D)?D.split(" ")[0]:"")+H:(Bn=Ix(H.substr(2),In),H=zs(D)?D:(b?gt.utils.mapRange(0,b.duration(),b.scrollTrigger.start,b.scrollTrigger.end,pe):pe)+Bn,ne=p)),H=jN(H,"end",F),Me=Math.max(pe,tk(H||(ne?"100% 0":vt),ne,In,M,Ie()+Bn,ye,Ue,F,Nt,K,Q,vt,b,F._endClamp&&"_endClamp"))||-.001,Bn=0,Z=j;Z--;)Ve=on[Z],ke=Ve.pin,ke&&Ve.start-Ve._pinPush<=pe&&!b&&Ve.end>0&&(J=Ve.end-(F._startClamp?Math.max(0,Ve.start):Ve.start),(ke===p&&Ve.start-Ve._pinPush<pe||ke===G)&&isNaN(D)&&(Bn+=J*(1-Ve.progress)),ke===m&&(N+=J));if(pe+=Bn,Me+=Bn,F._startClamp&&(F._startClamp+=Bn),F._endClamp&&!es&&(F._endClamp=Me||-.001,Me=Math.min(Me,Ha(U,M))),O=Me-pe||(pe-=.01)&&.001,er&&(Ae=gt.utils.clamp(0,1,gt.utils.normalize(pe,Me,ht))),F._pinPush=N,Be&&Bn&&(J={},J[M.a]="+="+Bn,G&&(J[M.p]="-="+Ie()),gt.set([Be,ye],J)),m&&!(lb&&F.end>=Ha(U,M)))J=bo(m),we=M===Yr,_e=Ie(),_t=parseFloat(Oe(M.a))+N,!vt&&Me>1&&(dt=($?fr.scrollingElement||ia:U).style,dt={style:dt,value:dt["overflow"+M.a.toUpperCase()]},$&&bo($n)["overflow"+M.a.toUpperCase()]!=="scroll"&&(dt.style["overflow"+M.a.toUpperCase()]="scroll")),Zw(m,Ce,J),ve=ty(m),de=Al(m,!0),Fe=Q&&nu(U,we?rs:Yr)(),g?(St=[g+M.os2,O+N+Xr],St.t=Ce,Z=g===Ur?OS(m,M)+O+N:0,Z&&(St.push(M.d,Z+Xr),Ce.style.flexBasis!=="auto"&&(Ce.style.flexBasis=Z+Xr)),Hh(St),G&&on.forEach(function(ze){ze.pin===G&&ze.vars.pinSpacing!==!1&&(ze._subPinOffset=!0)}),Q&&Ie(ht)):(Z=OS(m,M),Z&&Ce.style.flexBasis!=="auto"&&(Ce.style.flexBasis=Z+Xr)),Q&&(ge={top:de.top+(we?_e-pe:Fe)+Xr,left:de.left+(we?Fe:_e-pe)+Xr,boxSizing:"border-box",position:"fixed"},ge[wf]=ge["max"+_p]=Math.ceil(de.width)+Xr,ge[Mf]=ge["max"+VI]=Math.ceil(de.height)+Xr,ge[Co]=ge[Co+Mg]=ge[Co+Ag]=ge[Co+Tg]=ge[Co+wg]="0",ge[Ur]=J[Ur],ge[Ur+Mg]=J[Ur+Mg],ge[Ur+Ag]=J[Ur+Ag],ge[Ur+Tg]=J[Ur+Tg],ge[Ur+wg]=J[Ur+wg],Se=tre(le,ge,I),es&&Ie(0)),i?(st=i._initted,Jw(1),i.render(i.duration(),!0,!0),He=Oe(M.a)-_t+O+N,Ye=Math.abs(O-He)>1,Q&&Ye&&Se.splice(Se.length-2,2),i.render(0,!0,!0),st||i.invalidate(!0),i.parent||i.totalTime(i.totalTime()),Jw(0)):He=O,dt&&(dt.value?dt.style["overflow"+M.a.toUpperCase()]=dt.value:dt.style.removeProperty("overflow-"+M.a));else if(p&&Ie()&&!b)for(de=p.parentNode;de&&de!==$n;)de._pinOffset&&(pe-=de._pinOffset,Me-=de._pinOffset),de=de.parentNode;ut&&ut.forEach(function(ze){return ze.revert(!1,!0)}),F.start=pe,F.end=Me,Ge=z=es?ht:Ie(),!b&&!es&&(Ge<ht&&Ie(ht),F.scroll.rec=0),F.revert(!1,!0),xe=Li(),We&&(ce=-1,We.restart(!0)),Bi=0,i&&L&&(i._initted||Ct)&&i.progress()!==Ct&&i.progress(Ct||0,!0).render(i.time(),!0,!0),(er||Ae!==F.progress||b||v)&&(i&&!L&&i.totalProgress(b&&pe<-.001&&!Ae?gt.utils.normalize(pe,Me,0):Ae,!0),F.progress=er||(Ge-pe)/O===Ae?0:Ae),m&&g&&(Ce._pinOffset=Math.round(F.progress*He)),Te&&Te.invalidate(),isNaN(bt)||(bt-=gt.getProperty(oe,M.p),tt-=gt.getProperty(Ue,M.p),ny(oe,M,bt),ny(Be,M,bt-(Pt||0)),ny(Ue,M,tt),ny(ye,M,tt-(Pt||0))),er&&!es&&F.update(),u&&!es&&!V&&(V=!0,u(F),V=!1)}},F.getVelocity=function(){return(Ie()-z)/(Li()-Km)*1e3||0},F.endAnimation=function(){Em(F.callbackAnimation),i&&(Te?Te.progress(1):i.paused()?L||Em(i,F.direction<0,1):Em(i,i.reversed()))},F.labelToScroll=function(et){return i&&i.labels&&(pe||F.refresh()||pe)+i.labels[et]/i.duration()*O||0},F.getTrailing=function(et){var Lt=on.indexOf(F),xt=F.direction>0?on.slice(0,Lt).reverse():on.slice(Lt+1);return(zs(et)?xt.filter(function(Pt){return Pt.vars.preventOverlaps===et}):xt).filter(function(Pt){return F.direction>0?Pt.end<=pe:Pt.start>=Me})},F.update=function(et,Lt,xt){if(!(b&&!xt&&!et)){var Pt=es===!0?ht:F.scroll(),In=et?0:(Pt-pe)/O,Nt=In<0?0:In>1?1:In||0,vt=F.progress,er,Bn,N,H,ne,D,G,j;if(Lt&&(z=Ge,Ge=b?Ie():Pt,w&&(ee=je,je=i&&!L?i.totalProgress():Nt)),y&&m&&!Bi&&!Kv&&ko&&(!Nt&&pe<Pt+(Pt-z)/(Li()-Km)*y?Nt=1e-4:Nt===1&&Me>Pt+(Pt-z)/(Li()-Km)*y&&(Nt=.9999)),Nt!==vt&&F.enabled){if(er=F.isActive=!!Nt&&Nt<1,Bn=!!vt&&vt<1,D=er!==Bn,ne=D||!!Nt!=!!vt,F.direction=Nt>vt?1:-1,F.progress=Nt,ne&&!Bi&&(N=Nt&&!vt?0:Nt===1?1:vt===1?2:3,L&&(H=!D&&te[N+1]!=="none"&&te[N+1]||te[N],j=i&&(H==="complete"||H==="reset"||H in i))),C&&(D||j)&&(j||f||!i)&&(is(C)?C(F):F.getTrailing(C).forEach(function(_e){return _e.endAnimation()})),L||(Te&&!Bi&&!Kv?(Te._dp._time-Te._start!==Te._time&&Te.render(Te._dp._time-Te._start),Te.resetTo?Te.resetTo("totalProgress",Nt,i._tTime/i._tDur):(Te.vars.totalProgress=Nt,Te.invalidate().restart())):i&&i.totalProgress(Nt,!!(Bi&&(xe||et)))),m){if(et&&g&&(Ce.style[g+M.os2]=nt),!Q)Ze(qm(_t+He*Nt));else if(ne){if(G=!et&&Nt>vt&&Me+1>Pt&&Pt+1>=Ha(U,M),I)if(!et&&(er||G)){var Z=Al(m,!0),J=Pt-pe;nk(m,$n,Z.top+(M===Yr?J:0)+Xr,Z.left+(M===Yr?0:J)+Xr)}else nk(m,Ce);Hh(er||G?Se:ve),Ye&&Nt<1&&er||Ze(_t+(Nt===1&&!G?He:0))}}w&&!Xe.tween&&!Bi&&!Kv&&We.restart(!0),a&&(D||E&&Nt&&(Nt<1||!Kw))&&__(a.targets).forEach(function(_e){return _e.classList[er||E?"add":"remove"](a.className)}),o&&!L&&!et&&o(F),ne&&!Bi?(L&&(j&&(H==="complete"?i.pause().totalProgress(1):H==="reset"?i.restart(!0).pause():H==="restart"?i.restart(!0):i[H]()),o&&o(F)),(D||!Kw)&&(c&&D&&qw(F,c),Y[N]&&qw(F,Y[N]),E&&(Nt===1?F.kill(!1,1):Y[N]=0),D||(N=Nt===1?1:3,Y[N]&&qw(F,Y[N]))),P&&!er&&Math.abs(F.getVelocity())>(Qm(P)?P:2500)&&(Em(F.callbackAnimation),Te?Te.progress(1):Em(i,H==="reverse"?1:!Nt,1))):L&&o&&!Bi&&o(F)}if(re){var de=b?Pt/b.duration()*(b._caScrollDist||0):Pt;Et(de+(oe._isFlipped?1:0)),re(de)}jt&&jt(-Pt/b.duration()*(b._caScrollDist||0))}},F.enable=function(et,Lt){F.enabled||(F.enabled=!0,oi(U,"resize",Zm),$||oi(U,"scroll",bd),ie&&oi(n,"refreshInit",ie),et!==!1&&(F.progress=Ae=0,Ge=z=ce=Ie()),Lt!==!1&&F.refresh())},F.getTween=function(et){return et&&Xe?Xe.tween:Te},F.setPositions=function(et,Lt,xt,Pt){if(b){var In=b.scrollTrigger,Nt=b.duration(),vt=In.end-In.start;et=In.start+vt*et/Nt,Lt=In.start+vt*Lt/Nt}F.refresh(!1,!1,{start:YN(et,xt&&!!F._startClamp),end:YN(Lt,xt&&!!F._endClamp)},Pt),F.update()},F.adjustPinSpacing=function(et){if(St&&et){var Lt=St.indexOf(M.d)+1;St[Lt]=parseFloat(St[Lt])+et+Xr,St[1]=parseFloat(St[1])+et+Xr,Hh(St)}},F.disable=function(et,Lt){if(F.enabled&&(et!==!1&&F.revert(!0,!0),F.enabled=F.isActive=!1,Lt||Te&&Te.pause(),ht=0,it&&(it.uncache=1),ie&&ii(n,"refreshInit",ie),We&&(We.pause(),Xe.tween&&Xe.tween.kill()&&(Xe.tween=0)),!$)){for(var xt=on.length;xt--;)if(on[xt].scroller===U&&on[xt]!==F)return;ii(U,"resize",Zm),$||ii(U,"scroll",bd)}},F.kill=function(et,Lt){F.disable(et,Lt),Te&&!Lt&&Te.kill(),l&&delete cb[l];var xt=on.indexOf(F);xt>=0&&on.splice(xt,1),xt===Zi&&Dx>0&&Zi--,xt=0,on.forEach(function(Pt){return Pt.scroller===F.scroller&&(xt=1)}),xt||es||(F.scroll.rec=0),i&&(i.scrollTrigger=null,et&&i.revert({kill:!1}),Lt||i.kill()),Be&&[Be,ye,oe,Ue].forEach(function(Pt){return Pt.parentNode&&Pt.parentNode.removeChild(Pt)}),Cg===F&&(Cg=0),m&&(it&&(it.uncache=1),xt=0,on.forEach(function(Pt){return Pt.pin===m&&xt++}),xt||(it.spacer=0)),r.onKill&&r.onKill(F)},on.push(F),F.enable(!1,!1),cn&&cn(F),i&&i.add&&!O){var rn=F.update;F.update=function(){F.update=rn,pe||Me||F.refresh()},gt.delayedCall(.01,F.update),O=.01,pe=Me=0}else F.refresh();m&&Qne()},n.register=function(r){return Qd||(gt=r||MG(),wG()&&window.document&&n.enable(),Qd=$m),Qd},n.defaults=function(r){if(r)for(var i in r)Zv[i]=r[i];return Zv},n.disable=function(r,i){$m=0,on.forEach(function(o){return o[i?"kill":"disable"](r)}),ii(mn,"wheel",bd),ii(fr,"scroll",bd),clearInterval(Jv),ii(fr,"touchcancel",Pa),ii($n,"touchstart",Pa),qv(ii,fr,"pointerdown,touchstart,mousedown",JN),qv(ii,fr,"pointerup,touchend,mouseup",KN),kS.kill(),$v(ii);for(var s=0;s<un.length;s+=3)Qv(ii,un[s],un[s+1]),Qv(ii,un[s],un[s+2])},n.enable=function(){if(mn=window,fr=document,ia=fr.documentElement,$n=fr.body,gt&&(__=gt.utils.toArray,Eg=gt.utils.clamp,ab=gt.core.context||Pa,Jw=gt.core.suppressOverwrites||Pa,UI=mn.history.scrollRestoration||"auto",ub=mn.pageYOffset,gt.core.globals("ScrollTrigger",n),$n)){$m=1,Uh=document.createElement("div"),Uh.style.height="100vh",Uh.style.position="absolute",LG(),Xne(),Br.register(gt),n.isTouch=Br.isTouch,pc=Br.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),ob=Br.isTouch===1,oi(mn,"wheel",bd),yG=[mn,fr,ia,$n],gt.matchMedia?(n.matchMedia=function(l){var c=gt.matchMedia(),u;for(u in l)c.add(u,l[u]);return c},gt.addEventListener("matchMediaInit",function(){return XI()}),gt.addEventListener("matchMediaRevert",function(){return DG()}),gt.addEventListener("matchMedia",function(){of(0,1),Vf("matchMedia")}),gt.matchMedia("(orientation: portrait)",function(){return Qw(),Qw})):console.warn("Requires GSAP 3.11.0 or later"),Qw(),oi(fr,"scroll",bd);var r=$n.style,i=r.borderTopStyle,s=gt.core.Animation.prototype,o,a;for(s.revert||Object.defineProperty(s,"revert",{value:function(){return this.time(-.01,!0)}}),r.borderTopStyle="solid",o=Al($n),Yr.m=Math.round(o.top+Yr.sc())||0,rs.m=Math.round(o.left+rs.sc())||0,i?r.borderTopStyle=i:r.removeProperty("border-top-style"),Jv=setInterval(QN,250),gt.delayedCall(.5,function(){return Kv=0}),oi(fr,"touchcancel",Pa),oi($n,"touchstart",Pa),qv(oi,fr,"pointerdown,touchstart,mousedown",JN),qv(oi,fr,"pointerup,touchend,mouseup",KN),sb=gt.utils.checkPrefix("transform"),Bx.push(sb),Qd=Li(),kS=gt.delayedCall(.2,of).pause(),Zd=[fr,"visibilitychange",function(){var l=mn.innerWidth,c=mn.innerHeight;fr.hidden?(WN=l,XN=c):(WN!==l||XN!==c)&&Zm()},fr,"DOMContentLoaded",of,mn,"load",of,mn,"resize",Zm],$v(oi),on.forEach(function(l){return l.enable(0,1)}),a=0;a<un.length;a+=3)Qv(ii,un[a],un[a+1]),Qv(ii,un[a],un[a+2])}},n.config=function(r){"limitCallbacks"in r&&(Kw=!!r.limitCallbacks);var i=r.syncInterval;i&&clearInterval(Jv)||(Jv=i)&&setInterval(QN,i),"ignoreMobileResize"in r&&(ob=n.isTouch===1&&r.ignoreMobileResize),"autoRefreshEvents"in r&&($v(ii)||$v(oi,r.autoRefreshEvents||"none"),SG=(r.autoRefreshEvents+"").indexOf("resize")===-1)},n.scrollerProxy=function(r,i){var s=gs(r),o=un.indexOf(s),a=zf(s);~o&&un.splice(o,a?6:2),i&&(a?Xa.unshift(mn,i,$n,i,ia,i):Xa.unshift(s,i))},n.clearMatchMedia=function(r){on.forEach(function(i){return i._ctx&&i._ctx.query===r&&i._ctx.kill(!0,!0)})},n.isInViewport=function(r,i,s){var o=(zs(r)?gs(r):r).getBoundingClientRect(),a=o[s?wf:Mf]*i||0;return s?o.right-a>0&&o.left+a<mn.innerWidth:o.bottom-a>0&&o.top+a<mn.innerHeight},n.positionInViewport=function(r,i,s){zs(r)&&(r=gs(r));var o=r.getBoundingClientRect(),a=o[s?wf:Mf],l=i==null?a/2:i in US?US[i]*a:~i.indexOf("%")?parseFloat(i)*a/100:parseFloat(i)||0;return s?(o.left+l)/mn.innerWidth:(o.top+l)/mn.innerHeight},n.killAll=function(r){if(on.slice(0).forEach(function(s){return s.vars.id!=="ScrollSmoother"&&s.kill()}),r!==!0){var i=Gf.killAll||[];Gf={},i.forEach(function(s){return s()})}},n}();ln.version="3.12.5";ln.saveStyles=function(n){return n?__(n).forEach(function(e){if(e&&e.style){var t=Us.indexOf(e);t>=0&&Us.splice(t,5),Us.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),gt.core.getCache(e),ab())}}):Us};ln.revert=function(n,e){return XI(!n,e)};ln.create=function(n,e){return new ln(n,e)};ln.refresh=function(n){return n?Zm():(Qd||ln.register())&&of(!0)};ln.update=function(n){return++un.cache&&Bl(n===!0?2:0)};ln.clearScrollMemory=BG;ln.maxScroll=function(n,e){return Ha(n,e?rs:Yr)};ln.getScrollFunc=function(n,e){return nu(gs(n),e?rs:Yr)};ln.getById=function(n){return cb[n]};ln.getAll=function(){return on.filter(function(n){return n.vars.id!=="ScrollSmoother"})};ln.isScrolling=function(){return!!ko};ln.snapDirectional=WI;ln.addEventListener=function(n,e){var t=Gf[n]||(Gf[n]=[]);~t.indexOf(e)||t.push(e)};ln.removeEventListener=function(n,e){var t=Gf[n],r=t&&t.indexOf(e);r>=0&&t.splice(r,1)};ln.batch=function(n,e){var t=[],r={},i=e.interval||.016,s=e.batchMax||1e9,o=function(c,u){var f=[],p=[],m=gt.delayedCall(i,function(){u(f,p),f=[],p=[]}).pause();return function(g){f.length||m.restart(!0),f.push(g.trigger),p.push(g),s<=f.length&&m.progress(1)}},a;for(a in e)r[a]=a.substr(0,2)==="on"&&is(e[a])&&a!=="onRefreshInit"?o(a,e[a]):e[a];return is(s)&&(s=s(),oi(ln,"refresh",function(){return s=e.batchMax()})),__(n).forEach(function(l){var c={};for(a in r)c[a]=r[a];c.trigger=l,t.push(ln.create(c))}),t};var ik=function(e,t,r,i){return t>i?e(i):t<0&&e(0),r>i?(i-t)/(r-t):r<0?t/(t-r):1},eM=function n(e,t){t===!0?e.style.removeProperty("touch-action"):e.style.touchAction=t===!0?"auto":t?"pan-"+t+(Br.isTouch?" pinch-zoom":""):"none",e===ia&&n($n,t)},ry={auto:1,scroll:1},rre=function(e){var t=e.event,r=e.target,i=e.axis,s=(t.changedTouches?t.changedTouches[0]:t).target,o=s._gsap||gt.core.getCache(s),a=Li(),l;if(!o._isScrollT||a-o._isScrollT>2e3){for(;s&&s!==$n&&(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth||!(ry[(l=bo(s)).overflowY]||ry[l.overflowX]));)s=s.parentNode;o._isScroll=s&&s!==r&&!zf(s)&&(ry[(l=bo(s)).overflowY]||ry[l.overflowX]),o._isScrollT=a}(o._isScroll||i==="x")&&(t.stopPropagation(),t._gsapAllow=!0)},kG=function(e,t,r,i){return Br.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:t,onWheel:i=i&&rre,onPress:i,onDrag:i,onScroll:i,onEnable:function(){return r&&oi(fr,Br.eventTypes[0],ok,!1,!0)},onDisable:function(){return ii(fr,Br.eventTypes[0],ok,!0)}})},ire=/(input|label|select|textarea)/i,sk,ok=function(e){var t=ire.test(e.target.tagName);(t||sk)&&(e._gsapAllow=!0,sk=t)},sre=function(e){ju(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var t=e,r=t.normalizeScrollX,i=t.momentum,s=t.allowNestedScroll,o=t.onRelease,a,l,c=gs(e.target)||ia,u=gt.core.globals().ScrollSmoother,f=u&&u.get(),p=pc&&(e.content&&gs(e.content)||f&&e.content!==!1&&!f.smooth()&&f.content()),m=nu(c,Yr),g=nu(c,rs),v=1,y=(Br.isTouch&&mn.visualViewport?mn.visualViewport.scale*mn.visualViewport.width:mn.outerWidth)/mn.innerWidth,_=0,S=is(i)?function(){return i(a)}:function(){return i||2.8},E,w,I=kG(c,e.type,!0,s),T=function(){return w=!1},b=Pa,P=Pa,C=function(){l=Ha(c,Yr),P=Eg(pc?1:0,l),r&&(b=Eg(0,Ha(c,rs))),E=Tf},M=function(){p._gsap.y=qm(parseFloat(p._gsap.y)+m.offset)+"px",p.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(p._gsap.y)+", 0, 1)",m.offset=m.cacheID=0},L=function(){if(w){requestAnimationFrame(T);var k=qm(a.deltaY/2),K=P(m.v-k);if(p&&K!==m.v+m.offset){m.offset=K-m.v;var F=qm((parseFloat(p&&p._gsap.y)||0)-m.offset);p.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+F+", 0, 1)",p._gsap.y=F+"px",m.cacheID=un.cache,Bl()}return!0}m.offset&&M(),w=!0},U,X,$,Q,Y=function(){C(),U.isActive()&&U.vars.scrollY>l&&(m()>l?U.progress(1)&&m(l):U.resetTo("scrollY",l))};return p&&gt.set(p,{y:"+=0"}),e.ignoreCheck=function(te){return pc&&te.type==="touchmove"&&L()||v>1.05&&te.type!=="touchstart"||a.isGesturing||te.touches&&te.touches.length>1},e.onPress=function(){w=!1;var te=v;v=qm((mn.visualViewport&&mn.visualViewport.scale||1)/y),U.pause(),te!==v&&eM(c,v>1.01?!0:r?!1:"x"),X=g(),$=m(),C(),E=Tf},e.onRelease=e.onGestureStart=function(te,k){if(m.offset&&M(),!k)Q.restart(!0);else{un.cache++;var K=S(),F,ie;r&&(F=g(),ie=F+K*.05*-te.velocityX/.227,K*=ik(g,F,ie,Ha(c,rs)),U.vars.scrollX=b(ie)),F=m(),ie=F+K*.05*-te.velocityY/.227,K*=ik(m,F,ie,Ha(c,Yr)),U.vars.scrollY=P(ie),U.invalidate().duration(K).play(.01),(pc&&U.vars.scrollY>=l||F>=l-1)&&gt.to({},{onUpdate:Y,duration:K})}o&&o(te)},e.onWheel=function(){U._ts&&U.pause(),Li()-_>1e3&&(E=0,_=Li())},e.onChange=function(te,k,K,F,ie){if(Tf!==E&&C(),k&&r&&g(b(F[2]===k?X+(te.startX-te.x):g()+k-F[1])),K){m.offset&&M();var me=ie[2]===K,Ne=me?$+te.startY-te.y:m()+K-ie[1],ce=P(Ne);me&&Ne!==ce&&($+=ce-Ne),m(ce)}(K||k)&&Bl()},e.onEnable=function(){eM(c,r?!1:"x"),ln.addEventListener("refresh",Y),oi(mn,"resize",Y),m.smooth&&(m.target.style.scrollBehavior="auto",m.smooth=g.smooth=!1),I.enable()},e.onDisable=function(){eM(c,!0),ii(mn,"resize",Y),ln.removeEventListener("refresh",Y),I.kill()},e.lockAxis=e.lockAxis!==!1,a=new Br(e),a.iOS=pc,pc&&!m()&&m(1),pc&&gt.ticker.add(Pa),Q=a._dc,U=gt.to(a,{ease:"power4",paused:!0,inherit:!1,scrollX:r?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:NG(m,m(),function(){return U.pause()})},onUpdate:Bl,onComplete:Q.vars.onComplete}),a};ln.sort=function(n){return on.sort(n||function(e,t){return(e.vars.refreshPriority||0)*-1e6+e.start-(t.start+(t.vars.refreshPriority||0)*-1e6)})};ln.observe=function(n){return new Br(n)};ln.normalizeScroll=function(n){if(typeof n>"u")return qi;if(n===!0&&qi)return qi.enable();if(n===!1){qi&&qi.kill(),qi=n;return}var e=n instanceof Br?n:sre(n);return qi&&qi.target===e.target&&qi.kill(),zf(e.target)&&(qi=e),e};ln.core={_getVelocityProp:ib,_inputObserver:kG,_scrollers:un,_proxies:Xa,bridge:{ss:function(){ko||Vf("scrollStart"),ko=Li()},ref:function(){return Bi}}};MG()&&gt.registerPlugin(ln);const ore=["Store","Mac","iPhone","Support"],ak=[{id:1,textLists:["Enter A17 Pro.","Gamechanging chip.","Groundbreaking performance."],video:xne,videoDuration:4},{id:2,textLists:["Titanium.","So strong. So light. So Pro."],video:Sne,videoDuration:5},{id:3,textLists:["iPhone 15 Pro Max has the","longest optical zoom in","iPhone ever. Far out."],video:Ene,videoDuration:2},{id:4,textLists:["All-new Action button.","What will yours do?."],video:Ane,videoDuration:3.63}],are=[{id:1,title:"iPhone 15 Pro in Natural Titanium",color:["#8F8A81","#ffe7b9","#6f6c64"],img:fG},{id:2,title:"iPhone 15 Pro in Blue Titanium",color:["#53596E","#6395ff","#21242e"],img:Lne},{id:3,title:"iPhone 15 Pro in White Titanium",color:["#C9C8C2","#ffffff","#C9C8C2"],img:Nne},{id:4,title:"iPhone 15 Pro in Black Titanium",color:["#454749","#3b3b3b","#181819"],img:kne}],lre=[{label:'6.1"',value:"small"},{label:'6.7"',value:"large"}],lk=["Privacy Policy","Terms of Use","Sales Policy","Legal","Site Map"];hr.registerPlugin(ln);const cre=()=>{const n=se.useRef([]),e=se.useRef([]),t=se.useRef([]),[r,i]=se.useState({startPlay:!1,videoId:0,isLastVideo:!1,isPlaying:!1}),[s,o]=se.useState([]),{isLastVideo:a,videoId:l,startPlay:c,isPlaying:u}=r;hu(()=>{hr.to("#slider",{transform:`translateX(${-97.2*l}%)`,duration:2,ease:"power2.inOut",stagger:.1}),hr.to("#video",{scrollTrigger:{trigger:"#video",toggleActions:"restart none none none"},onComplete:()=>{i(m=>({...m,startPlay:!0,isPlaying:!0}))}})},[l]),se.useEffect(()=>(s.length>3&&(u?c&&n.current[l].play():n.current[l].pause()),()=>{}),[c,l,u,s]);const f=(m,g)=>o(v=>[...v,g]);se.useEffect(()=>{let m=0,g=e.current;if(g[l]){let v=hr.to(g[l],{onUpdate:()=>{const _=Math.ceil(v.progress()*100);_!=m&&(m=_,hr.to(t.current[l],{width:window.innerWidth<760||window.innerWidth<1200?"10vw":"4vw"}),hr.to(g[l],{width:_+"%",backgroundColor:"white"}))},onComplete:()=>{u&&(hr.to(t.current[l],{width:"12px"}),hr.to(g[l],{backgroundColor:"#afafaf"}))}});l===0&&v.restart();const y=()=>{v.progress(n.current[l].currentTime/ak[l].videoDuration)};u?hr.ticker.add(y):hr.ticker.remove(y)}return()=>{}},[l,c,u]);const p=(m,g)=>{switch(m){case"video-end":i(v=>({...v,videoId:g+1}));break;case"video-last":i(v=>({...v,isLastVideo:!0}));break;case"video-reset":i(v=>({...v,isLastVideo:!1,videoId:0}));break;case"play":i(v=>({...v,isPlaying:!v.isPlaying}));break;case"pause":i(v=>({...v,isPlaying:!v.isPlaying}));break;default:return r}};return ae.jsxs(ae.Fragment,{children:[ae.jsx("div",{className:"flex items-center ",children:ak.map((m,g)=>ae.jsx("div",{id:"slider",className:"sm:pr-20 pr-10 ",children:ae.jsxs("div",{className:"video-carousel_container ",children:[ae.jsx("div",{className:"w-full h-full flex-center bg-black overflow-hidden rounded-3xl ",children:ae.jsx("video",{id:"video",playsInline:!0,preload:"auto",muted:!0,className:`${m.id===2&&"translate-x-44"} pointer-events-none `,ref:v=>n.current[g]=v,onEnded:()=>g!==3?p("video-end",g):p("video-last"),onPlay:()=>{i(v=>({...v,isPlaying:!0}))},onLoadedMetadata:v=>f(g,v),children:ae.jsx("source",{src:m.video,type:"video/mp4"})})}),ae.jsx("div",{className:"absolute top-12 left-[5%] z-10",children:m.textLists.map(v=>ae.jsx("p",{className:"md:text-2xl text-xl font-medium",children:v},v))})]})},m.id))}),ae.jsxs("div",{className:"relative flex-center mt-10",children:[ae.jsx("div",{className:"flex-center  py-5 px-7 bg-gray-300 backdrop-blur rounded-full",children:n.current.map((m,g)=>ae.jsx("span",{ref:v=>t.current[g]=v,className:"mx-2 w-3 h-3 rounded-full cursor-pointer bg-gray-200 hover:bg-gray-400 relative ",children:ae.jsx("span",{className:"absolute h-full w-full rounded-full",ref:v=>e.current[g]=v})},g))}),ae.jsx("button",{className:"control-btn",children:ae.jsx("img",{src:a?Pne:u?Bne:Dne,alt:a?"replay":u?"pause":"play",onClick:a?()=>p("video-reset"):u?()=>p("pause"):()=>p("play")})})]})]})},ure=()=>(hu(()=>{hr.to("#title",{opacity:1,y:0}),hr.to(".link",{opacity:1,y:0,duration:1,stagger:.25})},[]),ae.jsx("section",{id:"highlights",className:"w-screen overflow-hidden h-full common-padding bg-zinc",children:ae.jsxs("div",{className:"screen-max-width ",children:[ae.jsxs("div",{className:"mb-12 w-full  justify-between md:flex items-center",children:[ae.jsx("h1",{id:"title",className:"section-heading",children:"Get the highlights"}),ae.jsxs("div",{className:"flex flex-wrap items-end gap-5",children:[ae.jsxs("p",{className:"link",children:["Watch the film"," ",ae.jsx("img",{src:Rne,alt:"watch icon",className:"ml-2"})]}),ae.jsxs("p",{className:"link",children:["Watch the event"," ",ae.jsx("img",{src:Ine,alt:"right icon",className:"ml-2"})]})]})]}),ae.jsx(cre,{})]})})),fre=()=>ae.jsx("header",{className:"w-full py-5 sm:px-10 px-5 flex justify-between items-center",children:ae.jsxs("nav",{className:"flex w-full screen-max-width",children:[ae.jsx("img",{src:Tne,alt:"apple",width:14,height:18}),ae.jsx("div",{className:"flex flex-1 justify-center max-sm:hidden",children:ore.map(n=>ae.jsx("div",{className:"px-5 text-sm cursor-pointer text-gray hover:text-white transition-all",children:n},n))}),ae.jsxs("div",{className:"flex items-baseline gap-7 max-sm:justify-end max-sm:flex-1",children:[ae.jsx("img",{src:Cne,alt:"search",width:18,height:18}),ae.jsx("img",{src:bne,alt:"bag",width:18,height:18})]})]})});function ha(){return ha=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ha.apply(null,arguments)}/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Up="168",Yu={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Ju={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},FG=0,db=1,OG=2,dre=3,UG=0,fE=1,bg=2,ea=3,$a=0,as=1,vs=2,ja=0,Cf=1,hb=2,pb=3,mb=4,HG=5,wc=100,zG=101,GG=102,VG=103,WG=104,XG=200,jG=201,YG=202,JG=203,HS=204,zS=205,KG=206,$G=207,qG=208,QG=209,ZG=210,e5=211,t5=212,n5=213,r5=214,i5=0,s5=1,o5=2,y_=3,a5=4,l5=5,c5=6,u5=7,Z_=0,f5=1,d5=2,Ya=0,h5=1,p5=2,m5=3,jI=4,g5=5,_5=6,v5=7,gb="attached",y5="detached",ru=300,qa=301,iu=302,vp=303,x_=304,Hp=306,su=1e3,Lr=1001,yp=1002,$r=1003,dE=1004,hre=1004,af=1005,pre=1005,Sn=1006,zh=1007,mre=1007,Bo=1008,_b=1008,Is=1009,hE=1010,pE=1011,xp=1012,e0=1013,Qa=1014,ar=1015,qr=1016,mE=1017,gE=1018,Wf=1020,YI=35902,JI=1021,KI=1022,Nr=1023,$I=1024,qI=1025,bf=1026,Xf=1027,t0=1028,n0=1029,QI=1030,_E=1031,gre=1032,vE=1033,Rg=33776,Ig=33777,Pg=33778,Dg=33779,GS=35840,VS=35841,WS=35842,XS=35843,jS=36196,YS=37492,JS=37496,KS=37808,$S=37809,qS=37810,QS=37811,ZS=37812,e1=37813,t1=37814,n1=37815,r1=37816,i1=37817,s1=37818,o1=37819,a1=37820,l1=37821,Bg=36492,c1=36494,u1=36495,ZI=36283,f1=36284,d1=36285,h1=36286,x5=2200,S5=2201,E5=2202,Sp=2300,Ep=2301,Nx=2302,lf=2400,cf=2401,S_=2402,yE=2500,eP=2501,A5=0,tP=1,p1=2,w5=3200,M5=3201,_re=3202,vre=3203,pu=0,T5=1,wl="",Ws="srgb",zo="srgb-linear",xE="display-p3",r0="display-p3-linear",E_="linear",Wn="srgb",A_="rec709",w_="p3",yre=0,Ku=7680,xre=7681,Sre=7682,Ere=7683,Are=34055,wre=34056,Mre=5386,Tre=512,Cre=513,bre=514,Rre=515,Ire=516,Pre=517,Dre=518,vb=519,C5=512,b5=513,R5=514,nP=515,I5=516,P5=517,D5=518,B5=519,M_=35044,Bre=35048,Lre=35040,Nre=35045,kre=35049,Fre=35041,Ore=35046,Ure=35050,Hre=35042,zre="100",yb="300 es",za=2e3,T_=2001;class pa{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const Ii=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let ck=1234567;const Rf=Math.PI/180,Ap=180/Math.PI;function no(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Ii[n&255]+Ii[n>>8&255]+Ii[n>>16&255]+Ii[n>>24&255]+"-"+Ii[e&255]+Ii[e>>8&255]+"-"+Ii[e>>16&15|64]+Ii[e>>24&255]+"-"+Ii[t&63|128]+Ii[t>>8&255]+"-"+Ii[t>>16&255]+Ii[t>>24&255]+Ii[r&255]+Ii[r>>8&255]+Ii[r>>16&255]+Ii[r>>24&255]).toLowerCase()}function Mr(n,e,t){return Math.max(e,Math.min(t,n))}function rP(n,e){return(n%e+e)%e}function Gre(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function Vre(n,e,t){return n!==e?(t-n)/(e-n):0}function Lg(n,e,t){return(1-t)*n+t*e}function Wre(n,e,t,r){return Lg(n,e,1-Math.exp(-t*r))}function Xre(n,e=1){return e-Math.abs(rP(n,e*2)-e)}function jre(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function Yre(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function Jre(n,e){return n+Math.floor(Math.random()*(e-n+1))}function Kre(n,e){return n+Math.random()*(e-n)}function $re(n){return n*(.5-Math.random())}function qre(n){n!==void 0&&(ck=n);let e=ck+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Qre(n){return n*Rf}function Zre(n){return n*Ap}function eie(n){return(n&n-1)===0&&n!==0}function tie(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function nie(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function rie(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+r)/2),u=o((e+r)/2),f=s((e-r)/2),p=o((e-r)/2),m=s((r-e)/2),g=o((r-e)/2);switch(i){case"XYX":n.set(a*u,l*f,l*p,a*c);break;case"YZY":n.set(l*p,a*u,l*f,a*c);break;case"ZXZ":n.set(l*f,l*p,a*u,a*c);break;case"XZX":n.set(a*u,l*g,l*m,a*c);break;case"YXY":n.set(l*m,a*u,l*g,a*c);break;case"ZYZ":n.set(l*g,l*m,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function ss(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Kt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const L5={DEG2RAD:Rf,RAD2DEG:Ap,generateUUID:no,clamp:Mr,euclideanModulo:rP,mapLinear:Gre,inverseLerp:Vre,lerp:Lg,damp:Wre,pingpong:Xre,smoothstep:jre,smootherstep:Yre,randInt:Jre,randFloat:Kre,randFloatSpread:$re,seededRandom:qre,degToRad:Qre,radToDeg:Zre,isPowerOfTwo:eie,ceilPowerOfTwo:tie,floorPowerOfTwo:nie,setQuaternionFromProperEuler:rie,normalize:Kt,denormalize:ss};class Le{constructor(e=0,t=0){Le.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Mr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Jt{constructor(e,t,r,i,s,o,a,l,c){Jt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,c)}set(e,t,r,i,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=r,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],u=r[4],f=r[7],p=r[2],m=r[5],g=r[8],v=i[0],y=i[3],_=i[6],S=i[1],E=i[4],w=i[7],I=i[2],T=i[5],b=i[8];return s[0]=o*v+a*S+l*I,s[3]=o*y+a*E+l*T,s[6]=o*_+a*w+l*b,s[1]=c*v+u*S+f*I,s[4]=c*y+u*E+f*T,s[7]=c*_+u*w+f*b,s[2]=p*v+m*S+g*I,s[5]=p*y+m*E+g*T,s[8]=p*_+m*w+g*b,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-r*s*u+r*a*l+i*s*c-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=u*o-a*c,p=a*l-u*s,m=c*s-o*l,g=t*f+r*p+i*m;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/g;return e[0]=f*v,e[1]=(i*c-u*r)*v,e[2]=(a*r-i*o)*v,e[3]=p*v,e[4]=(u*t-i*l)*v,e[5]=(i*s-a*t)*v,e[6]=m*v,e[7]=(r*l-c*t)*v,e[8]=(o*t-r*s)*v,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-i*c,i*l,-i*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(tM.makeScale(e,t)),this}rotate(e){return this.premultiply(tM.makeRotation(-e)),this}translate(e,t){return this.premultiply(tM.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const tM=new Jt;function N5(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const iie={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Sh(n,e){return new iie[n](e)}function C_(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function k5(){const n=C_("canvas");return n.style.display="block",n}const uk={};function Gh(n){n in uk||(uk[n]=!0,console.warn(n))}function sie(n,e,t){return new Promise(function(r,i){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:i();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:r()}}setTimeout(s,t)})}const fk=new Jt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),dk=new Jt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Am={[zo]:{transfer:E_,primaries:A_,luminanceCoefficients:[.2126,.7152,.0722],toReference:n=>n,fromReference:n=>n},[Ws]:{transfer:Wn,primaries:A_,luminanceCoefficients:[.2126,.7152,.0722],toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[r0]:{transfer:E_,primaries:w_,luminanceCoefficients:[.2289,.6917,.0793],toReference:n=>n.applyMatrix3(dk),fromReference:n=>n.applyMatrix3(fk)},[xE]:{transfer:Wn,primaries:w_,luminanceCoefficients:[.2289,.6917,.0793],toReference:n=>n.convertSRGBToLinear().applyMatrix3(dk),fromReference:n=>n.applyMatrix3(fk).convertLinearToSRGB()}},oie=new Set([zo,r0]),Rn={enabled:!0,_workingColorSpace:zo,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!oie.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=Am[e].toReference,i=Am[t].fromReference;return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return Am[n].primaries},getTransfer:function(n){return n===wl?E_:Am[n].transfer},getLuminanceCoefficients:function(n,e=this._workingColorSpace){return n.fromArray(Am[e].luminanceCoefficients)}};function Vh(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function nM(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Rd;class F5{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Rd===void 0&&(Rd=C_("canvas")),Rd.width=e.width,Rd.height=e.height;const r=Rd.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Rd}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=C_("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Vh(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Vh(t[r]/255)*255):t[r]=Vh(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let aie=0;class uf{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:aie++}),this.uuid=no(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(rM(i[o].image)):s.push(rM(i[o]))}else s=rM(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function rM(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?F5.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let lie=0;class En extends pa{constructor(e=En.DEFAULT_IMAGE,t=En.DEFAULT_MAPPING,r=Lr,i=Lr,s=Sn,o=Bo,a=Nr,l=Is,c=En.DEFAULT_ANISOTROPY,u=wl){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:lie++}),this.uuid=no(),this.name="",this.source=new uf(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Le(0,0),this.repeat=new Le(1,1),this.center=new Le(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Jt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==ru)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case su:e.x=e.x-Math.floor(e.x);break;case Lr:e.x=e.x<0?0:1;break;case yp:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case su:e.y=e.y-Math.floor(e.y);break;case Lr:e.y=e.y<0?0:1;break;case yp:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}En.DEFAULT_IMAGE=null;En.DEFAULT_MAPPING=ru;En.DEFAULT_ANISOTROPY=1;class Dn{constructor(e=0,t=0,r=0,i=1){Dn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,c=l[0],u=l[4],f=l[8],p=l[1],m=l[5],g=l[9],v=l[2],y=l[6],_=l[10];if(Math.abs(u-p)<.01&&Math.abs(f-v)<.01&&Math.abs(g-y)<.01){if(Math.abs(u+p)<.1&&Math.abs(f+v)<.1&&Math.abs(g+y)<.1&&Math.abs(c+m+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const E=(c+1)/2,w=(m+1)/2,I=(_+1)/2,T=(u+p)/4,b=(f+v)/4,P=(g+y)/4;return E>w&&E>I?E<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(E),i=T/r,s=b/r):w>I?w<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(w),r=T/i,s=P/i):I<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(I),r=b/s,i=P/s),this.set(r,i,s,t),this}let S=Math.sqrt((y-g)*(y-g)+(f-v)*(f-v)+(p-u)*(p-u));return Math.abs(S)<.001&&(S=1),this.x=(y-g)/S,this.y=(f-v)/S,this.z=(p-u)/S,this.w=Math.acos((c+m+_-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class O5 extends pa{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Dn(0,0,e,t),this.scissorTest=!1,this.viewport=new Dn(0,0,e,t);const i={width:e,height:t,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Sn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const s=new En(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);s.flipY=!1,s.generateMipmaps=r.generateMipmaps,s.internalFormat=r.internalFormat,this.textures=[];const o=r.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let r=0,i=e.textures.length;r<i;r++)this.textures[r]=e.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new uf(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ps extends O5{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class SE extends En{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=$r,this.minFilter=$r,this.wrapR=Lr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class cie extends Ps{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new SE(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class iP extends En{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=$r,this.minFilter=$r,this.wrapR=Lr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class uie extends Ps{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new iP(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class ui{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],c=r[i+1],u=r[i+2],f=r[i+3];const p=s[o+0],m=s[o+1],g=s[o+2],v=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=f;return}if(a===1){e[t+0]=p,e[t+1]=m,e[t+2]=g,e[t+3]=v;return}if(f!==v||l!==p||c!==m||u!==g){let y=1-a;const _=l*p+c*m+u*g+f*v,S=_>=0?1:-1,E=1-_*_;if(E>Number.EPSILON){const I=Math.sqrt(E),T=Math.atan2(I,_*S);y=Math.sin(y*T)/I,a=Math.sin(a*T)/I}const w=a*S;if(l=l*y+p*w,c=c*y+m*w,u=u*y+g*w,f=f*y+v*w,y===1-a){const I=1/Math.sqrt(l*l+c*c+u*u+f*f);l*=I,c*=I,u*=I,f*=I}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=f}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],c=r[i+2],u=r[i+3],f=s[o],p=s[o+1],m=s[o+2],g=s[o+3];return e[t]=a*g+u*f+l*m-c*p,e[t+1]=l*g+u*p+c*f-a*m,e[t+2]=c*g+u*m+a*p-l*f,e[t+3]=u*g-a*f-l*p-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(i/2),f=a(s/2),p=l(r/2),m=l(i/2),g=l(s/2);switch(o){case"XYZ":this._x=p*u*f+c*m*g,this._y=c*m*f-p*u*g,this._z=c*u*g+p*m*f,this._w=c*u*f-p*m*g;break;case"YXZ":this._x=p*u*f+c*m*g,this._y=c*m*f-p*u*g,this._z=c*u*g-p*m*f,this._w=c*u*f+p*m*g;break;case"ZXY":this._x=p*u*f-c*m*g,this._y=c*m*f+p*u*g,this._z=c*u*g+p*m*f,this._w=c*u*f-p*m*g;break;case"ZYX":this._x=p*u*f-c*m*g,this._y=c*m*f+p*u*g,this._z=c*u*g-p*m*f,this._w=c*u*f+p*m*g;break;case"YZX":this._x=p*u*f+c*m*g,this._y=c*m*f+p*u*g,this._z=c*u*g-p*m*f,this._w=c*u*f-p*m*g;break;case"XZY":this._x=p*u*f-c*m*g,this._y=c*m*f-p*u*g,this._z=c*u*g+p*m*f,this._w=c*u*f+p*m*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],f=t[10],p=r+a+f;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(u-l)*m,this._y=(s-c)*m,this._z=(o-i)*m}else if(r>a&&r>f){const m=2*Math.sqrt(1+r-a-f);this._w=(u-l)/m,this._x=.25*m,this._y=(i+o)/m,this._z=(s+c)/m}else if(a>f){const m=2*Math.sqrt(1+a-r-f);this._w=(s-c)/m,this._x=(i+o)/m,this._y=.25*m,this._z=(l+u)/m}else{const m=2*Math.sqrt(1+f-r-a);this._w=(o-i)/m,this._x=(s+c)/m,this._y=(l+u)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Mr(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=r*u+o*a+i*c-s*l,this._y=i*u+o*l+s*a-r*c,this._z=s*u+o*c+r*l-i*a,this._w=o*u-r*a-i*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*r+t*this._x,this._y=m*i+t*this._y,this._z=m*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),f=Math.sin((1-t)*u)/c,p=Math.sin(t*u)/c;return this._w=o*f+this._w*p,this._x=r*f+this._x*p,this._y=i*f+this._y*p,this._z=s*f+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),s=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class W{constructor(e=0,t=0,r=0){W.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(hk.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(hk.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*i-a*r),u=2*(a*t-s*i),f=2*(s*r-o*t);return this.x=t+l*c+o*f-a*u,this.y=r+l*u+a*c-s*f,this.z=i+l*f+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return iM.copy(this).projectOnVector(e),this.sub(iM)}reflect(e){return this.sub(iM.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Mr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,r=Math.sqrt(1-t*t);return this.x=r*Math.cos(e),this.y=t,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const iM=new W,hk=new ui;class Ui{constructor(e=new W(1/0,1/0,1/0),t=new W(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(Yo.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(Yo.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Yo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Yo):Yo.fromBufferAttribute(s,o),Yo.applyMatrix4(e.matrixWorld),this.expandByPoint(Yo);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),iy.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),iy.copy(r.boundingBox)),iy.applyMatrix4(e.matrixWorld),this.union(iy)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Yo),Yo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(wm),sy.subVectors(this.max,wm),Id.subVectors(e.a,wm),Pd.subVectors(e.b,wm),Dd.subVectors(e.c,wm),ic.subVectors(Pd,Id),sc.subVectors(Dd,Pd),Ru.subVectors(Id,Dd);let t=[0,-ic.z,ic.y,0,-sc.z,sc.y,0,-Ru.z,Ru.y,ic.z,0,-ic.x,sc.z,0,-sc.x,Ru.z,0,-Ru.x,-ic.y,ic.x,0,-sc.y,sc.x,0,-Ru.y,Ru.x,0];return!sM(t,Id,Pd,Dd,sy)||(t=[1,0,0,0,1,0,0,0,1],!sM(t,Id,Pd,Dd,sy))?!1:(oy.crossVectors(ic,sc),t=[oy.x,oy.y,oy.z],sM(t,Id,Pd,Dd,sy))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Yo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Yo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ol[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ol[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ol[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ol[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ol[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ol[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ol[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ol[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ol),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ol=[new W,new W,new W,new W,new W,new W,new W,new W],Yo=new W,iy=new Ui,Id=new W,Pd=new W,Dd=new W,ic=new W,sc=new W,Ru=new W,wm=new W,sy=new W,oy=new W,Iu=new W;function sM(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){Iu.fromArray(n,s);const a=i.x*Math.abs(Iu.x)+i.y*Math.abs(Iu.y)+i.z*Math.abs(Iu.z),l=e.dot(Iu),c=t.dot(Iu),u=r.dot(Iu);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const fie=new Ui,Mm=new W,oM=new W;class xi{constructor(e=new W,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):fie.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Mm.subVectors(e,this.center);const t=Mm.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(Mm,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(oM.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Mm.copy(e.center).add(oM)),this.expandByPoint(Mm.copy(e.center).sub(oM))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const al=new W,aM=new W,ay=new W,oc=new W,lM=new W,ly=new W,cM=new W;class od{constructor(e=new W,t=new W(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,al)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=al.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(al.copy(this.origin).addScaledVector(this.direction,t),al.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){aM.copy(e).add(t).multiplyScalar(.5),ay.copy(t).sub(e).normalize(),oc.copy(this.origin).sub(aM);const s=e.distanceTo(t)*.5,o=-this.direction.dot(ay),a=oc.dot(this.direction),l=-oc.dot(ay),c=oc.lengthSq(),u=Math.abs(1-o*o);let f,p,m,g;if(u>0)if(f=o*l-a,p=o*a-l,g=s*u,f>=0)if(p>=-g)if(p<=g){const v=1/u;f*=v,p*=v,m=f*(f+o*p+2*a)+p*(o*f+p+2*l)+c}else p=s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;else p=-s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;else p<=-g?(f=Math.max(0,-(-o*s+a)),p=f>0?-s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+c):p<=g?(f=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+c):(f=Math.max(0,-(o*s+a)),p=f>0?s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+c);else p=o>0?-s:s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,f),i&&i.copy(aM).addScaledVector(ay,p),m}intersectSphere(e,t){al.subVectors(e.center,this.origin);const r=al.dot(this.direction),i=al.dot(al)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,p=this.origin;return c>=0?(r=(e.min.x-p.x)*c,i=(e.max.x-p.x)*c):(r=(e.max.x-p.x)*c,i=(e.min.x-p.x)*c),u>=0?(s=(e.min.y-p.y)*u,o=(e.max.y-p.y)*u):(s=(e.max.y-p.y)*u,o=(e.min.y-p.y)*u),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),f>=0?(a=(e.min.z-p.z)*f,l=(e.max.z-p.z)*f):(a=(e.max.z-p.z)*f,l=(e.min.z-p.z)*f),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,al)!==null}intersectTriangle(e,t,r,i,s){lM.subVectors(t,e),ly.subVectors(r,e),cM.crossVectors(lM,ly);let o=this.direction.dot(cM),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;oc.subVectors(this.origin,e);const l=a*this.direction.dot(ly.crossVectors(oc,ly));if(l<0)return null;const c=a*this.direction.dot(lM.cross(oc));if(c<0||l+c>o)return null;const u=-a*oc.dot(cM);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Rt{constructor(e,t,r,i,s,o,a,l,c,u,f,p,m,g,v,y){Rt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,c,u,f,p,m,g,v,y)}set(e,t,r,i,s,o,a,l,c,u,f,p,m,g,v,y){const _=this.elements;return _[0]=e,_[4]=t,_[8]=r,_[12]=i,_[1]=s,_[5]=o,_[9]=a,_[13]=l,_[2]=c,_[6]=u,_[10]=f,_[14]=p,_[3]=m,_[7]=g,_[11]=v,_[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Rt().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/Bd.setFromMatrixColumn(e,0).length(),s=1/Bd.setFromMatrixColumn(e,1).length(),o=1/Bd.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const p=o*u,m=o*f,g=a*u,v=a*f;t[0]=l*u,t[4]=-l*f,t[8]=c,t[1]=m+g*c,t[5]=p-v*c,t[9]=-a*l,t[2]=v-p*c,t[6]=g+m*c,t[10]=o*l}else if(e.order==="YXZ"){const p=l*u,m=l*f,g=c*u,v=c*f;t[0]=p+v*a,t[4]=g*a-m,t[8]=o*c,t[1]=o*f,t[5]=o*u,t[9]=-a,t[2]=m*a-g,t[6]=v+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*u,m=l*f,g=c*u,v=c*f;t[0]=p-v*a,t[4]=-o*f,t[8]=g+m*a,t[1]=m+g*a,t[5]=o*u,t[9]=v-p*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*u,m=o*f,g=a*u,v=a*f;t[0]=l*u,t[4]=g*c-m,t[8]=p*c+v,t[1]=l*f,t[5]=v*c+p,t[9]=m*c-g,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*c,g=a*l,v=a*c;t[0]=l*u,t[4]=v-p*f,t[8]=g*f+m,t[1]=f,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=m*f+g,t[10]=p-v*f}else if(e.order==="XZY"){const p=o*l,m=o*c,g=a*l,v=a*c;t[0]=l*u,t[4]=-f,t[8]=c*u,t[1]=p*f+v,t[5]=o*u,t[9]=m*f-g,t[2]=g*f-m,t[6]=a*u,t[10]=v*f+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(die,e,hie)}lookAt(e,t,r){const i=this.elements;return Fs.subVectors(e,t),Fs.lengthSq()===0&&(Fs.z=1),Fs.normalize(),ac.crossVectors(r,Fs),ac.lengthSq()===0&&(Math.abs(r.z)===1?Fs.x+=1e-4:Fs.z+=1e-4,Fs.normalize(),ac.crossVectors(r,Fs)),ac.normalize(),cy.crossVectors(Fs,ac),i[0]=ac.x,i[4]=cy.x,i[8]=Fs.x,i[1]=ac.y,i[5]=cy.y,i[9]=Fs.y,i[2]=ac.z,i[6]=cy.z,i[10]=Fs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],u=r[1],f=r[5],p=r[9],m=r[13],g=r[2],v=r[6],y=r[10],_=r[14],S=r[3],E=r[7],w=r[11],I=r[15],T=i[0],b=i[4],P=i[8],C=i[12],M=i[1],L=i[5],U=i[9],X=i[13],$=i[2],Q=i[6],Y=i[10],te=i[14],k=i[3],K=i[7],F=i[11],ie=i[15];return s[0]=o*T+a*M+l*$+c*k,s[4]=o*b+a*L+l*Q+c*K,s[8]=o*P+a*U+l*Y+c*F,s[12]=o*C+a*X+l*te+c*ie,s[1]=u*T+f*M+p*$+m*k,s[5]=u*b+f*L+p*Q+m*K,s[9]=u*P+f*U+p*Y+m*F,s[13]=u*C+f*X+p*te+m*ie,s[2]=g*T+v*M+y*$+_*k,s[6]=g*b+v*L+y*Q+_*K,s[10]=g*P+v*U+y*Y+_*F,s[14]=g*C+v*X+y*te+_*ie,s[3]=S*T+E*M+w*$+I*k,s[7]=S*b+E*L+w*Q+I*K,s[11]=S*P+E*U+w*Y+I*F,s[15]=S*C+E*X+w*te+I*ie,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],f=e[6],p=e[10],m=e[14],g=e[3],v=e[7],y=e[11],_=e[15];return g*(+s*l*f-i*c*f-s*a*p+r*c*p+i*a*m-r*l*m)+v*(+t*l*m-t*c*p+s*o*p-i*o*m+i*c*u-s*l*u)+y*(+t*c*f-t*a*m-s*o*f+r*o*m+s*a*u-r*c*u)+_*(-i*a*u-t*l*f+t*a*p+i*o*f-r*o*p+r*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=e[9],p=e[10],m=e[11],g=e[12],v=e[13],y=e[14],_=e[15],S=f*y*c-v*p*c+v*l*m-a*y*m-f*l*_+a*p*_,E=g*p*c-u*y*c-g*l*m+o*y*m+u*l*_-o*p*_,w=u*v*c-g*f*c+g*a*m-o*v*m-u*a*_+o*f*_,I=g*f*l-u*v*l-g*a*p+o*v*p+u*a*y-o*f*y,T=t*S+r*E+i*w+s*I;if(T===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const b=1/T;return e[0]=S*b,e[1]=(v*p*s-f*y*s-v*i*m+r*y*m+f*i*_-r*p*_)*b,e[2]=(a*y*s-v*l*s+v*i*c-r*y*c-a*i*_+r*l*_)*b,e[3]=(f*l*s-a*p*s-f*i*c+r*p*c+a*i*m-r*l*m)*b,e[4]=E*b,e[5]=(u*y*s-g*p*s+g*i*m-t*y*m-u*i*_+t*p*_)*b,e[6]=(g*l*s-o*y*s-g*i*c+t*y*c+o*i*_-t*l*_)*b,e[7]=(o*p*s-u*l*s+u*i*c-t*p*c-o*i*m+t*l*m)*b,e[8]=w*b,e[9]=(g*f*s-u*v*s-g*r*m+t*v*m+u*r*_-t*f*_)*b,e[10]=(o*v*s-g*a*s+g*r*c-t*v*c-o*r*_+t*a*_)*b,e[11]=(u*a*s-o*f*s-u*r*c+t*f*c+o*r*m-t*a*m)*b,e[12]=I*b,e[13]=(u*v*i-g*f*i+g*r*p-t*v*p-u*r*y+t*f*y)*b,e[14]=(g*a*i-o*v*i-g*r*l+t*v*l+o*r*y-t*a*y)*b,e[15]=(o*f*i-u*a*i+u*r*l-t*f*l-o*r*p+t*a*p)*b,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+r,c*a-i*l,c*l+i*a,0,c*a+i*l,u*a+r,u*l-i*o,0,c*l-i*a,u*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,f=a+a,p=s*c,m=s*u,g=s*f,v=o*u,y=o*f,_=a*f,S=l*c,E=l*u,w=l*f,I=r.x,T=r.y,b=r.z;return i[0]=(1-(v+_))*I,i[1]=(m+w)*I,i[2]=(g-E)*I,i[3]=0,i[4]=(m-w)*T,i[5]=(1-(p+_))*T,i[6]=(y+S)*T,i[7]=0,i[8]=(g+E)*b,i[9]=(y-S)*b,i[10]=(1-(p+v))*b,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=Bd.set(i[0],i[1],i[2]).length();const o=Bd.set(i[4],i[5],i[6]).length(),a=Bd.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Jo.copy(this);const c=1/s,u=1/o,f=1/a;return Jo.elements[0]*=c,Jo.elements[1]*=c,Jo.elements[2]*=c,Jo.elements[4]*=u,Jo.elements[5]*=u,Jo.elements[6]*=u,Jo.elements[8]*=f,Jo.elements[9]*=f,Jo.elements[10]*=f,t.setFromRotationMatrix(Jo),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o,a=za){const l=this.elements,c=2*s/(t-e),u=2*s/(r-i),f=(t+e)/(t-e),p=(r+i)/(r-i);let m,g;if(a===za)m=-(o+s)/(o-s),g=-2*o*s/(o-s);else if(a===T_)m=-o/(o-s),g=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=u,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=g,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,s,o,a=za){const l=this.elements,c=1/(t-e),u=1/(r-i),f=1/(o-s),p=(t+e)*c,m=(r+i)*u;let g,v;if(a===za)g=(o+s)*f,v=-2*f;else if(a===T_)g=s*f,v=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=v,l[14]=-g,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const Bd=new W,Jo=new Rt,die=new W(0,0,0),hie=new W(1,1,1),ac=new W,cy=new W,Fs=new W,pk=new Rt,mk=new ui;class so{constructor(e=0,t=0,r=0,i=so.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],u=i[9],f=i[2],p=i[6],m=i[10];switch(t){case"XYZ":this._y=Math.asin(Mr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Mr(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(Mr(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-f,m),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Mr(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Mr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-Mr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return pk.makeRotationFromQuaternion(e),this.setFromRotationMatrix(pk,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return mk.setFromEuler(this),this.setFromQuaternion(mk,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}so.DEFAULT_ORDER="XYZ";class If{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let pie=0;const gk=new W,Ld=new ui,ll=new Rt,uy=new W,Tm=new W,mie=new W,gie=new ui,_k=new W(1,0,0),vk=new W(0,1,0),yk=new W(0,0,1),xk={type:"added"},_ie={type:"removed"},Nd={type:"childadded",child:null},uM={type:"childremoved",child:null};class _n extends pa{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:pie++}),this.uuid=no(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=_n.DEFAULT_UP.clone();const e=new W,t=new so,r=new ui,i=new W(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Rt},normalMatrix:{value:new Jt}}),this.matrix=new Rt,this.matrixWorld=new Rt,this.matrixAutoUpdate=_n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=_n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new If,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Ld.setFromAxisAngle(e,t),this.quaternion.multiply(Ld),this}rotateOnWorldAxis(e,t){return Ld.setFromAxisAngle(e,t),this.quaternion.premultiply(Ld),this}rotateX(e){return this.rotateOnAxis(_k,e)}rotateY(e){return this.rotateOnAxis(vk,e)}rotateZ(e){return this.rotateOnAxis(yk,e)}translateOnAxis(e,t){return gk.copy(e).applyQuaternion(this.quaternion),this.position.add(gk.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(_k,e)}translateY(e){return this.translateOnAxis(vk,e)}translateZ(e){return this.translateOnAxis(yk,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ll.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?uy.copy(e):uy.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Tm.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ll.lookAt(Tm,uy,this.up):ll.lookAt(uy,Tm,this.up),this.quaternion.setFromRotationMatrix(ll),i&&(ll.extractRotation(i.matrixWorld),Ld.setFromRotationMatrix(ll),this.quaternion.premultiply(Ld.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(xk),Nd.child=e,this.dispatchEvent(Nd),Nd.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(_ie),uM.child=e,this.dispatchEvent(uM),uM.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),ll.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ll.multiply(e.parent.matrixWorld)),e.applyMatrix4(ll),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(xk),Nd.child=e,this.dispatchEvent(Nd),Nd.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Tm,e,mie),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Tm,gie,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const f=l[c];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),f=o(e.shapes),p=o(e.skeletons),m=o(e.animations),g=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),f.length>0&&(r.shapes=f),p.length>0&&(r.skeletons=p),m.length>0&&(r.animations=m),g.length>0&&(r.nodes=g)}return r.object=i,r;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}_n.DEFAULT_UP=new W(0,1,0);_n.DEFAULT_MATRIX_AUTO_UPDATE=!0;_n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ko=new W,cl=new W,fM=new W,ul=new W,kd=new W,Fd=new W,Sk=new W,dM=new W,hM=new W,pM=new W;class Ks{constructor(e=new W,t=new W,r=new W){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Ko.subVectors(e,t),i.cross(Ko);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){Ko.subVectors(i,t),cl.subVectors(r,t),fM.subVectors(e,t);const o=Ko.dot(Ko),a=Ko.dot(cl),l=Ko.dot(fM),c=cl.dot(cl),u=cl.dot(fM),f=o*c-a*a;if(f===0)return s.set(0,0,0),null;const p=1/f,m=(c*l-a*u)*p,g=(o*u-a*l)*p;return s.set(1-m-g,g,m)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,ul)===null?!1:ul.x>=0&&ul.y>=0&&ul.x+ul.y<=1}static getInterpolation(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,ul)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,ul.x),l.addScaledVector(o,ul.y),l.addScaledVector(a,ul.z),l)}static isFrontFacing(e,t,r,i){return Ko.subVectors(r,t),cl.subVectors(e,t),Ko.cross(cl).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ko.subVectors(this.c,this.b),cl.subVectors(this.a,this.b),Ko.cross(cl).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ks.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ks.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,i,s){return Ks.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return Ks.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ks.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;kd.subVectors(i,r),Fd.subVectors(s,r),dM.subVectors(e,r);const l=kd.dot(dM),c=Fd.dot(dM);if(l<=0&&c<=0)return t.copy(r);hM.subVectors(e,i);const u=kd.dot(hM),f=Fd.dot(hM);if(u>=0&&f<=u)return t.copy(i);const p=l*f-u*c;if(p<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(r).addScaledVector(kd,o);pM.subVectors(e,s);const m=kd.dot(pM),g=Fd.dot(pM);if(g>=0&&m<=g)return t.copy(s);const v=m*c-l*g;if(v<=0&&c>=0&&g<=0)return a=c/(c-g),t.copy(r).addScaledVector(Fd,a);const y=u*g-m*f;if(y<=0&&f-u>=0&&m-g>=0)return Sk.subVectors(s,i),a=(f-u)/(f-u+(m-g)),t.copy(i).addScaledVector(Sk,a);const _=1/(y+v+p);return o=v*_,a=p*_,t.copy(r).addScaledVector(kd,o).addScaledVector(Fd,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const U5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},lc={h:0,s:0,l:0},fy={h:0,s:0,l:0};function mM(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class rt{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ws){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Rn.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=Rn.workingColorSpace){return this.r=e,this.g=t,this.b=r,Rn.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=Rn.workingColorSpace){if(e=rP(e,1),t=Mr(t,0,1),r=Mr(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=mM(o,s,e+1/3),this.g=mM(o,s,e),this.b=mM(o,s,e-1/3)}return Rn.toWorkingColorSpace(this,i),this}setStyle(e,t=Ws){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Ws){const r=U5[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Vh(e.r),this.g=Vh(e.g),this.b=Vh(e.b),this}copyLinearToSRGB(e){return this.r=nM(e.r),this.g=nM(e.g),this.b=nM(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ws){return Rn.fromWorkingColorSpace(Pi.copy(this),e),Math.round(Mr(Pi.r*255,0,255))*65536+Math.round(Mr(Pi.g*255,0,255))*256+Math.round(Mr(Pi.b*255,0,255))}getHexString(e=Ws){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Rn.workingColorSpace){Rn.fromWorkingColorSpace(Pi.copy(this),t);const r=Pi.r,i=Pi.g,s=Pi.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const f=o-a;switch(c=u<=.5?f/(o+a):f/(2-o-a),o){case r:l=(i-s)/f+(i<s?6:0);break;case i:l=(s-r)/f+2;break;case s:l=(r-i)/f+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=Rn.workingColorSpace){return Rn.fromWorkingColorSpace(Pi.copy(this),t),e.r=Pi.r,e.g=Pi.g,e.b=Pi.b,e}getStyle(e=Ws){Rn.fromWorkingColorSpace(Pi.copy(this),e);const t=Pi.r,r=Pi.g,i=Pi.b;return e!==Ws?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(lc),this.setHSL(lc.h+e,lc.s+t,lc.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(lc),e.getHSL(fy);const r=Lg(lc.h,fy.h,t),i=Lg(lc.s,fy.s,t),s=Lg(lc.l,fy.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Pi=new rt;rt.NAMES=U5;let vie=0;class Vr extends pa{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:vie++}),this.uuid=no(),this.name="",this.type="Material",this.blending=Cf,this.side=$a,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=HS,this.blendDst=zS,this.blendEquation=wc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new rt(0,0,0),this.blendAlpha=0,this.depthFunc=y_,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=vb,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ku,this.stencilZFail=Ku,this.stencilZPass=Ku,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Cf&&(r.blending=this.blending),this.side!==$a&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==HS&&(r.blendSrc=this.blendSrc),this.blendDst!==zS&&(r.blendDst=this.blendDst),this.blendEquation!==wc&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==y_&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==vb&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Ku&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Ku&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Ku&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Ss extends Vr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new rt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new so,this.combine=Z_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ml=yie();function yie(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function ms(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Mr(n,-65504,65504),Ml.floatView[0]=n;const e=Ml.uint32View[0],t=e>>23&511;return Ml.baseTable[t]+((e&8388607)>>Ml.shiftTable[t])}function eg(n){const e=n>>10;return Ml.uint32View[0]=Ml.mantissaTable[Ml.offsetTable[e]+(n&1023)]+Ml.exponentTable[e],Ml.floatView[0]}const ff={toHalfFloat:ms,fromHalfFloat:eg},Or=new W,dy=new Le;class Mn{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=M_,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=ar,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return Gh("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)dy.fromBufferAttribute(this,t),dy.applyMatrix3(e),this.setXY(t,dy.x,dy.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Or.fromBufferAttribute(this,t),Or.applyMatrix3(e),this.setXYZ(t,Or.x,Or.y,Or.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Or.fromBufferAttribute(this,t),Or.applyMatrix4(e),this.setXYZ(t,Or.x,Or.y,Or.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Or.fromBufferAttribute(this,t),Or.applyNormalMatrix(e),this.setXYZ(t,Or.x,Or.y,Or.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Or.fromBufferAttribute(this,t),Or.transformDirection(e),this.setXYZ(t,Or.x,Or.y,Or.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=ss(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Kt(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ss(t,this.array)),t}setX(e,t){return this.normalized&&(t=Kt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ss(t,this.array)),t}setY(e,t){return this.normalized&&(t=Kt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ss(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Kt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ss(t,this.array)),t}setW(e,t){return this.normalized&&(t=Kt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Kt(t,this.array),r=Kt(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Kt(t,this.array),r=Kt(r,this.array),i=Kt(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Kt(t,this.array),r=Kt(r,this.array),i=Kt(i,this.array),s=Kt(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==M_&&(e.usage=this.usage),e}}class xie extends Mn{constructor(e,t,r){super(new Int8Array(e),t,r)}}class Sie extends Mn{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class Eie extends Mn{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class Aie extends Mn{constructor(e,t,r){super(new Int16Array(e),t,r)}}class sP extends Mn{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class wie extends Mn{constructor(e,t,r){super(new Int32Array(e),t,r)}}class oP extends Mn{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class Mie extends Mn{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=eg(this.array[e*this.itemSize]);return this.normalized&&(t=ss(t,this.array)),t}setX(e,t){return this.normalized&&(t=Kt(t,this.array)),this.array[e*this.itemSize]=ms(t),this}getY(e){let t=eg(this.array[e*this.itemSize+1]);return this.normalized&&(t=ss(t,this.array)),t}setY(e,t){return this.normalized&&(t=Kt(t,this.array)),this.array[e*this.itemSize+1]=ms(t),this}getZ(e){let t=eg(this.array[e*this.itemSize+2]);return this.normalized&&(t=ss(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Kt(t,this.array)),this.array[e*this.itemSize+2]=ms(t),this}getW(e){let t=eg(this.array[e*this.itemSize+3]);return this.normalized&&(t=ss(t,this.array)),t}setW(e,t){return this.normalized&&(t=Kt(t,this.array)),this.array[e*this.itemSize+3]=ms(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Kt(t,this.array),r=Kt(r,this.array)),this.array[e+0]=ms(t),this.array[e+1]=ms(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Kt(t,this.array),r=Kt(r,this.array),i=Kt(i,this.array)),this.array[e+0]=ms(t),this.array[e+1]=ms(r),this.array[e+2]=ms(i),this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Kt(t,this.array),r=Kt(r,this.array),i=Kt(i,this.array),s=Kt(s,this.array)),this.array[e+0]=ms(t),this.array[e+1]=ms(r),this.array[e+2]=ms(i),this.array[e+3]=ms(s),this}}class At extends Mn{constructor(e,t,r){super(new Float32Array(e),t,r)}}let Tie=0;const So=new Rt,gM=new _n,Od=new W,Os=new Ui,Cm=new Ui,ri=new W;class Xt extends pa{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Tie++}),this.uuid=no(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(N5(e)?oP:sP)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Jt().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return So.makeRotationFromQuaternion(e),this.applyMatrix4(So),this}rotateX(e){return So.makeRotationX(e),this.applyMatrix4(So),this}rotateY(e){return So.makeRotationY(e),this.applyMatrix4(So),this}rotateZ(e){return So.makeRotationZ(e),this.applyMatrix4(So),this}translate(e,t,r){return So.makeTranslation(e,t,r),this.applyMatrix4(So),this}scale(e,t,r){return So.makeScale(e,t,r),this.applyMatrix4(So),this}lookAt(e){return gM.lookAt(e),gM.updateMatrix(),this.applyMatrix4(gM.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Od).negate(),this.translate(Od.x,Od.y,Od.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new At(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ui);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new W(-1/0,-1/0,-1/0),new W(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];Os.setFromBufferAttribute(s),this.morphTargetsRelative?(ri.addVectors(this.boundingBox.min,Os.min),this.boundingBox.expandByPoint(ri),ri.addVectors(this.boundingBox.max,Os.max),this.boundingBox.expandByPoint(ri)):(this.boundingBox.expandByPoint(Os.min),this.boundingBox.expandByPoint(Os.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new xi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new W,1/0);return}if(e){const r=this.boundingSphere.center;if(Os.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Cm.setFromBufferAttribute(a),this.morphTargetsRelative?(ri.addVectors(Os.min,Cm.min),Os.expandByPoint(ri),ri.addVectors(Os.max,Cm.max),Os.expandByPoint(ri)):(Os.expandByPoint(Cm.min),Os.expandByPoint(Cm.max))}Os.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)ri.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(ri));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)ri.fromBufferAttribute(a,c),l&&(Od.fromBufferAttribute(e,c),ri.add(Od)),i=Math.max(i,r.distanceToSquared(ri))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=t.position,i=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Mn(new Float32Array(4*r.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let P=0;P<r.count;P++)a[P]=new W,l[P]=new W;const c=new W,u=new W,f=new W,p=new Le,m=new Le,g=new Le,v=new W,y=new W;function _(P,C,M){c.fromBufferAttribute(r,P),u.fromBufferAttribute(r,C),f.fromBufferAttribute(r,M),p.fromBufferAttribute(s,P),m.fromBufferAttribute(s,C),g.fromBufferAttribute(s,M),u.sub(c),f.sub(c),m.sub(p),g.sub(p);const L=1/(m.x*g.y-g.x*m.y);isFinite(L)&&(v.copy(u).multiplyScalar(g.y).addScaledVector(f,-m.y).multiplyScalar(L),y.copy(f).multiplyScalar(m.x).addScaledVector(u,-g.x).multiplyScalar(L),a[P].add(v),a[C].add(v),a[M].add(v),l[P].add(y),l[C].add(y),l[M].add(y))}let S=this.groups;S.length===0&&(S=[{start:0,count:e.count}]);for(let P=0,C=S.length;P<C;++P){const M=S[P],L=M.start,U=M.count;for(let X=L,$=L+U;X<$;X+=3)_(e.getX(X+0),e.getX(X+1),e.getX(X+2))}const E=new W,w=new W,I=new W,T=new W;function b(P){I.fromBufferAttribute(i,P),T.copy(I);const C=a[P];E.copy(C),E.sub(I.multiplyScalar(I.dot(C))).normalize(),w.crossVectors(T,C);const L=w.dot(l[P])<0?-1:1;o.setXYZW(P,E.x,E.y,E.z,L)}for(let P=0,C=S.length;P<C;++P){const M=S[P],L=M.start,U=M.count;for(let X=L,$=L+U;X<$;X+=3)b(e.getX(X+0)),b(e.getX(X+1)),b(e.getX(X+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Mn(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let p=0,m=r.count;p<m;p++)r.setXYZ(p,0,0,0);const i=new W,s=new W,o=new W,a=new W,l=new W,c=new W,u=new W,f=new W;if(e)for(let p=0,m=e.count;p<m;p+=3){const g=e.getX(p+0),v=e.getX(p+1),y=e.getX(p+2);i.fromBufferAttribute(t,g),s.fromBufferAttribute(t,v),o.fromBufferAttribute(t,y),u.subVectors(o,s),f.subVectors(i,s),u.cross(f),a.fromBufferAttribute(r,g),l.fromBufferAttribute(r,v),c.fromBufferAttribute(r,y),a.add(u),l.add(u),c.add(u),r.setXYZ(g,a.x,a.y,a.z),r.setXYZ(v,l.x,l.y,l.z),r.setXYZ(y,c.x,c.y,c.z)}else for(let p=0,m=t.count;p<m;p+=3)i.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),u.subVectors(o,s),f.subVectors(i,s),u.cross(f),r.setXYZ(p+0,u.x,u.y,u.z),r.setXYZ(p+1,u.x,u.y,u.z),r.setXYZ(p+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)ri.fromBufferAttribute(e,t),ri.normalize(),e.setXYZ(t,ri.x,ri.y,ri.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,f=a.normalized,p=new c.constructor(l.length*u);let m=0,g=0;for(let v=0,y=l.length;v<y;v++){a.isInterleavedBufferAttribute?m=l[v]*a.data.stride+a.offset:m=l[v]*u;for(let _=0;_<u;_++)p[g++]=c[m++]}return new Mn(p,u,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Xt,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,f=c.length;u<f;u++){const p=c[u],m=e(p,r);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let f=0,p=c.length;f<p;f++){const m=c[f];u.push(m.toJSON(e.data))}u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],f=s[c];for(let p=0,m=f.length;p<m;p++)u.push(f[p].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const f=o[c];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Ek=new Rt,Pu=new od,hy=new xi,Ak=new W,Ud=new W,Hd=new W,zd=new W,_M=new W,py=new W,my=new Le,gy=new Le,_y=new Le,wk=new W,Mk=new W,Tk=new W,vy=new W,yy=new W;class lr extends _n{constructor(e=new Xt,t=new Ss){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){py.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],f=s[l];u!==0&&(_M.fromBufferAttribute(f,e),o?py.addScaledVector(_M,u):py.addScaledVector(_M.sub(t),u))}t.add(py)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),hy.copy(r.boundingSphere),hy.applyMatrix4(s),Pu.copy(e.ray).recast(e.near),!(hy.containsPoint(Pu.origin)===!1&&(Pu.intersectSphere(hy,Ak)===null||Pu.origin.distanceToSquared(Ak)>(e.far-e.near)**2))&&(Ek.copy(s).invert(),Pu.copy(e.ray).applyMatrix4(Ek),!(r.boundingBox!==null&&Pu.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,Pu)))}_computeIntersections(e,t,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,f=s.attributes.normal,p=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let g=0,v=p.length;g<v;g++){const y=p[g],_=o[y.materialIndex],S=Math.max(y.start,m.start),E=Math.min(a.count,Math.min(y.start+y.count,m.start+m.count));for(let w=S,I=E;w<I;w+=3){const T=a.getX(w),b=a.getX(w+1),P=a.getX(w+2);i=xy(this,_,e,r,c,u,f,T,b,P),i&&(i.faceIndex=Math.floor(w/3),i.face.materialIndex=y.materialIndex,t.push(i))}}else{const g=Math.max(0,m.start),v=Math.min(a.count,m.start+m.count);for(let y=g,_=v;y<_;y+=3){const S=a.getX(y),E=a.getX(y+1),w=a.getX(y+2);i=xy(this,o,e,r,c,u,f,S,E,w),i&&(i.faceIndex=Math.floor(y/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let g=0,v=p.length;g<v;g++){const y=p[g],_=o[y.materialIndex],S=Math.max(y.start,m.start),E=Math.min(l.count,Math.min(y.start+y.count,m.start+m.count));for(let w=S,I=E;w<I;w+=3){const T=w,b=w+1,P=w+2;i=xy(this,_,e,r,c,u,f,T,b,P),i&&(i.faceIndex=Math.floor(w/3),i.face.materialIndex=y.materialIndex,t.push(i))}}else{const g=Math.max(0,m.start),v=Math.min(l.count,m.start+m.count);for(let y=g,_=v;y<_;y+=3){const S=y,E=y+1,w=y+2;i=xy(this,o,e,r,c,u,f,S,E,w),i&&(i.faceIndex=Math.floor(y/3),t.push(i))}}}}function Cie(n,e,t,r,i,s,o,a){let l;if(e.side===as?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===$a,a),l===null)return null;yy.copy(a),yy.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(yy);return c<t.near||c>t.far?null:{distance:c,point:yy.clone(),object:n}}function xy(n,e,t,r,i,s,o,a,l,c){n.getVertexPosition(a,Ud),n.getVertexPosition(l,Hd),n.getVertexPosition(c,zd);const u=Cie(n,e,t,r,Ud,Hd,zd,vy);if(u){i&&(my.fromBufferAttribute(i,a),gy.fromBufferAttribute(i,l),_y.fromBufferAttribute(i,c),u.uv=Ks.getInterpolation(vy,Ud,Hd,zd,my,gy,_y,new Le)),s&&(my.fromBufferAttribute(s,a),gy.fromBufferAttribute(s,l),_y.fromBufferAttribute(s,c),u.uv1=Ks.getInterpolation(vy,Ud,Hd,zd,my,gy,_y,new Le)),o&&(wk.fromBufferAttribute(o,a),Mk.fromBufferAttribute(o,l),Tk.fromBufferAttribute(o,c),u.normal=Ks.getInterpolation(vy,Ud,Hd,zd,wk,Mk,Tk,new W),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const f={a,b:l,c,normal:new W,materialIndex:0};Ks.getNormal(Ud,Hd,zd,f.normal),u.face=f}return u}class ad extends Xt{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],f=[];let p=0,m=0;g("z","y","x",-1,-1,r,t,e,o,s,0),g("z","y","x",1,-1,r,t,-e,o,s,1),g("x","z","y",1,1,e,r,t,i,o,2),g("x","z","y",1,-1,e,r,-t,i,o,3),g("x","y","z",1,-1,e,t,r,i,s,4),g("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new At(c,3)),this.setAttribute("normal",new At(u,3)),this.setAttribute("uv",new At(f,2));function g(v,y,_,S,E,w,I,T,b,P,C){const M=w/b,L=I/P,U=w/2,X=I/2,$=T/2,Q=b+1,Y=P+1;let te=0,k=0;const K=new W;for(let F=0;F<Y;F++){const ie=F*L-X;for(let me=0;me<Q;me++){const Ne=me*M-U;K[v]=Ne*S,K[y]=ie*E,K[_]=$,c.push(K.x,K.y,K.z),K[v]=0,K[y]=0,K[_]=T>0?1:-1,u.push(K.x,K.y,K.z),f.push(me/b),f.push(1-F/P),te+=1}}for(let F=0;F<P;F++)for(let ie=0;ie<b;ie++){const me=p+ie+Q*F,Ne=p+ie+Q*(F+1),ce=p+(ie+1)+Q*(F+1),xe=p+(ie+1)+Q*F;l.push(me,Ne,xe),l.push(Ne,ce,xe),k+=6}a.addGroup(m,k,C),m+=k,p+=te}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ad(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function wp(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function $i(n){const e={};for(let t=0;t<n.length;t++){const r=wp(n[t]);for(const i in r)e[i]=r[i]}return e}function bie(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function H5(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Rn.workingColorSpace}const z5={clone:wp,merge:$i};var Rie=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Iie=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ds extends Vr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Rie,this.fragmentShader=Iie,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=wp(e.uniforms),this.uniformsGroups=bie(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class i0 extends _n{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Rt,this.projectionMatrix=new Rt,this.projectionMatrixInverse=new Rt,this.coordinateSystem=za}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const cc=new W,Ck=new Le,bk=new Le;let qn=class extends i0{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Ap*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Rf*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Ap*2*Math.atan(Math.tan(Rf*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){cc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(cc.x,cc.y).multiplyScalar(-e/cc.z),cc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(cc.x,cc.y).multiplyScalar(-e/cc.z)}getViewSize(e,t){return this.getViewBounds(e,Ck,bk),t.subVectors(bk,Ck)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Rf*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const Gd=-90,Vd=1;class G5 extends _n{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new qn(Gd,Vd,e,t);i.layers=this.layers,this.add(i);const s=new qn(Gd,Vd,e,t);s.layers=this.layers,this.add(s);const o=new qn(Gd,Vd,e,t);o.layers=this.layers,this.add(o);const a=new qn(Gd,Vd,e,t);a.layers=this.layers,this.add(a);const l=new qn(Gd,Vd,e,t);l.layers=this.layers,this.add(l);const c=new qn(Gd,Vd,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===za)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===T_)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,f=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),g=e.xr.enabled;e.xr.enabled=!1;const v=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,s),e.setRenderTarget(r,1,i),e.render(t,o),e.setRenderTarget(r,2,i),e.render(t,a),e.setRenderTarget(r,3,i),e.render(t,l),e.setRenderTarget(r,4,i),e.render(t,c),r.texture.generateMipmaps=v,e.setRenderTarget(r,5,i),e.render(t,u),e.setRenderTarget(f,p,m),e.xr.enabled=g,r.texture.needsPMREMUpdate=!0}}class s0 extends En{constructor(e,t,r,i,s,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:qa,super(e,t,r,i,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class aP extends Ps{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new s0(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Sn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new ad(5,5,5),s=new Ds({name:"CubemapFromEquirect",uniforms:wp(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:as,blending:ja});s.uniforms.tEquirect.value=t;const o=new lr(i,s),a=t.minFilter;return t.minFilter===Bo&&(t.minFilter=Sn),new G5(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}const vM=new W,Pie=new W,Die=new Jt;class Sl{constructor(e=new W(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=vM.subVectors(r,t).cross(Pie.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(vM),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||Die.getNormalMatrix(e),i=this.coplanarPoint(vM).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Du=new xi,Sy=new W;class o0{constructor(e=new Sl,t=new Sl,r=new Sl,i=new Sl,s=new Sl,o=new Sl){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=za){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],f=i[6],p=i[7],m=i[8],g=i[9],v=i[10],y=i[11],_=i[12],S=i[13],E=i[14],w=i[15];if(r[0].setComponents(l-s,p-c,y-m,w-_).normalize(),r[1].setComponents(l+s,p+c,y+m,w+_).normalize(),r[2].setComponents(l+o,p+u,y+g,w+S).normalize(),r[3].setComponents(l-o,p-u,y-g,w-S).normalize(),r[4].setComponents(l-a,p-f,y-v,w-E).normalize(),t===za)r[5].setComponents(l+a,p+f,y+v,w+E).normalize();else if(t===T_)r[5].setComponents(a,f,v,E).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Du.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Du.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Du)}intersectsSprite(e){return Du.center.set(0,0,0),Du.radius=.7071067811865476,Du.applyMatrix4(e.matrixWorld),this.intersectsSphere(Du)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(Sy.x=i.normal.x>0?e.max.x:e.min.x,Sy.y=i.normal.y>0?e.max.y:e.min.y,Sy.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Sy)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function V5(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function Bie(n){const e=new WeakMap;function t(a,l){const c=a.array,u=a.usage,f=c.byteLength,p=n.createBuffer();n.bindBuffer(l,p),n.bufferData(l,c,u),a.onUploadCallback();let m;if(c instanceof Float32Array)m=n.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?m=n.HALF_FLOAT:m=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)m=n.SHORT;else if(c instanceof Uint32Array)m=n.UNSIGNED_INT;else if(c instanceof Int32Array)m=n.INT;else if(c instanceof Int8Array)m=n.BYTE;else if(c instanceof Uint8Array)m=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)m=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:p,type:m,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:f}}function r(a,l,c){const u=l.array,f=l._updateRange,p=l.updateRanges;if(n.bindBuffer(c,a),f.count===-1&&p.length===0&&n.bufferSubData(c,0,u),p.length!==0){for(let m=0,g=p.length;m<g;m++){const v=p[m];n.bufferSubData(c,v.start*u.BYTES_PER_ELEMENT,u,v.start,v.count)}l.clearUpdateRanges()}f.count!==-1&&(n.bufferSubData(c,f.offset*u.BYTES_PER_ELEMENT,u,f.offset,f.count),f.count=-1),l.onUploadCallback()}function i(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const c=e.get(a);if(c===void 0)e.set(a,t(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(c.buffer,a,l),c.version=a.version}}return{get:i,remove:s,update:o}}class mu extends Xt{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),c=a+1,u=l+1,f=e/a,p=t/l,m=[],g=[],v=[],y=[];for(let _=0;_<u;_++){const S=_*p-o;for(let E=0;E<c;E++){const w=E*f-s;g.push(w,-S,0),v.push(0,0,1),y.push(E/a),y.push(1-_/l)}}for(let _=0;_<l;_++)for(let S=0;S<a;S++){const E=S+c*_,w=S+c*(_+1),I=S+1+c*(_+1),T=S+1+c*_;m.push(E,w,T),m.push(w,I,T)}this.setIndex(m),this.setAttribute("position",new At(g,3)),this.setAttribute("normal",new At(v,3)),this.setAttribute("uv",new At(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new mu(e.width,e.height,e.widthSegments,e.heightSegments)}}var Lie=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Nie=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,kie=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Fie=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Oie=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Uie=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Hie=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,zie=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Gie=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Vie=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Wie=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Xie=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,jie=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Yie=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Jie=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Kie=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,$ie=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,qie=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Qie=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Zie=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,ese=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,tse=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,nse=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,rse=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,ise=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,sse=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,ose=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,ase=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,lse=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,cse=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,use="gl_FragColor = linearToOutputTexel( gl_FragColor );",fse=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,dse=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,hse=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,pse=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,mse=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,gse=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,_se=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,vse=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,yse=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,xse=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Sse=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Ese=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Ase=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,wse=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Mse=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Tse=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Cse=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,bse=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Rse=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Ise=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Pse=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Dse=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Bse=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Lse=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Nse=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,kse=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Fse=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Ose=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Use=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Hse=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,zse=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Gse=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Vse=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Wse=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Xse=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,jse=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Yse=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Jse=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Kse=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,$se=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,qse=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Qse=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Zse=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,eoe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,toe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,noe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,roe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,ioe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,soe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,ooe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,aoe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,loe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,coe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,uoe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,foe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,doe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,hoe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,poe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,moe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,goe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,_oe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,voe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,yoe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,xoe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Soe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Eoe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Aoe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,woe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Moe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Toe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Coe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,boe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Roe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Ioe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Poe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Doe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Boe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Loe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Noe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,koe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Foe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Ooe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Uoe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Hoe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,zoe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Goe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Voe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Woe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Xoe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,joe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Yoe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Joe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Koe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$oe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qoe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Qoe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Zoe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,eae=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,tae=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,nae=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rae=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,iae=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sae=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,oae=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,aae=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,lae=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,cae=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,uae=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,fae=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,dae=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,qt={alphahash_fragment:Lie,alphahash_pars_fragment:Nie,alphamap_fragment:kie,alphamap_pars_fragment:Fie,alphatest_fragment:Oie,alphatest_pars_fragment:Uie,aomap_fragment:Hie,aomap_pars_fragment:zie,batching_pars_vertex:Gie,batching_vertex:Vie,begin_vertex:Wie,beginnormal_vertex:Xie,bsdfs:jie,iridescence_fragment:Yie,bumpmap_pars_fragment:Jie,clipping_planes_fragment:Kie,clipping_planes_pars_fragment:$ie,clipping_planes_pars_vertex:qie,clipping_planes_vertex:Qie,color_fragment:Zie,color_pars_fragment:ese,color_pars_vertex:tse,color_vertex:nse,common:rse,cube_uv_reflection_fragment:ise,defaultnormal_vertex:sse,displacementmap_pars_vertex:ose,displacementmap_vertex:ase,emissivemap_fragment:lse,emissivemap_pars_fragment:cse,colorspace_fragment:use,colorspace_pars_fragment:fse,envmap_fragment:dse,envmap_common_pars_fragment:hse,envmap_pars_fragment:pse,envmap_pars_vertex:mse,envmap_physical_pars_fragment:Tse,envmap_vertex:gse,fog_vertex:_se,fog_pars_vertex:vse,fog_fragment:yse,fog_pars_fragment:xse,gradientmap_pars_fragment:Sse,lightmap_pars_fragment:Ese,lights_lambert_fragment:Ase,lights_lambert_pars_fragment:wse,lights_pars_begin:Mse,lights_toon_fragment:Cse,lights_toon_pars_fragment:bse,lights_phong_fragment:Rse,lights_phong_pars_fragment:Ise,lights_physical_fragment:Pse,lights_physical_pars_fragment:Dse,lights_fragment_begin:Bse,lights_fragment_maps:Lse,lights_fragment_end:Nse,logdepthbuf_fragment:kse,logdepthbuf_pars_fragment:Fse,logdepthbuf_pars_vertex:Ose,logdepthbuf_vertex:Use,map_fragment:Hse,map_pars_fragment:zse,map_particle_fragment:Gse,map_particle_pars_fragment:Vse,metalnessmap_fragment:Wse,metalnessmap_pars_fragment:Xse,morphinstance_vertex:jse,morphcolor_vertex:Yse,morphnormal_vertex:Jse,morphtarget_pars_vertex:Kse,morphtarget_vertex:$se,normal_fragment_begin:qse,normal_fragment_maps:Qse,normal_pars_fragment:Zse,normal_pars_vertex:eoe,normal_vertex:toe,normalmap_pars_fragment:noe,clearcoat_normal_fragment_begin:roe,clearcoat_normal_fragment_maps:ioe,clearcoat_pars_fragment:soe,iridescence_pars_fragment:ooe,opaque_fragment:aoe,packing:loe,premultiplied_alpha_fragment:coe,project_vertex:uoe,dithering_fragment:foe,dithering_pars_fragment:doe,roughnessmap_fragment:hoe,roughnessmap_pars_fragment:poe,shadowmap_pars_fragment:moe,shadowmap_pars_vertex:goe,shadowmap_vertex:_oe,shadowmask_pars_fragment:voe,skinbase_vertex:yoe,skinning_pars_vertex:xoe,skinning_vertex:Soe,skinnormal_vertex:Eoe,specularmap_fragment:Aoe,specularmap_pars_fragment:woe,tonemapping_fragment:Moe,tonemapping_pars_fragment:Toe,transmission_fragment:Coe,transmission_pars_fragment:boe,uv_pars_fragment:Roe,uv_pars_vertex:Ioe,uv_vertex:Poe,worldpos_vertex:Doe,background_vert:Boe,background_frag:Loe,backgroundCube_vert:Noe,backgroundCube_frag:koe,cube_vert:Foe,cube_frag:Ooe,depth_vert:Uoe,depth_frag:Hoe,distanceRGBA_vert:zoe,distanceRGBA_frag:Goe,equirect_vert:Voe,equirect_frag:Woe,linedashed_vert:Xoe,linedashed_frag:joe,meshbasic_vert:Yoe,meshbasic_frag:Joe,meshlambert_vert:Koe,meshlambert_frag:$oe,meshmatcap_vert:qoe,meshmatcap_frag:Qoe,meshnormal_vert:Zoe,meshnormal_frag:eae,meshphong_vert:tae,meshphong_frag:nae,meshphysical_vert:rae,meshphysical_frag:iae,meshtoon_vert:sae,meshtoon_frag:oae,points_vert:aae,points_frag:lae,shadow_vert:cae,shadow_frag:uae,sprite_vert:fae,sprite_frag:dae},ot={common:{diffuse:{value:new rt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Jt},alphaMap:{value:null},alphaMapTransform:{value:new Jt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Jt}},envmap:{envMap:{value:null},envMapRotation:{value:new Jt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Jt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Jt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Jt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Jt},normalScale:{value:new Le(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Jt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Jt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Jt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Jt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new rt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new rt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Jt},alphaTest:{value:0},uvTransform:{value:new Jt}},sprite:{diffuse:{value:new rt(16777215)},opacity:{value:1},center:{value:new Le(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Jt},alphaMap:{value:null},alphaMapTransform:{value:new Jt},alphaTest:{value:0}}},sa={basic:{uniforms:$i([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.fog]),vertexShader:qt.meshbasic_vert,fragmentShader:qt.meshbasic_frag},lambert:{uniforms:$i([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,ot.lights,{emissive:{value:new rt(0)}}]),vertexShader:qt.meshlambert_vert,fragmentShader:qt.meshlambert_frag},phong:{uniforms:$i([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,ot.lights,{emissive:{value:new rt(0)},specular:{value:new rt(1118481)},shininess:{value:30}}]),vertexShader:qt.meshphong_vert,fragmentShader:qt.meshphong_frag},standard:{uniforms:$i([ot.common,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.roughnessmap,ot.metalnessmap,ot.fog,ot.lights,{emissive:{value:new rt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:qt.meshphysical_vert,fragmentShader:qt.meshphysical_frag},toon:{uniforms:$i([ot.common,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.gradientmap,ot.fog,ot.lights,{emissive:{value:new rt(0)}}]),vertexShader:qt.meshtoon_vert,fragmentShader:qt.meshtoon_frag},matcap:{uniforms:$i([ot.common,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,{matcap:{value:null}}]),vertexShader:qt.meshmatcap_vert,fragmentShader:qt.meshmatcap_frag},points:{uniforms:$i([ot.points,ot.fog]),vertexShader:qt.points_vert,fragmentShader:qt.points_frag},dashed:{uniforms:$i([ot.common,ot.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:qt.linedashed_vert,fragmentShader:qt.linedashed_frag},depth:{uniforms:$i([ot.common,ot.displacementmap]),vertexShader:qt.depth_vert,fragmentShader:qt.depth_frag},normal:{uniforms:$i([ot.common,ot.bumpmap,ot.normalmap,ot.displacementmap,{opacity:{value:1}}]),vertexShader:qt.meshnormal_vert,fragmentShader:qt.meshnormal_frag},sprite:{uniforms:$i([ot.sprite,ot.fog]),vertexShader:qt.sprite_vert,fragmentShader:qt.sprite_frag},background:{uniforms:{uvTransform:{value:new Jt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:qt.background_vert,fragmentShader:qt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Jt}},vertexShader:qt.backgroundCube_vert,fragmentShader:qt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:qt.cube_vert,fragmentShader:qt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:qt.equirect_vert,fragmentShader:qt.equirect_frag},distanceRGBA:{uniforms:$i([ot.common,ot.displacementmap,{referencePosition:{value:new W},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:qt.distanceRGBA_vert,fragmentShader:qt.distanceRGBA_frag},shadow:{uniforms:$i([ot.lights,ot.fog,{color:{value:new rt(0)},opacity:{value:1}}]),vertexShader:qt.shadow_vert,fragmentShader:qt.shadow_frag}};sa.physical={uniforms:$i([sa.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Jt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Jt},clearcoatNormalScale:{value:new Le(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Jt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Jt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Jt},sheen:{value:0},sheenColor:{value:new rt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Jt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Jt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Jt},transmissionSamplerSize:{value:new Le},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Jt},attenuationDistance:{value:0},attenuationColor:{value:new rt(0)},specularColor:{value:new rt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Jt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Jt},anisotropyVector:{value:new Le},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Jt}}]),vertexShader:qt.meshphysical_vert,fragmentShader:qt.meshphysical_frag};const Ey={r:0,b:0,g:0},Bu=new so,hae=new Rt;function pae(n,e,t,r,i,s,o){const a=new rt(0);let l=s===!0?0:1,c,u,f=null,p=0,m=null;function g(S){let E=S.isScene===!0?S.background:null;return E&&E.isTexture&&(E=(S.backgroundBlurriness>0?t:e).get(E)),E}function v(S){let E=!1;const w=g(S);w===null?_(a,l):w&&w.isColor&&(_(w,1),E=!0);const I=n.xr.getEnvironmentBlendMode();I==="additive"?r.buffers.color.setClear(0,0,0,1,o):I==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(n.autoClear||E)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function y(S,E){const w=g(E);w&&(w.isCubeTexture||w.mapping===Hp)?(u===void 0&&(u=new lr(new ad(1,1,1),new Ds({name:"BackgroundCubeMaterial",uniforms:wp(sa.backgroundCube.uniforms),vertexShader:sa.backgroundCube.vertexShader,fragmentShader:sa.backgroundCube.fragmentShader,side:as,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(I,T,b){this.matrixWorld.copyPosition(b.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),Bu.copy(E.backgroundRotation),Bu.x*=-1,Bu.y*=-1,Bu.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(Bu.y*=-1,Bu.z*=-1),u.material.uniforms.envMap.value=w,u.material.uniforms.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=E.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=E.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(hae.makeRotationFromEuler(Bu)),u.material.toneMapped=Rn.getTransfer(w.colorSpace)!==Wn,(f!==w||p!==w.version||m!==n.toneMapping)&&(u.material.needsUpdate=!0,f=w,p=w.version,m=n.toneMapping),u.layers.enableAll(),S.unshift(u,u.geometry,u.material,0,0,null)):w&&w.isTexture&&(c===void 0&&(c=new lr(new mu(2,2),new Ds({name:"BackgroundMaterial",uniforms:wp(sa.background.uniforms),vertexShader:sa.background.vertexShader,fragmentShader:sa.background.fragmentShader,side:$a,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=w,c.material.uniforms.backgroundIntensity.value=E.backgroundIntensity,c.material.toneMapped=Rn.getTransfer(w.colorSpace)!==Wn,w.matrixAutoUpdate===!0&&w.updateMatrix(),c.material.uniforms.uvTransform.value.copy(w.matrix),(f!==w||p!==w.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,f=w,p=w.version,m=n.toneMapping),c.layers.enableAll(),S.unshift(c,c.geometry,c.material,0,0,null))}function _(S,E){S.getRGB(Ey,H5(n)),r.buffers.color.setClear(Ey.r,Ey.g,Ey.b,E,o)}return{getClearColor:function(){return a},setClearColor:function(S,E=1){a.set(S),l=E,_(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(S){l=S,_(a,l)},render:v,addToRenderList:y}}function mae(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),r={},i=p(null);let s=i,o=!1;function a(M,L,U,X,$){let Q=!1;const Y=f(X,U,L);s!==Y&&(s=Y,c(s.object)),Q=m(M,X,U,$),Q&&g(M,X,U,$),$!==null&&e.update($,n.ELEMENT_ARRAY_BUFFER),(Q||o)&&(o=!1,w(M,L,U,X),$!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get($).buffer))}function l(){return n.createVertexArray()}function c(M){return n.bindVertexArray(M)}function u(M){return n.deleteVertexArray(M)}function f(M,L,U){const X=U.wireframe===!0;let $=r[M.id];$===void 0&&($={},r[M.id]=$);let Q=$[L.id];Q===void 0&&(Q={},$[L.id]=Q);let Y=Q[X];return Y===void 0&&(Y=p(l()),Q[X]=Y),Y}function p(M){const L=[],U=[],X=[];for(let $=0;$<t;$++)L[$]=0,U[$]=0,X[$]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:L,enabledAttributes:U,attributeDivisors:X,object:M,attributes:{},index:null}}function m(M,L,U,X){const $=s.attributes,Q=L.attributes;let Y=0;const te=U.getAttributes();for(const k in te)if(te[k].location>=0){const F=$[k];let ie=Q[k];if(ie===void 0&&(k==="instanceMatrix"&&M.instanceMatrix&&(ie=M.instanceMatrix),k==="instanceColor"&&M.instanceColor&&(ie=M.instanceColor)),F===void 0||F.attribute!==ie||ie&&F.data!==ie.data)return!0;Y++}return s.attributesNum!==Y||s.index!==X}function g(M,L,U,X){const $={},Q=L.attributes;let Y=0;const te=U.getAttributes();for(const k in te)if(te[k].location>=0){let F=Q[k];F===void 0&&(k==="instanceMatrix"&&M.instanceMatrix&&(F=M.instanceMatrix),k==="instanceColor"&&M.instanceColor&&(F=M.instanceColor));const ie={};ie.attribute=F,F&&F.data&&(ie.data=F.data),$[k]=ie,Y++}s.attributes=$,s.attributesNum=Y,s.index=X}function v(){const M=s.newAttributes;for(let L=0,U=M.length;L<U;L++)M[L]=0}function y(M){_(M,0)}function _(M,L){const U=s.newAttributes,X=s.enabledAttributes,$=s.attributeDivisors;U[M]=1,X[M]===0&&(n.enableVertexAttribArray(M),X[M]=1),$[M]!==L&&(n.vertexAttribDivisor(M,L),$[M]=L)}function S(){const M=s.newAttributes,L=s.enabledAttributes;for(let U=0,X=L.length;U<X;U++)L[U]!==M[U]&&(n.disableVertexAttribArray(U),L[U]=0)}function E(M,L,U,X,$,Q,Y){Y===!0?n.vertexAttribIPointer(M,L,U,$,Q):n.vertexAttribPointer(M,L,U,X,$,Q)}function w(M,L,U,X){v();const $=X.attributes,Q=U.getAttributes(),Y=L.defaultAttributeValues;for(const te in Q){const k=Q[te];if(k.location>=0){let K=$[te];if(K===void 0&&(te==="instanceMatrix"&&M.instanceMatrix&&(K=M.instanceMatrix),te==="instanceColor"&&M.instanceColor&&(K=M.instanceColor)),K!==void 0){const F=K.normalized,ie=K.itemSize,me=e.get(K);if(me===void 0)continue;const Ne=me.buffer,ce=me.type,xe=me.bytesPerElement,Ae=ce===n.INT||ce===n.UNSIGNED_INT||K.gpuType===e0;if(K.isInterleavedBufferAttribute){const Ie=K.data,Xe=Ie.stride,it=K.offset;if(Ie.isInstancedInterleavedBuffer){for(let Qe=0;Qe<k.locationSize;Qe++)_(k.location+Qe,Ie.meshPerAttribute);M.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=Ie.meshPerAttribute*Ie.count)}else for(let Qe=0;Qe<k.locationSize;Qe++)y(k.location+Qe);n.bindBuffer(n.ARRAY_BUFFER,Ne);for(let Qe=0;Qe<k.locationSize;Qe++)E(k.location+Qe,ie/k.locationSize,ce,F,Xe*xe,(it+ie/k.locationSize*Qe)*xe,Ae)}else{if(K.isInstancedBufferAttribute){for(let Ie=0;Ie<k.locationSize;Ie++)_(k.location+Ie,K.meshPerAttribute);M.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=K.meshPerAttribute*K.count)}else for(let Ie=0;Ie<k.locationSize;Ie++)y(k.location+Ie);n.bindBuffer(n.ARRAY_BUFFER,Ne);for(let Ie=0;Ie<k.locationSize;Ie++)E(k.location+Ie,ie/k.locationSize,ce,F,ie*xe,ie/k.locationSize*Ie*xe,Ae)}}else if(Y!==void 0){const F=Y[te];if(F!==void 0)switch(F.length){case 2:n.vertexAttrib2fv(k.location,F);break;case 3:n.vertexAttrib3fv(k.location,F);break;case 4:n.vertexAttrib4fv(k.location,F);break;default:n.vertexAttrib1fv(k.location,F)}}}}S()}function I(){P();for(const M in r){const L=r[M];for(const U in L){const X=L[U];for(const $ in X)u(X[$].object),delete X[$];delete L[U]}delete r[M]}}function T(M){if(r[M.id]===void 0)return;const L=r[M.id];for(const U in L){const X=L[U];for(const $ in X)u(X[$].object),delete X[$];delete L[U]}delete r[M.id]}function b(M){for(const L in r){const U=r[L];if(U[M.id]===void 0)continue;const X=U[M.id];for(const $ in X)u(X[$].object),delete X[$];delete U[M.id]}}function P(){C(),o=!0,s!==i&&(s=i,c(s.object))}function C(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:a,reset:P,resetDefaultState:C,dispose:I,releaseStatesOfGeometry:T,releaseStatesOfProgram:b,initAttributes:v,enableAttribute:y,disableUnusedAttributes:S}}function gae(n,e,t){let r;function i(c){r=c}function s(c,u){n.drawArrays(r,c,u),t.update(u,r,1)}function o(c,u,f){f!==0&&(n.drawArraysInstanced(r,c,u,f),t.update(u,r,f))}function a(c,u,f){if(f===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,c,0,u,0,f);let m=0;for(let g=0;g<f;g++)m+=u[g];t.update(m,r,1)}function l(c,u,f,p){if(f===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let g=0;g<c.length;g++)o(c[g],u[g],p[g]);else{m.multiDrawArraysInstancedWEBGL(r,c,0,u,0,p,0,f);let g=0;for(let v=0;v<f;v++)g+=u[v];for(let v=0;v<p.length;v++)t.update(g,r,p[v])}}this.setMode=i,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function _ae(n,e,t,r){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const T=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(T.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(T){return!(T!==Nr&&r.convert(T)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(T){const b=T===qr&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(T!==Is&&r.convert(T)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&T!==ar&&!b)}function l(T){if(T==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";T="mediump"}return T==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const f=t.logarithmicDepthBuffer===!0,p=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),g=n.getParameter(n.MAX_TEXTURE_SIZE),v=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),y=n.getParameter(n.MAX_VERTEX_ATTRIBS),_=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),S=n.getParameter(n.MAX_VARYING_VECTORS),E=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),w=m>0,I=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:f,maxTextures:p,maxVertexTextures:m,maxTextureSize:g,maxCubemapSize:v,maxAttributes:y,maxVertexUniforms:_,maxVaryings:S,maxFragmentUniforms:E,vertexTextures:w,maxSamples:I}}function vae(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new Sl,a=new Jt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,p){const m=f.length!==0||p||r!==0||i;return i=p,r=f.length,m},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,p){t=u(f,p,0)},this.setState=function(f,p,m){const g=f.clippingPlanes,v=f.clipIntersection,y=f.clipShadows,_=n.get(f);if(!i||g===null||g.length===0||s&&!y)s?u(null):c();else{const S=s?0:r,E=S*4;let w=_.clippingState||null;l.value=w,w=u(g,p,E,m);for(let I=0;I!==E;++I)w[I]=t[I];_.clippingState=w,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=S}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(f,p,m,g){const v=f!==null?f.length:0;let y=null;if(v!==0){if(y=l.value,g!==!0||y===null){const _=m+v*4,S=p.matrixWorldInverse;a.getNormalMatrix(S),(y===null||y.length<_)&&(y=new Float32Array(_));for(let E=0,w=m;E!==v;++E,w+=4)o.copy(f[E]).applyMatrix4(S,a),o.normal.toArray(y,w),y[w+3]=o.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,y}}function yae(n){let e=new WeakMap;function t(o,a){return a===vp?o.mapping=qa:a===x_&&(o.mapping=iu),o}function r(o){if(o&&o.isTexture){const a=o.mapping;if(a===vp||a===x_)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new aP(l.height);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",i),t(c.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class Qs extends i0{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Eh=4,Rk=[.125,.215,.35,.446,.526,.582],Qu=20,yM=new Qs,Ik=new rt;let xM=null,SM=0,EM=0,AM=!1;const $u=(1+Math.sqrt(5))/2,Wd=1/$u,Pk=[new W(-$u,Wd,0),new W($u,Wd,0),new W(-Wd,0,$u),new W(Wd,0,$u),new W(0,$u,-Wd),new W(0,$u,Wd),new W(-1,1,-1),new W(1,1,-1),new W(-1,1,1),new W(1,1,1)];class xb{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){xM=this._renderer.getRenderTarget(),SM=this._renderer.getActiveCubeFace(),EM=this._renderer.getActiveMipmapLevel(),AM=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Lk(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Bk(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(xM,SM,EM),this._renderer.xr.enabled=AM,e.scissorTest=!1,Ay(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===qa||e.mapping===iu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),xM=this._renderer.getRenderTarget(),SM=this._renderer.getActiveCubeFace(),EM=this._renderer.getActiveMipmapLevel(),AM=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:Sn,minFilter:Sn,generateMipmaps:!1,type:qr,format:Nr,colorSpace:zo,depthBuffer:!1},i=Dk(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Dk(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=xae(s)),this._blurMaterial=Sae(s,e,t)}return i}_compileMaterial(e){const t=new lr(this._lodPlanes[0],e);this._renderer.compile(t,yM)}_sceneToCubeUV(e,t,r,i){const a=new qn(90,1,t,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,f=u.autoClear,p=u.toneMapping;u.getClearColor(Ik),u.toneMapping=Ya,u.autoClear=!1;const m=new Ss({name:"PMREM.Background",side:as,depthWrite:!1,depthTest:!1}),g=new lr(new ad,m);let v=!1;const y=e.background;y?y.isColor&&(m.color.copy(y),e.background=null,v=!0):(m.color.copy(Ik),v=!0);for(let _=0;_<6;_++){const S=_%3;S===0?(a.up.set(0,l[_],0),a.lookAt(c[_],0,0)):S===1?(a.up.set(0,0,l[_]),a.lookAt(0,c[_],0)):(a.up.set(0,l[_],0),a.lookAt(0,0,c[_]));const E=this._cubeSize;Ay(i,S*E,_>2?E:0,E,E),u.setRenderTarget(i),v&&u.render(g,a),u.render(e,a)}g.geometry.dispose(),g.material.dispose(),u.toneMapping=p,u.autoClear=f,e.background=y}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===qa||e.mapping===iu;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=Lk()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Bk());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new lr(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;Ay(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,yM)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=Pk[(i-s-1)%Pk.length];this._blur(e,s-1,s,o,a)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,f=new lr(this._lodPlanes[i],c),p=c.uniforms,m=this._sizeLods[r]-1,g=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*Qu-1),v=s/g,y=isFinite(s)?1+Math.floor(u*v):Qu;y>Qu&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${Qu}`);const _=[];let S=0;for(let b=0;b<Qu;++b){const P=b/v,C=Math.exp(-P*P/2);_.push(C),b===0?S+=C:b<y&&(S+=2*C)}for(let b=0;b<_.length;b++)_[b]=_[b]/S;p.envMap.value=e.texture,p.samples.value=y,p.weights.value=_,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:E}=this;p.dTheta.value=g,p.mipInt.value=E-r;const w=this._sizeLods[i],I=3*w*(i>E-Eh?i-E+Eh:0),T=4*(this._cubeSize-w);Ay(t,I,T,3*w,2*w),l.setRenderTarget(t),l.render(f,yM)}}function xae(n){const e=[],t=[],r=[];let i=n;const s=n-Eh+1+Rk.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-Eh?l=Rk[o-n+Eh-1]:o===0&&(l=0),r.push(l);const c=1/(a-2),u=-c,f=1+c,p=[u,u,f,u,f,f,u,u,f,f,u,f],m=6,g=6,v=3,y=2,_=1,S=new Float32Array(v*g*m),E=new Float32Array(y*g*m),w=new Float32Array(_*g*m);for(let T=0;T<m;T++){const b=T%3*2/3-1,P=T>2?0:-1,C=[b,P,0,b+2/3,P,0,b+2/3,P+1,0,b,P,0,b+2/3,P+1,0,b,P+1,0];S.set(C,v*g*T),E.set(p,y*g*T);const M=[T,T,T,T,T,T];w.set(M,_*g*T)}const I=new Xt;I.setAttribute("position",new Mn(S,v)),I.setAttribute("uv",new Mn(E,y)),I.setAttribute("faceIndex",new Mn(w,_)),e.push(I),i>Eh&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function Dk(n,e,t){const r=new Ps(n,e,t);return r.texture.mapping=Hp,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Ay(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function Sae(n,e,t){const r=new Float32Array(Qu),i=new W(0,1,0);return new Ds({name:"SphericalGaussianBlur",defines:{n:Qu,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:lP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ja,depthTest:!1,depthWrite:!1})}function Bk(){return new Ds({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:lP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ja,depthTest:!1,depthWrite:!1})}function Lk(){return new Ds({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:lP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ja,depthTest:!1,depthWrite:!1})}function lP(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Eae(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===vp||l===x_,u=l===qa||l===iu;if(c||u){let f=e.get(a);const p=f!==void 0?f.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==p)return t===null&&(t=new xb(n)),f=c?t.fromEquirectangular(a,f):t.fromCubemap(a,f),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),f.texture;if(f!==void 0)return f.texture;{const m=a.image;return c&&m&&m.height>0||u&&m&&i(m)?(t===null&&(t=new xb(n)),f=c?t.fromEquirectangular(a):t.fromCubemap(a),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),a.addEventListener("dispose",s),f.texture):null}}}return a}function i(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function Aae(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(r){const i=t(r);return i===null&&Gh("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function wae(n,e,t,r){const i={},s=new WeakMap;function o(f){const p=f.target;p.index!==null&&e.remove(p.index);for(const g in p.attributes)e.remove(p.attributes[g]);for(const g in p.morphAttributes){const v=p.morphAttributes[g];for(let y=0,_=v.length;y<_;y++)e.remove(v[y])}p.removeEventListener("dispose",o),delete i[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),r.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(f,p){return i[p.id]===!0||(p.addEventListener("dispose",o),i[p.id]=!0,t.memory.geometries++),p}function l(f){const p=f.attributes;for(const g in p)e.update(p[g],n.ARRAY_BUFFER);const m=f.morphAttributes;for(const g in m){const v=m[g];for(let y=0,_=v.length;y<_;y++)e.update(v[y],n.ARRAY_BUFFER)}}function c(f){const p=[],m=f.index,g=f.attributes.position;let v=0;if(m!==null){const S=m.array;v=m.version;for(let E=0,w=S.length;E<w;E+=3){const I=S[E+0],T=S[E+1],b=S[E+2];p.push(I,T,T,b,b,I)}}else if(g!==void 0){const S=g.array;v=g.version;for(let E=0,w=S.length/3-1;E<w;E+=3){const I=E+0,T=E+1,b=E+2;p.push(I,T,T,b,b,I)}}else return;const y=new(N5(p)?oP:sP)(p,1);y.version=v;const _=s.get(f);_&&e.remove(_),s.set(f,y)}function u(f){const p=s.get(f);if(p){const m=f.index;m!==null&&p.version<m.version&&c(f)}else c(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:u}}function Mae(n,e,t){let r;function i(p){r=p}let s,o;function a(p){s=p.type,o=p.bytesPerElement}function l(p,m){n.drawElements(r,m,s,p*o),t.update(m,r,1)}function c(p,m,g){g!==0&&(n.drawElementsInstanced(r,m,s,p*o,g),t.update(m,r,g))}function u(p,m,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,m,0,s,p,0,g);let y=0;for(let _=0;_<g;_++)y+=m[_];t.update(y,r,1)}function f(p,m,g,v){if(g===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let _=0;_<p.length;_++)c(p[_]/o,m[_],v[_]);else{y.multiDrawElementsInstancedWEBGL(r,m,0,s,p,0,v,0,g);let _=0;for(let S=0;S<g;S++)_+=m[S];for(let S=0;S<v.length;S++)t.update(_,r,v[S])}}this.setMode=i,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=f}function Tae(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function Cae(n,e,t){const r=new WeakMap,i=new Dn;function s(o,a,l){const c=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,f=u!==void 0?u.length:0;let p=r.get(a);if(p===void 0||p.count!==f){let M=function(){P.dispose(),r.delete(a),a.removeEventListener("dispose",M)};var m=M;p!==void 0&&p.texture.dispose();const g=a.morphAttributes.position!==void 0,v=a.morphAttributes.normal!==void 0,y=a.morphAttributes.color!==void 0,_=a.morphAttributes.position||[],S=a.morphAttributes.normal||[],E=a.morphAttributes.color||[];let w=0;g===!0&&(w=1),v===!0&&(w=2),y===!0&&(w=3);let I=a.attributes.position.count*w,T=1;I>e.maxTextureSize&&(T=Math.ceil(I/e.maxTextureSize),I=e.maxTextureSize);const b=new Float32Array(I*T*4*f),P=new SE(b,I,T,f);P.type=ar,P.needsUpdate=!0;const C=w*4;for(let L=0;L<f;L++){const U=_[L],X=S[L],$=E[L],Q=I*T*4*L;for(let Y=0;Y<U.count;Y++){const te=Y*C;g===!0&&(i.fromBufferAttribute(U,Y),b[Q+te+0]=i.x,b[Q+te+1]=i.y,b[Q+te+2]=i.z,b[Q+te+3]=0),v===!0&&(i.fromBufferAttribute(X,Y),b[Q+te+4]=i.x,b[Q+te+5]=i.y,b[Q+te+6]=i.z,b[Q+te+7]=0),y===!0&&(i.fromBufferAttribute($,Y),b[Q+te+8]=i.x,b[Q+te+9]=i.y,b[Q+te+10]=i.z,b[Q+te+11]=$.itemSize===4?i.w:1)}}p={count:f,texture:P,size:new Le(I,T)},r.set(a,p),a.addEventListener("dispose",M)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let g=0;for(let y=0;y<c.length;y++)g+=c[y];const v=a.morphTargetsRelative?1:1-g;l.getUniforms().setValue(n,"morphTargetBaseInfluence",v),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",p.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",p.size)}return{update:s}}function bae(n,e,t,r){let i=new WeakMap;function s(l){const c=r.render.frame,u=l.geometry,f=e.get(l,u);if(i.get(f)!==c&&(e.update(f),i.set(f,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const p=l.skeleton;i.get(p)!==c&&(p.update(),i.set(p,c))}return f}function o(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}class EE extends En{constructor(e,t,r,i,s,o,a,l,c,u=bf){if(u!==bf&&u!==Xf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===bf&&(r=Qa),r===void 0&&u===Xf&&(r=Wf),super(null,i,s,o,a,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:$r,this.minFilter=l!==void 0?l:$r,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const W5=new En,Nk=new EE(1,1),X5=new SE,j5=new iP,Y5=new s0,kk=[],Fk=[],Ok=new Float32Array(16),Uk=new Float32Array(9),Hk=new Float32Array(4);function zp(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=kk[i];if(s===void 0&&(s=new Float32Array(i),kk[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Qr(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function Zr(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function AE(n,e){let t=Fk[e];t===void 0&&(t=new Int32Array(e),Fk[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function Rae(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Iae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Qr(t,e))return;n.uniform2fv(this.addr,e),Zr(t,e)}}function Pae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Qr(t,e))return;n.uniform3fv(this.addr,e),Zr(t,e)}}function Dae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Qr(t,e))return;n.uniform4fv(this.addr,e),Zr(t,e)}}function Bae(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Qr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Zr(t,e)}else{if(Qr(t,r))return;Hk.set(r),n.uniformMatrix2fv(this.addr,!1,Hk),Zr(t,r)}}function Lae(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Qr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Zr(t,e)}else{if(Qr(t,r))return;Uk.set(r),n.uniformMatrix3fv(this.addr,!1,Uk),Zr(t,r)}}function Nae(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Qr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Zr(t,e)}else{if(Qr(t,r))return;Ok.set(r),n.uniformMatrix4fv(this.addr,!1,Ok),Zr(t,r)}}function kae(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Fae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Qr(t,e))return;n.uniform2iv(this.addr,e),Zr(t,e)}}function Oae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Qr(t,e))return;n.uniform3iv(this.addr,e),Zr(t,e)}}function Uae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Qr(t,e))return;n.uniform4iv(this.addr,e),Zr(t,e)}}function Hae(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function zae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Qr(t,e))return;n.uniform2uiv(this.addr,e),Zr(t,e)}}function Gae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Qr(t,e))return;n.uniform3uiv(this.addr,e),Zr(t,e)}}function Vae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Qr(t,e))return;n.uniform4uiv(this.addr,e),Zr(t,e)}}function Wae(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);let s;this.type===n.SAMPLER_2D_SHADOW?(Nk.compareFunction=nP,s=Nk):s=W5,t.setTexture2D(e||s,i)}function Xae(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||j5,i)}function jae(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||Y5,i)}function Yae(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||X5,i)}function Jae(n){switch(n){case 5126:return Rae;case 35664:return Iae;case 35665:return Pae;case 35666:return Dae;case 35674:return Bae;case 35675:return Lae;case 35676:return Nae;case 5124:case 35670:return kae;case 35667:case 35671:return Fae;case 35668:case 35672:return Oae;case 35669:case 35673:return Uae;case 5125:return Hae;case 36294:return zae;case 36295:return Gae;case 36296:return Vae;case 35678:case 36198:case 36298:case 36306:case 35682:return Wae;case 35679:case 36299:case 36307:return Xae;case 35680:case 36300:case 36308:case 36293:return jae;case 36289:case 36303:case 36311:case 36292:return Yae}}function Kae(n,e){n.uniform1fv(this.addr,e)}function $ae(n,e){const t=zp(e,this.size,2);n.uniform2fv(this.addr,t)}function qae(n,e){const t=zp(e,this.size,3);n.uniform3fv(this.addr,t)}function Qae(n,e){const t=zp(e,this.size,4);n.uniform4fv(this.addr,t)}function Zae(n,e){const t=zp(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function ele(n,e){const t=zp(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function tle(n,e){const t=zp(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function nle(n,e){n.uniform1iv(this.addr,e)}function rle(n,e){n.uniform2iv(this.addr,e)}function ile(n,e){n.uniform3iv(this.addr,e)}function sle(n,e){n.uniform4iv(this.addr,e)}function ole(n,e){n.uniform1uiv(this.addr,e)}function ale(n,e){n.uniform2uiv(this.addr,e)}function lle(n,e){n.uniform3uiv(this.addr,e)}function cle(n,e){n.uniform4uiv(this.addr,e)}function ule(n,e,t){const r=this.cache,i=e.length,s=AE(t,i);Qr(r,s)||(n.uniform1iv(this.addr,s),Zr(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||W5,s[o])}function fle(n,e,t){const r=this.cache,i=e.length,s=AE(t,i);Qr(r,s)||(n.uniform1iv(this.addr,s),Zr(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||j5,s[o])}function dle(n,e,t){const r=this.cache,i=e.length,s=AE(t,i);Qr(r,s)||(n.uniform1iv(this.addr,s),Zr(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||Y5,s[o])}function hle(n,e,t){const r=this.cache,i=e.length,s=AE(t,i);Qr(r,s)||(n.uniform1iv(this.addr,s),Zr(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||X5,s[o])}function ple(n){switch(n){case 5126:return Kae;case 35664:return $ae;case 35665:return qae;case 35666:return Qae;case 35674:return Zae;case 35675:return ele;case 35676:return tle;case 5124:case 35670:return nle;case 35667:case 35671:return rle;case 35668:case 35672:return ile;case 35669:case 35673:return sle;case 5125:return ole;case 36294:return ale;case 36295:return lle;case 36296:return cle;case 35678:case 36198:case 36298:case 36306:case 35682:return ule;case 35679:case 36299:case 36307:return fle;case 35680:case 36300:case 36308:case 36293:return dle;case 36289:case 36303:case 36311:case 36292:return hle}}class mle{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=Jae(t.type)}}class gle{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=ple(t.type)}}class _le{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const wM=/(\w+)(\])?(\[|\.)?/g;function zk(n,e){n.seq.push(e),n.map[e.id]=e}function vle(n,e,t){const r=n.name,i=r.length;for(wM.lastIndex=0;;){const s=wM.exec(r),o=wM.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===i){zk(t,c===void 0?new mle(a,n,e):new gle(a,n,e));break}else{let f=t.map[a];f===void 0&&(f=new _le(a),zk(t,f)),t=f}}}class kx{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);vle(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function Gk(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const yle=37297;let xle=0;function Sle(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}function Ele(n){const e=Rn.getPrimaries(Rn.workingColorSpace),t=Rn.getPrimaries(n);let r;switch(e===t?r="":e===w_&&t===A_?r="LinearDisplayP3ToLinearSRGB":e===A_&&t===w_&&(r="LinearSRGBToLinearDisplayP3"),n){case zo:case r0:return[r,"LinearTransferOETF"];case Ws:case xE:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[r,"LinearTransferOETF"]}}function Vk(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+Sle(n.getShaderSource(e),o)}else return i}function Ale(n,e){const t=Ele(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function wle(n,e){let t;switch(e){case h5:t="Linear";break;case p5:t="Reinhard";break;case m5:t="Cineon";break;case jI:t="ACESFilmic";break;case _5:t="AgX";break;case v5:t="Neutral";break;case g5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const wy=new W;function Mle(){Rn.getLuminanceCoefficients(wy);const n=wy.x.toFixed(4),e=wy.y.toFixed(4),t=wy.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Tle(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(tg).join(`
`)}function Cle(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function ble(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function tg(n){return n!==""}function Wk(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Xk(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Rle=/^[ \t]*#include +<([\w\d./]+)>/gm;function Sb(n){return n.replace(Rle,Ple)}const Ile=new Map;function Ple(n,e){let t=qt[e];if(t===void 0){const r=Ile.get(e);if(r!==void 0)t=qt[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return Sb(t)}const Dle=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function jk(n){return n.replace(Dle,Ble)}function Ble(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function Yk(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Lle(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===fE?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===bg?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===ea&&(e="SHADOWMAP_TYPE_VSM"),e}function Nle(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case qa:case iu:e="ENVMAP_TYPE_CUBE";break;case Hp:e="ENVMAP_TYPE_CUBE_UV";break}return e}function kle(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case iu:e="ENVMAP_MODE_REFRACTION";break}return e}function Fle(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Z_:e="ENVMAP_BLENDING_MULTIPLY";break;case f5:e="ENVMAP_BLENDING_MIX";break;case d5:e="ENVMAP_BLENDING_ADD";break}return e}function Ole(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function Ule(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=Lle(t),c=Nle(t),u=kle(t),f=Fle(t),p=Ole(t),m=Tle(t),g=Cle(s),v=i.createProgram();let y,_,S=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(y=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(tg).join(`
`),y.length>0&&(y+=`
`),_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(tg).join(`
`),_.length>0&&(_+=`
`)):(y=[Yk(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(tg).join(`
`),_=[Yk(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Ya?"#define TONE_MAPPING":"",t.toneMapping!==Ya?qt.tonemapping_pars_fragment:"",t.toneMapping!==Ya?wle("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",qt.colorspace_pars_fragment,Ale("linearToOutputTexel",t.outputColorSpace),Mle(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(tg).join(`
`)),o=Sb(o),o=Wk(o,t),o=Xk(o,t),a=Sb(a),a=Wk(a,t),a=Xk(a,t),o=jk(o),a=jk(a),t.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,y=[m,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+y,_=["#define varying in",t.glslVersion===yb?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===yb?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);const E=S+y+o,w=S+_+a,I=Gk(i,i.VERTEX_SHADER,E),T=Gk(i,i.FRAGMENT_SHADER,w);i.attachShader(v,I),i.attachShader(v,T),t.index0AttributeName!==void 0?i.bindAttribLocation(v,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(v,0,"position"),i.linkProgram(v);function b(L){if(n.debug.checkShaderErrors){const U=i.getProgramInfoLog(v).trim(),X=i.getShaderInfoLog(I).trim(),$=i.getShaderInfoLog(T).trim();let Q=!0,Y=!0;if(i.getProgramParameter(v,i.LINK_STATUS)===!1)if(Q=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,v,I,T);else{const te=Vk(i,I,"vertex"),k=Vk(i,T,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(v,i.VALIDATE_STATUS)+`

Material Name: `+L.name+`
Material Type: `+L.type+`

Program Info Log: `+U+`
`+te+`
`+k)}else U!==""?console.warn("THREE.WebGLProgram: Program Info Log:",U):(X===""||$==="")&&(Y=!1);Y&&(L.diagnostics={runnable:Q,programLog:U,vertexShader:{log:X,prefix:y},fragmentShader:{log:$,prefix:_}})}i.deleteShader(I),i.deleteShader(T),P=new kx(i,v),C=ble(i,v)}let P;this.getUniforms=function(){return P===void 0&&b(this),P};let C;this.getAttributes=function(){return C===void 0&&b(this),C};let M=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return M===!1&&(M=i.getProgramParameter(v,yle)),M},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(v),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=xle++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=I,this.fragmentShader=T,this}let Hle=0;class zle{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new Gle(e),t.set(e,r)),r}}class Gle{constructor(e){this.id=Hle++,this.code=e,this.usedTimes=0}}function Vle(n,e,t,r,i,s,o){const a=new If,l=new zle,c=new Set,u=[],f=i.logarithmicDepthBuffer,p=i.vertexTextures;let m=i.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(C){return c.add(C),C===0?"uv":`uv${C}`}function y(C,M,L,U,X){const $=U.fog,Q=X.geometry,Y=C.isMeshStandardMaterial?U.environment:null,te=(C.isMeshStandardMaterial?t:e).get(C.envMap||Y),k=te&&te.mapping===Hp?te.image.height:null,K=g[C.type];C.precision!==null&&(m=i.getMaxPrecision(C.precision),m!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",m,"instead."));const F=Q.morphAttributes.position||Q.morphAttributes.normal||Q.morphAttributes.color,ie=F!==void 0?F.length:0;let me=0;Q.morphAttributes.position!==void 0&&(me=1),Q.morphAttributes.normal!==void 0&&(me=2),Q.morphAttributes.color!==void 0&&(me=3);let Ne,ce,xe,Ae;if(K){const Ot=sa[K];Ne=Ot.vertexShader,ce=Ot.fragmentShader}else Ne=C.vertexShader,ce=C.fragmentShader,l.update(C),xe=l.getVertexShaderID(C),Ae=l.getFragmentShaderID(C);const Ie=n.getRenderTarget(),Xe=X.isInstancedMesh===!0,it=X.isBatchedMesh===!0,Qe=!!C.map,Ge=!!C.matcap,z=!!te,pe=!!C.aoMap,Me=!!C.lightMap,Be=!!C.bumpMap,ye=!!C.normalMap,oe=!!C.displacementMap,Ue=!!C.emissiveMap,Ke=!!C.metalnessMap,V=!!C.roughnessMap,O=C.anisotropy>0,le=C.clearcoat>0,Se=C.dispersion>0,ve=C.iridescence>0,Ce=C.sheen>0,lt=C.transmission>0,Oe=O&&!!C.anisotropyMap,Ze=le&&!!C.clearcoatMap,_t=le&&!!C.clearcoatNormalMap,He=le&&!!C.clearcoatRoughnessMap,nt=ve&&!!C.iridescenceMap,St=ve&&!!C.iridescenceThicknessMap,Et=Ce&&!!C.sheenColorMap,Ye=Ce&&!!C.sheenRoughnessMap,re=!!C.specularMap,Pe=!!C.specularColorMap,je=!!C.specularIntensityMap,ee=lt&&!!C.transmissionMap,Te=lt&&!!C.thicknessMap,ue=!!C.gradientMap,Re=!!C.alphaMap,We=C.alphaTest>0,ht=!!C.alphaHash,Ct=!!C.extensions;let jt=Ya;C.toneMapped&&(Ie===null||Ie.isXRRenderTarget===!0)&&(jt=n.toneMapping);const cn={shaderID:K,shaderType:C.type,shaderName:C.name,vertexShader:Ne,fragmentShader:ce,defines:C.defines,customVertexShaderID:xe,customFragmentShaderID:Ae,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:m,batching:it,batchingColor:it&&X._colorsTexture!==null,instancing:Xe,instancingColor:Xe&&X.instanceColor!==null,instancingMorph:Xe&&X.morphTexture!==null,supportsVertexTextures:p,outputColorSpace:Ie===null?n.outputColorSpace:Ie.isXRRenderTarget===!0?Ie.texture.colorSpace:zo,alphaToCoverage:!!C.alphaToCoverage,map:Qe,matcap:Ge,envMap:z,envMapMode:z&&te.mapping,envMapCubeUVHeight:k,aoMap:pe,lightMap:Me,bumpMap:Be,normalMap:ye,displacementMap:p&&oe,emissiveMap:Ue,normalMapObjectSpace:ye&&C.normalMapType===T5,normalMapTangentSpace:ye&&C.normalMapType===pu,metalnessMap:Ke,roughnessMap:V,anisotropy:O,anisotropyMap:Oe,clearcoat:le,clearcoatMap:Ze,clearcoatNormalMap:_t,clearcoatRoughnessMap:He,dispersion:Se,iridescence:ve,iridescenceMap:nt,iridescenceThicknessMap:St,sheen:Ce,sheenColorMap:Et,sheenRoughnessMap:Ye,specularMap:re,specularColorMap:Pe,specularIntensityMap:je,transmission:lt,transmissionMap:ee,thicknessMap:Te,gradientMap:ue,opaque:C.transparent===!1&&C.blending===Cf&&C.alphaToCoverage===!1,alphaMap:Re,alphaTest:We,alphaHash:ht,combine:C.combine,mapUv:Qe&&v(C.map.channel),aoMapUv:pe&&v(C.aoMap.channel),lightMapUv:Me&&v(C.lightMap.channel),bumpMapUv:Be&&v(C.bumpMap.channel),normalMapUv:ye&&v(C.normalMap.channel),displacementMapUv:oe&&v(C.displacementMap.channel),emissiveMapUv:Ue&&v(C.emissiveMap.channel),metalnessMapUv:Ke&&v(C.metalnessMap.channel),roughnessMapUv:V&&v(C.roughnessMap.channel),anisotropyMapUv:Oe&&v(C.anisotropyMap.channel),clearcoatMapUv:Ze&&v(C.clearcoatMap.channel),clearcoatNormalMapUv:_t&&v(C.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:He&&v(C.clearcoatRoughnessMap.channel),iridescenceMapUv:nt&&v(C.iridescenceMap.channel),iridescenceThicknessMapUv:St&&v(C.iridescenceThicknessMap.channel),sheenColorMapUv:Et&&v(C.sheenColorMap.channel),sheenRoughnessMapUv:Ye&&v(C.sheenRoughnessMap.channel),specularMapUv:re&&v(C.specularMap.channel),specularColorMapUv:Pe&&v(C.specularColorMap.channel),specularIntensityMapUv:je&&v(C.specularIntensityMap.channel),transmissionMapUv:ee&&v(C.transmissionMap.channel),thicknessMapUv:Te&&v(C.thicknessMap.channel),alphaMapUv:Re&&v(C.alphaMap.channel),vertexTangents:!!Q.attributes.tangent&&(ye||O),vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&&!!Q.attributes.color&&Q.attributes.color.itemSize===4,pointsUvs:X.isPoints===!0&&!!Q.attributes.uv&&(Qe||Re),fog:!!$,useFog:C.fog===!0,fogExp2:!!$&&$.isFogExp2,flatShading:C.flatShading===!0,sizeAttenuation:C.sizeAttenuation===!0,logarithmicDepthBuffer:f,skinning:X.isSkinnedMesh===!0,morphTargets:Q.morphAttributes.position!==void 0,morphNormals:Q.morphAttributes.normal!==void 0,morphColors:Q.morphAttributes.color!==void 0,morphTargetsCount:ie,morphTextureStride:me,numDirLights:M.directional.length,numPointLights:M.point.length,numSpotLights:M.spot.length,numSpotLightMaps:M.spotLightMap.length,numRectAreaLights:M.rectArea.length,numHemiLights:M.hemi.length,numDirLightShadows:M.directionalShadowMap.length,numPointLightShadows:M.pointShadowMap.length,numSpotLightShadows:M.spotShadowMap.length,numSpotLightShadowsWithMaps:M.numSpotLightShadowsWithMaps,numLightProbes:M.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:C.dithering,shadowMapEnabled:n.shadowMap.enabled&&L.length>0,shadowMapType:n.shadowMap.type,toneMapping:jt,decodeVideoTexture:Qe&&C.map.isVideoTexture===!0&&Rn.getTransfer(C.map.colorSpace)===Wn,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===vs,flipSided:C.side===as,useDepthPacking:C.depthPacking>=0,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionClipCullDistance:Ct&&C.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ct&&C.extensions.multiDraw===!0||it)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:C.customProgramCacheKey()};return cn.vertexUv1s=c.has(1),cn.vertexUv2s=c.has(2),cn.vertexUv3s=c.has(3),c.clear(),cn}function _(C){const M=[];if(C.shaderID?M.push(C.shaderID):(M.push(C.customVertexShaderID),M.push(C.customFragmentShaderID)),C.defines!==void 0)for(const L in C.defines)M.push(L),M.push(C.defines[L]);return C.isRawShaderMaterial===!1&&(S(M,C),E(M,C),M.push(n.outputColorSpace)),M.push(C.customProgramCacheKey),M.join()}function S(C,M){C.push(M.precision),C.push(M.outputColorSpace),C.push(M.envMapMode),C.push(M.envMapCubeUVHeight),C.push(M.mapUv),C.push(M.alphaMapUv),C.push(M.lightMapUv),C.push(M.aoMapUv),C.push(M.bumpMapUv),C.push(M.normalMapUv),C.push(M.displacementMapUv),C.push(M.emissiveMapUv),C.push(M.metalnessMapUv),C.push(M.roughnessMapUv),C.push(M.anisotropyMapUv),C.push(M.clearcoatMapUv),C.push(M.clearcoatNormalMapUv),C.push(M.clearcoatRoughnessMapUv),C.push(M.iridescenceMapUv),C.push(M.iridescenceThicknessMapUv),C.push(M.sheenColorMapUv),C.push(M.sheenRoughnessMapUv),C.push(M.specularMapUv),C.push(M.specularColorMapUv),C.push(M.specularIntensityMapUv),C.push(M.transmissionMapUv),C.push(M.thicknessMapUv),C.push(M.combine),C.push(M.fogExp2),C.push(M.sizeAttenuation),C.push(M.morphTargetsCount),C.push(M.morphAttributeCount),C.push(M.numDirLights),C.push(M.numPointLights),C.push(M.numSpotLights),C.push(M.numSpotLightMaps),C.push(M.numHemiLights),C.push(M.numRectAreaLights),C.push(M.numDirLightShadows),C.push(M.numPointLightShadows),C.push(M.numSpotLightShadows),C.push(M.numSpotLightShadowsWithMaps),C.push(M.numLightProbes),C.push(M.shadowMapType),C.push(M.toneMapping),C.push(M.numClippingPlanes),C.push(M.numClipIntersection),C.push(M.depthPacking)}function E(C,M){a.disableAll(),M.supportsVertexTextures&&a.enable(0),M.instancing&&a.enable(1),M.instancingColor&&a.enable(2),M.instancingMorph&&a.enable(3),M.matcap&&a.enable(4),M.envMap&&a.enable(5),M.normalMapObjectSpace&&a.enable(6),M.normalMapTangentSpace&&a.enable(7),M.clearcoat&&a.enable(8),M.iridescence&&a.enable(9),M.alphaTest&&a.enable(10),M.vertexColors&&a.enable(11),M.vertexAlphas&&a.enable(12),M.vertexUv1s&&a.enable(13),M.vertexUv2s&&a.enable(14),M.vertexUv3s&&a.enable(15),M.vertexTangents&&a.enable(16),M.anisotropy&&a.enable(17),M.alphaHash&&a.enable(18),M.batching&&a.enable(19),M.dispersion&&a.enable(20),M.batchingColor&&a.enable(21),C.push(a.mask),a.disableAll(),M.fog&&a.enable(0),M.useFog&&a.enable(1),M.flatShading&&a.enable(2),M.logarithmicDepthBuffer&&a.enable(3),M.skinning&&a.enable(4),M.morphTargets&&a.enable(5),M.morphNormals&&a.enable(6),M.morphColors&&a.enable(7),M.premultipliedAlpha&&a.enable(8),M.shadowMapEnabled&&a.enable(9),M.doubleSided&&a.enable(10),M.flipSided&&a.enable(11),M.useDepthPacking&&a.enable(12),M.dithering&&a.enable(13),M.transmission&&a.enable(14),M.sheen&&a.enable(15),M.opaque&&a.enable(16),M.pointsUvs&&a.enable(17),M.decodeVideoTexture&&a.enable(18),M.alphaToCoverage&&a.enable(19),C.push(a.mask)}function w(C){const M=g[C.type];let L;if(M){const U=sa[M];L=z5.clone(U.uniforms)}else L=C.uniforms;return L}function I(C,M){let L;for(let U=0,X=u.length;U<X;U++){const $=u[U];if($.cacheKey===M){L=$,++L.usedTimes;break}}return L===void 0&&(L=new Ule(n,M,C,s),u.push(L)),L}function T(C){if(--C.usedTimes===0){const M=u.indexOf(C);u[M]=u[u.length-1],u.pop(),C.destroy()}}function b(C){l.remove(C)}function P(){l.dispose()}return{getParameters:y,getProgramCacheKey:_,getUniforms:w,acquireProgram:I,releaseProgram:T,releaseShaderCache:b,programs:u,dispose:P}}function Wle(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function r(o){n.delete(o)}function i(o,a,l){n.get(o)[a]=l}function s(){n=new WeakMap}return{has:e,get:t,remove:r,update:i,dispose:s}}function Xle(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function Jk(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function Kk(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(f,p,m,g,v,y){let _=n[e];return _===void 0?(_={id:f.id,object:f,geometry:p,material:m,groupOrder:g,renderOrder:f.renderOrder,z:v,group:y},n[e]=_):(_.id=f.id,_.object=f,_.geometry=p,_.material=m,_.groupOrder=g,_.renderOrder=f.renderOrder,_.z=v,_.group=y),e++,_}function a(f,p,m,g,v,y){const _=o(f,p,m,g,v,y);m.transmission>0?r.push(_):m.transparent===!0?i.push(_):t.push(_)}function l(f,p,m,g,v,y){const _=o(f,p,m,g,v,y);m.transmission>0?r.unshift(_):m.transparent===!0?i.unshift(_):t.unshift(_)}function c(f,p){t.length>1&&t.sort(f||Xle),r.length>1&&r.sort(p||Jk),i.length>1&&i.sort(p||Jk)}function u(){for(let f=e,p=n.length;f<p;f++){const m=n[f];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:u,sort:c}}function jle(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new Kk,n.set(r,[o])):i>=s.length?(o=new Kk,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function Yle(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new W,color:new rt};break;case"SpotLight":t={position:new W,direction:new W,color:new rt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new W,color:new rt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new W,skyColor:new rt,groundColor:new rt};break;case"RectAreaLight":t={color:new rt,position:new W,halfWidth:new W,halfHeight:new W};break}return n[e.id]=t,t}}}function Jle(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Le};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Le};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Le,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let Kle=0;function $le(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function qle(n){const e=new Yle,t=Jle(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)r.probe.push(new W);const i=new W,s=new Rt,o=new Rt;function a(c){let u=0,f=0,p=0;for(let C=0;C<9;C++)r.probe[C].set(0,0,0);let m=0,g=0,v=0,y=0,_=0,S=0,E=0,w=0,I=0,T=0,b=0;c.sort($le);for(let C=0,M=c.length;C<M;C++){const L=c[C],U=L.color,X=L.intensity,$=L.distance,Q=L.shadow&&L.shadow.map?L.shadow.map.texture:null;if(L.isAmbientLight)u+=U.r*X,f+=U.g*X,p+=U.b*X;else if(L.isLightProbe){for(let Y=0;Y<9;Y++)r.probe[Y].addScaledVector(L.sh.coefficients[Y],X);b++}else if(L.isDirectionalLight){const Y=e.get(L);if(Y.color.copy(L.color).multiplyScalar(L.intensity),L.castShadow){const te=L.shadow,k=t.get(L);k.shadowIntensity=te.intensity,k.shadowBias=te.bias,k.shadowNormalBias=te.normalBias,k.shadowRadius=te.radius,k.shadowMapSize=te.mapSize,r.directionalShadow[m]=k,r.directionalShadowMap[m]=Q,r.directionalShadowMatrix[m]=L.shadow.matrix,S++}r.directional[m]=Y,m++}else if(L.isSpotLight){const Y=e.get(L);Y.position.setFromMatrixPosition(L.matrixWorld),Y.color.copy(U).multiplyScalar(X),Y.distance=$,Y.coneCos=Math.cos(L.angle),Y.penumbraCos=Math.cos(L.angle*(1-L.penumbra)),Y.decay=L.decay,r.spot[v]=Y;const te=L.shadow;if(L.map&&(r.spotLightMap[I]=L.map,I++,te.updateMatrices(L),L.castShadow&&T++),r.spotLightMatrix[v]=te.matrix,L.castShadow){const k=t.get(L);k.shadowIntensity=te.intensity,k.shadowBias=te.bias,k.shadowNormalBias=te.normalBias,k.shadowRadius=te.radius,k.shadowMapSize=te.mapSize,r.spotShadow[v]=k,r.spotShadowMap[v]=Q,w++}v++}else if(L.isRectAreaLight){const Y=e.get(L);Y.color.copy(U).multiplyScalar(X),Y.halfWidth.set(L.width*.5,0,0),Y.halfHeight.set(0,L.height*.5,0),r.rectArea[y]=Y,y++}else if(L.isPointLight){const Y=e.get(L);if(Y.color.copy(L.color).multiplyScalar(L.intensity),Y.distance=L.distance,Y.decay=L.decay,L.castShadow){const te=L.shadow,k=t.get(L);k.shadowIntensity=te.intensity,k.shadowBias=te.bias,k.shadowNormalBias=te.normalBias,k.shadowRadius=te.radius,k.shadowMapSize=te.mapSize,k.shadowCameraNear=te.camera.near,k.shadowCameraFar=te.camera.far,r.pointShadow[g]=k,r.pointShadowMap[g]=Q,r.pointShadowMatrix[g]=L.shadow.matrix,E++}r.point[g]=Y,g++}else if(L.isHemisphereLight){const Y=e.get(L);Y.skyColor.copy(L.color).multiplyScalar(X),Y.groundColor.copy(L.groundColor).multiplyScalar(X),r.hemi[_]=Y,_++}}y>0&&(n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=ot.LTC_FLOAT_1,r.rectAreaLTC2=ot.LTC_FLOAT_2):(r.rectAreaLTC1=ot.LTC_HALF_1,r.rectAreaLTC2=ot.LTC_HALF_2)),r.ambient[0]=u,r.ambient[1]=f,r.ambient[2]=p;const P=r.hash;(P.directionalLength!==m||P.pointLength!==g||P.spotLength!==v||P.rectAreaLength!==y||P.hemiLength!==_||P.numDirectionalShadows!==S||P.numPointShadows!==E||P.numSpotShadows!==w||P.numSpotMaps!==I||P.numLightProbes!==b)&&(r.directional.length=m,r.spot.length=v,r.rectArea.length=y,r.point.length=g,r.hemi.length=_,r.directionalShadow.length=S,r.directionalShadowMap.length=S,r.pointShadow.length=E,r.pointShadowMap.length=E,r.spotShadow.length=w,r.spotShadowMap.length=w,r.directionalShadowMatrix.length=S,r.pointShadowMatrix.length=E,r.spotLightMatrix.length=w+I-T,r.spotLightMap.length=I,r.numSpotLightShadowsWithMaps=T,r.numLightProbes=b,P.directionalLength=m,P.pointLength=g,P.spotLength=v,P.rectAreaLength=y,P.hemiLength=_,P.numDirectionalShadows=S,P.numPointShadows=E,P.numSpotShadows=w,P.numSpotMaps=I,P.numLightProbes=b,r.version=Kle++)}function l(c,u){let f=0,p=0,m=0,g=0,v=0;const y=u.matrixWorldInverse;for(let _=0,S=c.length;_<S;_++){const E=c[_];if(E.isDirectionalLight){const w=r.directional[f];w.direction.setFromMatrixPosition(E.matrixWorld),i.setFromMatrixPosition(E.target.matrixWorld),w.direction.sub(i),w.direction.transformDirection(y),f++}else if(E.isSpotLight){const w=r.spot[m];w.position.setFromMatrixPosition(E.matrixWorld),w.position.applyMatrix4(y),w.direction.setFromMatrixPosition(E.matrixWorld),i.setFromMatrixPosition(E.target.matrixWorld),w.direction.sub(i),w.direction.transformDirection(y),m++}else if(E.isRectAreaLight){const w=r.rectArea[g];w.position.setFromMatrixPosition(E.matrixWorld),w.position.applyMatrix4(y),o.identity(),s.copy(E.matrixWorld),s.premultiply(y),o.extractRotation(s),w.halfWidth.set(E.width*.5,0,0),w.halfHeight.set(0,E.height*.5,0),w.halfWidth.applyMatrix4(o),w.halfHeight.applyMatrix4(o),g++}else if(E.isPointLight){const w=r.point[p];w.position.setFromMatrixPosition(E.matrixWorld),w.position.applyMatrix4(y),p++}else if(E.isHemisphereLight){const w=r.hemi[v];w.direction.setFromMatrixPosition(E.matrixWorld),w.direction.transformDirection(y),v++}}}return{setup:a,setupView:l,state:r}}function $k(n){const e=new qle(n),t=[],r=[];function i(u){c.camera=u,t.length=0,r.length=0}function s(u){t.push(u)}function o(u){r.push(u)}function a(){e.setup(t)}function l(u){e.setupView(t,u)}const c={lightsArray:t,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:c,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function Qle(n){let e=new WeakMap;function t(i,s=0){const o=e.get(i);let a;return o===void 0?(a=new $k(n),e.set(i,[a])):s>=o.length?(a=new $k(n),o.push(a)):a=o[s],a}function r(){e=new WeakMap}return{get:t,dispose:r}}class cP extends Vr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=w5,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class uP extends Vr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Zle=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,ece=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function tce(n,e,t){let r=new o0;const i=new Le,s=new Le,o=new Dn,a=new cP({depthPacking:M5}),l=new uP,c={},u=t.maxTextureSize,f={[$a]:as,[as]:$a,[vs]:vs},p=new Ds({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Le},radius:{value:4}},vertexShader:Zle,fragmentShader:ece}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const g=new Xt;g.setAttribute("position",new Mn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new lr(g,p),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=fE;let _=this.type;this.render=function(T,b,P){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||T.length===0)return;const C=n.getRenderTarget(),M=n.getActiveCubeFace(),L=n.getActiveMipmapLevel(),U=n.state;U.setBlending(ja),U.buffers.color.setClear(1,1,1,1),U.buffers.depth.setTest(!0),U.setScissorTest(!1);const X=_!==ea&&this.type===ea,$=_===ea&&this.type!==ea;for(let Q=0,Y=T.length;Q<Y;Q++){const te=T[Q],k=te.shadow;if(k===void 0){console.warn("THREE.WebGLShadowMap:",te,"has no shadow.");continue}if(k.autoUpdate===!1&&k.needsUpdate===!1)continue;i.copy(k.mapSize);const K=k.getFrameExtents();if(i.multiply(K),s.copy(k.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/K.x),i.x=s.x*K.x,k.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/K.y),i.y=s.y*K.y,k.mapSize.y=s.y)),k.map===null||X===!0||$===!0){const ie=this.type!==ea?{minFilter:$r,magFilter:$r}:{};k.map!==null&&k.map.dispose(),k.map=new Ps(i.x,i.y,ie),k.map.texture.name=te.name+".shadowMap",k.camera.updateProjectionMatrix()}n.setRenderTarget(k.map),n.clear();const F=k.getViewportCount();for(let ie=0;ie<F;ie++){const me=k.getViewport(ie);o.set(s.x*me.x,s.y*me.y,s.x*me.z,s.y*me.w),U.viewport(o),k.updateMatrices(te,ie),r=k.getFrustum(),w(b,P,k.camera,te,this.type)}k.isPointLightShadow!==!0&&this.type===ea&&S(k,P),k.needsUpdate=!1}_=this.type,y.needsUpdate=!1,n.setRenderTarget(C,M,L)};function S(T,b){const P=e.update(v);p.defines.VSM_SAMPLES!==T.blurSamples&&(p.defines.VSM_SAMPLES=T.blurSamples,m.defines.VSM_SAMPLES=T.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),T.mapPass===null&&(T.mapPass=new Ps(i.x,i.y)),p.uniforms.shadow_pass.value=T.map.texture,p.uniforms.resolution.value=T.mapSize,p.uniforms.radius.value=T.radius,n.setRenderTarget(T.mapPass),n.clear(),n.renderBufferDirect(b,null,P,p,v,null),m.uniforms.shadow_pass.value=T.mapPass.texture,m.uniforms.resolution.value=T.mapSize,m.uniforms.radius.value=T.radius,n.setRenderTarget(T.map),n.clear(),n.renderBufferDirect(b,null,P,m,v,null)}function E(T,b,P,C){let M=null;const L=P.isPointLight===!0?T.customDistanceMaterial:T.customDepthMaterial;if(L!==void 0)M=L;else if(M=P.isPointLight===!0?l:a,n.localClippingEnabled&&b.clipShadows===!0&&Array.isArray(b.clippingPlanes)&&b.clippingPlanes.length!==0||b.displacementMap&&b.displacementScale!==0||b.alphaMap&&b.alphaTest>0||b.map&&b.alphaTest>0){const U=M.uuid,X=b.uuid;let $=c[U];$===void 0&&($={},c[U]=$);let Q=$[X];Q===void 0&&(Q=M.clone(),$[X]=Q,b.addEventListener("dispose",I)),M=Q}if(M.visible=b.visible,M.wireframe=b.wireframe,C===ea?M.side=b.shadowSide!==null?b.shadowSide:b.side:M.side=b.shadowSide!==null?b.shadowSide:f[b.side],M.alphaMap=b.alphaMap,M.alphaTest=b.alphaTest,M.map=b.map,M.clipShadows=b.clipShadows,M.clippingPlanes=b.clippingPlanes,M.clipIntersection=b.clipIntersection,M.displacementMap=b.displacementMap,M.displacementScale=b.displacementScale,M.displacementBias=b.displacementBias,M.wireframeLinewidth=b.wireframeLinewidth,M.linewidth=b.linewidth,P.isPointLight===!0&&M.isMeshDistanceMaterial===!0){const U=n.properties.get(M);U.light=P}return M}function w(T,b,P,C,M){if(T.visible===!1)return;if(T.layers.test(b.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&M===ea)&&(!T.frustumCulled||r.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(P.matrixWorldInverse,T.matrixWorld);const X=e.update(T),$=T.material;if(Array.isArray($)){const Q=X.groups;for(let Y=0,te=Q.length;Y<te;Y++){const k=Q[Y],K=$[k.materialIndex];if(K&&K.visible){const F=E(T,K,C,M);T.onBeforeShadow(n,T,b,P,X,F,k),n.renderBufferDirect(P,null,X,F,T,k),T.onAfterShadow(n,T,b,P,X,F,k)}}}else if($.visible){const Q=E(T,$,C,M);T.onBeforeShadow(n,T,b,P,X,Q,null),n.renderBufferDirect(P,null,X,Q,T,null),T.onAfterShadow(n,T,b,P,X,Q,null)}}const U=T.children;for(let X=0,$=U.length;X<$;X++)w(U[X],b,P,C,M)}function I(T){T.target.removeEventListener("dispose",I);for(const P in c){const C=c[P],M=T.target.uuid;M in C&&(C[M].dispose(),delete C[M])}}}function nce(n){function e(){let ee=!1;const Te=new Dn;let ue=null;const Re=new Dn(0,0,0,0);return{setMask:function(We){ue!==We&&!ee&&(n.colorMask(We,We,We,We),ue=We)},setLocked:function(We){ee=We},setClear:function(We,ht,Ct,jt,cn){cn===!0&&(We*=jt,ht*=jt,Ct*=jt),Te.set(We,ht,Ct,jt),Re.equals(Te)===!1&&(n.clearColor(We,ht,Ct,jt),Re.copy(Te))},reset:function(){ee=!1,ue=null,Re.set(-1,0,0,0)}}}function t(){let ee=!1,Te=null,ue=null,Re=null;return{setTest:function(We){We?Ae(n.DEPTH_TEST):Ie(n.DEPTH_TEST)},setMask:function(We){Te!==We&&!ee&&(n.depthMask(We),Te=We)},setFunc:function(We){if(ue!==We){switch(We){case i5:n.depthFunc(n.NEVER);break;case s5:n.depthFunc(n.ALWAYS);break;case o5:n.depthFunc(n.LESS);break;case y_:n.depthFunc(n.LEQUAL);break;case a5:n.depthFunc(n.EQUAL);break;case l5:n.depthFunc(n.GEQUAL);break;case c5:n.depthFunc(n.GREATER);break;case u5:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}ue=We}},setLocked:function(We){ee=We},setClear:function(We){Re!==We&&(n.clearDepth(We),Re=We)},reset:function(){ee=!1,Te=null,ue=null,Re=null}}}function r(){let ee=!1,Te=null,ue=null,Re=null,We=null,ht=null,Ct=null,jt=null,cn=null;return{setTest:function(Ot){ee||(Ot?Ae(n.STENCIL_TEST):Ie(n.STENCIL_TEST))},setMask:function(Ot){Te!==Ot&&!ee&&(n.stencilMask(Ot),Te=Ot)},setFunc:function(Ot,yt,ft){(ue!==Ot||Re!==yt||We!==ft)&&(n.stencilFunc(Ot,yt,ft),ue=Ot,Re=yt,We=ft)},setOp:function(Ot,yt,ft){(ht!==Ot||Ct!==yt||jt!==ft)&&(n.stencilOp(Ot,yt,ft),ht=Ot,Ct=yt,jt=ft)},setLocked:function(Ot){ee=Ot},setClear:function(Ot){cn!==Ot&&(n.clearStencil(Ot),cn=Ot)},reset:function(){ee=!1,Te=null,ue=null,Re=null,We=null,ht=null,Ct=null,jt=null,cn=null}}}const i=new e,s=new t,o=new r,a=new WeakMap,l=new WeakMap;let c={},u={},f=new WeakMap,p=[],m=null,g=!1,v=null,y=null,_=null,S=null,E=null,w=null,I=null,T=new rt(0,0,0),b=0,P=!1,C=null,M=null,L=null,U=null,X=null;const $=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Q=!1,Y=0;const te=n.getParameter(n.VERSION);te.indexOf("WebGL")!==-1?(Y=parseFloat(/^WebGL (\d)/.exec(te)[1]),Q=Y>=1):te.indexOf("OpenGL ES")!==-1&&(Y=parseFloat(/^OpenGL ES (\d)/.exec(te)[1]),Q=Y>=2);let k=null,K={};const F=n.getParameter(n.SCISSOR_BOX),ie=n.getParameter(n.VIEWPORT),me=new Dn().fromArray(F),Ne=new Dn().fromArray(ie);function ce(ee,Te,ue,Re){const We=new Uint8Array(4),ht=n.createTexture();n.bindTexture(ee,ht),n.texParameteri(ee,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(ee,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Ct=0;Ct<ue;Ct++)ee===n.TEXTURE_3D||ee===n.TEXTURE_2D_ARRAY?n.texImage3D(Te,0,n.RGBA,1,1,Re,0,n.RGBA,n.UNSIGNED_BYTE,We):n.texImage2D(Te+Ct,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,We);return ht}const xe={};xe[n.TEXTURE_2D]=ce(n.TEXTURE_2D,n.TEXTURE_2D,1),xe[n.TEXTURE_CUBE_MAP]=ce(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),xe[n.TEXTURE_2D_ARRAY]=ce(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),xe[n.TEXTURE_3D]=ce(n.TEXTURE_3D,n.TEXTURE_3D,1,1),i.setClear(0,0,0,1),s.setClear(1),o.setClear(0),Ae(n.DEPTH_TEST),s.setFunc(y_),Be(!1),ye(db),Ae(n.CULL_FACE),pe(ja);function Ae(ee){c[ee]!==!0&&(n.enable(ee),c[ee]=!0)}function Ie(ee){c[ee]!==!1&&(n.disable(ee),c[ee]=!1)}function Xe(ee,Te){return u[ee]!==Te?(n.bindFramebuffer(ee,Te),u[ee]=Te,ee===n.DRAW_FRAMEBUFFER&&(u[n.FRAMEBUFFER]=Te),ee===n.FRAMEBUFFER&&(u[n.DRAW_FRAMEBUFFER]=Te),!0):!1}function it(ee,Te){let ue=p,Re=!1;if(ee){ue=f.get(Te),ue===void 0&&(ue=[],f.set(Te,ue));const We=ee.textures;if(ue.length!==We.length||ue[0]!==n.COLOR_ATTACHMENT0){for(let ht=0,Ct=We.length;ht<Ct;ht++)ue[ht]=n.COLOR_ATTACHMENT0+ht;ue.length=We.length,Re=!0}}else ue[0]!==n.BACK&&(ue[0]=n.BACK,Re=!0);Re&&n.drawBuffers(ue)}function Qe(ee){return m!==ee?(n.useProgram(ee),m=ee,!0):!1}const Ge={[wc]:n.FUNC_ADD,[zG]:n.FUNC_SUBTRACT,[GG]:n.FUNC_REVERSE_SUBTRACT};Ge[VG]=n.MIN,Ge[WG]=n.MAX;const z={[XG]:n.ZERO,[jG]:n.ONE,[YG]:n.SRC_COLOR,[HS]:n.SRC_ALPHA,[ZG]:n.SRC_ALPHA_SATURATE,[qG]:n.DST_COLOR,[KG]:n.DST_ALPHA,[JG]:n.ONE_MINUS_SRC_COLOR,[zS]:n.ONE_MINUS_SRC_ALPHA,[QG]:n.ONE_MINUS_DST_COLOR,[$G]:n.ONE_MINUS_DST_ALPHA,[e5]:n.CONSTANT_COLOR,[t5]:n.ONE_MINUS_CONSTANT_COLOR,[n5]:n.CONSTANT_ALPHA,[r5]:n.ONE_MINUS_CONSTANT_ALPHA};function pe(ee,Te,ue,Re,We,ht,Ct,jt,cn,Ot){if(ee===ja){g===!0&&(Ie(n.BLEND),g=!1);return}if(g===!1&&(Ae(n.BLEND),g=!0),ee!==HG){if(ee!==v||Ot!==P){if((y!==wc||E!==wc)&&(n.blendEquation(n.FUNC_ADD),y=wc,E=wc),Ot)switch(ee){case Cf:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case hb:n.blendFunc(n.ONE,n.ONE);break;case pb:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case mb:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ee);break}else switch(ee){case Cf:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case hb:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case pb:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case mb:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ee);break}_=null,S=null,w=null,I=null,T.set(0,0,0),b=0,v=ee,P=Ot}return}We=We||Te,ht=ht||ue,Ct=Ct||Re,(Te!==y||We!==E)&&(n.blendEquationSeparate(Ge[Te],Ge[We]),y=Te,E=We),(ue!==_||Re!==S||ht!==w||Ct!==I)&&(n.blendFuncSeparate(z[ue],z[Re],z[ht],z[Ct]),_=ue,S=Re,w=ht,I=Ct),(jt.equals(T)===!1||cn!==b)&&(n.blendColor(jt.r,jt.g,jt.b,cn),T.copy(jt),b=cn),v=ee,P=!1}function Me(ee,Te){ee.side===vs?Ie(n.CULL_FACE):Ae(n.CULL_FACE);let ue=ee.side===as;Te&&(ue=!ue),Be(ue),ee.blending===Cf&&ee.transparent===!1?pe(ja):pe(ee.blending,ee.blendEquation,ee.blendSrc,ee.blendDst,ee.blendEquationAlpha,ee.blendSrcAlpha,ee.blendDstAlpha,ee.blendColor,ee.blendAlpha,ee.premultipliedAlpha),s.setFunc(ee.depthFunc),s.setTest(ee.depthTest),s.setMask(ee.depthWrite),i.setMask(ee.colorWrite);const Re=ee.stencilWrite;o.setTest(Re),Re&&(o.setMask(ee.stencilWriteMask),o.setFunc(ee.stencilFunc,ee.stencilRef,ee.stencilFuncMask),o.setOp(ee.stencilFail,ee.stencilZFail,ee.stencilZPass)),Ue(ee.polygonOffset,ee.polygonOffsetFactor,ee.polygonOffsetUnits),ee.alphaToCoverage===!0?Ae(n.SAMPLE_ALPHA_TO_COVERAGE):Ie(n.SAMPLE_ALPHA_TO_COVERAGE)}function Be(ee){C!==ee&&(ee?n.frontFace(n.CW):n.frontFace(n.CCW),C=ee)}function ye(ee){ee!==FG?(Ae(n.CULL_FACE),ee!==M&&(ee===db?n.cullFace(n.BACK):ee===OG?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Ie(n.CULL_FACE),M=ee}function oe(ee){ee!==L&&(Q&&n.lineWidth(ee),L=ee)}function Ue(ee,Te,ue){ee?(Ae(n.POLYGON_OFFSET_FILL),(U!==Te||X!==ue)&&(n.polygonOffset(Te,ue),U=Te,X=ue)):Ie(n.POLYGON_OFFSET_FILL)}function Ke(ee){ee?Ae(n.SCISSOR_TEST):Ie(n.SCISSOR_TEST)}function V(ee){ee===void 0&&(ee=n.TEXTURE0+$-1),k!==ee&&(n.activeTexture(ee),k=ee)}function O(ee,Te,ue){ue===void 0&&(k===null?ue=n.TEXTURE0+$-1:ue=k);let Re=K[ue];Re===void 0&&(Re={type:void 0,texture:void 0},K[ue]=Re),(Re.type!==ee||Re.texture!==Te)&&(k!==ue&&(n.activeTexture(ue),k=ue),n.bindTexture(ee,Te||xe[ee]),Re.type=ee,Re.texture=Te)}function le(){const ee=K[k];ee!==void 0&&ee.type!==void 0&&(n.bindTexture(ee.type,null),ee.type=void 0,ee.texture=void 0)}function Se(){try{n.compressedTexImage2D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function ve(){try{n.compressedTexImage3D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Ce(){try{n.texSubImage2D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function lt(){try{n.texSubImage3D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Oe(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Ze(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function _t(){try{n.texStorage2D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function He(){try{n.texStorage3D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function nt(){try{n.texImage2D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function St(){try{n.texImage3D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Et(ee){me.equals(ee)===!1&&(n.scissor(ee.x,ee.y,ee.z,ee.w),me.copy(ee))}function Ye(ee){Ne.equals(ee)===!1&&(n.viewport(ee.x,ee.y,ee.z,ee.w),Ne.copy(ee))}function re(ee,Te){let ue=l.get(Te);ue===void 0&&(ue=new WeakMap,l.set(Te,ue));let Re=ue.get(ee);Re===void 0&&(Re=n.getUniformBlockIndex(Te,ee.name),ue.set(ee,Re))}function Pe(ee,Te){const Re=l.get(Te).get(ee);a.get(Te)!==Re&&(n.uniformBlockBinding(Te,Re,ee.__bindingPointIndex),a.set(Te,Re))}function je(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),c={},k=null,K={},u={},f=new WeakMap,p=[],m=null,g=!1,v=null,y=null,_=null,S=null,E=null,w=null,I=null,T=new rt(0,0,0),b=0,P=!1,C=null,M=null,L=null,U=null,X=null,me.set(0,0,n.canvas.width,n.canvas.height),Ne.set(0,0,n.canvas.width,n.canvas.height),i.reset(),s.reset(),o.reset()}return{buffers:{color:i,depth:s,stencil:o},enable:Ae,disable:Ie,bindFramebuffer:Xe,drawBuffers:it,useProgram:Qe,setBlending:pe,setMaterial:Me,setFlipSided:Be,setCullFace:ye,setLineWidth:oe,setPolygonOffset:Ue,setScissorTest:Ke,activeTexture:V,bindTexture:O,unbindTexture:le,compressedTexImage2D:Se,compressedTexImage3D:ve,texImage2D:nt,texImage3D:St,updateUBOMapping:re,uniformBlockBinding:Pe,texStorage2D:_t,texStorage3D:He,texSubImage2D:Ce,texSubImage3D:lt,compressedTexSubImage2D:Oe,compressedTexSubImage3D:Ze,scissor:Et,viewport:Ye,reset:je}}function rce(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function ice(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function sce(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function Eb(n,e,t,r){const i=oce(r);switch(t){case JI:return n*e;case $I:return n*e;case qI:return n*e*2;case t0:return n*e/i.components*i.byteLength;case n0:return n*e/i.components*i.byteLength;case QI:return n*e*2/i.components*i.byteLength;case _E:return n*e*2/i.components*i.byteLength;case KI:return n*e*3/i.components*i.byteLength;case Nr:return n*e*4/i.components*i.byteLength;case vE:return n*e*4/i.components*i.byteLength;case Rg:case Ig:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Pg:case Dg:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case VS:case XS:return Math.max(n,16)*Math.max(e,8)/4;case GS:case WS:return Math.max(n,8)*Math.max(e,8)/2;case jS:case YS:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case JS:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case KS:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case $S:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case qS:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case QS:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case ZS:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case e1:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case t1:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case n1:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case r1:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case i1:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case s1:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case o1:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case a1:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case l1:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case Bg:case c1:case u1:return Math.ceil(n/4)*Math.ceil(e/4)*16;case ZI:case f1:return Math.ceil(n/4)*Math.ceil(e/4)*8;case d1:case h1:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function oce(n){switch(n){case Is:case hE:return{byteLength:1,components:1};case xp:case pE:case qr:return{byteLength:2,components:1};case mE:case gE:return{byteLength:2,components:4};case Qa:case e0:case ar:return{byteLength:4,components:1};case YI:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}const ace={contain:rce,cover:ice,fill:sce,getByteLength:Eb};function lce(n,e,t,r,i,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new Le,u=new WeakMap;let f;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function g(V,O){return m?new OffscreenCanvas(V,O):C_("canvas")}function v(V,O,le){let Se=1;const ve=Ke(V);if((ve.width>le||ve.height>le)&&(Se=le/Math.max(ve.width,ve.height)),Se<1)if(typeof HTMLImageElement<"u"&&V instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&V instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&V instanceof ImageBitmap||typeof VideoFrame<"u"&&V instanceof VideoFrame){const Ce=Math.floor(Se*ve.width),lt=Math.floor(Se*ve.height);f===void 0&&(f=g(Ce,lt));const Oe=O?g(Ce,lt):f;return Oe.width=Ce,Oe.height=lt,Oe.getContext("2d").drawImage(V,0,0,Ce,lt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ve.width+"x"+ve.height+") to ("+Ce+"x"+lt+")."),Oe}else return"data"in V&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ve.width+"x"+ve.height+")."),V;return V}function y(V){return V.generateMipmaps&&V.minFilter!==$r&&V.minFilter!==Sn}function _(V){n.generateMipmap(V)}function S(V,O,le,Se,ve=!1){if(V!==null){if(n[V]!==void 0)return n[V];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+V+"'")}let Ce=O;if(O===n.RED&&(le===n.FLOAT&&(Ce=n.R32F),le===n.HALF_FLOAT&&(Ce=n.R16F),le===n.UNSIGNED_BYTE&&(Ce=n.R8)),O===n.RED_INTEGER&&(le===n.UNSIGNED_BYTE&&(Ce=n.R8UI),le===n.UNSIGNED_SHORT&&(Ce=n.R16UI),le===n.UNSIGNED_INT&&(Ce=n.R32UI),le===n.BYTE&&(Ce=n.R8I),le===n.SHORT&&(Ce=n.R16I),le===n.INT&&(Ce=n.R32I)),O===n.RG&&(le===n.FLOAT&&(Ce=n.RG32F),le===n.HALF_FLOAT&&(Ce=n.RG16F),le===n.UNSIGNED_BYTE&&(Ce=n.RG8)),O===n.RG_INTEGER&&(le===n.UNSIGNED_BYTE&&(Ce=n.RG8UI),le===n.UNSIGNED_SHORT&&(Ce=n.RG16UI),le===n.UNSIGNED_INT&&(Ce=n.RG32UI),le===n.BYTE&&(Ce=n.RG8I),le===n.SHORT&&(Ce=n.RG16I),le===n.INT&&(Ce=n.RG32I)),O===n.RGB&&le===n.UNSIGNED_INT_5_9_9_9_REV&&(Ce=n.RGB9_E5),O===n.RGBA){const lt=ve?E_:Rn.getTransfer(Se);le===n.FLOAT&&(Ce=n.RGBA32F),le===n.HALF_FLOAT&&(Ce=n.RGBA16F),le===n.UNSIGNED_BYTE&&(Ce=lt===Wn?n.SRGB8_ALPHA8:n.RGBA8),le===n.UNSIGNED_SHORT_4_4_4_4&&(Ce=n.RGBA4),le===n.UNSIGNED_SHORT_5_5_5_1&&(Ce=n.RGB5_A1)}return(Ce===n.R16F||Ce===n.R32F||Ce===n.RG16F||Ce===n.RG32F||Ce===n.RGBA16F||Ce===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Ce}function E(V,O){let le;return V?O===null||O===Qa||O===Wf?le=n.DEPTH24_STENCIL8:O===ar?le=n.DEPTH32F_STENCIL8:O===xp&&(le=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):O===null||O===Qa||O===Wf?le=n.DEPTH_COMPONENT24:O===ar?le=n.DEPTH_COMPONENT32F:O===xp&&(le=n.DEPTH_COMPONENT16),le}function w(V,O){return y(V)===!0||V.isFramebufferTexture&&V.minFilter!==$r&&V.minFilter!==Sn?Math.log2(Math.max(O.width,O.height))+1:V.mipmaps!==void 0&&V.mipmaps.length>0?V.mipmaps.length:V.isCompressedTexture&&Array.isArray(V.image)?O.mipmaps.length:1}function I(V){const O=V.target;O.removeEventListener("dispose",I),b(O),O.isVideoTexture&&u.delete(O)}function T(V){const O=V.target;O.removeEventListener("dispose",T),C(O)}function b(V){const O=r.get(V);if(O.__webglInit===void 0)return;const le=V.source,Se=p.get(le);if(Se){const ve=Se[O.__cacheKey];ve.usedTimes--,ve.usedTimes===0&&P(V),Object.keys(Se).length===0&&p.delete(le)}r.remove(V)}function P(V){const O=r.get(V);n.deleteTexture(O.__webglTexture);const le=V.source,Se=p.get(le);delete Se[O.__cacheKey],o.memory.textures--}function C(V){const O=r.get(V);if(V.depthTexture&&V.depthTexture.dispose(),V.isWebGLCubeRenderTarget)for(let Se=0;Se<6;Se++){if(Array.isArray(O.__webglFramebuffer[Se]))for(let ve=0;ve<O.__webglFramebuffer[Se].length;ve++)n.deleteFramebuffer(O.__webglFramebuffer[Se][ve]);else n.deleteFramebuffer(O.__webglFramebuffer[Se]);O.__webglDepthbuffer&&n.deleteRenderbuffer(O.__webglDepthbuffer[Se])}else{if(Array.isArray(O.__webglFramebuffer))for(let Se=0;Se<O.__webglFramebuffer.length;Se++)n.deleteFramebuffer(O.__webglFramebuffer[Se]);else n.deleteFramebuffer(O.__webglFramebuffer);if(O.__webglDepthbuffer&&n.deleteRenderbuffer(O.__webglDepthbuffer),O.__webglMultisampledFramebuffer&&n.deleteFramebuffer(O.__webglMultisampledFramebuffer),O.__webglColorRenderbuffer)for(let Se=0;Se<O.__webglColorRenderbuffer.length;Se++)O.__webglColorRenderbuffer[Se]&&n.deleteRenderbuffer(O.__webglColorRenderbuffer[Se]);O.__webglDepthRenderbuffer&&n.deleteRenderbuffer(O.__webglDepthRenderbuffer)}const le=V.textures;for(let Se=0,ve=le.length;Se<ve;Se++){const Ce=r.get(le[Se]);Ce.__webglTexture&&(n.deleteTexture(Ce.__webglTexture),o.memory.textures--),r.remove(le[Se])}r.remove(V)}let M=0;function L(){M=0}function U(){const V=M;return V>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+V+" texture units while this GPU supports only "+i.maxTextures),M+=1,V}function X(V){const O=[];return O.push(V.wrapS),O.push(V.wrapT),O.push(V.wrapR||0),O.push(V.magFilter),O.push(V.minFilter),O.push(V.anisotropy),O.push(V.internalFormat),O.push(V.format),O.push(V.type),O.push(V.generateMipmaps),O.push(V.premultiplyAlpha),O.push(V.flipY),O.push(V.unpackAlignment),O.push(V.colorSpace),O.join()}function $(V,O){const le=r.get(V);if(V.isVideoTexture&&oe(V),V.isRenderTargetTexture===!1&&V.version>0&&le.__version!==V.version){const Se=V.image;if(Se===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Se.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ne(le,V,O);return}}t.bindTexture(n.TEXTURE_2D,le.__webglTexture,n.TEXTURE0+O)}function Q(V,O){const le=r.get(V);if(V.version>0&&le.__version!==V.version){Ne(le,V,O);return}t.bindTexture(n.TEXTURE_2D_ARRAY,le.__webglTexture,n.TEXTURE0+O)}function Y(V,O){const le=r.get(V);if(V.version>0&&le.__version!==V.version){Ne(le,V,O);return}t.bindTexture(n.TEXTURE_3D,le.__webglTexture,n.TEXTURE0+O)}function te(V,O){const le=r.get(V);if(V.version>0&&le.__version!==V.version){ce(le,V,O);return}t.bindTexture(n.TEXTURE_CUBE_MAP,le.__webglTexture,n.TEXTURE0+O)}const k={[su]:n.REPEAT,[Lr]:n.CLAMP_TO_EDGE,[yp]:n.MIRRORED_REPEAT},K={[$r]:n.NEAREST,[dE]:n.NEAREST_MIPMAP_NEAREST,[af]:n.NEAREST_MIPMAP_LINEAR,[Sn]:n.LINEAR,[zh]:n.LINEAR_MIPMAP_NEAREST,[Bo]:n.LINEAR_MIPMAP_LINEAR},F={[C5]:n.NEVER,[B5]:n.ALWAYS,[b5]:n.LESS,[nP]:n.LEQUAL,[R5]:n.EQUAL,[D5]:n.GEQUAL,[I5]:n.GREATER,[P5]:n.NOTEQUAL};function ie(V,O){if(O.type===ar&&e.has("OES_texture_float_linear")===!1&&(O.magFilter===Sn||O.magFilter===zh||O.magFilter===af||O.magFilter===Bo||O.minFilter===Sn||O.minFilter===zh||O.minFilter===af||O.minFilter===Bo)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(V,n.TEXTURE_WRAP_S,k[O.wrapS]),n.texParameteri(V,n.TEXTURE_WRAP_T,k[O.wrapT]),(V===n.TEXTURE_3D||V===n.TEXTURE_2D_ARRAY)&&n.texParameteri(V,n.TEXTURE_WRAP_R,k[O.wrapR]),n.texParameteri(V,n.TEXTURE_MAG_FILTER,K[O.magFilter]),n.texParameteri(V,n.TEXTURE_MIN_FILTER,K[O.minFilter]),O.compareFunction&&(n.texParameteri(V,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(V,n.TEXTURE_COMPARE_FUNC,F[O.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(O.magFilter===$r||O.minFilter!==af&&O.minFilter!==Bo||O.type===ar&&e.has("OES_texture_float_linear")===!1)return;if(O.anisotropy>1||r.get(O).__currentAnisotropy){const le=e.get("EXT_texture_filter_anisotropic");n.texParameterf(V,le.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(O.anisotropy,i.getMaxAnisotropy())),r.get(O).__currentAnisotropy=O.anisotropy}}}function me(V,O){let le=!1;V.__webglInit===void 0&&(V.__webglInit=!0,O.addEventListener("dispose",I));const Se=O.source;let ve=p.get(Se);ve===void 0&&(ve={},p.set(Se,ve));const Ce=X(O);if(Ce!==V.__cacheKey){ve[Ce]===void 0&&(ve[Ce]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,le=!0),ve[Ce].usedTimes++;const lt=ve[V.__cacheKey];lt!==void 0&&(ve[V.__cacheKey].usedTimes--,lt.usedTimes===0&&P(O)),V.__cacheKey=Ce,V.__webglTexture=ve[Ce].texture}return le}function Ne(V,O,le){let Se=n.TEXTURE_2D;(O.isDataArrayTexture||O.isCompressedArrayTexture)&&(Se=n.TEXTURE_2D_ARRAY),O.isData3DTexture&&(Se=n.TEXTURE_3D);const ve=me(V,O),Ce=O.source;t.bindTexture(Se,V.__webglTexture,n.TEXTURE0+le);const lt=r.get(Ce);if(Ce.version!==lt.__version||ve===!0){t.activeTexture(n.TEXTURE0+le);const Oe=Rn.getPrimaries(Rn.workingColorSpace),Ze=O.colorSpace===wl?null:Rn.getPrimaries(O.colorSpace),_t=O.colorSpace===wl||Oe===Ze?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,O.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,O.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,O.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,_t);let He=v(O.image,!1,i.maxTextureSize);He=Ue(O,He);const nt=s.convert(O.format,O.colorSpace),St=s.convert(O.type);let Et=S(O.internalFormat,nt,St,O.colorSpace,O.isVideoTexture);ie(Se,O);let Ye;const re=O.mipmaps,Pe=O.isVideoTexture!==!0,je=lt.__version===void 0||ve===!0,ee=Ce.dataReady,Te=w(O,He);if(O.isDepthTexture)Et=E(O.format===Xf,O.type),je&&(Pe?t.texStorage2D(n.TEXTURE_2D,1,Et,He.width,He.height):t.texImage2D(n.TEXTURE_2D,0,Et,He.width,He.height,0,nt,St,null));else if(O.isDataTexture)if(re.length>0){Pe&&je&&t.texStorage2D(n.TEXTURE_2D,Te,Et,re[0].width,re[0].height);for(let ue=0,Re=re.length;ue<Re;ue++)Ye=re[ue],Pe?ee&&t.texSubImage2D(n.TEXTURE_2D,ue,0,0,Ye.width,Ye.height,nt,St,Ye.data):t.texImage2D(n.TEXTURE_2D,ue,Et,Ye.width,Ye.height,0,nt,St,Ye.data);O.generateMipmaps=!1}else Pe?(je&&t.texStorage2D(n.TEXTURE_2D,Te,Et,He.width,He.height),ee&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,He.width,He.height,nt,St,He.data)):t.texImage2D(n.TEXTURE_2D,0,Et,He.width,He.height,0,nt,St,He.data);else if(O.isCompressedTexture)if(O.isCompressedArrayTexture){Pe&&je&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Te,Et,re[0].width,re[0].height,He.depth);for(let ue=0,Re=re.length;ue<Re;ue++)if(Ye=re[ue],O.format!==Nr)if(nt!==null)if(Pe){if(ee)if(O.layerUpdates.size>0){const We=Eb(Ye.width,Ye.height,O.format,O.type);for(const ht of O.layerUpdates){const Ct=Ye.data.subarray(ht*We/Ye.data.BYTES_PER_ELEMENT,(ht+1)*We/Ye.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ue,0,0,ht,Ye.width,Ye.height,1,nt,Ct,0,0)}O.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ue,0,0,0,Ye.width,Ye.height,He.depth,nt,Ye.data,0,0)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,ue,Et,Ye.width,Ye.height,He.depth,0,Ye.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Pe?ee&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,ue,0,0,0,Ye.width,Ye.height,He.depth,nt,St,Ye.data):t.texImage3D(n.TEXTURE_2D_ARRAY,ue,Et,Ye.width,Ye.height,He.depth,0,nt,St,Ye.data)}else{Pe&&je&&t.texStorage2D(n.TEXTURE_2D,Te,Et,re[0].width,re[0].height);for(let ue=0,Re=re.length;ue<Re;ue++)Ye=re[ue],O.format!==Nr?nt!==null?Pe?ee&&t.compressedTexSubImage2D(n.TEXTURE_2D,ue,0,0,Ye.width,Ye.height,nt,Ye.data):t.compressedTexImage2D(n.TEXTURE_2D,ue,Et,Ye.width,Ye.height,0,Ye.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Pe?ee&&t.texSubImage2D(n.TEXTURE_2D,ue,0,0,Ye.width,Ye.height,nt,St,Ye.data):t.texImage2D(n.TEXTURE_2D,ue,Et,Ye.width,Ye.height,0,nt,St,Ye.data)}else if(O.isDataArrayTexture)if(Pe){if(je&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Te,Et,He.width,He.height,He.depth),ee)if(O.layerUpdates.size>0){const ue=Eb(He.width,He.height,O.format,O.type);for(const Re of O.layerUpdates){const We=He.data.subarray(Re*ue/He.data.BYTES_PER_ELEMENT,(Re+1)*ue/He.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Re,He.width,He.height,1,nt,St,We)}O.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,He.width,He.height,He.depth,nt,St,He.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,Et,He.width,He.height,He.depth,0,nt,St,He.data);else if(O.isData3DTexture)Pe?(je&&t.texStorage3D(n.TEXTURE_3D,Te,Et,He.width,He.height,He.depth),ee&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,He.width,He.height,He.depth,nt,St,He.data)):t.texImage3D(n.TEXTURE_3D,0,Et,He.width,He.height,He.depth,0,nt,St,He.data);else if(O.isFramebufferTexture){if(je)if(Pe)t.texStorage2D(n.TEXTURE_2D,Te,Et,He.width,He.height);else{let ue=He.width,Re=He.height;for(let We=0;We<Te;We++)t.texImage2D(n.TEXTURE_2D,We,Et,ue,Re,0,nt,St,null),ue>>=1,Re>>=1}}else if(re.length>0){if(Pe&&je){const ue=Ke(re[0]);t.texStorage2D(n.TEXTURE_2D,Te,Et,ue.width,ue.height)}for(let ue=0,Re=re.length;ue<Re;ue++)Ye=re[ue],Pe?ee&&t.texSubImage2D(n.TEXTURE_2D,ue,0,0,nt,St,Ye):t.texImage2D(n.TEXTURE_2D,ue,Et,nt,St,Ye);O.generateMipmaps=!1}else if(Pe){if(je){const ue=Ke(He);t.texStorage2D(n.TEXTURE_2D,Te,Et,ue.width,ue.height)}ee&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,nt,St,He)}else t.texImage2D(n.TEXTURE_2D,0,Et,nt,St,He);y(O)&&_(Se),lt.__version=Ce.version,O.onUpdate&&O.onUpdate(O)}V.__version=O.version}function ce(V,O,le){if(O.image.length!==6)return;const Se=me(V,O),ve=O.source;t.bindTexture(n.TEXTURE_CUBE_MAP,V.__webglTexture,n.TEXTURE0+le);const Ce=r.get(ve);if(ve.version!==Ce.__version||Se===!0){t.activeTexture(n.TEXTURE0+le);const lt=Rn.getPrimaries(Rn.workingColorSpace),Oe=O.colorSpace===wl?null:Rn.getPrimaries(O.colorSpace),Ze=O.colorSpace===wl||lt===Oe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,O.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,O.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,O.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ze);const _t=O.isCompressedTexture||O.image[0].isCompressedTexture,He=O.image[0]&&O.image[0].isDataTexture,nt=[];for(let Re=0;Re<6;Re++)!_t&&!He?nt[Re]=v(O.image[Re],!0,i.maxCubemapSize):nt[Re]=He?O.image[Re].image:O.image[Re],nt[Re]=Ue(O,nt[Re]);const St=nt[0],Et=s.convert(O.format,O.colorSpace),Ye=s.convert(O.type),re=S(O.internalFormat,Et,Ye,O.colorSpace),Pe=O.isVideoTexture!==!0,je=Ce.__version===void 0||Se===!0,ee=ve.dataReady;let Te=w(O,St);ie(n.TEXTURE_CUBE_MAP,O);let ue;if(_t){Pe&&je&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Te,re,St.width,St.height);for(let Re=0;Re<6;Re++){ue=nt[Re].mipmaps;for(let We=0;We<ue.length;We++){const ht=ue[We];O.format!==Nr?Et!==null?Pe?ee&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,We,0,0,ht.width,ht.height,Et,ht.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,We,re,ht.width,ht.height,0,ht.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Pe?ee&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,We,0,0,ht.width,ht.height,Et,Ye,ht.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,We,re,ht.width,ht.height,0,Et,Ye,ht.data)}}}else{if(ue=O.mipmaps,Pe&&je){ue.length>0&&Te++;const Re=Ke(nt[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Te,re,Re.width,Re.height)}for(let Re=0;Re<6;Re++)if(He){Pe?ee&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,0,0,0,nt[Re].width,nt[Re].height,Et,Ye,nt[Re].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,0,re,nt[Re].width,nt[Re].height,0,Et,Ye,nt[Re].data);for(let We=0;We<ue.length;We++){const Ct=ue[We].image[Re].image;Pe?ee&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,We+1,0,0,Ct.width,Ct.height,Et,Ye,Ct.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,We+1,re,Ct.width,Ct.height,0,Et,Ye,Ct.data)}}else{Pe?ee&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,0,0,0,Et,Ye,nt[Re]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,0,re,Et,Ye,nt[Re]);for(let We=0;We<ue.length;We++){const ht=ue[We];Pe?ee&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,We+1,0,0,Et,Ye,ht.image[Re]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,We+1,re,Et,Ye,ht.image[Re])}}}y(O)&&_(n.TEXTURE_CUBE_MAP),Ce.__version=ve.version,O.onUpdate&&O.onUpdate(O)}V.__version=O.version}function xe(V,O,le,Se,ve,Ce){const lt=s.convert(le.format,le.colorSpace),Oe=s.convert(le.type),Ze=S(le.internalFormat,lt,Oe,le.colorSpace);if(!r.get(O).__hasExternalTextures){const He=Math.max(1,O.width>>Ce),nt=Math.max(1,O.height>>Ce);ve===n.TEXTURE_3D||ve===n.TEXTURE_2D_ARRAY?t.texImage3D(ve,Ce,Ze,He,nt,O.depth,0,lt,Oe,null):t.texImage2D(ve,Ce,Ze,He,nt,0,lt,Oe,null)}t.bindFramebuffer(n.FRAMEBUFFER,V),ye(O)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Se,ve,r.get(le).__webglTexture,0,Be(O)):(ve===n.TEXTURE_2D||ve>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&ve<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Se,ve,r.get(le).__webglTexture,Ce),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ae(V,O,le){if(n.bindRenderbuffer(n.RENDERBUFFER,V),O.depthBuffer){const Se=O.depthTexture,ve=Se&&Se.isDepthTexture?Se.type:null,Ce=E(O.stencilBuffer,ve),lt=O.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Oe=Be(O);ye(O)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Oe,Ce,O.width,O.height):le?n.renderbufferStorageMultisample(n.RENDERBUFFER,Oe,Ce,O.width,O.height):n.renderbufferStorage(n.RENDERBUFFER,Ce,O.width,O.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,lt,n.RENDERBUFFER,V)}else{const Se=O.textures;for(let ve=0;ve<Se.length;ve++){const Ce=Se[ve],lt=s.convert(Ce.format,Ce.colorSpace),Oe=s.convert(Ce.type),Ze=S(Ce.internalFormat,lt,Oe,Ce.colorSpace),_t=Be(O);le&&ye(O)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,_t,Ze,O.width,O.height):ye(O)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,_t,Ze,O.width,O.height):n.renderbufferStorage(n.RENDERBUFFER,Ze,O.width,O.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Ie(V,O){if(O&&O.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,V),!(O.depthTexture&&O.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(O.depthTexture).__webglTexture||O.depthTexture.image.width!==O.width||O.depthTexture.image.height!==O.height)&&(O.depthTexture.image.width=O.width,O.depthTexture.image.height=O.height,O.depthTexture.needsUpdate=!0),$(O.depthTexture,0);const Se=r.get(O.depthTexture).__webglTexture,ve=Be(O);if(O.depthTexture.format===bf)ye(O)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Se,0,ve):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Se,0);else if(O.depthTexture.format===Xf)ye(O)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Se,0,ve):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Se,0);else throw new Error("Unknown depthTexture format")}function Xe(V){const O=r.get(V),le=V.isWebGLCubeRenderTarget===!0;if(O.__boundDepthTexture!==V.depthTexture){const Se=V.depthTexture;if(O.__depthDisposeCallback&&O.__depthDisposeCallback(),Se){const ve=()=>{delete O.__boundDepthTexture,delete O.__depthDisposeCallback,Se.removeEventListener("dispose",ve)};Se.addEventListener("dispose",ve),O.__depthDisposeCallback=ve}O.__boundDepthTexture=Se}if(V.depthTexture&&!O.__autoAllocateDepthBuffer){if(le)throw new Error("target.depthTexture not supported in Cube render targets");Ie(O.__webglFramebuffer,V)}else if(le){O.__webglDepthbuffer=[];for(let Se=0;Se<6;Se++)if(t.bindFramebuffer(n.FRAMEBUFFER,O.__webglFramebuffer[Se]),O.__webglDepthbuffer[Se]===void 0)O.__webglDepthbuffer[Se]=n.createRenderbuffer(),Ae(O.__webglDepthbuffer[Se],V,!1);else{const ve=V.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ce=O.__webglDepthbuffer[Se];n.bindRenderbuffer(n.RENDERBUFFER,Ce),n.framebufferRenderbuffer(n.FRAMEBUFFER,ve,n.RENDERBUFFER,Ce)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,O.__webglFramebuffer),O.__webglDepthbuffer===void 0)O.__webglDepthbuffer=n.createRenderbuffer(),Ae(O.__webglDepthbuffer,V,!1);else{const Se=V.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ve=O.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,ve),n.framebufferRenderbuffer(n.FRAMEBUFFER,Se,n.RENDERBUFFER,ve)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function it(V,O,le){const Se=r.get(V);O!==void 0&&xe(Se.__webglFramebuffer,V,V.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),le!==void 0&&Xe(V)}function Qe(V){const O=V.texture,le=r.get(V),Se=r.get(O);V.addEventListener("dispose",T);const ve=V.textures,Ce=V.isWebGLCubeRenderTarget===!0,lt=ve.length>1;if(lt||(Se.__webglTexture===void 0&&(Se.__webglTexture=n.createTexture()),Se.__version=O.version,o.memory.textures++),Ce){le.__webglFramebuffer=[];for(let Oe=0;Oe<6;Oe++)if(O.mipmaps&&O.mipmaps.length>0){le.__webglFramebuffer[Oe]=[];for(let Ze=0;Ze<O.mipmaps.length;Ze++)le.__webglFramebuffer[Oe][Ze]=n.createFramebuffer()}else le.__webglFramebuffer[Oe]=n.createFramebuffer()}else{if(O.mipmaps&&O.mipmaps.length>0){le.__webglFramebuffer=[];for(let Oe=0;Oe<O.mipmaps.length;Oe++)le.__webglFramebuffer[Oe]=n.createFramebuffer()}else le.__webglFramebuffer=n.createFramebuffer();if(lt)for(let Oe=0,Ze=ve.length;Oe<Ze;Oe++){const _t=r.get(ve[Oe]);_t.__webglTexture===void 0&&(_t.__webglTexture=n.createTexture(),o.memory.textures++)}if(V.samples>0&&ye(V)===!1){le.__webglMultisampledFramebuffer=n.createFramebuffer(),le.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,le.__webglMultisampledFramebuffer);for(let Oe=0;Oe<ve.length;Oe++){const Ze=ve[Oe];le.__webglColorRenderbuffer[Oe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,le.__webglColorRenderbuffer[Oe]);const _t=s.convert(Ze.format,Ze.colorSpace),He=s.convert(Ze.type),nt=S(Ze.internalFormat,_t,He,Ze.colorSpace,V.isXRRenderTarget===!0),St=Be(V);n.renderbufferStorageMultisample(n.RENDERBUFFER,St,nt,V.width,V.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Oe,n.RENDERBUFFER,le.__webglColorRenderbuffer[Oe])}n.bindRenderbuffer(n.RENDERBUFFER,null),V.depthBuffer&&(le.__webglDepthRenderbuffer=n.createRenderbuffer(),Ae(le.__webglDepthRenderbuffer,V,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Ce){t.bindTexture(n.TEXTURE_CUBE_MAP,Se.__webglTexture),ie(n.TEXTURE_CUBE_MAP,O);for(let Oe=0;Oe<6;Oe++)if(O.mipmaps&&O.mipmaps.length>0)for(let Ze=0;Ze<O.mipmaps.length;Ze++)xe(le.__webglFramebuffer[Oe][Ze],V,O,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,Ze);else xe(le.__webglFramebuffer[Oe],V,O,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,0);y(O)&&_(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(lt){for(let Oe=0,Ze=ve.length;Oe<Ze;Oe++){const _t=ve[Oe],He=r.get(_t);t.bindTexture(n.TEXTURE_2D,He.__webglTexture),ie(n.TEXTURE_2D,_t),xe(le.__webglFramebuffer,V,_t,n.COLOR_ATTACHMENT0+Oe,n.TEXTURE_2D,0),y(_t)&&_(n.TEXTURE_2D)}t.unbindTexture()}else{let Oe=n.TEXTURE_2D;if((V.isWebGL3DRenderTarget||V.isWebGLArrayRenderTarget)&&(Oe=V.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Oe,Se.__webglTexture),ie(Oe,O),O.mipmaps&&O.mipmaps.length>0)for(let Ze=0;Ze<O.mipmaps.length;Ze++)xe(le.__webglFramebuffer[Ze],V,O,n.COLOR_ATTACHMENT0,Oe,Ze);else xe(le.__webglFramebuffer,V,O,n.COLOR_ATTACHMENT0,Oe,0);y(O)&&_(Oe),t.unbindTexture()}V.depthBuffer&&Xe(V)}function Ge(V){const O=V.textures;for(let le=0,Se=O.length;le<Se;le++){const ve=O[le];if(y(ve)){const Ce=V.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,lt=r.get(ve).__webglTexture;t.bindTexture(Ce,lt),_(Ce),t.unbindTexture()}}}const z=[],pe=[];function Me(V){if(V.samples>0){if(ye(V)===!1){const O=V.textures,le=V.width,Se=V.height;let ve=n.COLOR_BUFFER_BIT;const Ce=V.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,lt=r.get(V),Oe=O.length>1;if(Oe)for(let Ze=0;Ze<O.length;Ze++)t.bindFramebuffer(n.FRAMEBUFFER,lt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ze,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,lt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ze,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,lt.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,lt.__webglFramebuffer);for(let Ze=0;Ze<O.length;Ze++){if(V.resolveDepthBuffer&&(V.depthBuffer&&(ve|=n.DEPTH_BUFFER_BIT),V.stencilBuffer&&V.resolveStencilBuffer&&(ve|=n.STENCIL_BUFFER_BIT)),Oe){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,lt.__webglColorRenderbuffer[Ze]);const _t=r.get(O[Ze]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,_t,0)}n.blitFramebuffer(0,0,le,Se,0,0,le,Se,ve,n.NEAREST),l===!0&&(z.length=0,pe.length=0,z.push(n.COLOR_ATTACHMENT0+Ze),V.depthBuffer&&V.resolveDepthBuffer===!1&&(z.push(Ce),pe.push(Ce),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,pe)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,z))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Oe)for(let Ze=0;Ze<O.length;Ze++){t.bindFramebuffer(n.FRAMEBUFFER,lt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ze,n.RENDERBUFFER,lt.__webglColorRenderbuffer[Ze]);const _t=r.get(O[Ze]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,lt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ze,n.TEXTURE_2D,_t,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,lt.__webglMultisampledFramebuffer)}else if(V.depthBuffer&&V.resolveDepthBuffer===!1&&l){const O=V.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[O])}}}function Be(V){return Math.min(i.maxSamples,V.samples)}function ye(V){const O=r.get(V);return V.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&O.__useRenderToTexture!==!1}function oe(V){const O=o.render.frame;u.get(V)!==O&&(u.set(V,O),V.update())}function Ue(V,O){const le=V.colorSpace,Se=V.format,ve=V.type;return V.isCompressedTexture===!0||V.isVideoTexture===!0||le!==zo&&le!==wl&&(Rn.getTransfer(le)===Wn?(Se!==Nr||ve!==Is)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",le)),O}function Ke(V){return typeof HTMLImageElement<"u"&&V instanceof HTMLImageElement?(c.width=V.naturalWidth||V.width,c.height=V.naturalHeight||V.height):typeof VideoFrame<"u"&&V instanceof VideoFrame?(c.width=V.displayWidth,c.height=V.displayHeight):(c.width=V.width,c.height=V.height),c}this.allocateTextureUnit=U,this.resetTextureUnits=L,this.setTexture2D=$,this.setTexture2DArray=Q,this.setTexture3D=Y,this.setTextureCube=te,this.rebindTextures=it,this.setupRenderTarget=Qe,this.updateRenderTargetMipmap=Ge,this.updateMultisampleRenderTarget=Me,this.setupDepthRenderbuffer=Xe,this.setupFrameBufferTexture=xe,this.useMultisampledRTT=ye}function J5(n,e){function t(r,i=wl){let s;const o=Rn.getTransfer(i);if(r===Is)return n.UNSIGNED_BYTE;if(r===mE)return n.UNSIGNED_SHORT_4_4_4_4;if(r===gE)return n.UNSIGNED_SHORT_5_5_5_1;if(r===YI)return n.UNSIGNED_INT_5_9_9_9_REV;if(r===hE)return n.BYTE;if(r===pE)return n.SHORT;if(r===xp)return n.UNSIGNED_SHORT;if(r===e0)return n.INT;if(r===Qa)return n.UNSIGNED_INT;if(r===ar)return n.FLOAT;if(r===qr)return n.HALF_FLOAT;if(r===JI)return n.ALPHA;if(r===KI)return n.RGB;if(r===Nr)return n.RGBA;if(r===$I)return n.LUMINANCE;if(r===qI)return n.LUMINANCE_ALPHA;if(r===bf)return n.DEPTH_COMPONENT;if(r===Xf)return n.DEPTH_STENCIL;if(r===t0)return n.RED;if(r===n0)return n.RED_INTEGER;if(r===QI)return n.RG;if(r===_E)return n.RG_INTEGER;if(r===vE)return n.RGBA_INTEGER;if(r===Rg||r===Ig||r===Pg||r===Dg)if(o===Wn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(r===Rg)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===Ig)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===Pg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===Dg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(r===Rg)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===Ig)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===Pg)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===Dg)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===GS||r===VS||r===WS||r===XS)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(r===GS)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===VS)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===WS)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===XS)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===jS||r===YS||r===JS)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(r===jS||r===YS)return o===Wn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(r===JS)return o===Wn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===KS||r===$S||r===qS||r===QS||r===ZS||r===e1||r===t1||r===n1||r===r1||r===i1||r===s1||r===o1||r===a1||r===l1)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(r===KS)return o===Wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===$S)return o===Wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===qS)return o===Wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===QS)return o===Wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===ZS)return o===Wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===e1)return o===Wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===t1)return o===Wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===n1)return o===Wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===r1)return o===Wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===i1)return o===Wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===s1)return o===Wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===o1)return o===Wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===a1)return o===Wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===l1)return o===Wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===Bg||r===c1||r===u1)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(r===Bg)return o===Wn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===c1)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===u1)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===ZI||r===f1||r===d1||r===h1)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(r===Bg)return s.COMPRESSED_RED_RGTC1_EXT;if(r===f1)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===d1)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===h1)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===Wf?n.UNSIGNED_INT_24_8:n[r]!==void 0?n[r]:null}return{convert:t}}class K5 extends qn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class oa extends _n{constructor(){super(),this.isGroup=!0,this.type="Group"}}const cce={type:"move"};class MM{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new oa,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new oa,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new W,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new W),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new oa,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new W,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new W),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const v of e.hand.values()){const y=t.getJointPose(v,r),_=this._getHandJoint(c,v);y!==null&&(_.matrix.fromArray(y.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=y.radius),_.visible=y!==null}const u=c.joints["index-finger-tip"],f=c.joints["thumb-tip"],p=u.position.distanceTo(f.position),m=.02,g=.005;c.inputState.pinching&&p>m+g?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=m-g&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(cce)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new oa;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}const uce=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,fce=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class dce{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,r){if(this.texture===null){const i=new En,s=e.properties.get(i);s.__webglTexture=t.texture,(t.depthNear!=r.depthNear||t.depthFar!=r.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,r=new Ds({vertexShader:uce,fragmentShader:fce,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new lr(new mu(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class hce extends pa{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,f=null,p=null,m=null,g=null;const v=new dce,y=t.getContextAttributes();let _=null,S=null;const E=[],w=[],I=new Le;let T=null;const b=new qn;b.layers.enable(1),b.viewport=new Dn;const P=new qn;P.layers.enable(2),P.viewport=new Dn;const C=[b,P],M=new K5;M.layers.enable(1),M.layers.enable(2);let L=null,U=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ce){let xe=E[ce];return xe===void 0&&(xe=new MM,E[ce]=xe),xe.getTargetRaySpace()},this.getControllerGrip=function(ce){let xe=E[ce];return xe===void 0&&(xe=new MM,E[ce]=xe),xe.getGripSpace()},this.getHand=function(ce){let xe=E[ce];return xe===void 0&&(xe=new MM,E[ce]=xe),xe.getHandSpace()};function X(ce){const xe=w.indexOf(ce.inputSource);if(xe===-1)return;const Ae=E[xe];Ae!==void 0&&(Ae.update(ce.inputSource,ce.frame,c||o),Ae.dispatchEvent({type:ce.type,data:ce.inputSource}))}function $(){i.removeEventListener("select",X),i.removeEventListener("selectstart",X),i.removeEventListener("selectend",X),i.removeEventListener("squeeze",X),i.removeEventListener("squeezestart",X),i.removeEventListener("squeezeend",X),i.removeEventListener("end",$),i.removeEventListener("inputsourceschange",Q);for(let ce=0;ce<E.length;ce++){const xe=w[ce];xe!==null&&(w[ce]=null,E[ce].disconnect(xe))}L=null,U=null,v.reset(),e.setRenderTarget(_),m=null,p=null,f=null,i=null,S=null,Ne.stop(),r.isPresenting=!1,e.setPixelRatio(T),e.setSize(I.width,I.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ce){s=ce,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ce){a=ce,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(ce){c=ce},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return f},this.getFrame=function(){return g},this.getSession=function(){return i},this.setSession=async function(ce){if(i=ce,i!==null){if(_=e.getRenderTarget(),i.addEventListener("select",X),i.addEventListener("selectstart",X),i.addEventListener("selectend",X),i.addEventListener("squeeze",X),i.addEventListener("squeezestart",X),i.addEventListener("squeezeend",X),i.addEventListener("end",$),i.addEventListener("inputsourceschange",Q),y.xrCompatible!==!0&&await t.makeXRCompatible(),T=e.getPixelRatio(),e.getSize(I),i.renderState.layers===void 0){const xe={antialias:y.antialias,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(i,t,xe),i.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),S=new Ps(m.framebufferWidth,m.framebufferHeight,{format:Nr,type:Is,colorSpace:e.outputColorSpace,stencilBuffer:y.stencil})}else{let xe=null,Ae=null,Ie=null;y.depth&&(Ie=y.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,xe=y.stencil?Xf:bf,Ae=y.stencil?Wf:Qa);const Xe={colorFormat:t.RGBA8,depthFormat:Ie,scaleFactor:s};f=new XRWebGLBinding(i,t),p=f.createProjectionLayer(Xe),i.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),S=new Ps(p.textureWidth,p.textureHeight,{format:Nr,type:Is,depthTexture:new EE(p.textureWidth,p.textureHeight,Ae,void 0,void 0,void 0,void 0,void 0,void 0,xe),stencilBuffer:y.stencil,colorSpace:e.outputColorSpace,samples:y.antialias?4:0,resolveDepthBuffer:p.ignoreDepthValues===!1})}S.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await i.requestReferenceSpace(a),Ne.setContext(i),Ne.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return v.getDepthTexture()};function Q(ce){for(let xe=0;xe<ce.removed.length;xe++){const Ae=ce.removed[xe],Ie=w.indexOf(Ae);Ie>=0&&(w[Ie]=null,E[Ie].disconnect(Ae))}for(let xe=0;xe<ce.added.length;xe++){const Ae=ce.added[xe];let Ie=w.indexOf(Ae);if(Ie===-1){for(let it=0;it<E.length;it++)if(it>=w.length){w.push(Ae),Ie=it;break}else if(w[it]===null){w[it]=Ae,Ie=it;break}if(Ie===-1)break}const Xe=E[Ie];Xe&&Xe.connect(Ae)}}const Y=new W,te=new W;function k(ce,xe,Ae){Y.setFromMatrixPosition(xe.matrixWorld),te.setFromMatrixPosition(Ae.matrixWorld);const Ie=Y.distanceTo(te),Xe=xe.projectionMatrix.elements,it=Ae.projectionMatrix.elements,Qe=Xe[14]/(Xe[10]-1),Ge=Xe[14]/(Xe[10]+1),z=(Xe[9]+1)/Xe[5],pe=(Xe[9]-1)/Xe[5],Me=(Xe[8]-1)/Xe[0],Be=(it[8]+1)/it[0],ye=Qe*Me,oe=Qe*Be,Ue=Ie/(-Me+Be),Ke=Ue*-Me;if(xe.matrixWorld.decompose(ce.position,ce.quaternion,ce.scale),ce.translateX(Ke),ce.translateZ(Ue),ce.matrixWorld.compose(ce.position,ce.quaternion,ce.scale),ce.matrixWorldInverse.copy(ce.matrixWorld).invert(),Xe[10]===-1)ce.projectionMatrix.copy(xe.projectionMatrix),ce.projectionMatrixInverse.copy(xe.projectionMatrixInverse);else{const V=Qe+Ue,O=Ge+Ue,le=ye-Ke,Se=oe+(Ie-Ke),ve=z*Ge/O*V,Ce=pe*Ge/O*V;ce.projectionMatrix.makePerspective(le,Se,ve,Ce,V,O),ce.projectionMatrixInverse.copy(ce.projectionMatrix).invert()}}function K(ce,xe){xe===null?ce.matrixWorld.copy(ce.matrix):ce.matrixWorld.multiplyMatrices(xe.matrixWorld,ce.matrix),ce.matrixWorldInverse.copy(ce.matrixWorld).invert()}this.updateCamera=function(ce){if(i===null)return;let xe=ce.near,Ae=ce.far;v.texture!==null&&(v.depthNear>0&&(xe=v.depthNear),v.depthFar>0&&(Ae=v.depthFar)),M.near=P.near=b.near=xe,M.far=P.far=b.far=Ae,(L!==M.near||U!==M.far)&&(i.updateRenderState({depthNear:M.near,depthFar:M.far}),L=M.near,U=M.far);const Ie=ce.parent,Xe=M.cameras;K(M,Ie);for(let it=0;it<Xe.length;it++)K(Xe[it],Ie);Xe.length===2?k(M,b,P):M.projectionMatrix.copy(b.projectionMatrix),F(ce,M,Ie)};function F(ce,xe,Ae){Ae===null?ce.matrix.copy(xe.matrixWorld):(ce.matrix.copy(Ae.matrixWorld),ce.matrix.invert(),ce.matrix.multiply(xe.matrixWorld)),ce.matrix.decompose(ce.position,ce.quaternion,ce.scale),ce.updateMatrixWorld(!0),ce.projectionMatrix.copy(xe.projectionMatrix),ce.projectionMatrixInverse.copy(xe.projectionMatrixInverse),ce.isPerspectiveCamera&&(ce.fov=Ap*2*Math.atan(1/ce.projectionMatrix.elements[5]),ce.zoom=1)}this.getCamera=function(){return M},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(ce){l=ce,p!==null&&(p.fixedFoveation=ce),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=ce)},this.hasDepthSensing=function(){return v.texture!==null},this.getDepthSensingMesh=function(){return v.getMesh(M)};let ie=null;function me(ce,xe){if(u=xe.getViewerPose(c||o),g=xe,u!==null){const Ae=u.views;m!==null&&(e.setRenderTargetFramebuffer(S,m.framebuffer),e.setRenderTarget(S));let Ie=!1;Ae.length!==M.cameras.length&&(M.cameras.length=0,Ie=!0);for(let it=0;it<Ae.length;it++){const Qe=Ae[it];let Ge=null;if(m!==null)Ge=m.getViewport(Qe);else{const pe=f.getViewSubImage(p,Qe);Ge=pe.viewport,it===0&&(e.setRenderTargetTextures(S,pe.colorTexture,p.ignoreDepthValues?void 0:pe.depthStencilTexture),e.setRenderTarget(S))}let z=C[it];z===void 0&&(z=new qn,z.layers.enable(it),z.viewport=new Dn,C[it]=z),z.matrix.fromArray(Qe.transform.matrix),z.matrix.decompose(z.position,z.quaternion,z.scale),z.projectionMatrix.fromArray(Qe.projectionMatrix),z.projectionMatrixInverse.copy(z.projectionMatrix).invert(),z.viewport.set(Ge.x,Ge.y,Ge.width,Ge.height),it===0&&(M.matrix.copy(z.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),Ie===!0&&M.cameras.push(z)}const Xe=i.enabledFeatures;if(Xe&&Xe.includes("depth-sensing")){const it=f.getDepthInformation(Ae[0]);it&&it.isValid&&it.texture&&v.init(e,it,i.renderState)}}for(let Ae=0;Ae<E.length;Ae++){const Ie=w[Ae],Xe=E[Ae];Ie!==null&&Xe!==void 0&&Xe.update(Ie,xe,c||o)}ie&&ie(ce,xe),xe.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:xe}),g=null}const Ne=new V5;Ne.setAnimationLoop(me),this.setAnimationLoop=function(ce){ie=ce},this.dispose=function(){}}}const Lu=new so,pce=new Rt;function mce(n,e){function t(y,_){y.matrixAutoUpdate===!0&&y.updateMatrix(),_.value.copy(y.matrix)}function r(y,_){_.color.getRGB(y.fogColor.value,H5(n)),_.isFog?(y.fogNear.value=_.near,y.fogFar.value=_.far):_.isFogExp2&&(y.fogDensity.value=_.density)}function i(y,_,S,E,w){_.isMeshBasicMaterial||_.isMeshLambertMaterial?s(y,_):_.isMeshToonMaterial?(s(y,_),f(y,_)):_.isMeshPhongMaterial?(s(y,_),u(y,_)):_.isMeshStandardMaterial?(s(y,_),p(y,_),_.isMeshPhysicalMaterial&&m(y,_,w)):_.isMeshMatcapMaterial?(s(y,_),g(y,_)):_.isMeshDepthMaterial?s(y,_):_.isMeshDistanceMaterial?(s(y,_),v(y,_)):_.isMeshNormalMaterial?s(y,_):_.isLineBasicMaterial?(o(y,_),_.isLineDashedMaterial&&a(y,_)):_.isPointsMaterial?l(y,_,S,E):_.isSpriteMaterial?c(y,_):_.isShadowMaterial?(y.color.value.copy(_.color),y.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}function s(y,_){y.opacity.value=_.opacity,_.color&&y.diffuse.value.copy(_.color),_.emissive&&y.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(y.map.value=_.map,t(_.map,y.mapTransform)),_.alphaMap&&(y.alphaMap.value=_.alphaMap,t(_.alphaMap,y.alphaMapTransform)),_.bumpMap&&(y.bumpMap.value=_.bumpMap,t(_.bumpMap,y.bumpMapTransform),y.bumpScale.value=_.bumpScale,_.side===as&&(y.bumpScale.value*=-1)),_.normalMap&&(y.normalMap.value=_.normalMap,t(_.normalMap,y.normalMapTransform),y.normalScale.value.copy(_.normalScale),_.side===as&&y.normalScale.value.negate()),_.displacementMap&&(y.displacementMap.value=_.displacementMap,t(_.displacementMap,y.displacementMapTransform),y.displacementScale.value=_.displacementScale,y.displacementBias.value=_.displacementBias),_.emissiveMap&&(y.emissiveMap.value=_.emissiveMap,t(_.emissiveMap,y.emissiveMapTransform)),_.specularMap&&(y.specularMap.value=_.specularMap,t(_.specularMap,y.specularMapTransform)),_.alphaTest>0&&(y.alphaTest.value=_.alphaTest);const S=e.get(_),E=S.envMap,w=S.envMapRotation;E&&(y.envMap.value=E,Lu.copy(w),Lu.x*=-1,Lu.y*=-1,Lu.z*=-1,E.isCubeTexture&&E.isRenderTargetTexture===!1&&(Lu.y*=-1,Lu.z*=-1),y.envMapRotation.value.setFromMatrix4(pce.makeRotationFromEuler(Lu)),y.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=_.reflectivity,y.ior.value=_.ior,y.refractionRatio.value=_.refractionRatio),_.lightMap&&(y.lightMap.value=_.lightMap,y.lightMapIntensity.value=_.lightMapIntensity,t(_.lightMap,y.lightMapTransform)),_.aoMap&&(y.aoMap.value=_.aoMap,y.aoMapIntensity.value=_.aoMapIntensity,t(_.aoMap,y.aoMapTransform))}function o(y,_){y.diffuse.value.copy(_.color),y.opacity.value=_.opacity,_.map&&(y.map.value=_.map,t(_.map,y.mapTransform))}function a(y,_){y.dashSize.value=_.dashSize,y.totalSize.value=_.dashSize+_.gapSize,y.scale.value=_.scale}function l(y,_,S,E){y.diffuse.value.copy(_.color),y.opacity.value=_.opacity,y.size.value=_.size*S,y.scale.value=E*.5,_.map&&(y.map.value=_.map,t(_.map,y.uvTransform)),_.alphaMap&&(y.alphaMap.value=_.alphaMap,t(_.alphaMap,y.alphaMapTransform)),_.alphaTest>0&&(y.alphaTest.value=_.alphaTest)}function c(y,_){y.diffuse.value.copy(_.color),y.opacity.value=_.opacity,y.rotation.value=_.rotation,_.map&&(y.map.value=_.map,t(_.map,y.mapTransform)),_.alphaMap&&(y.alphaMap.value=_.alphaMap,t(_.alphaMap,y.alphaMapTransform)),_.alphaTest>0&&(y.alphaTest.value=_.alphaTest)}function u(y,_){y.specular.value.copy(_.specular),y.shininess.value=Math.max(_.shininess,1e-4)}function f(y,_){_.gradientMap&&(y.gradientMap.value=_.gradientMap)}function p(y,_){y.metalness.value=_.metalness,_.metalnessMap&&(y.metalnessMap.value=_.metalnessMap,t(_.metalnessMap,y.metalnessMapTransform)),y.roughness.value=_.roughness,_.roughnessMap&&(y.roughnessMap.value=_.roughnessMap,t(_.roughnessMap,y.roughnessMapTransform)),_.envMap&&(y.envMapIntensity.value=_.envMapIntensity)}function m(y,_,S){y.ior.value=_.ior,_.sheen>0&&(y.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),y.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(y.sheenColorMap.value=_.sheenColorMap,t(_.sheenColorMap,y.sheenColorMapTransform)),_.sheenRoughnessMap&&(y.sheenRoughnessMap.value=_.sheenRoughnessMap,t(_.sheenRoughnessMap,y.sheenRoughnessMapTransform))),_.clearcoat>0&&(y.clearcoat.value=_.clearcoat,y.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(y.clearcoatMap.value=_.clearcoatMap,t(_.clearcoatMap,y.clearcoatMapTransform)),_.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,t(_.clearcoatRoughnessMap,y.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&&(y.clearcoatNormalMap.value=_.clearcoatNormalMap,t(_.clearcoatNormalMap,y.clearcoatNormalMapTransform),y.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),_.side===as&&y.clearcoatNormalScale.value.negate())),_.dispersion>0&&(y.dispersion.value=_.dispersion),_.iridescence>0&&(y.iridescence.value=_.iridescence,y.iridescenceIOR.value=_.iridescenceIOR,y.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(y.iridescenceMap.value=_.iridescenceMap,t(_.iridescenceMap,y.iridescenceMapTransform)),_.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=_.iridescenceThicknessMap,t(_.iridescenceThicknessMap,y.iridescenceThicknessMapTransform))),_.transmission>0&&(y.transmission.value=_.transmission,y.transmissionSamplerMap.value=S.texture,y.transmissionSamplerSize.value.set(S.width,S.height),_.transmissionMap&&(y.transmissionMap.value=_.transmissionMap,t(_.transmissionMap,y.transmissionMapTransform)),y.thickness.value=_.thickness,_.thicknessMap&&(y.thicknessMap.value=_.thicknessMap,t(_.thicknessMap,y.thicknessMapTransform)),y.attenuationDistance.value=_.attenuationDistance,y.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy>0&&(y.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&&(y.anisotropyMap.value=_.anisotropyMap,t(_.anisotropyMap,y.anisotropyMapTransform))),y.specularIntensity.value=_.specularIntensity,y.specularColor.value.copy(_.specularColor),_.specularColorMap&&(y.specularColorMap.value=_.specularColorMap,t(_.specularColorMap,y.specularColorMapTransform)),_.specularIntensityMap&&(y.specularIntensityMap.value=_.specularIntensityMap,t(_.specularIntensityMap,y.specularIntensityMapTransform))}function g(y,_){_.matcap&&(y.matcap.value=_.matcap)}function v(y,_){const S=e.get(_).light;y.referencePosition.value.setFromMatrixPosition(S.matrixWorld),y.nearDistance.value=S.shadow.camera.near,y.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function gce(n,e,t,r){let i={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(S,E){const w=E.program;r.uniformBlockBinding(S,w)}function c(S,E){let w=i[S.id];w===void 0&&(g(S),w=u(S),i[S.id]=w,S.addEventListener("dispose",y));const I=E.program;r.updateUBOMapping(S,I);const T=e.render.frame;s[S.id]!==T&&(p(S),s[S.id]=T)}function u(S){const E=f();S.__bindingPointIndex=E;const w=n.createBuffer(),I=S.__size,T=S.usage;return n.bindBuffer(n.UNIFORM_BUFFER,w),n.bufferData(n.UNIFORM_BUFFER,I,T),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,E,w),w}function f(){for(let S=0;S<a;S++)if(o.indexOf(S)===-1)return o.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(S){const E=i[S.id],w=S.uniforms,I=S.__cache;n.bindBuffer(n.UNIFORM_BUFFER,E);for(let T=0,b=w.length;T<b;T++){const P=Array.isArray(w[T])?w[T]:[w[T]];for(let C=0,M=P.length;C<M;C++){const L=P[C];if(m(L,T,C,I)===!0){const U=L.__offset,X=Array.isArray(L.value)?L.value:[L.value];let $=0;for(let Q=0;Q<X.length;Q++){const Y=X[Q],te=v(Y);typeof Y=="number"||typeof Y=="boolean"?(L.__data[0]=Y,n.bufferSubData(n.UNIFORM_BUFFER,U+$,L.__data)):Y.isMatrix3?(L.__data[0]=Y.elements[0],L.__data[1]=Y.elements[1],L.__data[2]=Y.elements[2],L.__data[3]=0,L.__data[4]=Y.elements[3],L.__data[5]=Y.elements[4],L.__data[6]=Y.elements[5],L.__data[7]=0,L.__data[8]=Y.elements[6],L.__data[9]=Y.elements[7],L.__data[10]=Y.elements[8],L.__data[11]=0):(Y.toArray(L.__data,$),$+=te.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,U,L.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(S,E,w,I){const T=S.value,b=E+"_"+w;if(I[b]===void 0)return typeof T=="number"||typeof T=="boolean"?I[b]=T:I[b]=T.clone(),!0;{const P=I[b];if(typeof T=="number"||typeof T=="boolean"){if(P!==T)return I[b]=T,!0}else if(P.equals(T)===!1)return P.copy(T),!0}return!1}function g(S){const E=S.uniforms;let w=0;const I=16;for(let b=0,P=E.length;b<P;b++){const C=Array.isArray(E[b])?E[b]:[E[b]];for(let M=0,L=C.length;M<L;M++){const U=C[M],X=Array.isArray(U.value)?U.value:[U.value];for(let $=0,Q=X.length;$<Q;$++){const Y=X[$],te=v(Y),k=w%I,K=k%te.boundary,F=k+K;w+=K,F!==0&&I-F<te.storage&&(w+=I-F),U.__data=new Float32Array(te.storage/Float32Array.BYTES_PER_ELEMENT),U.__offset=w,w+=te.storage}}}const T=w%I;return T>0&&(w+=I-T),S.__size=w,S.__cache={},this}function v(S){const E={boundary:0,storage:0};return typeof S=="number"||typeof S=="boolean"?(E.boundary=4,E.storage=4):S.isVector2?(E.boundary=8,E.storage=8):S.isVector3||S.isColor?(E.boundary=16,E.storage=12):S.isVector4?(E.boundary=16,E.storage=16):S.isMatrix3?(E.boundary=48,E.storage=48):S.isMatrix4?(E.boundary=64,E.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),E}function y(S){const E=S.target;E.removeEventListener("dispose",y);const w=o.indexOf(E.__bindingPointIndex);o.splice(w,1),n.deleteBuffer(i[E.id]),delete i[E.id],delete s[E.id]}function _(){for(const S in i)n.deleteBuffer(i[S]);o=[],i={},s={}}return{bind:l,update:c,dispose:_}}class fP{constructor(e={}){const{canvas:t=k5(),context:r=null,depth:i=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:f=!1}=e;this.isWebGLRenderer=!0;let p;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=r.getContextAttributes().alpha}else p=o;const m=new Uint32Array(4),g=new Int32Array(4);let v=null,y=null;const _=[],S=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Ws,this.toneMapping=Ya,this.toneMappingExposure=1;const E=this;let w=!1,I=0,T=0,b=null,P=-1,C=null;const M=new Dn,L=new Dn;let U=null;const X=new rt(0);let $=0,Q=t.width,Y=t.height,te=1,k=null,K=null;const F=new Dn(0,0,Q,Y),ie=new Dn(0,0,Q,Y);let me=!1;const Ne=new o0;let ce=!1,xe=!1;const Ae=new Rt,Ie=new W,Xe=new Dn,it={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Qe=!1;function Ge(){return b===null?te:1}let z=r;function pe(D,G){return t.getContext(D,G)}try{const D={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Up}`),t.addEventListener("webglcontextlost",ue,!1),t.addEventListener("webglcontextrestored",Re,!1),t.addEventListener("webglcontextcreationerror",We,!1),z===null){const G="webgl2";if(z=pe(G,D),z===null)throw pe(G)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(D){throw console.error("THREE.WebGLRenderer: "+D.message),D}let Me,Be,ye,oe,Ue,Ke,V,O,le,Se,ve,Ce,lt,Oe,Ze,_t,He,nt,St,Et,Ye,re,Pe,je;function ee(){Me=new Aae(z),Me.init(),re=new J5(z,Me),Be=new _ae(z,Me,e,re),ye=new nce(z),oe=new Tae(z),Ue=new Wle,Ke=new lce(z,Me,ye,Ue,Be,re,oe),V=new yae(E),O=new Eae(E),le=new Bie(z),Pe=new mae(z,le),Se=new wae(z,le,oe,Pe),ve=new bae(z,Se,le,oe),St=new Cae(z,Be,Ke),_t=new vae(Ue),Ce=new Vle(E,V,O,Me,Be,Pe,_t),lt=new mce(E,Ue),Oe=new jle,Ze=new Qle(Me),nt=new pae(E,V,O,ye,ve,p,l),He=new tce(E,ve,Be),je=new gce(z,oe,Be,ye),Et=new gae(z,Me,oe),Ye=new Mae(z,Me,oe),oe.programs=Ce.programs,E.capabilities=Be,E.extensions=Me,E.properties=Ue,E.renderLists=Oe,E.shadowMap=He,E.state=ye,E.info=oe}ee();const Te=new hce(E,z);this.xr=Te,this.getContext=function(){return z},this.getContextAttributes=function(){return z.getContextAttributes()},this.forceContextLoss=function(){const D=Me.get("WEBGL_lose_context");D&&D.loseContext()},this.forceContextRestore=function(){const D=Me.get("WEBGL_lose_context");D&&D.restoreContext()},this.getPixelRatio=function(){return te},this.setPixelRatio=function(D){D!==void 0&&(te=D,this.setSize(Q,Y,!1))},this.getSize=function(D){return D.set(Q,Y)},this.setSize=function(D,G,j=!0){if(Te.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Q=D,Y=G,t.width=Math.floor(D*te),t.height=Math.floor(G*te),j===!0&&(t.style.width=D+"px",t.style.height=G+"px"),this.setViewport(0,0,D,G)},this.getDrawingBufferSize=function(D){return D.set(Q*te,Y*te).floor()},this.setDrawingBufferSize=function(D,G,j){Q=D,Y=G,te=j,t.width=Math.floor(D*j),t.height=Math.floor(G*j),this.setViewport(0,0,D,G)},this.getCurrentViewport=function(D){return D.copy(M)},this.getViewport=function(D){return D.copy(F)},this.setViewport=function(D,G,j,Z){D.isVector4?F.set(D.x,D.y,D.z,D.w):F.set(D,G,j,Z),ye.viewport(M.copy(F).multiplyScalar(te).round())},this.getScissor=function(D){return D.copy(ie)},this.setScissor=function(D,G,j,Z){D.isVector4?ie.set(D.x,D.y,D.z,D.w):ie.set(D,G,j,Z),ye.scissor(L.copy(ie).multiplyScalar(te).round())},this.getScissorTest=function(){return me},this.setScissorTest=function(D){ye.setScissorTest(me=D)},this.setOpaqueSort=function(D){k=D},this.setTransparentSort=function(D){K=D},this.getClearColor=function(D){return D.copy(nt.getClearColor())},this.setClearColor=function(){nt.setClearColor.apply(nt,arguments)},this.getClearAlpha=function(){return nt.getClearAlpha()},this.setClearAlpha=function(){nt.setClearAlpha.apply(nt,arguments)},this.clear=function(D=!0,G=!0,j=!0){let Z=0;if(D){let J=!1;if(b!==null){const de=b.texture.format;J=de===vE||de===_E||de===n0}if(J){const de=b.texture.type,_e=de===Is||de===Qa||de===xp||de===Wf||de===mE||de===gE,we=nt.getClearColor(),ge=nt.getClearAlpha(),Ve=we.r,ke=we.g,Fe=we.b;_e?(m[0]=Ve,m[1]=ke,m[2]=Fe,m[3]=ge,z.clearBufferuiv(z.COLOR,0,m)):(g[0]=Ve,g[1]=ke,g[2]=Fe,g[3]=ge,z.clearBufferiv(z.COLOR,0,g))}else Z|=z.COLOR_BUFFER_BIT}G&&(Z|=z.DEPTH_BUFFER_BIT),j&&(Z|=z.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),z.clear(Z)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ue,!1),t.removeEventListener("webglcontextrestored",Re,!1),t.removeEventListener("webglcontextcreationerror",We,!1),Oe.dispose(),Ze.dispose(),Ue.dispose(),V.dispose(),O.dispose(),ve.dispose(),Pe.dispose(),je.dispose(),Ce.dispose(),Te.dispose(),Te.removeEventListener("sessionstart",ft),Te.removeEventListener("sessionend",rn),et.stop()};function ue(D){D.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function Re(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const D=oe.autoReset,G=He.enabled,j=He.autoUpdate,Z=He.needsUpdate,J=He.type;ee(),oe.autoReset=D,He.enabled=G,He.autoUpdate=j,He.needsUpdate=Z,He.type=J}function We(D){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",D.statusMessage)}function ht(D){const G=D.target;G.removeEventListener("dispose",ht),Ct(G)}function Ct(D){jt(D),Ue.remove(D)}function jt(D){const G=Ue.get(D).programs;G!==void 0&&(G.forEach(function(j){Ce.releaseProgram(j)}),D.isShaderMaterial&&Ce.releaseShaderCache(D))}this.renderBufferDirect=function(D,G,j,Z,J,de){G===null&&(G=it);const _e=J.isMesh&&J.matrixWorld.determinant()<0,we=N(D,G,j,Z,J);ye.setMaterial(Z,_e);let ge=j.index,Ve=1;if(Z.wireframe===!0){if(ge=Se.getWireframeAttribute(j),ge===void 0)return;Ve=2}const ke=j.drawRange,Fe=j.attributes.position;let st=ke.start*Ve,ut=(ke.start+ke.count)*Ve;de!==null&&(st=Math.max(st,de.start*Ve),ut=Math.min(ut,(de.start+de.count)*Ve)),ge!==null?(st=Math.max(st,0),ut=Math.min(ut,ge.count)):Fe!=null&&(st=Math.max(st,0),ut=Math.min(ut,Fe.count));const dt=ut-st;if(dt<0||dt===1/0)return;Pe.setup(J,Z,we,j,ge);let bt,tt=Et;if(ge!==null&&(bt=le.get(ge),tt=Ye,tt.setIndex(bt)),J.isMesh)Z.wireframe===!0?(ye.setLineWidth(Z.wireframeLinewidth*Ge()),tt.setMode(z.LINES)):tt.setMode(z.TRIANGLES);else if(J.isLine){let ze=Z.linewidth;ze===void 0&&(ze=1),ye.setLineWidth(ze*Ge()),J.isLineSegments?tt.setMode(z.LINES):J.isLineLoop?tt.setMode(z.LINE_LOOP):tt.setMode(z.LINE_STRIP)}else J.isPoints?tt.setMode(z.POINTS):J.isSprite&&tt.setMode(z.TRIANGLES);if(J.isBatchedMesh)if(J._multiDrawInstances!==null)tt.renderMultiDrawInstances(J._multiDrawStarts,J._multiDrawCounts,J._multiDrawCount,J._multiDrawInstances);else if(Me.get("WEBGL_multi_draw"))tt.renderMultiDraw(J._multiDrawStarts,J._multiDrawCounts,J._multiDrawCount);else{const ze=J._multiDrawStarts,It=J._multiDrawCounts,wt=J._multiDrawCount,Dt=ge?le.get(ge).bytesPerElement:1,An=Ue.get(Z).currentProgram.getUniforms();for(let Pn=0;Pn<wt;Pn++)An.setValue(z,"_gl_DrawID",Pn),tt.render(ze[Pn]/Dt,It[Pn])}else if(J.isInstancedMesh)tt.renderInstances(st,dt,J.count);else if(j.isInstancedBufferGeometry){const ze=j._maxInstanceCount!==void 0?j._maxInstanceCount:1/0,It=Math.min(j.instanceCount,ze);tt.renderInstances(st,dt,It)}else tt.render(st,dt)};function cn(D,G,j){D.transparent===!0&&D.side===vs&&D.forceSinglePass===!1?(D.side=as,D.needsUpdate=!0,vt(D,G,j),D.side=$a,D.needsUpdate=!0,vt(D,G,j),D.side=vs):vt(D,G,j)}this.compile=function(D,G,j=null){j===null&&(j=D),y=Ze.get(j),y.init(G),S.push(y),j.traverseVisible(function(J){J.isLight&&J.layers.test(G.layers)&&(y.pushLight(J),J.castShadow&&y.pushShadow(J))}),D!==j&&D.traverseVisible(function(J){J.isLight&&J.layers.test(G.layers)&&(y.pushLight(J),J.castShadow&&y.pushShadow(J))}),y.setupLights();const Z=new Set;return D.traverse(function(J){const de=J.material;if(de)if(Array.isArray(de))for(let _e=0;_e<de.length;_e++){const we=de[_e];cn(we,j,J),Z.add(we)}else cn(de,j,J),Z.add(de)}),S.pop(),y=null,Z},this.compileAsync=function(D,G,j=null){const Z=this.compile(D,G,j);return new Promise(J=>{function de(){if(Z.forEach(function(_e){Ue.get(_e).currentProgram.isReady()&&Z.delete(_e)}),Z.size===0){J(D);return}setTimeout(de,10)}Me.get("KHR_parallel_shader_compile")!==null?de():setTimeout(de,10)})};let Ot=null;function yt(D){Ot&&Ot(D)}function ft(){et.stop()}function rn(){et.start()}const et=new V5;et.setAnimationLoop(yt),typeof self<"u"&&et.setContext(self),this.setAnimationLoop=function(D){Ot=D,Te.setAnimationLoop(D),D===null?et.stop():et.start()},Te.addEventListener("sessionstart",ft),Te.addEventListener("sessionend",rn),this.render=function(D,G){if(G!==void 0&&G.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(w===!0)return;if(D.matrixWorldAutoUpdate===!0&&D.updateMatrixWorld(),G.parent===null&&G.matrixWorldAutoUpdate===!0&&G.updateMatrixWorld(),Te.enabled===!0&&Te.isPresenting===!0&&(Te.cameraAutoUpdate===!0&&Te.updateCamera(G),G=Te.getCamera()),D.isScene===!0&&D.onBeforeRender(E,D,G,b),y=Ze.get(D,S.length),y.init(G),S.push(y),Ae.multiplyMatrices(G.projectionMatrix,G.matrixWorldInverse),Ne.setFromProjectionMatrix(Ae),xe=this.localClippingEnabled,ce=_t.init(this.clippingPlanes,xe),v=Oe.get(D,_.length),v.init(),_.push(v),Te.enabled===!0&&Te.isPresenting===!0){const de=E.xr.getDepthSensingMesh();de!==null&&Lt(de,G,-1/0,E.sortObjects)}Lt(D,G,0,E.sortObjects),v.finish(),E.sortObjects===!0&&v.sort(k,K),Qe=Te.enabled===!1||Te.isPresenting===!1||Te.hasDepthSensing()===!1,Qe&&nt.addToRenderList(v,D),this.info.render.frame++,ce===!0&&_t.beginShadows();const j=y.state.shadowsArray;He.render(j,D,G),ce===!0&&_t.endShadows(),this.info.autoReset===!0&&this.info.reset();const Z=v.opaque,J=v.transmissive;if(y.setupLights(),G.isArrayCamera){const de=G.cameras;if(J.length>0)for(let _e=0,we=de.length;_e<we;_e++){const ge=de[_e];Pt(Z,J,D,ge)}Qe&&nt.render(D);for(let _e=0,we=de.length;_e<we;_e++){const ge=de[_e];xt(v,D,ge,ge.viewport)}}else J.length>0&&Pt(Z,J,D,G),Qe&&nt.render(D),xt(v,D,G);b!==null&&(Ke.updateMultisampleRenderTarget(b),Ke.updateRenderTargetMipmap(b)),D.isScene===!0&&D.onAfterRender(E,D,G),Pe.resetDefaultState(),P=-1,C=null,S.pop(),S.length>0?(y=S[S.length-1],ce===!0&&_t.setGlobalState(E.clippingPlanes,y.state.camera)):y=null,_.pop(),_.length>0?v=_[_.length-1]:v=null};function Lt(D,G,j,Z){if(D.visible===!1)return;if(D.layers.test(G.layers)){if(D.isGroup)j=D.renderOrder;else if(D.isLOD)D.autoUpdate===!0&&D.update(G);else if(D.isLight)y.pushLight(D),D.castShadow&&y.pushShadow(D);else if(D.isSprite){if(!D.frustumCulled||Ne.intersectsSprite(D)){Z&&Xe.setFromMatrixPosition(D.matrixWorld).applyMatrix4(Ae);const _e=ve.update(D),we=D.material;we.visible&&v.push(D,_e,we,j,Xe.z,null)}}else if((D.isMesh||D.isLine||D.isPoints)&&(!D.frustumCulled||Ne.intersectsObject(D))){const _e=ve.update(D),we=D.material;if(Z&&(D.boundingSphere!==void 0?(D.boundingSphere===null&&D.computeBoundingSphere(),Xe.copy(D.boundingSphere.center)):(_e.boundingSphere===null&&_e.computeBoundingSphere(),Xe.copy(_e.boundingSphere.center)),Xe.applyMatrix4(D.matrixWorld).applyMatrix4(Ae)),Array.isArray(we)){const ge=_e.groups;for(let Ve=0,ke=ge.length;Ve<ke;Ve++){const Fe=ge[Ve],st=we[Fe.materialIndex];st&&st.visible&&v.push(D,_e,st,j,Xe.z,Fe)}}else we.visible&&v.push(D,_e,we,j,Xe.z,null)}}const de=D.children;for(let _e=0,we=de.length;_e<we;_e++)Lt(de[_e],G,j,Z)}function xt(D,G,j,Z){const J=D.opaque,de=D.transmissive,_e=D.transparent;y.setupLightsView(j),ce===!0&&_t.setGlobalState(E.clippingPlanes,j),Z&&ye.viewport(M.copy(Z)),J.length>0&&In(J,G,j),de.length>0&&In(de,G,j),_e.length>0&&In(_e,G,j),ye.buffers.depth.setTest(!0),ye.buffers.depth.setMask(!0),ye.buffers.color.setMask(!0),ye.setPolygonOffset(!1)}function Pt(D,G,j,Z){if((j.isScene===!0?j.overrideMaterial:null)!==null)return;y.state.transmissionRenderTarget[Z.id]===void 0&&(y.state.transmissionRenderTarget[Z.id]=new Ps(1,1,{generateMipmaps:!0,type:Me.has("EXT_color_buffer_half_float")||Me.has("EXT_color_buffer_float")?qr:Is,minFilter:Bo,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Rn.workingColorSpace}));const de=y.state.transmissionRenderTarget[Z.id],_e=Z.viewport||M;de.setSize(_e.z,_e.w);const we=E.getRenderTarget();E.setRenderTarget(de),E.getClearColor(X),$=E.getClearAlpha(),$<1&&E.setClearColor(16777215,.5),E.clear(),Qe&&nt.render(j);const ge=E.toneMapping;E.toneMapping=Ya;const Ve=Z.viewport;if(Z.viewport!==void 0&&(Z.viewport=void 0),y.setupLightsView(Z),ce===!0&&_t.setGlobalState(E.clippingPlanes,Z),In(D,j,Z),Ke.updateMultisampleRenderTarget(de),Ke.updateRenderTargetMipmap(de),Me.has("WEBGL_multisampled_render_to_texture")===!1){let ke=!1;for(let Fe=0,st=G.length;Fe<st;Fe++){const ut=G[Fe],dt=ut.object,bt=ut.geometry,tt=ut.material,ze=ut.group;if(tt.side===vs&&dt.layers.test(Z.layers)){const It=tt.side;tt.side=as,tt.needsUpdate=!0,Nt(dt,j,Z,bt,tt,ze),tt.side=It,tt.needsUpdate=!0,ke=!0}}ke===!0&&(Ke.updateMultisampleRenderTarget(de),Ke.updateRenderTargetMipmap(de))}E.setRenderTarget(we),E.setClearColor(X,$),Ve!==void 0&&(Z.viewport=Ve),E.toneMapping=ge}function In(D,G,j){const Z=G.isScene===!0?G.overrideMaterial:null;for(let J=0,de=D.length;J<de;J++){const _e=D[J],we=_e.object,ge=_e.geometry,Ve=Z===null?_e.material:Z,ke=_e.group;we.layers.test(j.layers)&&Nt(we,G,j,ge,Ve,ke)}}function Nt(D,G,j,Z,J,de){D.onBeforeRender(E,G,j,Z,J,de),D.modelViewMatrix.multiplyMatrices(j.matrixWorldInverse,D.matrixWorld),D.normalMatrix.getNormalMatrix(D.modelViewMatrix),J.onBeforeRender(E,G,j,Z,D,de),J.transparent===!0&&J.side===vs&&J.forceSinglePass===!1?(J.side=as,J.needsUpdate=!0,E.renderBufferDirect(j,G,Z,J,D,de),J.side=$a,J.needsUpdate=!0,E.renderBufferDirect(j,G,Z,J,D,de),J.side=vs):E.renderBufferDirect(j,G,Z,J,D,de),D.onAfterRender(E,G,j,Z,J,de)}function vt(D,G,j){G.isScene!==!0&&(G=it);const Z=Ue.get(D),J=y.state.lights,de=y.state.shadowsArray,_e=J.state.version,we=Ce.getParameters(D,J.state,de,G,j),ge=Ce.getProgramCacheKey(we);let Ve=Z.programs;Z.environment=D.isMeshStandardMaterial?G.environment:null,Z.fog=G.fog,Z.envMap=(D.isMeshStandardMaterial?O:V).get(D.envMap||Z.environment),Z.envMapRotation=Z.environment!==null&&D.envMap===null?G.environmentRotation:D.envMapRotation,Ve===void 0&&(D.addEventListener("dispose",ht),Ve=new Map,Z.programs=Ve);let ke=Ve.get(ge);if(ke!==void 0){if(Z.currentProgram===ke&&Z.lightsStateVersion===_e)return Bn(D,we),ke}else we.uniforms=Ce.getUniforms(D),D.onBeforeCompile(we,E),ke=Ce.acquireProgram(we,ge),Ve.set(ge,ke),Z.uniforms=we.uniforms;const Fe=Z.uniforms;return(!D.isShaderMaterial&&!D.isRawShaderMaterial||D.clipping===!0)&&(Fe.clippingPlanes=_t.uniform),Bn(D,we),Z.needsLights=ne(D),Z.lightsStateVersion=_e,Z.needsLights&&(Fe.ambientLightColor.value=J.state.ambient,Fe.lightProbe.value=J.state.probe,Fe.directionalLights.value=J.state.directional,Fe.directionalLightShadows.value=J.state.directionalShadow,Fe.spotLights.value=J.state.spot,Fe.spotLightShadows.value=J.state.spotShadow,Fe.rectAreaLights.value=J.state.rectArea,Fe.ltc_1.value=J.state.rectAreaLTC1,Fe.ltc_2.value=J.state.rectAreaLTC2,Fe.pointLights.value=J.state.point,Fe.pointLightShadows.value=J.state.pointShadow,Fe.hemisphereLights.value=J.state.hemi,Fe.directionalShadowMap.value=J.state.directionalShadowMap,Fe.directionalShadowMatrix.value=J.state.directionalShadowMatrix,Fe.spotShadowMap.value=J.state.spotShadowMap,Fe.spotLightMatrix.value=J.state.spotLightMatrix,Fe.spotLightMap.value=J.state.spotLightMap,Fe.pointShadowMap.value=J.state.pointShadowMap,Fe.pointShadowMatrix.value=J.state.pointShadowMatrix),Z.currentProgram=ke,Z.uniformsList=null,ke}function er(D){if(D.uniformsList===null){const G=D.currentProgram.getUniforms();D.uniformsList=kx.seqWithValue(G.seq,D.uniforms)}return D.uniformsList}function Bn(D,G){const j=Ue.get(D);j.outputColorSpace=G.outputColorSpace,j.batching=G.batching,j.batchingColor=G.batchingColor,j.instancing=G.instancing,j.instancingColor=G.instancingColor,j.instancingMorph=G.instancingMorph,j.skinning=G.skinning,j.morphTargets=G.morphTargets,j.morphNormals=G.morphNormals,j.morphColors=G.morphColors,j.morphTargetsCount=G.morphTargetsCount,j.numClippingPlanes=G.numClippingPlanes,j.numIntersection=G.numClipIntersection,j.vertexAlphas=G.vertexAlphas,j.vertexTangents=G.vertexTangents,j.toneMapping=G.toneMapping}function N(D,G,j,Z,J){G.isScene!==!0&&(G=it),Ke.resetTextureUnits();const de=G.fog,_e=Z.isMeshStandardMaterial?G.environment:null,we=b===null?E.outputColorSpace:b.isXRRenderTarget===!0?b.texture.colorSpace:zo,ge=(Z.isMeshStandardMaterial?O:V).get(Z.envMap||_e),Ve=Z.vertexColors===!0&&!!j.attributes.color&&j.attributes.color.itemSize===4,ke=!!j.attributes.tangent&&(!!Z.normalMap||Z.anisotropy>0),Fe=!!j.morphAttributes.position,st=!!j.morphAttributes.normal,ut=!!j.morphAttributes.color;let dt=Ya;Z.toneMapped&&(b===null||b.isXRRenderTarget===!0)&&(dt=E.toneMapping);const bt=j.morphAttributes.position||j.morphAttributes.normal||j.morphAttributes.color,tt=bt!==void 0?bt.length:0,ze=Ue.get(Z),It=y.state.lights;if(ce===!0&&(xe===!0||D!==C)){const Yt=D===C&&Z.id===P;_t.setState(Z,D,Yt)}let wt=!1;Z.version===ze.__version?(ze.needsLights&&ze.lightsStateVersion!==It.state.version||ze.outputColorSpace!==we||J.isBatchedMesh&&ze.batching===!1||!J.isBatchedMesh&&ze.batching===!0||J.isBatchedMesh&&ze.batchingColor===!0&&J.colorTexture===null||J.isBatchedMesh&&ze.batchingColor===!1&&J.colorTexture!==null||J.isInstancedMesh&&ze.instancing===!1||!J.isInstancedMesh&&ze.instancing===!0||J.isSkinnedMesh&&ze.skinning===!1||!J.isSkinnedMesh&&ze.skinning===!0||J.isInstancedMesh&&ze.instancingColor===!0&&J.instanceColor===null||J.isInstancedMesh&&ze.instancingColor===!1&&J.instanceColor!==null||J.isInstancedMesh&&ze.instancingMorph===!0&&J.morphTexture===null||J.isInstancedMesh&&ze.instancingMorph===!1&&J.morphTexture!==null||ze.envMap!==ge||Z.fog===!0&&ze.fog!==de||ze.numClippingPlanes!==void 0&&(ze.numClippingPlanes!==_t.numPlanes||ze.numIntersection!==_t.numIntersection)||ze.vertexAlphas!==Ve||ze.vertexTangents!==ke||ze.morphTargets!==Fe||ze.morphNormals!==st||ze.morphColors!==ut||ze.toneMapping!==dt||ze.morphTargetsCount!==tt)&&(wt=!0):(wt=!0,ze.__version=Z.version);let Dt=ze.currentProgram;wt===!0&&(Dt=vt(Z,G,J));let An=!1,Pn=!1,tr=!1;const sn=Dt.getUniforms(),en=ze.uniforms;if(ye.useProgram(Dt.program)&&(An=!0,Pn=!0,tr=!0),Z.id!==P&&(P=Z.id,Pn=!0),An||C!==D){sn.setValue(z,"projectionMatrix",D.projectionMatrix),sn.setValue(z,"viewMatrix",D.matrixWorldInverse);const Yt=sn.map.cameraPosition;Yt!==void 0&&Yt.setValue(z,Ie.setFromMatrixPosition(D.matrixWorld)),Be.logarithmicDepthBuffer&&sn.setValue(z,"logDepthBufFC",2/(Math.log(D.far+1)/Math.LN2)),(Z.isMeshPhongMaterial||Z.isMeshToonMaterial||Z.isMeshLambertMaterial||Z.isMeshBasicMaterial||Z.isMeshStandardMaterial||Z.isShaderMaterial)&&sn.setValue(z,"isOrthographic",D.isOrthographicCamera===!0),C!==D&&(C=D,Pn=!0,tr=!0)}if(J.isSkinnedMesh){sn.setOptional(z,J,"bindMatrix"),sn.setOptional(z,J,"bindMatrixInverse");const Yt=J.skeleton;Yt&&(Yt.boneTexture===null&&Yt.computeBoneTexture(),sn.setValue(z,"boneTexture",Yt.boneTexture,Ke))}J.isBatchedMesh&&(sn.setOptional(z,J,"batchingTexture"),sn.setValue(z,"batchingTexture",J._matricesTexture,Ke),sn.setOptional(z,J,"batchingIdTexture"),sn.setValue(z,"batchingIdTexture",J._indirectTexture,Ke),sn.setOptional(z,J,"batchingColorTexture"),J._colorsTexture!==null&&sn.setValue(z,"batchingColorTexture",J._colorsTexture,Ke));const cr=j.morphAttributes;if((cr.position!==void 0||cr.normal!==void 0||cr.color!==void 0)&&St.update(J,j,Dt),(Pn||ze.receiveShadow!==J.receiveShadow)&&(ze.receiveShadow=J.receiveShadow,sn.setValue(z,"receiveShadow",J.receiveShadow)),Z.isMeshGouraudMaterial&&Z.envMap!==null&&(en.envMap.value=ge,en.flipEnvMap.value=ge.isCubeTexture&&ge.isRenderTargetTexture===!1?-1:1),Z.isMeshStandardMaterial&&Z.envMap===null&&G.environment!==null&&(en.envMapIntensity.value=G.environmentIntensity),Pn&&(sn.setValue(z,"toneMappingExposure",E.toneMappingExposure),ze.needsLights&&H(en,tr),de&&Z.fog===!0&&lt.refreshFogUniforms(en,de),lt.refreshMaterialUniforms(en,Z,te,Y,y.state.transmissionRenderTarget[D.id]),kx.upload(z,er(ze),en,Ke)),Z.isShaderMaterial&&Z.uniformsNeedUpdate===!0&&(kx.upload(z,er(ze),en,Ke),Z.uniformsNeedUpdate=!1),Z.isSpriteMaterial&&sn.setValue(z,"center",J.center),sn.setValue(z,"modelViewMatrix",J.modelViewMatrix),sn.setValue(z,"normalMatrix",J.normalMatrix),sn.setValue(z,"modelMatrix",J.matrixWorld),Z.isShaderMaterial||Z.isRawShaderMaterial){const Yt=Z.uniformsGroups;for(let hn=0,Gn=Yt.length;hn<Gn;hn++){const uo=Yt[hn];je.update(uo,Dt),je.bind(uo,Dt)}}return Dt}function H(D,G){D.ambientLightColor.needsUpdate=G,D.lightProbe.needsUpdate=G,D.directionalLights.needsUpdate=G,D.directionalLightShadows.needsUpdate=G,D.pointLights.needsUpdate=G,D.pointLightShadows.needsUpdate=G,D.spotLights.needsUpdate=G,D.spotLightShadows.needsUpdate=G,D.rectAreaLights.needsUpdate=G,D.hemisphereLights.needsUpdate=G}function ne(D){return D.isMeshLambertMaterial||D.isMeshToonMaterial||D.isMeshPhongMaterial||D.isMeshStandardMaterial||D.isShadowMaterial||D.isShaderMaterial&&D.lights===!0}this.getActiveCubeFace=function(){return I},this.getActiveMipmapLevel=function(){return T},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(D,G,j){Ue.get(D.texture).__webglTexture=G,Ue.get(D.depthTexture).__webglTexture=j;const Z=Ue.get(D);Z.__hasExternalTextures=!0,Z.__autoAllocateDepthBuffer=j===void 0,Z.__autoAllocateDepthBuffer||Me.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Z.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(D,G){const j=Ue.get(D);j.__webglFramebuffer=G,j.__useDefaultFramebuffer=G===void 0},this.setRenderTarget=function(D,G=0,j=0){b=D,I=G,T=j;let Z=!0,J=null,de=!1,_e=!1;if(D){const ge=Ue.get(D);if(ge.__useDefaultFramebuffer!==void 0)ye.bindFramebuffer(z.FRAMEBUFFER,null),Z=!1;else if(ge.__webglFramebuffer===void 0)Ke.setupRenderTarget(D);else if(ge.__hasExternalTextures)Ke.rebindTextures(D,Ue.get(D.texture).__webglTexture,Ue.get(D.depthTexture).__webglTexture);else if(D.depthBuffer){const Fe=D.depthTexture;if(ge.__boundDepthTexture!==Fe){if(Fe!==null&&Ue.has(Fe)&&(D.width!==Fe.image.width||D.height!==Fe.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Ke.setupDepthRenderbuffer(D)}}const Ve=D.texture;(Ve.isData3DTexture||Ve.isDataArrayTexture||Ve.isCompressedArrayTexture)&&(_e=!0);const ke=Ue.get(D).__webglFramebuffer;D.isWebGLCubeRenderTarget?(Array.isArray(ke[G])?J=ke[G][j]:J=ke[G],de=!0):D.samples>0&&Ke.useMultisampledRTT(D)===!1?J=Ue.get(D).__webglMultisampledFramebuffer:Array.isArray(ke)?J=ke[j]:J=ke,M.copy(D.viewport),L.copy(D.scissor),U=D.scissorTest}else M.copy(F).multiplyScalar(te).floor(),L.copy(ie).multiplyScalar(te).floor(),U=me;if(ye.bindFramebuffer(z.FRAMEBUFFER,J)&&Z&&ye.drawBuffers(D,J),ye.viewport(M),ye.scissor(L),ye.setScissorTest(U),de){const ge=Ue.get(D.texture);z.framebufferTexture2D(z.FRAMEBUFFER,z.COLOR_ATTACHMENT0,z.TEXTURE_CUBE_MAP_POSITIVE_X+G,ge.__webglTexture,j)}else if(_e){const ge=Ue.get(D.texture),Ve=G||0;z.framebufferTextureLayer(z.FRAMEBUFFER,z.COLOR_ATTACHMENT0,ge.__webglTexture,j||0,Ve)}P=-1},this.readRenderTargetPixels=function(D,G,j,Z,J,de,_e){if(!(D&&D.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let we=Ue.get(D).__webglFramebuffer;if(D.isWebGLCubeRenderTarget&&_e!==void 0&&(we=we[_e]),we){ye.bindFramebuffer(z.FRAMEBUFFER,we);try{const ge=D.texture,Ve=ge.format,ke=ge.type;if(!Be.textureFormatReadable(Ve)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Be.textureTypeReadable(ke)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}G>=0&&G<=D.width-Z&&j>=0&&j<=D.height-J&&z.readPixels(G,j,Z,J,re.convert(Ve),re.convert(ke),de)}finally{const ge=b!==null?Ue.get(b).__webglFramebuffer:null;ye.bindFramebuffer(z.FRAMEBUFFER,ge)}}},this.readRenderTargetPixelsAsync=async function(D,G,j,Z,J,de,_e){if(!(D&&D.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let we=Ue.get(D).__webglFramebuffer;if(D.isWebGLCubeRenderTarget&&_e!==void 0&&(we=we[_e]),we){ye.bindFramebuffer(z.FRAMEBUFFER,we);try{const ge=D.texture,Ve=ge.format,ke=ge.type;if(!Be.textureFormatReadable(Ve))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Be.textureTypeReadable(ke))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(G>=0&&G<=D.width-Z&&j>=0&&j<=D.height-J){const Fe=z.createBuffer();z.bindBuffer(z.PIXEL_PACK_BUFFER,Fe),z.bufferData(z.PIXEL_PACK_BUFFER,de.byteLength,z.STREAM_READ),z.readPixels(G,j,Z,J,re.convert(Ve),re.convert(ke),0),z.flush();const st=z.fenceSync(z.SYNC_GPU_COMMANDS_COMPLETE,0);await sie(z,st,4);try{z.bindBuffer(z.PIXEL_PACK_BUFFER,Fe),z.getBufferSubData(z.PIXEL_PACK_BUFFER,0,de)}finally{z.deleteBuffer(Fe),z.deleteSync(st)}return de}}finally{const ge=b!==null?Ue.get(b).__webglFramebuffer:null;ye.bindFramebuffer(z.FRAMEBUFFER,ge)}}},this.copyFramebufferToTexture=function(D,G=null,j=0){D.isTexture!==!0&&(Gh("WebGLRenderer: copyFramebufferToTexture function signature has changed."),G=arguments[0]||null,D=arguments[1]);const Z=Math.pow(2,-j),J=Math.floor(D.image.width*Z),de=Math.floor(D.image.height*Z),_e=G!==null?G.x:0,we=G!==null?G.y:0;Ke.setTexture2D(D,0),z.copyTexSubImage2D(z.TEXTURE_2D,j,0,0,_e,we,J,de),ye.unbindTexture()},this.copyTextureToTexture=function(D,G,j=null,Z=null,J=0){D.isTexture!==!0&&(Gh("WebGLRenderer: copyTextureToTexture function signature has changed."),Z=arguments[0]||null,D=arguments[1],G=arguments[2],J=arguments[3]||0,j=null);let de,_e,we,ge,Ve,ke;j!==null?(de=j.max.x-j.min.x,_e=j.max.y-j.min.y,we=j.min.x,ge=j.min.y):(de=D.image.width,_e=D.image.height,we=0,ge=0),Z!==null?(Ve=Z.x,ke=Z.y):(Ve=0,ke=0);const Fe=re.convert(G.format),st=re.convert(G.type);Ke.setTexture2D(G,0),z.pixelStorei(z.UNPACK_FLIP_Y_WEBGL,G.flipY),z.pixelStorei(z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G.premultiplyAlpha),z.pixelStorei(z.UNPACK_ALIGNMENT,G.unpackAlignment);const ut=z.getParameter(z.UNPACK_ROW_LENGTH),dt=z.getParameter(z.UNPACK_IMAGE_HEIGHT),bt=z.getParameter(z.UNPACK_SKIP_PIXELS),tt=z.getParameter(z.UNPACK_SKIP_ROWS),ze=z.getParameter(z.UNPACK_SKIP_IMAGES),It=D.isCompressedTexture?D.mipmaps[J]:D.image;z.pixelStorei(z.UNPACK_ROW_LENGTH,It.width),z.pixelStorei(z.UNPACK_IMAGE_HEIGHT,It.height),z.pixelStorei(z.UNPACK_SKIP_PIXELS,we),z.pixelStorei(z.UNPACK_SKIP_ROWS,ge),D.isDataTexture?z.texSubImage2D(z.TEXTURE_2D,J,Ve,ke,de,_e,Fe,st,It.data):D.isCompressedTexture?z.compressedTexSubImage2D(z.TEXTURE_2D,J,Ve,ke,It.width,It.height,Fe,It.data):z.texSubImage2D(z.TEXTURE_2D,J,Ve,ke,de,_e,Fe,st,It),z.pixelStorei(z.UNPACK_ROW_LENGTH,ut),z.pixelStorei(z.UNPACK_IMAGE_HEIGHT,dt),z.pixelStorei(z.UNPACK_SKIP_PIXELS,bt),z.pixelStorei(z.UNPACK_SKIP_ROWS,tt),z.pixelStorei(z.UNPACK_SKIP_IMAGES,ze),J===0&&G.generateMipmaps&&z.generateMipmap(z.TEXTURE_2D),ye.unbindTexture()},this.copyTextureToTexture3D=function(D,G,j=null,Z=null,J=0){D.isTexture!==!0&&(Gh("WebGLRenderer: copyTextureToTexture3D function signature has changed."),j=arguments[0]||null,Z=arguments[1]||null,D=arguments[2],G=arguments[3],J=arguments[4]||0);let de,_e,we,ge,Ve,ke,Fe,st,ut;const dt=D.isCompressedTexture?D.mipmaps[J]:D.image;j!==null?(de=j.max.x-j.min.x,_e=j.max.y-j.min.y,we=j.max.z-j.min.z,ge=j.min.x,Ve=j.min.y,ke=j.min.z):(de=dt.width,_e=dt.height,we=dt.depth,ge=0,Ve=0,ke=0),Z!==null?(Fe=Z.x,st=Z.y,ut=Z.z):(Fe=0,st=0,ut=0);const bt=re.convert(G.format),tt=re.convert(G.type);let ze;if(G.isData3DTexture)Ke.setTexture3D(G,0),ze=z.TEXTURE_3D;else if(G.isDataArrayTexture||G.isCompressedArrayTexture)Ke.setTexture2DArray(G,0),ze=z.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}z.pixelStorei(z.UNPACK_FLIP_Y_WEBGL,G.flipY),z.pixelStorei(z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G.premultiplyAlpha),z.pixelStorei(z.UNPACK_ALIGNMENT,G.unpackAlignment);const It=z.getParameter(z.UNPACK_ROW_LENGTH),wt=z.getParameter(z.UNPACK_IMAGE_HEIGHT),Dt=z.getParameter(z.UNPACK_SKIP_PIXELS),An=z.getParameter(z.UNPACK_SKIP_ROWS),Pn=z.getParameter(z.UNPACK_SKIP_IMAGES);z.pixelStorei(z.UNPACK_ROW_LENGTH,dt.width),z.pixelStorei(z.UNPACK_IMAGE_HEIGHT,dt.height),z.pixelStorei(z.UNPACK_SKIP_PIXELS,ge),z.pixelStorei(z.UNPACK_SKIP_ROWS,Ve),z.pixelStorei(z.UNPACK_SKIP_IMAGES,ke),D.isDataTexture||D.isData3DTexture?z.texSubImage3D(ze,J,Fe,st,ut,de,_e,we,bt,tt,dt.data):G.isCompressedArrayTexture?z.compressedTexSubImage3D(ze,J,Fe,st,ut,de,_e,we,bt,dt.data):z.texSubImage3D(ze,J,Fe,st,ut,de,_e,we,bt,tt,dt),z.pixelStorei(z.UNPACK_ROW_LENGTH,It),z.pixelStorei(z.UNPACK_IMAGE_HEIGHT,wt),z.pixelStorei(z.UNPACK_SKIP_PIXELS,Dt),z.pixelStorei(z.UNPACK_SKIP_ROWS,An),z.pixelStorei(z.UNPACK_SKIP_IMAGES,Pn),J===0&&G.generateMipmaps&&z.generateMipmap(ze),ye.unbindTexture()},this.initRenderTarget=function(D){Ue.get(D).__webglFramebuffer===void 0&&Ke.setupRenderTarget(D)},this.initTexture=function(D){D.isCubeTexture?Ke.setTextureCube(D,0):D.isData3DTexture?Ke.setTexture3D(D,0):D.isDataArrayTexture||D.isCompressedArrayTexture?Ke.setTexture2DArray(D,0):Ke.setTexture2D(D,0),ye.unbindTexture()},this.resetState=function(){I=0,T=0,b=null,ye.reset(),Pe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return za}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===xE?"display-p3":"srgb",t.unpackColorSpace=Rn.workingColorSpace===r0?"display-p3":"srgb"}}class wE{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new rt(e),this.density=t}clone(){return new wE(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class ME{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new rt(e),this.near=t,this.far=r}clone(){return new ME(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class jf extends _n{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new so,this.environmentIntensity=1,this.environmentRotation=new so,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class a0{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=M_,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=no()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return Gh("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=no()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=no()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Yi=new W;class ou{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Yi.fromBufferAttribute(this,t),Yi.applyMatrix4(e),this.setXYZ(t,Yi.x,Yi.y,Yi.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Yi.fromBufferAttribute(this,t),Yi.applyNormalMatrix(e),this.setXYZ(t,Yi.x,Yi.y,Yi.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Yi.fromBufferAttribute(this,t),Yi.transformDirection(e),this.setXYZ(t,Yi.x,Yi.y,Yi.z);return this}getComponent(e,t){let r=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(r=ss(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Kt(r,this.array)),this.data.array[e*this.data.stride+this.offset+t]=r,this}setX(e,t){return this.normalized&&(t=Kt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Kt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Kt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Kt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ss(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ss(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ss(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ss(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Kt(t,this.array),r=Kt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Kt(t,this.array),r=Kt(r,this.array),i=Kt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Kt(t,this.array),r=Kt(r,this.array),i=Kt(i,this.array),s=Kt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Mn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ou(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class dP extends Vr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new rt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Xd;const bm=new W,jd=new W,Yd=new W,Jd=new Le,Rm=new Le,$5=new Rt,My=new W,Im=new W,Ty=new W,qk=new Le,TM=new Le,Qk=new Le;class q5 extends _n{constructor(e=new dP){if(super(),this.isSprite=!0,this.type="Sprite",Xd===void 0){Xd=new Xt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new a0(t,5);Xd.setIndex([0,1,2,0,2,3]),Xd.setAttribute("position",new ou(r,3,0,!1)),Xd.setAttribute("uv",new ou(r,2,3,!1))}this.geometry=Xd,this.material=e,this.center=new Le(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),jd.setFromMatrixScale(this.matrixWorld),$5.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Yd.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&jd.multiplyScalar(-Yd.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;Cy(My.set(-.5,-.5,0),Yd,o,jd,i,s),Cy(Im.set(.5,-.5,0),Yd,o,jd,i,s),Cy(Ty.set(.5,.5,0),Yd,o,jd,i,s),qk.set(0,0),TM.set(1,0),Qk.set(1,1);let a=e.ray.intersectTriangle(My,Im,Ty,!1,bm);if(a===null&&(Cy(Im.set(-.5,.5,0),Yd,o,jd,i,s),TM.set(0,1),a=e.ray.intersectTriangle(My,Ty,Im,!1,bm),a===null))return;const l=e.ray.origin.distanceTo(bm);l<e.near||l>e.far||t.push({distance:l,point:bm.clone(),uv:Ks.getInterpolation(bm,My,Im,Ty,qk,TM,Qk,new Le),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Cy(n,e,t,r,i,s){Jd.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(Rm.x=s*Jd.x-i*Jd.y,Rm.y=i*Jd.x+s*Jd.y):Rm.copy(Jd),n.copy(e),n.x+=Rm.x,n.y+=Rm.y,n.applyMatrix4($5)}const by=new W,Zk=new W;class Q5 extends _n{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),e<s)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){by.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(by);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){by.setFromMatrixPosition(e.matrixWorld),Zk.setFromMatrixPosition(this.matrixWorld);const r=by.distanceTo(Zk)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),r>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const e3=new W,t3=new Dn,n3=new Dn,_ce=new W,r3=new Rt,Ry=new W,CM=new xi,i3=new Rt,bM=new od;class hP extends lr{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=gb,this.bindMatrix=new Rt,this.bindMatrixInverse=new Rt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ui),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,Ry),this.boundingBox.expandByPoint(Ry)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new xi),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,Ry),this.boundingSphere.expandByPoint(Ry)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),CM.copy(this.boundingSphere),CM.applyMatrix4(i),e.ray.intersectsSphere(CM)!==!1&&(i3.copy(i).invert(),bM.copy(e.ray).applyMatrix4(i3),!(this.boundingBox!==null&&bM.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,bM)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Dn,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===gb?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===y5?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;t3.fromBufferAttribute(i.attributes.skinIndex,e),n3.fromBufferAttribute(i.attributes.skinWeight,e),e3.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=n3.getComponent(s);if(o!==0){const a=t3.getComponent(s);r3.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(_ce.copy(e3).applyMatrix4(r3),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class TE extends _n{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ua extends En{constructor(e=null,t=1,r=1,i,s,o,a,l,c=$r,u=$r,f,p){super(null,o,a,l,c,u,i,s,f,p),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const s3=new Rt,vce=new Rt;class l0{constructor(e=[],t=[]){this.uuid=no(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Rt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new Rt;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:vce;s3.multiplyMatrices(a,t[s]),s3.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new l0(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new ua(t,e,e,Nr,ar);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new TE),this.bones.push(o),this.boneInverses.push(new Rt().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class Yf extends Mn{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Kd=new Rt,o3=new Rt,Iy=[],a3=new Ui,yce=new Rt,Pm=new lr,Dm=new xi;class pP extends lr{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Yf(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,yce)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Ui),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Kd),a3.copy(e.boundingBox).applyMatrix4(Kd),this.boundingBox.union(a3)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new xi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Kd),Dm.copy(e.boundingSphere).applyMatrix4(Kd),this.boundingSphere.union(Dm)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const r=t.morphTargetInfluences,i=this.morphTexture.source.data.data,s=r.length+1,o=e*s+1;for(let a=0;a<r.length;a++)r[a]=i[o+a]}raycast(e,t){const r=this.matrixWorld,i=this.count;if(Pm.geometry=this.geometry,Pm.material=this.material,Pm.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Dm.copy(this.boundingSphere),Dm.applyMatrix4(r),e.ray.intersectsSphere(Dm)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,Kd),o3.multiplyMatrices(r,Kd),Pm.matrixWorld=o3,Pm.raycast(e,Iy);for(let o=0,a=Iy.length;o<a;o++){const l=Iy[o];l.instanceId=s,l.object=this,t.push(l)}Iy.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Yf(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const r=t.morphTargetInfluences,i=r.length+1;this.morphTexture===null&&(this.morphTexture=new ua(new Float32Array(i*this.count),i,this.count,t0,ar));const s=this.morphTexture.source.data.data;let o=0;for(let c=0;c<r.length;c++)o+=r[c];const a=this.geometry.morphTargetsRelative?1:1-o,l=i*e;s[l]=a,s.set(r,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function xce(n,e){return n.z-e.z}function Sce(n,e){return e.z-n.z}class Ece{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,r){const i=this.pool,s=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1,index:-1});const o=i[this.index];s.push(o),this.index++,o.start=e.start,o.count=e.count,o.z=t,o.index=r}reset(){this.list.length=0,this.index=0}}const uc=new Rt,RM=new Rt,Ace=new Rt,wce=new rt(1,1,1),l3=new Rt,IM=new o0,Py=new Ui,Nu=new xi,Bm=new W,c3=new W,Mce=new W,PM=new Ece,Di=new lr,Dy=[];function Tce(n,e,t=0){const r=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const i=n.count;for(let s=0;s<i;s++)for(let o=0;o<r;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*r);e.needsUpdate=!0}class Z5 extends lr{get maxInstanceCount(){return this._maxInstanceCount}constructor(e,t,r=t*2,i){super(new Xt,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawInfo=[],this._drawRanges=[],this._reservedRanges=[],this._bounds=[],this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=r,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),r=new ua(t,e,e,Nr,ar);this._matricesTexture=r}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),r=new ua(t,e,e,n0,Qa);this._indirectTexture=r}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),r=new ua(t,e,e,Nr,ar);r.colorSpace=Rn.workingColorSpace,this._colorsTexture=r}_initializeGeometry(e){const t=this.geometry,r=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:l,normalized:c}=o,u=new a.constructor(r*l),f=new Mn(u,l,c);t.setAttribute(s,f)}if(e.getIndex()!==null){const s=r>65535?new Uint32Array(i):new Uint16Array(i);t.setIndex(new Mn(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in t.attributes){if(!e.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),s=t.getAttribute(r);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ui);const e=this.boundingBox,t=this._drawInfo;e.makeEmpty();for(let r=0,i=t.length;r<i;r++){if(t[r].active===!1)continue;const s=t[r].geometryIndex;this.getMatrixAt(r,uc),this.getBoundingBoxAt(s,Py).applyMatrix4(uc),e.union(Py)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new xi);const e=this.boundingSphere,t=this._drawInfo;e.makeEmpty();for(let r=0,i=t.length;r<i;r++){if(t[r].active===!1)continue;const s=t[r].geometryIndex;this.getMatrixAt(r,uc),this.getBoundingSphereAt(s,Nu).applyMatrix4(uc),e.union(Nu)}}addInstance(e){if(this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");this._drawInfo.push({visible:!0,active:!0,geometryIndex:e});const t=this._drawInfo.length-1,r=this._matricesTexture,i=r.image.data;Ace.toArray(i,t*16),r.needsUpdate=!0;const s=this._colorsTexture;return s&&(wce.toArray(s.image.data,t*4),s.needsUpdate=!0),t}addGeometry(e,t=-1,r=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),t===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=t,s===null?i.vertexStart=0:i.vertexStart=s.vertexStart+s.vertexCount;const c=e.getIndex(),u=c!==null;if(u&&(r===-1?i.indexCount=c.count:i.indexCount=r,s===null?i.indexStart=0:i.indexStart=s.indexStart+s.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const f=this._geometryCount;return this._geometryCount++,o.push(i),a.push({start:u?i.indexStart:i.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new Ui,sphereInitialized:!1,sphere:new xi}),this.setGeometryAt(f,e),f}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const r=this.geometry,i=r.getIndex()!==null,s=r.getIndex(),o=t.getIndex(),a=this._reservedRanges[e];if(i&&o.count>a.indexCount||t.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.vertexCount;for(const m in r.attributes){const g=t.getAttribute(m),v=r.getAttribute(m);Tce(g,v,l);const y=g.itemSize;for(let _=g.count,S=c;_<S;_++){const E=l+_;for(let w=0;w<y;w++)v.setComponent(E,w,0)}v.needsUpdate=!0,v.addUpdateRange(l*y,c*y)}if(i){const m=a.indexStart;for(let g=0;g<o.count;g++)s.setX(m+g,l+o.getX(g));for(let g=o.count,v=a.indexCount;g<v;g++)s.setX(m+g,l);s.needsUpdate=!0,s.addUpdateRange(m,a.indexCount)}const u=this._bounds[e];t.boundingBox!==null?(u.box.copy(t.boundingBox),u.boxInitialized=!0):u.boxInitialized=!1,t.boundingSphere!==null?(u.sphere.copy(t.boundingSphere),u.sphereInitialized=!0):u.sphereInitialized=!1;const f=this._drawRanges[e],p=t.getAttribute("position");return f.count=i?o.count:p.count,this._visibilityChanged=!0,e}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const r=this._bounds[e],i=r.box,s=this.geometry;if(r.boxInitialized===!1){i.makeEmpty();const o=s.index,a=s.attributes.position,l=this._drawRanges[e];for(let c=l.start,u=l.start+l.count;c<u;c++){let f=c;o&&(f=o.getX(f)),i.expandByPoint(Bm.fromBufferAttribute(a,f))}r.boxInitialized=!0}return t.copy(i),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const r=this._bounds[e],i=r.sphere,s=this.geometry;if(r.sphereInitialized===!1){i.makeEmpty(),this.getBoundingBoxAt(e,Py),Py.getCenter(i.center);const o=s.index,a=s.attributes.position,l=this._drawRanges[e];let c=0;for(let u=l.start,f=l.start+l.count;u<f;u++){let p=u;o&&(p=o.getX(p)),Bm.fromBufferAttribute(a,p),c=Math.max(c,i.center.distanceToSquared(Bm))}i.radius=Math.sqrt(c),r.sphereInitialized=!0}return t.copy(i),t}setMatrixAt(e,t){const r=this._drawInfo,i=this._matricesTexture,s=this._matricesTexture.image.data;return e>=r.length||r[e].active===!1?this:(t.toArray(s,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,t){const r=this._drawInfo,i=this._matricesTexture.image.data;return e>=r.length||r[e].active===!1?null:t.fromArray(i,e*16)}setColorAt(e,t){this._colorsTexture===null&&this._initColorsTexture();const r=this._colorsTexture,i=this._colorsTexture.image.data,s=this._drawInfo;return e>=s.length||s[e].active===!1?this:(t.toArray(i,e*4),r.needsUpdate=!0,this)}getColorAt(e,t){const r=this._colorsTexture.image.data,i=this._drawInfo;return e>=i.length||i[e].active===!1?null:t.fromArray(r,e*4)}setVisibleAt(e,t){const r=this._drawInfo;return e>=r.length||r[e].active===!1||r[e].visible===t?this:(r[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._drawInfo;return e>=t.length||t[e].active===!1?!1:t[e].visible}raycast(e,t){const r=this._drawInfo,i=this._drawRanges,s=this.matrixWorld,o=this.geometry;Di.material=this.material,Di.geometry.index=o.index,Di.geometry.attributes=o.attributes,Di.geometry.boundingBox===null&&(Di.geometry.boundingBox=new Ui),Di.geometry.boundingSphere===null&&(Di.geometry.boundingSphere=new xi);for(let a=0,l=r.length;a<l;a++){if(!r[a].visible||!r[a].active)continue;const c=r[a].geometryIndex,u=i[c];Di.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(a,Di.matrixWorld).premultiply(s),this.getBoundingBoxAt(c,Di.geometry.boundingBox),this.getBoundingSphereAt(c,Di.geometry.boundingSphere),Di.raycast(e,Dy);for(let f=0,p=Dy.length;f<p;f++){const m=Dy[f];m.object=this,m.batchId=a,t.push(m)}Dy.length=0}Di.material=null,Di.geometry.index=null,Di.geometry.attributes={},Di.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._drawInfo=e._drawInfo.map(t=>({...t})),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,r,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._drawInfo,c=this._multiDrawStarts,u=this._multiDrawCounts,f=this._drawRanges,p=this.perObjectFrustumCulled,m=this._indirectTexture,g=m.image.data;p&&(l3.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),IM.setFromProjectionMatrix(l3,e.coordinateSystem));let v=0;if(this.sortObjects){RM.copy(this.matrixWorld).invert(),Bm.setFromMatrixPosition(r.matrixWorld).applyMatrix4(RM),c3.set(0,0,-1).transformDirection(r.matrixWorld).transformDirection(RM);for(let S=0,E=l.length;S<E;S++)if(l[S].visible&&l[S].active){const w=l[S].geometryIndex;this.getMatrixAt(S,uc),this.getBoundingSphereAt(w,Nu).applyMatrix4(uc);let I=!1;if(p&&(I=!IM.intersectsSphere(Nu)),!I){const T=Mce.subVectors(Nu.center,Bm).dot(c3);PM.push(f[w],T,S)}}const y=PM.list,_=this.customSort;_===null?y.sort(s.transparent?Sce:xce):_.call(this,y,r);for(let S=0,E=y.length;S<E;S++){const w=y[S];c[v]=w.start*a,u[v]=w.count,g[v]=w.index,v++}PM.reset()}else for(let y=0,_=l.length;y<_;y++)if(l[y].visible&&l[y].active){const S=l[y].geometryIndex;let E=!1;if(p&&(this.getMatrixAt(y,uc),this.getBoundingSphereAt(S,Nu).applyMatrix4(uc),E=!IM.intersectsSphere(Nu)),!E){const w=f[S];c[v]=w.start*a,u[v]=w.count,g[v]=y,v++}}m.needsUpdate=!0,this._multiDrawCount=v,this._visibilityChanged=!1}onBeforeShadow(e,t,r,i,s,o){this.onBeforeRender(e,null,i,s,o)}}class Gi extends Vr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new rt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const m1=new W,g1=new W,u3=new Rt,Lm=new od,By=new xi,DM=new W,f3=new W;class jl extends _n{constructor(e=new Xt,t=new Gi){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)m1.fromBufferAttribute(t,i-1),g1.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=m1.distanceTo(g1);e.setAttribute("lineDistance",new At(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),By.copy(r.boundingSphere),By.applyMatrix4(i),By.radius+=s,e.ray.intersectsSphere(By)===!1)return;u3.copy(i).invert(),Lm.copy(e.ray).applyMatrix4(u3);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,u=r.index,p=r.attributes.position;if(u!==null){const m=Math.max(0,o.start),g=Math.min(u.count,o.start+o.count);for(let v=m,y=g-1;v<y;v+=c){const _=u.getX(v),S=u.getX(v+1),E=Ly(this,e,Lm,l,_,S);E&&t.push(E)}if(this.isLineLoop){const v=u.getX(g-1),y=u.getX(m),_=Ly(this,e,Lm,l,v,y);_&&t.push(_)}}else{const m=Math.max(0,o.start),g=Math.min(p.count,o.start+o.count);for(let v=m,y=g-1;v<y;v+=c){const _=Ly(this,e,Lm,l,v,v+1);_&&t.push(_)}if(this.isLineLoop){const v=Ly(this,e,Lm,l,g-1,m);v&&t.push(v)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function Ly(n,e,t,r,i,s){const o=n.geometry.attributes.position;if(m1.fromBufferAttribute(o,i),g1.fromBufferAttribute(o,s),t.distanceSqToSegment(m1,g1,DM,f3)>r)return;DM.applyMatrix4(n.matrixWorld);const l=e.ray.origin.distanceTo(DM);if(!(l<e.near||l>e.far))return{distance:l,point:f3.clone().applyMatrix4(n.matrixWorld),index:i,face:null,faceIndex:null,object:n}}const d3=new W,h3=new W;class ma extends jl{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)d3.fromBufferAttribute(t,i),h3.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+d3.distanceTo(h3);e.setAttribute("lineDistance",new At(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class mP extends jl{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class CE extends Vr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new rt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const p3=new Rt,Ab=new od,Ny=new xi,ky=new W;class gP extends _n{constructor(e=new Xt,t=new CE){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Ny.copy(r.boundingSphere),Ny.applyMatrix4(i),Ny.radius+=s,e.ray.intersectsSphere(Ny)===!1)return;p3.copy(i).invert(),Ab.copy(e.ray).applyMatrix4(p3);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=r.index,f=r.attributes.position;if(c!==null){const p=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);for(let g=p,v=m;g<v;g++){const y=c.getX(g);ky.fromBufferAttribute(f,y),m3(ky,y,l,i,e,t,this)}}else{const p=Math.max(0,o.start),m=Math.min(f.count,o.start+o.count);for(let g=p,v=m;g<v;g++)ky.fromBufferAttribute(f,g),m3(ky,g,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function m3(n,e,t,r,i,s,o){const a=Ab.distanceSqToPoint(n);if(a<t){const l=new W;Ab.closestPointToPoint(n,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class Cce extends En{constructor(e,t,r,i,s,o,a,l,c){super(e,t,r,i,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Sn,this.magFilter=s!==void 0?s:Sn,this.generateMipmaps=!1;const u=this;function f(){u.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class bce extends En{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=$r,this.minFilter=$r,this.generateMipmaps=!1,this.needsUpdate=!0}}class bE extends En{constructor(e,t,r,i,s,o,a,l,c,u,f,p){super(null,o,a,l,c,u,i,s,f,p),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Rce extends bE{constructor(e,t,r,i,s,o){super(e,t,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Lr,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Ice extends bE{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,qa),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Pce extends En{constructor(e,t,r,i,s,o,a,l,c){super(e,t,r,i,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class ga{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,c;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),c=r[i]-o,c<0)a=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const u=r[i],p=r[i+1]-u,m=(o-u)/p;return(i+m)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new Le:new W);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new W,i=[],s=[],o=[],a=new W,l=new Rt;for(let m=0;m<=e;m++){const g=m/e;i[m]=this.getTangentAt(g,new W)}s[0]=new W,o[0]=new W;let c=Number.MAX_VALUE;const u=Math.abs(i[0].x),f=Math.abs(i[0].y),p=Math.abs(i[0].z);u<=c&&(c=u,r.set(1,0,0)),f<=c&&(c=f,r.set(0,1,0)),p<=c&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(i[m-1],i[m]),a.length()>Number.EPSILON){a.normalize();const g=Math.acos(Mr(i[m-1].dot(i[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,g))}o[m].crossVectors(i[m],s[m])}if(t===!0){let m=Math.acos(Mr(s[0].dot(s[e]),-1,1));m/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let g=1;g<=e;g++)s[g].applyMatrix4(l.makeRotationAxis(i[g],m*g)),o[g].crossVectors(i[g],s[g])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class RE extends ga{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new Le){const r=t,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),f=Math.sin(this.aRotation),p=l-this.aX,m=c-this.aY;l=p*u-m*f+this.aX,c=p*f+m*u+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class e8 extends RE{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function _P(){let n=0,e=0,t=0,r=0;function i(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){i(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,f){let p=(o-s)/c-(a-s)/(c+u)+(a-o)/u,m=(a-o)/u-(l-o)/(u+f)+(l-a)/f;p*=u,m*=u,i(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const Fy=new W,BM=new _P,LM=new _P,NM=new _P;class t8 extends ga{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new W){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=i[(a-1)%s]:(Fy.subVectors(i[0],i[1]).add(i[0]),c=Fy);const f=i[a%s],p=i[(a+1)%s];if(this.closed||a+2<s?u=i[(a+2)%s]:(Fy.subVectors(i[s-1],i[s-2]).add(i[s-1]),u=Fy),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let g=Math.pow(c.distanceToSquared(f),m),v=Math.pow(f.distanceToSquared(p),m),y=Math.pow(p.distanceToSquared(u),m);v<1e-4&&(v=1),g<1e-4&&(g=v),y<1e-4&&(y=v),BM.initNonuniformCatmullRom(c.x,f.x,p.x,u.x,g,v,y),LM.initNonuniformCatmullRom(c.y,f.y,p.y,u.y,g,v,y),NM.initNonuniformCatmullRom(c.z,f.z,p.z,u.z,g,v,y)}else this.curveType==="catmullrom"&&(BM.initCatmullRom(c.x,f.x,p.x,u.x,this.tension),LM.initCatmullRom(c.y,f.y,p.y,u.y,this.tension),NM.initCatmullRom(c.z,f.z,p.z,u.z,this.tension));return r.set(BM.calc(l),LM.calc(l),NM.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new W().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function g3(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+s+o)*l+(-3*t+3*r-2*s-o)*a+s*n+t}function Dce(n,e){const t=1-n;return t*t*e}function Bce(n,e){return 2*(1-n)*n*e}function Lce(n,e){return n*n*e}function Ng(n,e,t,r){return Dce(n,e)+Bce(n,t)+Lce(n,r)}function Nce(n,e){const t=1-n;return t*t*t*e}function kce(n,e){const t=1-n;return 3*t*t*n*e}function Fce(n,e){return 3*(1-n)*n*n*e}function Oce(n,e){return n*n*n*e}function kg(n,e,t,r,i){return Nce(n,e)+kce(n,t)+Fce(n,r)+Oce(n,i)}class vP extends ga{constructor(e=new Le,t=new Le,r=new Le,i=new Le){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Le){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(kg(e,i.x,s.x,o.x,a.x),kg(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class n8 extends ga{constructor(e=new W,t=new W,r=new W,i=new W){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new W){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(kg(e,i.x,s.x,o.x,a.x),kg(e,i.y,s.y,o.y,a.y),kg(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class yP extends ga{constructor(e=new Le,t=new Le){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Le){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Le){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class r8 extends ga{constructor(e=new W,t=new W){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new W){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new W){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class xP extends ga{constructor(e=new Le,t=new Le,r=new Le){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Le){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(Ng(e,i.x,s.x,o.x),Ng(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class SP extends ga{constructor(e=new W,t=new W,r=new W){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new W){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(Ng(e,i.x,s.x,o.x),Ng(e,i.y,s.y,o.y),Ng(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class EP extends ga{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Le){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],c=i[o],u=i[o>i.length-2?i.length-1:o+1],f=i[o>i.length-3?i.length-1:o+2];return r.set(g3(a,l.x,c.x,u.x,f.x),g3(a,l.y,c.y,u.y,f.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new Le().fromArray(i))}return this}}var _1=Object.freeze({__proto__:null,ArcCurve:e8,CatmullRomCurve3:t8,CubicBezierCurve:vP,CubicBezierCurve3:n8,EllipseCurve:RE,LineCurve:yP,LineCurve3:r8,QuadraticBezierCurve:xP,QuadraticBezierCurve3:SP,SplineCurve:EP});class i8 extends ga{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new _1[r](t,e))}return this}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];r&&r.equals(u)||(t.push(u),r=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new _1[i.type]().fromJSON(i))}return this}}class b_ extends i8{constructor(e){super(),this.type="Path",this.currentPoint=new Le,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new yP(this.currentPoint.clone(),new Le(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new xP(this.currentPoint.clone(),new Le(e,t),new Le(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new vP(this.currentPoint.clone(),new Le(e,t),new Le(r,i),new Le(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new EP(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,r,i,s,o,a,l),this}absellipse(e,t,r,i,s,o,a,l){const c=new RE(e,t,r,i,s,o,a,l);if(this.curves.length>0){const f=c.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class c0 extends Xt{constructor(e=[new Le(0,-.5),new Le(.5,0),new Le(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=Mr(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/t,f=new W,p=new Le,m=new W,g=new W,v=new W;let y=0,_=0;for(let S=0;S<=e.length-1;S++)switch(S){case 0:y=e[S+1].x-e[S].x,_=e[S+1].y-e[S].y,m.x=_*1,m.y=-y,m.z=_*0,v.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(v.x,v.y,v.z);break;default:y=e[S+1].x-e[S].x,_=e[S+1].y-e[S].y,m.x=_*1,m.y=-y,m.z=_*0,g.copy(m),m.x+=v.x,m.y+=v.y,m.z+=v.z,m.normalize(),l.push(m.x,m.y,m.z),v.copy(g)}for(let S=0;S<=t;S++){const E=r+S*u*i,w=Math.sin(E),I=Math.cos(E);for(let T=0;T<=e.length-1;T++){f.x=e[T].x*w,f.y=e[T].y,f.z=e[T].x*I,o.push(f.x,f.y,f.z),p.x=S/t,p.y=T/(e.length-1),a.push(p.x,p.y);const b=l[3*T+0]*w,P=l[3*T+1],C=l[3*T+0]*I;c.push(b,P,C)}}for(let S=0;S<t;S++)for(let E=0;E<e.length-1;E++){const w=E+S*e.length,I=w,T=w+e.length,b=w+e.length+1,P=w+1;s.push(I,T,P),s.push(b,P,T)}this.setIndex(s),this.setAttribute("position",new At(o,3)),this.setAttribute("uv",new At(a,2)),this.setAttribute("normal",new At(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new c0(e.points,e.segments,e.phiStart,e.phiLength)}}class IE extends c0{constructor(e=1,t=1,r=4,i=8){const s=new b_;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new IE(e.radius,e.length,e.capSegments,e.radialSegments)}}class PE extends Xt{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new W,u=new Le;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,p=3;f<=t;f++,p+=3){const m=r+f/t*i;c.x=e*Math.cos(m),c.y=e*Math.sin(m),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[p]/e+1)/2,u.y=(o[p+1]/e+1)/2,l.push(u.x,u.y)}for(let f=1;f<=t;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new At(o,3)),this.setAttribute("normal",new At(a,3)),this.setAttribute("uv",new At(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new PE(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Gp extends Xt{constructor(e=1,t=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const u=[],f=[],p=[],m=[];let g=0;const v=[],y=r/2;let _=0;S(),o===!1&&(e>0&&E(!0),t>0&&E(!1)),this.setIndex(u),this.setAttribute("position",new At(f,3)),this.setAttribute("normal",new At(p,3)),this.setAttribute("uv",new At(m,2));function S(){const w=new W,I=new W;let T=0;const b=(t-e)/r;for(let P=0;P<=s;P++){const C=[],M=P/s,L=M*(t-e)+e;for(let U=0;U<=i;U++){const X=U/i,$=X*l+a,Q=Math.sin($),Y=Math.cos($);I.x=L*Q,I.y=-M*r+y,I.z=L*Y,f.push(I.x,I.y,I.z),w.set(Q,b,Y).normalize(),p.push(w.x,w.y,w.z),m.push(X,1-M),C.push(g++)}v.push(C)}for(let P=0;P<i;P++)for(let C=0;C<s;C++){const M=v[C][P],L=v[C+1][P],U=v[C+1][P+1],X=v[C][P+1];u.push(M,L,X),u.push(L,U,X),T+=6}c.addGroup(_,T,0),_+=T}function E(w){const I=g,T=new Le,b=new W;let P=0;const C=w===!0?e:t,M=w===!0?1:-1;for(let U=1;U<=i;U++)f.push(0,y*M,0),p.push(0,M,0),m.push(.5,.5),g++;const L=g;for(let U=0;U<=i;U++){const $=U/i*l+a,Q=Math.cos($),Y=Math.sin($);b.x=C*Y,b.y=y*M,b.z=C*Q,f.push(b.x,b.y,b.z),p.push(0,M,0),T.x=Q*.5+.5,T.y=Y*.5*M+.5,m.push(T.x,T.y),g++}for(let U=0;U<i;U++){const X=I+U,$=L+U;w===!0?u.push($,$+1,X):u.push($+1,$,X),P+=3}c.addGroup(_,P,w===!0?1:2),_+=P}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Gp(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class DE extends Gp{constructor(e=1,t=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new DE(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class gu extends Xt{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];a(i),c(r),u(),this.setAttribute("position",new At(s,3)),this.setAttribute("normal",new At(s.slice(),3)),this.setAttribute("uv",new At(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(S){const E=new W,w=new W,I=new W;for(let T=0;T<t.length;T+=3)m(t[T+0],E),m(t[T+1],w),m(t[T+2],I),l(E,w,I,S)}function l(S,E,w,I){const T=I+1,b=[];for(let P=0;P<=T;P++){b[P]=[];const C=S.clone().lerp(w,P/T),M=E.clone().lerp(w,P/T),L=T-P;for(let U=0;U<=L;U++)U===0&&P===T?b[P][U]=C:b[P][U]=C.clone().lerp(M,U/L)}for(let P=0;P<T;P++)for(let C=0;C<2*(T-P)-1;C++){const M=Math.floor(C/2);C%2===0?(p(b[P][M+1]),p(b[P+1][M]),p(b[P][M])):(p(b[P][M+1]),p(b[P+1][M+1]),p(b[P+1][M]))}}function c(S){const E=new W;for(let w=0;w<s.length;w+=3)E.x=s[w+0],E.y=s[w+1],E.z=s[w+2],E.normalize().multiplyScalar(S),s[w+0]=E.x,s[w+1]=E.y,s[w+2]=E.z}function u(){const S=new W;for(let E=0;E<s.length;E+=3){S.x=s[E+0],S.y=s[E+1],S.z=s[E+2];const w=y(S)/2/Math.PI+.5,I=_(S)/Math.PI+.5;o.push(w,1-I)}g(),f()}function f(){for(let S=0;S<o.length;S+=6){const E=o[S+0],w=o[S+2],I=o[S+4],T=Math.max(E,w,I),b=Math.min(E,w,I);T>.9&&b<.1&&(E<.2&&(o[S+0]+=1),w<.2&&(o[S+2]+=1),I<.2&&(o[S+4]+=1))}}function p(S){s.push(S.x,S.y,S.z)}function m(S,E){const w=S*3;E.x=e[w+0],E.y=e[w+1],E.z=e[w+2]}function g(){const S=new W,E=new W,w=new W,I=new W,T=new Le,b=new Le,P=new Le;for(let C=0,M=0;C<s.length;C+=9,M+=6){S.set(s[C+0],s[C+1],s[C+2]),E.set(s[C+3],s[C+4],s[C+5]),w.set(s[C+6],s[C+7],s[C+8]),T.set(o[M+0],o[M+1]),b.set(o[M+2],o[M+3]),P.set(o[M+4],o[M+5]),I.copy(S).add(E).add(w).divideScalar(3);const L=y(I);v(T,M+0,S,L),v(b,M+2,E,L),v(P,M+4,w,L)}}function v(S,E,w,I){I<0&&S.x===1&&(o[E]=S.x-1),w.x===0&&w.z===0&&(o[E]=I/2/Math.PI+.5)}function y(S){return Math.atan2(S.z,-S.x)}function _(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gu(e.vertices,e.indices,e.radius,e.details)}}class BE extends gu{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new BE(e.radius,e.detail)}}const Oy=new W,Uy=new W,kM=new W,Hy=new Ks;class s8 extends Xt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(Rf*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],f=new Array(3),p={},m=[];for(let g=0;g<l;g+=3){o?(c[0]=o.getX(g),c[1]=o.getX(g+1),c[2]=o.getX(g+2)):(c[0]=g,c[1]=g+1,c[2]=g+2);const{a:v,b:y,c:_}=Hy;if(v.fromBufferAttribute(a,c[0]),y.fromBufferAttribute(a,c[1]),_.fromBufferAttribute(a,c[2]),Hy.getNormal(kM),f[0]=`${Math.round(v.x*i)},${Math.round(v.y*i)},${Math.round(v.z*i)}`,f[1]=`${Math.round(y.x*i)},${Math.round(y.y*i)},${Math.round(y.z*i)}`,f[2]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let S=0;S<3;S++){const E=(S+1)%3,w=f[S],I=f[E],T=Hy[u[S]],b=Hy[u[E]],P=`${w}_${I}`,C=`${I}_${w}`;C in p&&p[C]?(kM.dot(p[C].normal)<=s&&(m.push(T.x,T.y,T.z),m.push(b.x,b.y,b.z)),p[C]=null):P in p||(p[P]={index0:c[S],index1:c[E],normal:kM.clone()})}}for(const g in p)if(p[g]){const{index0:v,index1:y}=p[g];Oy.fromBufferAttribute(a,v),Uy.fromBufferAttribute(a,y),m.push(Oy.x,Oy.y,Oy.z),m.push(Uy.x,Uy.y,Uy.z)}this.setAttribute("position",new At(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Pf extends b_{constructor(e){super(e),this.uuid=no(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new b_().fromJSON(i))}return this}}const Uce={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=o8(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,f,p,m;if(r&&(s=Wce(n,e,s,t)),n.length>80*t){a=c=n[0],l=u=n[1];for(let g=t;g<i;g+=t)f=n[g],p=n[g+1],f<a&&(a=f),p<l&&(l=p),f>c&&(c=f),p>u&&(u=p);m=Math.max(c-a,u-l),m=m!==0?32767/m:0}return R_(s,o,t,a,l,m,0),o}};function o8(n,e,t,r,i){let s,o;if(i===tue(n,e,t,r)>0)for(s=e;s<t;s+=r)o=_3(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=_3(s,n[s],n[s+1],o);return o&&LE(o,o.next)&&(P_(o),o=o.next),o}function Jf(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(LE(t,t.next)||_r(t.prev,t,t.next)===0)){if(P_(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function R_(n,e,t,r,i,s,o){if(!n)return;!o&&s&&Kce(n,r,i,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?zce(n,r,i,s):Hce(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),P_(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=Gce(Jf(n),e,t),R_(n,e,t,r,i,s,2)):o===2&&Vce(n,e,t,r,i,s):R_(Jf(n),e,t,r,i,s,1);break}}}function Hce(n){const e=n.prev,t=n,r=n.next;if(_r(e,t,r)>=0)return!1;const i=e.x,s=t.x,o=r.x,a=e.y,l=t.y,c=r.y,u=i<s?i<o?i:o:s<o?s:o,f=a<l?a<c?a:c:l<c?l:c,p=i>s?i>o?i:o:s>o?s:o,m=a>l?a>c?a:c:l>c?l:c;let g=r.next;for(;g!==e;){if(g.x>=u&&g.x<=p&&g.y>=f&&g.y<=m&&Ah(i,a,s,l,o,c,g.x,g.y)&&_r(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function zce(n,e,t,r){const i=n.prev,s=n,o=n.next;if(_r(i,s,o)>=0)return!1;const a=i.x,l=s.x,c=o.x,u=i.y,f=s.y,p=o.y,m=a<l?a<c?a:c:l<c?l:c,g=u<f?u<p?u:p:f<p?f:p,v=a>l?a>c?a:c:l>c?l:c,y=u>f?u>p?u:p:f>p?f:p,_=wb(m,g,e,t,r),S=wb(v,y,e,t,r);let E=n.prevZ,w=n.nextZ;for(;E&&E.z>=_&&w&&w.z<=S;){if(E.x>=m&&E.x<=v&&E.y>=g&&E.y<=y&&E!==i&&E!==o&&Ah(a,u,l,f,c,p,E.x,E.y)&&_r(E.prev,E,E.next)>=0||(E=E.prevZ,w.x>=m&&w.x<=v&&w.y>=g&&w.y<=y&&w!==i&&w!==o&&Ah(a,u,l,f,c,p,w.x,w.y)&&_r(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;E&&E.z>=_;){if(E.x>=m&&E.x<=v&&E.y>=g&&E.y<=y&&E!==i&&E!==o&&Ah(a,u,l,f,c,p,E.x,E.y)&&_r(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;w&&w.z<=S;){if(w.x>=m&&w.x<=v&&w.y>=g&&w.y<=y&&w!==i&&w!==o&&Ah(a,u,l,f,c,p,w.x,w.y)&&_r(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function Gce(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!LE(i,s)&&a8(i,r,r.next,s)&&I_(i,s)&&I_(s,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(s.i/t|0),P_(r),P_(r.next),r=n=s),r=r.next}while(r!==n);return Jf(r)}function Vce(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&Qce(o,a)){let l=l8(o,a);o=Jf(o,o.next),l=Jf(l,l.next),R_(o,e,t,r,i,s,0),R_(l,e,t,r,i,s,0);return}a=a.next}o=o.next}while(o!==n)}function Wce(n,e,t,r){const i=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:n.length,c=o8(n,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(qce(c));for(i.sort(Xce),s=0;s<i.length;s++)t=jce(i[s],t);return t}function Xce(n,e){return n.x-e.x}function jce(n,e){const t=Yce(n,e);if(!t)return e;const r=l8(t,n);return Jf(r,r.next),Jf(t,t.next)}function Yce(n,e){let t=e,r=-1/0,i;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const p=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>r&&(r=p,i=t.x<t.next.x?t:t.next,p===s))return i}t=t.next}while(t!==e);if(!i)return null;const a=i,l=i.x,c=i.y;let u=1/0,f;t=i;do s>=t.x&&t.x>=l&&s!==t.x&&Ah(o<c?s:r,o,l,c,o<c?r:s,o,t.x,t.y)&&(f=Math.abs(o-t.y)/(s-t.x),I_(t,n)&&(f<u||f===u&&(t.x>i.x||t.x===i.x&&Jce(i,t)))&&(i=t,u=f)),t=t.next;while(t!==a);return i}function Jce(n,e){return _r(n.prev,n,e.prev)<0&&_r(e.next,n,n.next)<0}function Kce(n,e,t,r){let i=n;do i.z===0&&(i.z=wb(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,$ce(i)}function $ce(n){let e,t,r,i,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,c*=2}while(o>1);return n}function wb(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function qce(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Ah(n,e,t,r,i,s,o,a){return(i-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(r-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(r-a)}function Qce(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!Zce(n,e)&&(I_(n,e)&&I_(e,n)&&eue(n,e)&&(_r(n.prev,n,e.prev)||_r(n,e.prev,e))||LE(n,e)&&_r(n.prev,n,n.next)>0&&_r(e.prev,e,e.next)>0)}function _r(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function LE(n,e){return n.x===e.x&&n.y===e.y}function a8(n,e,t,r){const i=Gy(_r(n,e,t)),s=Gy(_r(n,e,r)),o=Gy(_r(t,r,n)),a=Gy(_r(t,r,e));return!!(i!==s&&o!==a||i===0&&zy(n,t,e)||s===0&&zy(n,r,e)||o===0&&zy(t,n,r)||a===0&&zy(t,e,r))}function zy(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Gy(n){return n>0?1:n<0?-1:0}function Zce(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&a8(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function I_(n,e){return _r(n.prev,n,n.next)<0?_r(n,e,n.next)>=0&&_r(n,n.prev,e)>=0:_r(n,e,n.prev)<0||_r(n,n.next,e)<0}function eue(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function l8(n,e){const t=new Mb(n.i,n.x,n.y),r=new Mb(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function _3(n,e,t,r){const i=new Mb(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function P_(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Mb(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function tue(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}class Ja{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return Ja.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];v3(e),y3(r,e);let o=e.length;t.forEach(v3);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,y3(r,t[l]);const a=Uce.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function v3(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function y3(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class NE extends Xt{constructor(e=new Pf([new Le(.5,.5),new Le(-.5,.5),new Le(-.5,-.5),new Le(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new At(i,3)),this.setAttribute("uv",new At(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,g=t.bevelSize!==void 0?t.bevelSize:m-.1,v=t.bevelOffset!==void 0?t.bevelOffset:0,y=t.bevelSegments!==void 0?t.bevelSegments:3;const _=t.extrudePath,S=t.UVGenerator!==void 0?t.UVGenerator:nue;let E,w=!1,I,T,b,P;_&&(E=_.getSpacedPoints(u),w=!0,p=!1,I=_.computeFrenetFrames(u,!1),T=new W,b=new W,P=new W),p||(y=0,m=0,g=0,v=0);const C=a.extractPoints(c);let M=C.shape;const L=C.holes;if(!Ja.isClockWise(M)){M=M.reverse();for(let z=0,pe=L.length;z<pe;z++){const Me=L[z];Ja.isClockWise(Me)&&(L[z]=Me.reverse())}}const X=Ja.triangulateShape(M,L),$=M;for(let z=0,pe=L.length;z<pe;z++){const Me=L[z];M=M.concat(Me)}function Q(z,pe,Me){return pe||console.error("THREE.ExtrudeGeometry: vec does not exist"),z.clone().addScaledVector(pe,Me)}const Y=M.length,te=X.length;function k(z,pe,Me){let Be,ye,oe;const Ue=z.x-pe.x,Ke=z.y-pe.y,V=Me.x-z.x,O=Me.y-z.y,le=Ue*Ue+Ke*Ke,Se=Ue*O-Ke*V;if(Math.abs(Se)>Number.EPSILON){const ve=Math.sqrt(le),Ce=Math.sqrt(V*V+O*O),lt=pe.x-Ke/ve,Oe=pe.y+Ue/ve,Ze=Me.x-O/Ce,_t=Me.y+V/Ce,He=((Ze-lt)*O-(_t-Oe)*V)/(Ue*O-Ke*V);Be=lt+Ue*He-z.x,ye=Oe+Ke*He-z.y;const nt=Be*Be+ye*ye;if(nt<=2)return new Le(Be,ye);oe=Math.sqrt(nt/2)}else{let ve=!1;Ue>Number.EPSILON?V>Number.EPSILON&&(ve=!0):Ue<-Number.EPSILON?V<-Number.EPSILON&&(ve=!0):Math.sign(Ke)===Math.sign(O)&&(ve=!0),ve?(Be=-Ke,ye=Ue,oe=Math.sqrt(le)):(Be=Ue,ye=Ke,oe=Math.sqrt(le/2))}return new Le(Be/oe,ye/oe)}const K=[];for(let z=0,pe=$.length,Me=pe-1,Be=z+1;z<pe;z++,Me++,Be++)Me===pe&&(Me=0),Be===pe&&(Be=0),K[z]=k($[z],$[Me],$[Be]);const F=[];let ie,me=K.concat();for(let z=0,pe=L.length;z<pe;z++){const Me=L[z];ie=[];for(let Be=0,ye=Me.length,oe=ye-1,Ue=Be+1;Be<ye;Be++,oe++,Ue++)oe===ye&&(oe=0),Ue===ye&&(Ue=0),ie[Be]=k(Me[Be],Me[oe],Me[Ue]);F.push(ie),me=me.concat(ie)}for(let z=0;z<y;z++){const pe=z/y,Me=m*Math.cos(pe*Math.PI/2),Be=g*Math.sin(pe*Math.PI/2)+v;for(let ye=0,oe=$.length;ye<oe;ye++){const Ue=Q($[ye],K[ye],Be);Ie(Ue.x,Ue.y,-Me)}for(let ye=0,oe=L.length;ye<oe;ye++){const Ue=L[ye];ie=F[ye];for(let Ke=0,V=Ue.length;Ke<V;Ke++){const O=Q(Ue[Ke],ie[Ke],Be);Ie(O.x,O.y,-Me)}}}const Ne=g+v;for(let z=0;z<Y;z++){const pe=p?Q(M[z],me[z],Ne):M[z];w?(b.copy(I.normals[0]).multiplyScalar(pe.x),T.copy(I.binormals[0]).multiplyScalar(pe.y),P.copy(E[0]).add(b).add(T),Ie(P.x,P.y,P.z)):Ie(pe.x,pe.y,0)}for(let z=1;z<=u;z++)for(let pe=0;pe<Y;pe++){const Me=p?Q(M[pe],me[pe],Ne):M[pe];w?(b.copy(I.normals[z]).multiplyScalar(Me.x),T.copy(I.binormals[z]).multiplyScalar(Me.y),P.copy(E[z]).add(b).add(T),Ie(P.x,P.y,P.z)):Ie(Me.x,Me.y,f/u*z)}for(let z=y-1;z>=0;z--){const pe=z/y,Me=m*Math.cos(pe*Math.PI/2),Be=g*Math.sin(pe*Math.PI/2)+v;for(let ye=0,oe=$.length;ye<oe;ye++){const Ue=Q($[ye],K[ye],Be);Ie(Ue.x,Ue.y,f+Me)}for(let ye=0,oe=L.length;ye<oe;ye++){const Ue=L[ye];ie=F[ye];for(let Ke=0,V=Ue.length;Ke<V;Ke++){const O=Q(Ue[Ke],ie[Ke],Be);w?Ie(O.x,O.y+E[u-1].y,E[u-1].x+Me):Ie(O.x,O.y,f+Me)}}}ce(),xe();function ce(){const z=i.length/3;if(p){let pe=0,Me=Y*pe;for(let Be=0;Be<te;Be++){const ye=X[Be];Xe(ye[2]+Me,ye[1]+Me,ye[0]+Me)}pe=u+y*2,Me=Y*pe;for(let Be=0;Be<te;Be++){const ye=X[Be];Xe(ye[0]+Me,ye[1]+Me,ye[2]+Me)}}else{for(let pe=0;pe<te;pe++){const Me=X[pe];Xe(Me[2],Me[1],Me[0])}for(let pe=0;pe<te;pe++){const Me=X[pe];Xe(Me[0]+Y*u,Me[1]+Y*u,Me[2]+Y*u)}}r.addGroup(z,i.length/3-z,0)}function xe(){const z=i.length/3;let pe=0;Ae($,pe),pe+=$.length;for(let Me=0,Be=L.length;Me<Be;Me++){const ye=L[Me];Ae(ye,pe),pe+=ye.length}r.addGroup(z,i.length/3-z,1)}function Ae(z,pe){let Me=z.length;for(;--Me>=0;){const Be=Me;let ye=Me-1;ye<0&&(ye=z.length-1);for(let oe=0,Ue=u+y*2;oe<Ue;oe++){const Ke=Y*oe,V=Y*(oe+1),O=pe+Be+Ke,le=pe+ye+Ke,Se=pe+ye+V,ve=pe+Be+V;it(O,le,Se,ve)}}}function Ie(z,pe,Me){l.push(z),l.push(pe),l.push(Me)}function Xe(z,pe,Me){Qe(z),Qe(pe),Qe(Me);const Be=i.length/3,ye=S.generateTopUV(r,i,Be-3,Be-2,Be-1);Ge(ye[0]),Ge(ye[1]),Ge(ye[2])}function it(z,pe,Me,Be){Qe(z),Qe(pe),Qe(Be),Qe(pe),Qe(Me),Qe(Be);const ye=i.length/3,oe=S.generateSideWallUV(r,i,ye-6,ye-3,ye-2,ye-1);Ge(oe[0]),Ge(oe[1]),Ge(oe[3]),Ge(oe[1]),Ge(oe[2]),Ge(oe[3])}function Qe(z){i.push(l[z*3+0]),i.push(l[z*3+1]),i.push(l[z*3+2])}function Ge(z){s.push(z.x),s.push(z.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return rue(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new _1[i.type]().fromJSON(i)),new NE(r,e.options)}}const nue={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],a=e[r*3],l=e[r*3+1],c=e[i*3],u=e[i*3+1];return[new Le(s,o),new Le(a,l),new Le(c,u)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[r*3],u=e[r*3+1],f=e[r*3+2],p=e[i*3],m=e[i*3+1],g=e[i*3+2],v=e[s*3],y=e[s*3+1],_=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new Le(o,1-l),new Le(c,1-f),new Le(p,1-g),new Le(v,1-_)]:[new Le(a,1-l),new Le(u,1-f),new Le(m,1-g),new Le(y,1-_)]}};function rue(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class u0 extends gu{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new u0(e.radius,e.detail)}}class f0 extends gu{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new f0(e.radius,e.detail)}}class kE extends Xt{constructor(e=.5,t=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],c=[],u=[];let f=e;const p=(t-e)/i,m=new W,g=new Le;for(let v=0;v<=i;v++){for(let y=0;y<=r;y++){const _=s+y/r*o;m.x=f*Math.cos(_),m.y=f*Math.sin(_),l.push(m.x,m.y,m.z),c.push(0,0,1),g.x=(m.x/t+1)/2,g.y=(m.y/t+1)/2,u.push(g.x,g.y)}f+=p}for(let v=0;v<i;v++){const y=v*(r+1);for(let _=0;_<r;_++){const S=_+y,E=S,w=S+r+1,I=S+r+2,T=S+1;a.push(E,w,T),a.push(w,I,T)}}this.setIndex(a),this.setAttribute("position",new At(l,3)),this.setAttribute("normal",new At(c,3)),this.setAttribute("uv",new At(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kE(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class FE extends Xt{constructor(e=new Pf([new Le(0,.5),new Le(-.5,-.5),new Le(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new At(i,3)),this.setAttribute("normal",new At(s,3)),this.setAttribute("uv",new At(o,2));function c(u){const f=i.length/3,p=u.extractPoints(t);let m=p.shape;const g=p.holes;Ja.isClockWise(m)===!1&&(m=m.reverse());for(let y=0,_=g.length;y<_;y++){const S=g[y];Ja.isClockWise(S)===!0&&(g[y]=S.reverse())}const v=Ja.triangulateShape(m,g);for(let y=0,_=g.length;y<_;y++){const S=g[y];m=m.concat(S)}for(let y=0,_=m.length;y<_;y++){const S=m[y];i.push(S.x,S.y,0),s.push(0,0,1),o.push(S.x,S.y)}for(let y=0,_=v.length;y<_;y++){const S=v[y],E=S[0]+f,w=S[1]+f,I=S[2]+f;r.push(E,w,I),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return iue(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];r.push(o)}return new FE(r,e.curveSegments)}}function iue(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class d0 extends Xt{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let c=0;const u=[],f=new W,p=new W,m=[],g=[],v=[],y=[];for(let _=0;_<=r;_++){const S=[],E=_/r;let w=0;_===0&&o===0?w=.5/t:_===r&&l===Math.PI&&(w=-.5/t);for(let I=0;I<=t;I++){const T=I/t;f.x=-e*Math.cos(i+T*s)*Math.sin(o+E*a),f.y=e*Math.cos(o+E*a),f.z=e*Math.sin(i+T*s)*Math.sin(o+E*a),g.push(f.x,f.y,f.z),p.copy(f).normalize(),v.push(p.x,p.y,p.z),y.push(T+w,1-E),S.push(c++)}u.push(S)}for(let _=0;_<r;_++)for(let S=0;S<t;S++){const E=u[_][S+1],w=u[_][S],I=u[_+1][S],T=u[_+1][S+1];(_!==0||o>0)&&m.push(E,w,T),(_!==r-1||l<Math.PI)&&m.push(w,I,T)}this.setIndex(m),this.setAttribute("position",new At(g,3)),this.setAttribute("normal",new At(v,3)),this.setAttribute("uv",new At(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new d0(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class OE extends gu{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new OE(e.radius,e.detail)}}class UE extends Xt{constructor(e=1,t=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],c=[],u=new W,f=new W,p=new W;for(let m=0;m<=r;m++)for(let g=0;g<=i;g++){const v=g/i*s,y=m/r*Math.PI*2;f.x=(e+t*Math.cos(y))*Math.cos(v),f.y=(e+t*Math.cos(y))*Math.sin(v),f.z=t*Math.sin(y),a.push(f.x,f.y,f.z),u.x=e*Math.cos(v),u.y=e*Math.sin(v),p.subVectors(f,u).normalize(),l.push(p.x,p.y,p.z),c.push(g/i),c.push(m/r)}for(let m=1;m<=r;m++)for(let g=1;g<=i;g++){const v=(i+1)*m+g-1,y=(i+1)*(m-1)+g-1,_=(i+1)*(m-1)+g,S=(i+1)*m+g;o.push(v,y,S),o.push(y,_,S)}this.setIndex(o),this.setAttribute("position",new At(a,3)),this.setAttribute("normal",new At(l,3)),this.setAttribute("uv",new At(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new UE(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class HE extends Xt{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],c=[],u=[],f=new W,p=new W,m=new W,g=new W,v=new W,y=new W,_=new W;for(let E=0;E<=r;++E){const w=E/r*s*Math.PI*2;S(w,s,o,e,m),S(w+.01,s,o,e,g),y.subVectors(g,m),_.addVectors(g,m),v.crossVectors(y,_),_.crossVectors(v,y),v.normalize(),_.normalize();for(let I=0;I<=i;++I){const T=I/i*Math.PI*2,b=-t*Math.cos(T),P=t*Math.sin(T);f.x=m.x+(b*_.x+P*v.x),f.y=m.y+(b*_.y+P*v.y),f.z=m.z+(b*_.z+P*v.z),l.push(f.x,f.y,f.z),p.subVectors(f,m).normalize(),c.push(p.x,p.y,p.z),u.push(E/r),u.push(I/i)}}for(let E=1;E<=r;E++)for(let w=1;w<=i;w++){const I=(i+1)*(E-1)+(w-1),T=(i+1)*E+(w-1),b=(i+1)*E+w,P=(i+1)*(E-1)+w;a.push(I,T,P),a.push(T,b,P)}this.setIndex(a),this.setAttribute("position",new At(l,3)),this.setAttribute("normal",new At(c,3)),this.setAttribute("uv",new At(u,2));function S(E,w,I,T,b){const P=Math.cos(E),C=Math.sin(E),M=I/w*E,L=Math.cos(M);b.x=T*(2+L)*.5*P,b.y=T*(2+L)*C*.5,b.z=T*Math.sin(M)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new HE(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class zE extends Xt{constructor(e=new SP(new W(-1,-1,0),new W(-1,1,0),new W(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new W,l=new W,c=new Le;let u=new W;const f=[],p=[],m=[],g=[];v(),this.setIndex(g),this.setAttribute("position",new At(f,3)),this.setAttribute("normal",new At(p,3)),this.setAttribute("uv",new At(m,2));function v(){for(let E=0;E<t;E++)y(E);y(s===!1?t:0),S(),_()}function y(E){u=e.getPointAt(E/t,u);const w=o.normals[E],I=o.binormals[E];for(let T=0;T<=i;T++){const b=T/i*Math.PI*2,P=Math.sin(b),C=-Math.cos(b);l.x=C*w.x+P*I.x,l.y=C*w.y+P*I.y,l.z=C*w.z+P*I.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=u.x+r*l.x,a.y=u.y+r*l.y,a.z=u.z+r*l.z,f.push(a.x,a.y,a.z)}}function _(){for(let E=1;E<=t;E++)for(let w=1;w<=i;w++){const I=(i+1)*(E-1)+(w-1),T=(i+1)*E+(w-1),b=(i+1)*E+w,P=(i+1)*(E-1)+w;g.push(I,T,P),g.push(T,b,P)}}function S(){for(let E=0;E<=t;E++)for(let w=0;w<=i;w++)c.x=E/t,c.y=w/i,m.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new zE(new _1[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class c8 extends Xt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new W,s=new W;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const f=l[c],p=f.start,m=f.count;for(let g=p,v=p+m;g<v;g+=3)for(let y=0;y<3;y++){const _=a.getX(g+y),S=a.getX(g+(y+1)%3);i.fromBufferAttribute(o,_),s.fromBufferAttribute(o,S),x3(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,f=3*a+(c+1)%3;i.fromBufferAttribute(o,u),s.fromBufferAttribute(o,f),x3(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new At(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function x3(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var S3=Object.freeze({__proto__:null,BoxGeometry:ad,CapsuleGeometry:IE,CircleGeometry:PE,ConeGeometry:DE,CylinderGeometry:Gp,DodecahedronGeometry:BE,EdgesGeometry:s8,ExtrudeGeometry:NE,IcosahedronGeometry:u0,LatheGeometry:c0,OctahedronGeometry:f0,PlaneGeometry:mu,PolyhedronGeometry:gu,RingGeometry:kE,ShapeGeometry:FE,SphereGeometry:d0,TetrahedronGeometry:OE,TorusGeometry:UE,TorusKnotGeometry:HE,TubeGeometry:zE,WireframeGeometry:c8});class u8 extends Vr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new rt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class f8 extends Ds{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class h0 extends Vr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new rt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pu,this.normalScale=new Le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new so,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Vo extends h0{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Le(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Mr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new rt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new rt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new rt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class d8 extends Vr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new rt(16777215),this.specular=new rt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pu,this.normalScale=new Le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new so,this.combine=Z_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class h8 extends Vr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new rt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pu,this.normalScale=new Le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class p8 extends Vr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pu,this.normalScale=new Le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class m8 extends Vr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new rt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pu,this.normalScale=new Le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new so,this.combine=Z_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class g8 extends Vr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new rt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pu,this.normalScale=new Le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class _8 extends Gi{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function df(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function v8(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function y8(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function Tb(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i}function AP(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}function sue(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),f=[],p=[];for(let m=0;m<c.times.length;++m){const g=c.times[m]*i;if(!(g<t||g>=r)){f.push(c.times[m]);for(let v=0;v<u;++v)p.push(c.values[m*u+v])}}f.length!==0&&(c.times=df(f,c.times.constructor),c.values=df(p,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function oue(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(_){return _.name===a.name&&_.ValueTypeName===l});if(c===void 0)continue;let u=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=f/3);let p=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const g=a.times.length-1;let v;if(s<=a.times[0]){const _=u,S=f-u;v=a.values.slice(_,S)}else if(s>=a.times[g]){const _=g*f+u,S=_+f-u;v=a.values.slice(_,S)}else{const _=a.createInterpolant(),S=u,E=f-u;_.evaluate(s),v=_.resultBuffer.slice(S,E)}l==="quaternion"&&new ui().fromArray(v).normalize().conjugate().toArray(v);const y=c.times.length;for(let _=0;_<y;++_){const S=_*m+p;if(l==="quaternion")ui.multiplyQuaternionsFlat(c.values,S,v,0,c.values,S);else{const E=m-p*2;for(let w=0;w<E;++w)c.values[S+w]-=v[w]}}}return n.blendMode=eP,n}const aue={convertArray:df,isTypedArray:v8,getKeyframeOrder:y8,sortedArray:Tb,flattenJSON:AP,subclip:sue,makeClipAdditive:oue};class Vp{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class x8 extends Vp{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:lf,endingEnd:lf}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case cf:s=e,a=2*t-r;break;case S_:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case cf:o=e,l=2*r-t;break;case S_:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const c=(r-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-r),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,f=this._offsetNext,p=this._weightPrev,m=this._weightNext,g=(r-t)/(i-t),v=g*g,y=v*g,_=-p*y+2*p*v-p*g,S=(1+p)*y+(-1.5-2*p)*v+(-.5+p)*g+1,E=(-1-m)*y+(1.5+m)*v+.5*g,w=m*y-m*v;for(let I=0;I!==a;++I)s[I]=_*o[u+I]+S*o[c+I]+E*o[l+I]+w*o[f+I];return s}}class wP extends Vp{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(r-t)/(i-t),f=1-u;for(let p=0;p!==a;++p)s[p]=o[c+p]*f+o[l+p]*u;return s}}class S8 extends Vp{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class _a{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=df(t,this.TimeBufferType),this.values=df(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:df(e.times,Array),values:df(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new S8(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new wP(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new x8(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Sp:t=this.InterpolantFactoryMethodDiscrete;break;case Ep:t=this.InterpolantFactoryMethodLinear;break;case Nx:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Sp;case this.InterpolantFactoryMethodLinear:return Ep;case this.InterpolantFactoryMethodSmooth:return Nx}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=r.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&v8(i))for(let a=0,l=i.length;a!==l;++a){const c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===Nx,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(i)l=!0;else{const f=a*r,p=f-r,m=f+r;for(let g=0;g!==r;++g){const v=t[f+g];if(v!==t[p+g]||v!==t[m+g]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*r,p=o*r;for(let m=0;m!==r;++m)t[p+m]=t[f+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,c=0;c!==r;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*r)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}_a.prototype.TimeBufferType=Float32Array;_a.prototype.ValueBufferType=Float32Array;_a.prototype.DefaultInterpolation=Ep;class ld extends _a{constructor(e,t,r){super(e,t,r)}}ld.prototype.ValueTypeName="bool";ld.prototype.ValueBufferType=Array;ld.prototype.DefaultInterpolation=Sp;ld.prototype.InterpolantFactoryMethodLinear=void 0;ld.prototype.InterpolantFactoryMethodSmooth=void 0;class MP extends _a{}MP.prototype.ValueTypeName="color";class Kf extends _a{}Kf.prototype.ValueTypeName="number";class E8 extends Vp{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let c=e*a;for(let u=c+a;c!==u;c+=4)ui.slerpFlat(s,0,o,c-a,o,c,l);return s}}class $f extends _a{InterpolantFactoryMethodLinear(e){return new E8(this.times,this.values,this.getValueSize(),e)}}$f.prototype.ValueTypeName="quaternion";$f.prototype.InterpolantFactoryMethodSmooth=void 0;class cd extends _a{constructor(e,t,r){super(e,t,r)}}cd.prototype.ValueTypeName="string";cd.prototype.ValueBufferType=Array;cd.prototype.DefaultInterpolation=Sp;cd.prototype.InterpolantFactoryMethodLinear=void 0;cd.prototype.InterpolantFactoryMethodSmooth=void 0;class qf extends _a{}qf.prototype.ValueTypeName="vector";class Mp{constructor(e="",t=-1,r=[],i=yE){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=no(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(cue(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(_a.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=y8(l);l=Tb(l,1,u),c=Tb(c,1,u),!i&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new Kf(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const f=u[1];let p=i[f];p||(i[f]=p=[]),p.push(c)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(f,p,m,g,v){if(m.length!==0){const y=[],_=[];AP(m,y,_,g),y.length!==0&&v.push(new f(p,y,_))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let f=0;f<c.length;f++){const p=c[f].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let g;for(g=0;g<p.length;g++)if(p[g].morphTargets)for(let v=0;v<p[g].morphTargets.length;v++)m[p[g].morphTargets[v]]=-1;for(const v in m){const y=[],_=[];for(let S=0;S!==p[g].morphTargets.length;++S){const E=p[g];y.push(E.time),_.push(E.morphTarget===v?1:0)}i.push(new Kf(".morphTargetInfluence["+v+"]",y,_))}l=m.length*o}else{const m=".bones["+t[f].name+"]";r(qf,m+".position",p,"pos",i),r($f,m+".quaternion",p,"rot",i),r(qf,m+".scale",p,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function lue(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Kf;case"vector":case"vector2":case"vector3":case"vector4":return qf;case"color":return MP;case"quaternion":return $f;case"bool":case"boolean":return ld;case"string":return cd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function cue(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=lue(n.type);if(n.times===void 0){const t=[],r=[];AP(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Rl={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class GE{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(u){a++,s===!1&&i.onStart!==void 0&&i.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,i.onProgress!==void 0&&i.onProgress(u,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,f){return c.push(u,f),this},this.removeHandler=function(u){const f=c.indexOf(u);return f!==-1&&c.splice(f,2),this},this.getHandler=function(u){for(let f=0,p=c.length;f<p;f+=2){const m=c[f],g=c[f+1];if(m.global&&(m.lastIndex=0),m.test(u))return g}return null}}}const A8=new GE;let Ai=class{constructor(e){this.manager=e!==void 0?e:A8,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};Ai.DEFAULT_MATERIAL_NAME="__DEFAULT";const fl={};class uue extends Error{constructor(e,t){super(e),this.response=t}}class Si extends Ai{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Rl.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(fl[e]!==void 0){fl[e].push({onLoad:t,onProgress:r,onError:i});return}fl[e]=[],fl[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=fl[e],f=c.body.getReader(),p=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),m=p?parseInt(p):0,g=m!==0;let v=0;const y=new ReadableStream({start(_){S();function S(){f.read().then(({done:E,value:w})=>{if(E)_.close();else{v+=w.byteLength;const I=new ProgressEvent("progress",{lengthComputable:g,loaded:v,total:m});for(let T=0,b=u.length;T<b;T++){const P=u[T];P.onProgress&&P.onProgress(I)}_.enqueue(w),S()}},E=>{_.error(E)})}}});return new Response(y)}else throw new uue(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),p=f&&f[1]?f[1].toLowerCase():void 0,m=new TextDecoder(p);return c.arrayBuffer().then(g=>m.decode(g))}}}).then(c=>{Rl.add(e,c);const u=fl[e];delete fl[e];for(let f=0,p=u.length;f<p;f++){const m=u[f];m.onLoad&&m.onLoad(c)}}).catch(c=>{const u=fl[e];if(u===void 0)throw this.manager.itemError(e),c;delete fl[e];for(let f=0,p=u.length;f<p;f++){const m=u[f];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class fue extends Ai{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Si(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=Mp.parse(e[r]);t.push(i)}return t}}class due extends Ai{constructor(e){super(e)}load(e,t,r,i){const s=this,o=[],a=new bE,l=new Si(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(f){l.load(e[f],function(p){const m=s.parse(p,!0);o[f]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(a.minFilter=Sn),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let f=0,p=e.length;f<p;++f)u(f);else l.load(e,function(f){const p=s.parse(f,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let g=0;g<m;g++){o[g]={mipmaps:[]};for(let v=0;v<p.mipmapCount;v++)o[g].mipmaps.push(p.mipmaps[g*p.mipmapCount+v]),o[g].format=p.format,o[g].width=p.width,o[g].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=Sn),a.format=p.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}class D_ extends Ai{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Rl.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=C_("img");function l(){u(),Rl.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(f){u(),i&&i(f),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class w8 extends Ai{constructor(e){super(e)}load(e,t,r,i){const s=new s0;s.colorSpace=Ws;const o=new D_(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return s}}class TP extends Ai{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new ua,a=new Si(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(u){if(i!==void 0)i(u);else{console.error(u);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Lr,o.wrapT=c.wrapT!==void 0?c.wrapT:Lr,o.magFilter=c.magFilter!==void 0?c.magFilter:Sn,o.minFilter=c.minFilter!==void 0?c.minFilter:Sn,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(o.colorSpace=c.colorSpace),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Bo),c.mipmapCount===1&&(o.minFilter=Sn),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c)},r,i),o}}class p0 extends Ai{constructor(e){super(e)}load(e,t,r,i){const s=new En,o=new D_(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class _u extends _n{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new rt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class M8 extends _u{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(_n.DEFAULT_UP),this.updateMatrix(),this.groundColor=new rt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const FM=new Rt,E3=new W,A3=new W;class CP{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Le(512,512),this.map=null,this.mapPass=null,this.matrix=new Rt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new o0,this._frameExtents=new Le(1,1),this._viewportCount=1,this._viewports=[new Dn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;E3.setFromMatrixPosition(e.matrixWorld),t.position.copy(E3),A3.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(A3),t.updateMatrixWorld(),FM.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(FM),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(FM)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class hue extends CP{constructor(){super(new qn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=Ap*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class bP extends _u{constructor(e,t,r=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(_n.DEFAULT_UP),this.updateMatrix(),this.target=new _n,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new hue}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const w3=new Rt,Nm=new W,OM=new W;class pue extends CP{constructor(){super(new qn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Le(4,2),this._viewportCount=6,this._viewports=[new Dn(2,1,1,1),new Dn(0,1,1,1),new Dn(3,1,1,1),new Dn(1,1,1,1),new Dn(3,0,1,1),new Dn(1,0,1,1)],this._cubeDirections=[new W(1,0,0),new W(-1,0,0),new W(0,0,1),new W(0,0,-1),new W(0,1,0),new W(0,-1,0)],this._cubeUps=[new W(0,1,0),new W(0,1,0),new W(0,1,0),new W(0,1,0),new W(0,0,1),new W(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),Nm.setFromMatrixPosition(e.matrixWorld),r.position.copy(Nm),OM.copy(r.position),OM.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(OM),r.updateMatrixWorld(),i.makeTranslation(-Nm.x,-Nm.y,-Nm.z),w3.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(w3)}}class RP extends _u{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new pue}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class mue extends CP{constructor(){super(new Qs(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class IP extends _u{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(_n.DEFAULT_UP),this.updateMatrix(),this.target=new _n,this.shadow=new mue}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class T8 extends _u{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class C8 extends _u{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class b8{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new W)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class R8 extends _u{constructor(e=new b8,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class VE extends Ai{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,o=new Si(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=VE.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new rt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new rt().setHex(o.value);break;case"v2":i.uniforms[s].value=new Le().fromArray(o.value);break;case"v3":i.uniforms[s].value=new W().fromArray(o.value);break;case"v4":i.uniforms[s].value=new Dn().fromArray(o.value);break;case"m3":i.uniforms[s].value=new Jt().fromArray(o.value);break;case"m4":i.uniforms[s].value=new Rt().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new Le().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Le().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:u8,SpriteMaterial:dP,RawShaderMaterial:f8,ShaderMaterial:Ds,PointsMaterial:CE,MeshPhysicalMaterial:Vo,MeshStandardMaterial:h0,MeshPhongMaterial:d8,MeshToonMaterial:h8,MeshNormalMaterial:p8,MeshLambertMaterial:m8,MeshDepthMaterial:cP,MeshDistanceMaterial:uP,MeshBasicMaterial:Ss,MeshMatcapMaterial:g8,LineDashedMaterial:_8,LineBasicMaterial:Gi,Material:Vr};return new t[e]}}class Jc{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class I8 extends Xt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class P8 extends Ai{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Si(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(m,g){if(t[g]!==void 0)return t[g];const y=m.interleavedBuffers[g],_=s(m,y.buffer),S=Sh(y.type,_),E=new a0(S,y.stride);return E.uuid=y.uuid,t[g]=E,E}function s(m,g){if(r[g]!==void 0)return r[g];const y=m.arrayBuffers[g],_=new Uint32Array(y).buffer;return r[g]=_,_}const o=e.isInstancedBufferGeometry?new I8:new Xt,a=e.data.index;if(a!==void 0){const m=Sh(a.type,a.array);o.setIndex(new Mn(m,1))}const l=e.data.attributes;for(const m in l){const g=l[m];let v;if(g.isInterleavedBufferAttribute){const y=i(e.data,g.data);v=new ou(y,g.itemSize,g.offset,g.normalized)}else{const y=Sh(g.type,g.array),_=g.isInstancedBufferAttribute?Yf:Mn;v=new _(y,g.itemSize,g.normalized)}g.name!==void 0&&(v.name=g.name),g.usage!==void 0&&v.setUsage(g.usage),o.setAttribute(m,v)}const c=e.data.morphAttributes;if(c)for(const m in c){const g=c[m],v=[];for(let y=0,_=g.length;y<_;y++){const S=g[y];let E;if(S.isInterleavedBufferAttribute){const w=i(e.data,S.data);E=new ou(w,S.itemSize,S.offset,S.normalized)}else{const w=Sh(S.type,S.array);E=new Mn(w,S.itemSize,S.normalized)}S.name!==void 0&&(E.name=S.name),v.push(E)}o.morphAttributes[m]=v}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let m=0,g=f.length;m!==g;++m){const v=f[m];o.addGroup(v.start,v.count,v.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new W;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new xi(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class gue extends Ai{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?Jc.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Si(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(f){i!==void 0&&i(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?Jc.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new Si(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,r),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),this.bindLightTargets(c),t!==void 0){let f=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new Pf().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new l0().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new P8;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in S3?a=S3[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new VE;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=Mp.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:r.resourcePath+c;return o(u)}else return l.data?{data:Sh(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new GE(t);s=new D_(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const f=e[c],p=f.url;if(Array.isArray(p)){const m=[];for(let g=0,v=p.length;g<v;g++){const y=p[g],_=a(y);_!==null&&(_ instanceof HTMLImageElement?m.push(_):m.push(new ua(_.data,_.width,_.height)))}i[f.uuid]=new uf(m)}else{const m=a(f.url);i[f.uuid]=new uf(m)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:Sh(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new D_(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let f=0,p=c.length;f<p;f++){const m=c[f],g=await s(m);g!==null&&(g instanceof HTMLImageElement?u.push(g):u.push(new ua(g.data,g.width,g.height)))}r[l.uuid]=new uf(u)}else{const u=await s(l.url);r[l.uuid]=new uf(u)}}}return r}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let u;Array.isArray(c)?(u=new s0,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new ua:u=new En,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=r(a.mapping,_ue)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=r(a.wrap[0],M3),u.wrapT=r(a.wrap[1],M3)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.minFilter!==void 0&&(u.minFilter=r(a.minFilter,T3)),a.magFilter!==void 0&&(u.magFilter=r(a.magFilter,T3)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),i[a.uuid]=u}return i}parseObject(e,t,r,i,s){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let g=0,v=p.length;g<v;g++){const y=p[g];r[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),m.push(r[y])}return m}return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),r[p]}}function c(p){return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),i[p]}let u,f;switch(e.type){case"Scene":o=new jf,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new rt(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new ME(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new wE(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new qn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Qs(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new T8(e.color,e.intensity);break;case"DirectionalLight":o=new IP(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new RP(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new C8(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new bP(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new M8(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new R8().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),f=l(e.material),o=new hP(u,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),f=l(e.material),o=new lr(u,f);break;case"InstancedMesh":u=a(e.geometry),f=l(e.material);const p=e.count,m=e.instanceMatrix,g=e.instanceColor;o=new pP(u,f,p),o.instanceMatrix=new Yf(new Float32Array(m.array),16),g!==void 0&&(o.instanceColor=new Yf(new Float32Array(g.array),g.itemSize));break;case"BatchedMesh":u=a(e.geometry),f=l(e.material),o=new Z5(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,f),o.geometry=u,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(v=>{const y=new Ui;y.min.fromArray(v.boxMin),y.max.fromArray(v.boxMax);const _=new xi;return _.radius=v.sphereRadius,_.center.fromArray(v.sphereCenter),{boxInitialized:v.boxInitialized,box:y,sphereInitialized:v.sphereInitialized,sphere:_}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=c(e.colorsTexture.uuid));break;case"LOD":o=new Q5;break;case"Line":o=new jl(a(e.geometry),l(e.material));break;case"LineLoop":o=new mP(a(e.geometry),l(e.material));break;case"LineSegments":o=new ma(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new gP(a(e.geometry),l(e.material));break;case"Sprite":o=new q5(l(e.material));break;case"Group":o=new oa;break;case"Bone":o=new TE;break;default:o=new _n}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],t,r,i,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const g=p[m];o.animations.push(s[g])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const g=p[m],v=o.getObjectByProperty("uuid",g.object);v!==void 0&&o.addLevel(v,g.distance,g.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const r=t.target,i=e.getObjectByProperty("uuid",r);i!==void 0?t.target=i:t.target=new _n}})}}const _ue={UVMapping:ru,CubeReflectionMapping:qa,CubeRefractionMapping:iu,EquirectangularReflectionMapping:vp,EquirectangularRefractionMapping:x_,CubeUVReflectionMapping:Hp},M3={RepeatWrapping:su,ClampToEdgeWrapping:Lr,MirroredRepeatWrapping:yp},T3={NearestFilter:$r,NearestMipmapNearestFilter:dE,NearestMipmapLinearFilter:af,LinearFilter:Sn,LinearMipmapNearestFilter:zh,LinearMipmapLinearFilter:Bo};class D8 extends Ai{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Rl.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{t&&t(c),s.manager.itemEnd(e)}).catch(c=>{i&&i(c)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return Rl.add(e,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){i&&i(c),Rl.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Rl.add(e,l),s.manager.itemStart(e)}}let Vy;class PP{static getContext(){return Vy===void 0&&(Vy=new(window.AudioContext||window.webkitAudioContext)),Vy}static setContext(e){Vy=e}}class vue extends Ai{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Si(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);PP.getContext().decodeAudioData(c,function(f){t(f)}).catch(a)}catch(c){a(c)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}const C3=new Rt,b3=new Rt,ku=new Rt;class yue{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new qn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new qn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,ku.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(Rf*t.fov*.5)/t.zoom;let a,l;b3.elements[12]=-i,C3.elements[12]=i,a=-o*t.aspect+s,l=o*t.aspect+s,ku.elements[0]=2*t.near/(l-a),ku.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(ku),a=-o*t.aspect-s,l=o*t.aspect-s,ku.elements[0]=2*t.near/(l-a),ku.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(ku)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(b3),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(C3)}}class DP{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=R3(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=R3();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function R3(){return(typeof performance>"u"?Date:performance).now()}const Fu=new W,I3=new ui,xue=new W,Ou=new W;class Sue extends _n{constructor(){super(),this.type="AudioListener",this.context=PP.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new DP}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Fu,I3,xue),Ou.set(0,0,-1).applyQuaternion(I3),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Fu.x,i),t.positionY.linearRampToValueAtTime(Fu.y,i),t.positionZ.linearRampToValueAtTime(Fu.z,i),t.forwardX.linearRampToValueAtTime(Ou.x,i),t.forwardY.linearRampToValueAtTime(Ou.y,i),t.forwardZ.linearRampToValueAtTime(Ou.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(Fu.x,Fu.y,Fu.z),t.setOrientation(Ou.x,Ou.y,Ou.z,r.x,r.y,r.z)}}class B8 extends _n{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Uu=new W,P3=new ui,Eue=new W,Hu=new W;class Aue extends B8{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Uu,P3,Eue),Hu.set(0,0,1).applyQuaternion(P3);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Uu.x,r),t.positionY.linearRampToValueAtTime(Uu.y,r),t.positionZ.linearRampToValueAtTime(Uu.z,r),t.orientationX.linearRampToValueAtTime(Hu.x,r),t.orientationY.linearRampToValueAtTime(Hu.y,r),t.orientationZ.linearRampToValueAtTime(Hu.z,r)}else t.setPosition(Uu.x,Uu.y,Uu.z),t.setOrientation(Hu.x,Hu.y,Hu.z)}}class wue{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class L8{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){ui.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;ui.multiplyQuaternionsFlat(e,o,e,t,e,r),ui.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const BP="\\[\\]\\.:\\/",Mue=new RegExp("["+BP+"]","g"),LP="[^"+BP+"]",Tue="[^"+BP.replace("\\.","")+"]",Cue=/((?:WC+[\/:])*)/.source.replace("WC",LP),bue=/(WCOD+)?/.source.replace("WCOD",Tue),Rue=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",LP),Iue=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",LP),Pue=new RegExp("^"+Cue+bue+Rue+Iue+"$"),Due=["material","materials","bones","map"];class Bue{constructor(e,t,r){const i=r||vn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class vn{constructor(e,t,r){this.path=t,this.parsedPath=r||vn.parseTrackName(t),this.node=vn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new vn.Composite(e,t,r):new vn(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Mue,"")}static parseTrackName(e){const t=Pue.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);Due.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=vn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let c=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[i];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}vn.Composite=Bue;vn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};vn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};vn.prototype.GetterByBindingType=[vn.prototype._getValue_direct,vn.prototype._getValue_array,vn.prototype._getValue_arrayElement,vn.prototype._getValue_toArray];vn.prototype.SetterByBindingTypeAndVersioning=[[vn.prototype._setValue_direct,vn.prototype._setValue_direct_setNeedsUpdate,vn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[vn.prototype._setValue_array,vn.prototype._setValue_array_setNeedsUpdate,vn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[vn.prototype._setValue_arrayElement,vn.prototype._setValue_arrayElement_setNeedsUpdate,vn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[vn.prototype._setValue_fromArray,vn.prototype._setValue_fromArray_setNeedsUpdate,vn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Lue{constructor(){this.isAnimationObjectGroup=!0,this.uuid=no(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,f=arguments.length;u!==f;++u){const p=arguments[u],m=p.uuid;let g=t[m];if(g===void 0){g=l++,t[m]=g,e.push(p);for(let v=0,y=o;v!==y;++v)s[v].push(new vn(p,r[v],i[v]))}else if(g<c){a=e[g];const v=--c,y=e[v];t[y.uuid]=g,e[g]=y,t[m]=v,e[v]=p;for(let _=0,S=o;_!==S;++_){const E=s[_],w=E[v];let I=E[g];E[g]=w,I===void 0&&(I=new vn(p,r[_],i[_])),E[v]=I}}else e[g]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=t[c];if(u!==void 0&&u>=s){const f=s++,p=e[f];t[p.uuid]=u,e[u]=p,t[c]=f,e[f]=l;for(let m=0,g=i;m!==g;++m){const v=r[m],y=v[f],_=v[u];v[u]=y,v[f]=_}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,f=t[u];if(f!==void 0)if(delete t[u],f<s){const p=--s,m=e[p],g=--o,v=e[g];t[m.uuid]=f,e[f]=m,t[v.uuid]=p,e[p]=v,e.pop();for(let y=0,_=i;y!==_;++y){const S=r[y],E=S[p],w=S[g];S[f]=E,S[p]=w,S.pop()}}else{const p=--o,m=e[p];p>0&&(t[m.uuid]=f),e[f]=m,e.pop();for(let g=0,v=i;g!==v;++g){const y=r[g];y[f]=y[p],y.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,f=new Array(c);i=s.length,r[e]=i,o.push(e),a.push(t),s.push(f);for(let p=u,m=l.length;p!==m;++p){const g=l[p];f[p]=new vn(g,e,t)}return f}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class N8{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:lf,endingEnd:lf};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=S5,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+r,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case eP:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case yE:default:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===E5;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===x5){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=cf,i.endingEnd=cf):(e?i.endingStart=this.zeroSlopeAtStart?cf:lf:i.endingStart=S_,t?i.endingEnd=this.zeroSlopeAtEnd?cf:lf:i.endingEnd=S_)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}const Nue=new Float32Array(1);class kue extends pa{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let f=0;f!==s;++f){const p=i[f],m=p.name;let g=u[m];if(g!==void 0)++g.referenceCount,o[f]=g;else{if(g=o[f],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,m));continue}const v=t&&t._propertyBindings[f].binding.parsedPath;g=new L8(vn.create(r,m,v),p.ValueTypeName,p.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,m),o[f]=g}a[f].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete f[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new wP(new Float32Array(2),new Float32Array(2),1,Nue),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?Mp.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(r===void 0&&(o!==null?r=o.blendMode:r=yE),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===r)return f;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new N8(this,o,t,r);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?Mp.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==r;++c)t[c]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,f=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,f._cacheIndex=u,t[u]=f,t.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class NP{constructor(e){this.value=e}clone(){return new NP(this.value.clone===void 0?this.value:this.value.clone())}}let Fue=0;class Oue extends pa{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Fue++}),this.name="",this.usage=M_,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++){const s=Array.isArray(t[r])?t[r]:[t[r]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class Uue extends a0{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Hue{constructor(e,t,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const D3=new Rt;class kP{constructor(e,t,r=0,i=1/0){this.ray=new od(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new If,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return D3.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(D3),this}intersectObject(e,t=!0,r=[]){return Cb(e,this,r,t),r.sort(B3),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)Cb(e[i],this,r,t);return r.sort(B3),r}}function B3(n,e){return n.distance-e.distance}function Cb(n,e,t,r){let i=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(i=!1),i===!0&&r===!0){const s=n.children;for(let o=0,a=s.length;o<a;o++)Cb(s[o],e,t,!0)}}class bb{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Mr(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class zue{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}class FP{constructor(e,t,r,i){FP.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,r,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let r=0;r<4;r++)this.elements[r]=e[r+t];return this}set(e,t,r,i){const s=this.elements;return s[0]=e,s[2]=t,s[1]=r,s[3]=i,this}}const L3=new Le;class Gue{constructor(e=new Le(1/0,1/0),t=new Le(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=L3.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,L3).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const N3=new W,Wy=new W;class Vue{constructor(e=new W,t=new W){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){N3.subVectors(e,this.start),Wy.subVectors(this.end,this.start);const r=Wy.dot(Wy);let s=Wy.dot(N3)/r;return t&&(s=Mr(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const k3=new W;class Wue extends _n{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new Xt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;i.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}r.setAttribute("position",new At(i,3));const s=new Gi({fog:!1,toneMapped:!1});this.cone=new ma(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),k3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(k3),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const fc=new W,Xy=new Rt,UM=new Rt;class Xue extends ma{constructor(e){const t=k8(e),r=new Xt,i=[],s=[],o=new rt(0,0,1),a=new rt(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new At(i,3)),r.setAttribute("color",new At(s,3));const l=new Gi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");UM.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Xy.multiplyMatrices(UM,a.matrixWorld),fc.setFromMatrixPosition(Xy),i.setXYZ(o,fc.x,fc.y,fc.z),Xy.multiplyMatrices(UM,a.parent.matrixWorld),fc.setFromMatrixPosition(Xy),i.setXYZ(o+1,fc.x,fc.y,fc.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function k8(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,k8(n.children[t]));return e}class jue extends lr{constructor(e,t,r){const i=new d0(t,4,2),s=new Ss({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Yue=new W,F3=new rt,O3=new rt;class Jue extends _n{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new f0(t);i.rotateY(Math.PI*.5),this.material=new Ss({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new Mn(o,3)),this.add(new lr(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");F3.copy(this.light.color),O3.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?F3:O3;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Yue.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Kue extends ma{constructor(e=10,t=10,r=4473924,i=8947848){r=new rt(r),i=new rt(i);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let p=0,m=0,g=-a;p<=t;p++,g+=o){l.push(-a,0,g,a,0,g),l.push(g,0,-a,g,0,a);const v=p===s?r:i;v.toArray(c,m),m+=3,v.toArray(c,m),m+=3,v.toArray(c,m),m+=3,v.toArray(c,m),m+=3}const u=new Xt;u.setAttribute("position",new At(l,3)),u.setAttribute("color",new At(c,3));const f=new Gi({vertexColors:!0,toneMapped:!1});super(u,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class $ue extends ma{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new rt(s),o=new rt(o);const a=[],l=[];if(t>1)for(let f=0;f<t;f++){const p=f/t*(Math.PI*2),m=Math.sin(p)*e,g=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,g);const v=f&1?s:o;l.push(v.r,v.g,v.b),l.push(v.r,v.g,v.b)}for(let f=0;f<r;f++){const p=f&1?s:o,m=e-e/r*f;for(let g=0;g<i;g++){let v=g/i*(Math.PI*2),y=Math.sin(v)*m,_=Math.cos(v)*m;a.push(y,0,_),l.push(p.r,p.g,p.b),v=(g+1)/i*(Math.PI*2),y=Math.sin(v)*m,_=Math.cos(v)*m,a.push(y,0,_),l.push(p.r,p.g,p.b)}}const c=new Xt;c.setAttribute("position",new At(a,3)),c.setAttribute("color",new At(l,3));const u=new Gi({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const U3=new W,jy=new W,H3=new W;class que extends _n{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new Xt;i.setAttribute("position",new At([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Gi({fog:!1,toneMapped:!1});this.lightPlane=new jl(i,s),this.add(this.lightPlane),i=new Xt,i.setAttribute("position",new At([0,0,0,0,0,1],3)),this.targetLine=new jl(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),U3.setFromMatrixPosition(this.light.matrixWorld),jy.setFromMatrixPosition(this.light.target.matrixWorld),H3.subVectors(jy,U3),this.lightPlane.lookAt(jy),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(jy),this.targetLine.scale.z=H3.length()}}const Yy=new W,Er=new i0;class Que extends ma{constructor(e){const t=new Xt,r=new Gi({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(g,v){l(g),l(v)}function l(g){i.push(0,0,0),s.push(0,0,0),o[g]===void 0&&(o[g]=[]),o[g].push(i.length/3-1)}t.setAttribute("position",new At(i,3)),t.setAttribute("color",new At(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new rt(16755200),u=new rt(16711680),f=new rt(43775),p=new rt(16777215),m=new rt(3355443);this.setColors(c,u,f,p,m)}setColors(e,t,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;Er.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Rr("c",t,e,Er,0,0,-1),Rr("t",t,e,Er,0,0,1),Rr("n1",t,e,Er,-r,-i,-1),Rr("n2",t,e,Er,r,-i,-1),Rr("n3",t,e,Er,-r,i,-1),Rr("n4",t,e,Er,r,i,-1),Rr("f1",t,e,Er,-r,-i,1),Rr("f2",t,e,Er,r,-i,1),Rr("f3",t,e,Er,-r,i,1),Rr("f4",t,e,Er,r,i,1),Rr("u1",t,e,Er,r*.7,i*1.1,-1),Rr("u2",t,e,Er,-r*.7,i*1.1,-1),Rr("u3",t,e,Er,0,i*2,-1),Rr("cf1",t,e,Er,-r,0,1),Rr("cf2",t,e,Er,r,0,1),Rr("cf3",t,e,Er,0,-i,1),Rr("cf4",t,e,Er,0,i,1),Rr("cn1",t,e,Er,-r,0,-1),Rr("cn2",t,e,Er,r,0,-1),Rr("cn3",t,e,Er,0,-i,-1),Rr("cn4",t,e,Er,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Rr(n,e,t,r,i,s,o){Yy.set(i,s,o).unproject(r);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],Yy.x,Yy.y,Yy.z)}}const Jy=new Ui;class Zue extends ma{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new Xt;s.setIndex(new Mn(r,1)),s.setAttribute("position",new Mn(i,3)),super(s,new Gi({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Jy.setFromObject(this.object),Jy.isEmpty())return;const t=Jy.min,r=Jy.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=t.x,s[4]=r.y,s[5]=r.z,s[6]=t.x,s[7]=t.y,s[8]=r.z,s[9]=r.x,s[10]=t.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=t.z,s[15]=t.x,s[16]=r.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=r.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class efe extends ma{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Xt;s.setIndex(new Mn(r,1)),s.setAttribute("position",new At(i,3)),super(s,new Gi({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class tfe extends jl{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Xt;o.setAttribute("position",new At(s,3)),o.computeBoundingSphere(),super(o,new Gi({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Xt;l.setAttribute("position",new At(a,3)),l.computeBoundingSphere(),this.add(new lr(l,new Ss({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const z3=new W;let Ky,HM;class nfe extends _n{constructor(e=new W(0,0,1),t=new W(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",Ky===void 0&&(Ky=new Xt,Ky.setAttribute("position",new At([0,0,0,0,1,0],3)),HM=new Gp(0,.5,1,5,1),HM.translate(0,-.5,0)),this.position.copy(t),this.line=new jl(Ky,new Gi({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new lr(HM,new Ss({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{z3.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(z3,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class rfe extends ma{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Xt;i.setAttribute("position",new At(t,3)),i.setAttribute("color",new At(r,3));const s=new Gi({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new rt,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ife{constructor(){this.type="ShapePath",this.color=new rt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new b_,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(_){const S=[];for(let E=0,w=_.length;E<w;E++){const I=_[E],T=new Pf;T.curves=I.curves,S.push(T)}return S}function r(_,S){const E=S.length;let w=!1;for(let I=E-1,T=0;T<E;I=T++){let b=S[I],P=S[T],C=P.x-b.x,M=P.y-b.y;if(Math.abs(M)>Number.EPSILON){if(M<0&&(b=S[T],C=-C,P=S[I],M=-M),_.y<b.y||_.y>P.y)continue;if(_.y===b.y){if(_.x===b.x)return!0}else{const L=M*(_.x-b.x)-C*(_.y-b.y);if(L===0)return!0;if(L<0)continue;w=!w}}else{if(_.y!==b.y)continue;if(P.x<=_.x&&_.x<=b.x||b.x<=_.x&&_.x<=P.x)return!0}}return w}const i=Ja.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new Pf,l.curves=a.curves,c.push(l),c;let u=!i(s[0].getPoints());u=e?!u:u;const f=[],p=[];let m=[],g=0,v;p[g]=void 0,m[g]=[];for(let _=0,S=s.length;_<S;_++)a=s[_],v=a.getPoints(),o=i(v),o=e?!o:o,o?(!u&&p[g]&&g++,p[g]={s:new Pf,p:v},p[g].s.curves=a.curves,u&&g++,m[g]=[]):m[g].push({h:a,p:v[0]});if(!p[0])return t(s);if(p.length>1){let _=!1,S=0;for(let E=0,w=p.length;E<w;E++)f[E]=[];for(let E=0,w=p.length;E<w;E++){const I=m[E];for(let T=0;T<I.length;T++){const b=I[T];let P=!0;for(let C=0;C<p.length;C++)r(b.p,p[C].p)&&(E!==C&&S++,P?(P=!1,f[C].push(b)):_=!0);P&&f[E].push(b)}}S>0&&_===!1&&(m=f)}let y;for(let _=0,S=p.length;_<S;_++){l=p[_].s,c.push(l),y=m[_];for(let E=0,w=y.length;E<w;E++)l.holes.push(y[E].h)}return c}}class sfe extends pa{constructor(e,t){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}class ofe extends Ps{constructor(e=1,t=1,r=1,i={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...i,count:r}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Up}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Up);const afe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:jI,AddEquation:wc,AddOperation:d5,AdditiveAnimationBlendMode:eP,AdditiveBlending:hb,AgXToneMapping:_5,AlphaFormat:JI,AlwaysCompare:B5,AlwaysDepth:s5,AlwaysStencilFunc:vb,AmbientLight:T8,AnimationAction:N8,AnimationClip:Mp,AnimationLoader:fue,AnimationMixer:kue,AnimationObjectGroup:Lue,AnimationUtils:aue,ArcCurve:e8,ArrayCamera:K5,ArrowHelper:nfe,AttachedBindMode:gb,Audio:B8,AudioAnalyser:wue,AudioContext:PP,AudioListener:Sue,AudioLoader:vue,AxesHelper:rfe,BackSide:as,BasicDepthPacking:w5,BasicShadowMap:UG,BatchedMesh:Z5,Bone:TE,BooleanKeyframeTrack:ld,Box2:Gue,Box3:Ui,Box3Helper:efe,BoxGeometry:ad,BoxHelper:Zue,BufferAttribute:Mn,BufferGeometry:Xt,BufferGeometryLoader:P8,ByteType:hE,Cache:Rl,Camera:i0,CameraHelper:Que,CanvasTexture:Pce,CapsuleGeometry:IE,CatmullRomCurve3:t8,CineonToneMapping:m5,CircleGeometry:PE,ClampToEdgeWrapping:Lr,Clock:DP,Color:rt,ColorKeyframeTrack:MP,ColorManagement:Rn,CompressedArrayTexture:Rce,CompressedCubeTexture:Ice,CompressedTexture:bE,CompressedTextureLoader:due,ConeGeometry:DE,ConstantAlphaFactor:n5,ConstantColorFactor:e5,Controls:sfe,CubeCamera:G5,CubeReflectionMapping:qa,CubeRefractionMapping:iu,CubeTexture:s0,CubeTextureLoader:w8,CubeUVReflectionMapping:Hp,CubicBezierCurve:vP,CubicBezierCurve3:n8,CubicInterpolant:x8,CullFaceBack:db,CullFaceFront:OG,CullFaceFrontBack:dre,CullFaceNone:FG,Curve:ga,CurvePath:i8,CustomBlending:HG,CustomToneMapping:g5,CylinderGeometry:Gp,Cylindrical:zue,Data3DTexture:iP,DataArrayTexture:SE,DataTexture:ua,DataTextureLoader:TP,DataUtils:ff,DecrementStencilOp:Ere,DecrementWrapStencilOp:wre,DefaultLoadingManager:A8,DepthFormat:bf,DepthStencilFormat:Xf,DepthTexture:EE,DetachedBindMode:y5,DirectionalLight:IP,DirectionalLightHelper:que,DiscreteInterpolant:S8,DisplayP3ColorSpace:xE,DodecahedronGeometry:BE,DoubleSide:vs,DstAlphaFactor:KG,DstColorFactor:qG,DynamicCopyUsage:Ure,DynamicDrawUsage:Bre,DynamicReadUsage:kre,EdgesGeometry:s8,EllipseCurve:RE,EqualCompare:R5,EqualDepth:a5,EqualStencilFunc:bre,EquirectangularReflectionMapping:vp,EquirectangularRefractionMapping:x_,Euler:so,EventDispatcher:pa,ExtrudeGeometry:NE,FileLoader:Si,Float16BufferAttribute:Mie,Float32BufferAttribute:At,FloatType:ar,Fog:ME,FogExp2:wE,FramebufferTexture:bce,FrontSide:$a,Frustum:o0,GLBufferAttribute:Hue,GLSL1:zre,GLSL3:yb,GreaterCompare:I5,GreaterDepth:c5,GreaterEqualCompare:D5,GreaterEqualDepth:l5,GreaterEqualStencilFunc:Dre,GreaterStencilFunc:Ire,GridHelper:Kue,Group:oa,HalfFloatType:qr,HemisphereLight:M8,HemisphereLightHelper:Jue,IcosahedronGeometry:u0,ImageBitmapLoader:D8,ImageLoader:D_,ImageUtils:F5,IncrementStencilOp:Sre,IncrementWrapStencilOp:Are,InstancedBufferAttribute:Yf,InstancedBufferGeometry:I8,InstancedInterleavedBuffer:Uue,InstancedMesh:pP,Int16BufferAttribute:Aie,Int32BufferAttribute:wie,Int8BufferAttribute:xie,IntType:e0,InterleavedBuffer:a0,InterleavedBufferAttribute:ou,Interpolant:Vp,InterpolateDiscrete:Sp,InterpolateLinear:Ep,InterpolateSmooth:Nx,InvertStencilOp:Mre,KeepStencilOp:Ku,KeyframeTrack:_a,LOD:Q5,LatheGeometry:c0,Layers:If,LessCompare:b5,LessDepth:o5,LessEqualCompare:nP,LessEqualDepth:y_,LessEqualStencilFunc:Rre,LessStencilFunc:Cre,Light:_u,LightProbe:R8,Line:jl,Line3:Vue,LineBasicMaterial:Gi,LineCurve:yP,LineCurve3:r8,LineDashedMaterial:_8,LineLoop:mP,LineSegments:ma,LinearDisplayP3ColorSpace:r0,LinearFilter:Sn,LinearInterpolant:wP,LinearMipMapLinearFilter:_b,LinearMipMapNearestFilter:mre,LinearMipmapLinearFilter:Bo,LinearMipmapNearestFilter:zh,LinearSRGBColorSpace:zo,LinearToneMapping:h5,LinearTransfer:E_,Loader:Ai,LoaderUtils:Jc,LoadingManager:GE,LoopOnce:x5,LoopPingPong:E5,LoopRepeat:S5,LuminanceAlphaFormat:qI,LuminanceFormat:$I,MOUSE:Yu,Material:Vr,MaterialLoader:VE,MathUtils:L5,Matrix2:FP,Matrix3:Jt,Matrix4:Rt,MaxEquation:WG,Mesh:lr,MeshBasicMaterial:Ss,MeshDepthMaterial:cP,MeshDistanceMaterial:uP,MeshLambertMaterial:m8,MeshMatcapMaterial:g8,MeshNormalMaterial:p8,MeshPhongMaterial:d8,MeshPhysicalMaterial:Vo,MeshStandardMaterial:h0,MeshToonMaterial:h8,MinEquation:VG,MirroredRepeatWrapping:yp,MixOperation:f5,MultiplyBlending:mb,MultiplyOperation:Z_,NearestFilter:$r,NearestMipMapLinearFilter:pre,NearestMipMapNearestFilter:hre,NearestMipmapLinearFilter:af,NearestMipmapNearestFilter:dE,NeutralToneMapping:v5,NeverCompare:C5,NeverDepth:i5,NeverStencilFunc:Tre,NoBlending:ja,NoColorSpace:wl,NoToneMapping:Ya,NormalAnimationBlendMode:yE,NormalBlending:Cf,NotEqualCompare:P5,NotEqualDepth:u5,NotEqualStencilFunc:Pre,NumberKeyframeTrack:Kf,Object3D:_n,ObjectLoader:gue,ObjectSpaceNormalMap:T5,OctahedronGeometry:f0,OneFactor:jG,OneMinusConstantAlphaFactor:r5,OneMinusConstantColorFactor:t5,OneMinusDstAlphaFactor:$G,OneMinusDstColorFactor:QG,OneMinusSrcAlphaFactor:zS,OneMinusSrcColorFactor:JG,OrthographicCamera:Qs,P3Primaries:w_,PCFShadowMap:fE,PCFSoftShadowMap:bg,PMREMGenerator:xb,Path:b_,PerspectiveCamera:qn,Plane:Sl,PlaneGeometry:mu,PlaneHelper:tfe,PointLight:RP,PointLightHelper:jue,Points:gP,PointsMaterial:CE,PolarGridHelper:$ue,PolyhedronGeometry:gu,PositionalAudio:Aue,PropertyBinding:vn,PropertyMixer:L8,QuadraticBezierCurve:xP,QuadraticBezierCurve3:SP,Quaternion:ui,QuaternionKeyframeTrack:$f,QuaternionLinearInterpolant:E8,RED_GREEN_RGTC2_Format:d1,RED_RGTC1_Format:ZI,REVISION:Up,RGBADepthPacking:M5,RGBAFormat:Nr,RGBAIntegerFormat:vE,RGBA_ASTC_10x10_Format:o1,RGBA_ASTC_10x5_Format:r1,RGBA_ASTC_10x6_Format:i1,RGBA_ASTC_10x8_Format:s1,RGBA_ASTC_12x10_Format:a1,RGBA_ASTC_12x12_Format:l1,RGBA_ASTC_4x4_Format:KS,RGBA_ASTC_5x4_Format:$S,RGBA_ASTC_5x5_Format:qS,RGBA_ASTC_6x5_Format:QS,RGBA_ASTC_6x6_Format:ZS,RGBA_ASTC_8x5_Format:e1,RGBA_ASTC_8x6_Format:t1,RGBA_ASTC_8x8_Format:n1,RGBA_BPTC_Format:Bg,RGBA_ETC2_EAC_Format:JS,RGBA_PVRTC_2BPPV1_Format:XS,RGBA_PVRTC_4BPPV1_Format:WS,RGBA_S3TC_DXT1_Format:Ig,RGBA_S3TC_DXT3_Format:Pg,RGBA_S3TC_DXT5_Format:Dg,RGBDepthPacking:_re,RGBFormat:KI,RGBIntegerFormat:gre,RGB_BPTC_SIGNED_Format:c1,RGB_BPTC_UNSIGNED_Format:u1,RGB_ETC1_Format:jS,RGB_ETC2_Format:YS,RGB_PVRTC_2BPPV1_Format:VS,RGB_PVRTC_4BPPV1_Format:GS,RGB_S3TC_DXT1_Format:Rg,RGDepthPacking:vre,RGFormat:QI,RGIntegerFormat:_E,RawShaderMaterial:f8,Ray:od,Raycaster:kP,Rec709Primaries:A_,RectAreaLight:C8,RedFormat:t0,RedIntegerFormat:n0,ReinhardToneMapping:p5,RenderTarget:O5,RepeatWrapping:su,ReplaceStencilOp:xre,ReverseSubtractEquation:GG,RingGeometry:kE,SIGNED_RED_GREEN_RGTC2_Format:h1,SIGNED_RED_RGTC1_Format:f1,SRGBColorSpace:Ws,SRGBTransfer:Wn,Scene:jf,ShaderChunk:qt,ShaderLib:sa,ShaderMaterial:Ds,ShadowMaterial:u8,Shape:Pf,ShapeGeometry:FE,ShapePath:ife,ShapeUtils:Ja,ShortType:pE,Skeleton:l0,SkeletonHelper:Xue,SkinnedMesh:hP,Source:uf,Sphere:xi,SphereGeometry:d0,Spherical:bb,SphericalHarmonics3:b8,SplineCurve:EP,SpotLight:bP,SpotLightHelper:Wue,Sprite:q5,SpriteMaterial:dP,SrcAlphaFactor:HS,SrcAlphaSaturateFactor:ZG,SrcColorFactor:YG,StaticCopyUsage:Ore,StaticDrawUsage:M_,StaticReadUsage:Nre,StereoCamera:yue,StreamCopyUsage:Hre,StreamDrawUsage:Lre,StreamReadUsage:Fre,StringKeyframeTrack:cd,SubtractEquation:zG,SubtractiveBlending:pb,TOUCH:Ju,TangentSpaceNormalMap:pu,TetrahedronGeometry:OE,Texture:En,TextureLoader:p0,TextureUtils:ace,TorusGeometry:UE,TorusKnotGeometry:HE,Triangle:Ks,TriangleFanDrawMode:p1,TriangleStripDrawMode:tP,TrianglesDrawMode:A5,TubeGeometry:zE,UVMapping:ru,Uint16BufferAttribute:sP,Uint32BufferAttribute:oP,Uint8BufferAttribute:Sie,Uint8ClampedBufferAttribute:Eie,Uniform:NP,UniformsGroup:Oue,UniformsLib:ot,UniformsUtils:z5,UnsignedByteType:Is,UnsignedInt248Type:Wf,UnsignedInt5999Type:YI,UnsignedIntType:Qa,UnsignedShort4444Type:mE,UnsignedShort5551Type:gE,UnsignedShortType:xp,VSMShadowMap:ea,Vector2:Le,Vector3:W,Vector4:Dn,VectorKeyframeTrack:qf,VideoTexture:Cce,WebGL3DRenderTarget:uie,WebGLArrayRenderTarget:cie,WebGLCoordinateSystem:za,WebGLCubeRenderTarget:aP,WebGLMultipleRenderTargets:ofe,WebGLRenderTarget:Ps,WebGLRenderer:fP,WebGLUtils:J5,WebGPUCoordinateSystem:T_,WireframeGeometry:c8,WrapAroundEnding:S_,ZeroCurvatureEnding:lf,ZeroFactor:XG,ZeroSlopeEnding:cf,ZeroStencilOp:yre,createCanvasElement:k5},Symbol.toStringTag,{value:"Module"}));var F8={exports:{}},ud={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */ud.ConcurrentRoot=1;ud.ContinuousEventPriority=4;ud.DefaultEventPriority=16;ud.DiscreteEventPriority=1;ud.IdleEventPriority=536870912;ud.LegacyRoot=0;F8.exports=ud;var wh=F8.exports;function lfe(n){let e;const t=new Set,r=(c,u)=>{const f=typeof c=="function"?c(e):c;if(f!==e){const p=e;e=u?f:Object.assign({},e,f),t.forEach(m=>m(e,p))}},i=()=>e,s=(c,u=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=u(e);function m(){const g=u(e);if(!f(p,g)){const v=p;c(p=g,v)}}return t.add(m),()=>t.delete(m)},l={setState:r,getState:i,subscribe:(c,u,f)=>u||f?s(c,u,f):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(r,i,l),l}const cfe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),G3=cfe?se.useEffect:se.useLayoutEffect;function O8(n){const e=typeof n=="function"?lfe(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=se.useReducer(y=>y+1,0),o=e.getState(),a=se.useRef(o),l=se.useRef(r),c=se.useRef(i),u=se.useRef(!1),f=se.useRef();f.current===void 0&&(f.current=r(o));let p,m=!1;(a.current!==o||l.current!==r||c.current!==i||u.current)&&(p=r(o),m=!i(f.current,p)),G3(()=>{m&&(f.current=p),a.current=o,l.current=r,c.current=i,u.current=!1});const g=se.useRef(o);G3(()=>{const y=()=>{try{const S=e.getState(),E=l.current(S);c.current(f.current,E)||(a.current=S,f.current=E,s())}catch{u.current=!0,s()}},_=e.subscribe(y);return e.getState()!==g.current&&y(),_},[]);const v=m?p:f.current;return se.useDebugValue(v),v};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}const ufe=n=>typeof n=="object"&&typeof n.then=="function",hf=[];function U8(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function H8(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const s of hf)if(U8(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!t)throw s.promise}const i={keys:e,equal:r.equal,remove:()=>{const s=hf.indexOf(i);s!==-1&&hf.splice(s,1)},promise:(ufe(n)?n:n(...e)).then(s=>{i.response=s,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(s=>i.error=s)};if(hf.push(i),!t)throw i.promise}const ffe=(n,e,t)=>H8(n,e,!1,t),dfe=(n,e,t)=>void H8(n,e,!0,t),hfe=n=>{if(n===void 0||n.length===0)hf.splice(0,hf.length);else{const e=hf.find(t=>U8(n,t.keys,t.equal));e&&e.remove()}};var z8={exports:{}},zM={exports:{}},GM={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V3;function pfe(){return V3||(V3=1,function(n){function e(k,K){var F=k.length;k.push(K);e:for(;0<F;){var ie=F-1>>>1,me=k[ie];if(0<i(me,K))k[ie]=K,k[F]=me,F=ie;else break e}}function t(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var K=k[0],F=k.pop();if(F!==K){k[0]=F;e:for(var ie=0,me=k.length,Ne=me>>>1;ie<Ne;){var ce=2*(ie+1)-1,xe=k[ce],Ae=ce+1,Ie=k[Ae];if(0>i(xe,F))Ae<me&&0>i(Ie,xe)?(k[ie]=Ie,k[Ae]=F,ie=Ae):(k[ie]=xe,k[ce]=F,ie=ce);else if(Ae<me&&0>i(Ie,F))k[ie]=Ie,k[Ae]=F,ie=Ae;else break e}}return K}function i(k,K){var F=k.sortIndex-K.sortIndex;return F!==0?F:k.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,p=3,m=!1,g=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(k){for(var K=t(c);K!==null;){if(K.callback===null)r(c);else if(K.startTime<=k)r(c),K.sortIndex=K.expirationTime,e(l,K);else break;K=t(c)}}function w(k){if(v=!1,E(k),!g)if(t(l)!==null)g=!0,Y(I);else{var K=t(c);K!==null&&te(w,K.startTime-k)}}function I(k,K){g=!1,v&&(v=!1,_(P),P=-1),m=!0;var F=p;try{for(E(K),f=t(l);f!==null&&(!(f.expirationTime>K)||k&&!L());){var ie=f.callback;if(typeof ie=="function"){f.callback=null,p=f.priorityLevel;var me=ie(f.expirationTime<=K);K=n.unstable_now(),typeof me=="function"?f.callback=me:f===t(l)&&r(l),E(K)}else r(l);f=t(l)}if(f!==null)var Ne=!0;else{var ce=t(c);ce!==null&&te(w,ce.startTime-K),Ne=!1}return Ne}finally{f=null,p=F,m=!1}}var T=!1,b=null,P=-1,C=5,M=-1;function L(){return!(n.unstable_now()-M<C)}function U(){if(b!==null){var k=n.unstable_now();M=k;var K=!0;try{K=b(!0,k)}finally{K?X():(T=!1,b=null)}}else T=!1}var X;if(typeof S=="function")X=function(){S(U)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,Q=$.port2;$.port1.onmessage=U,X=function(){Q.postMessage(null)}}else X=function(){y(U,0)};function Y(k){b=k,T||(T=!0,X())}function te(k,K){P=y(function(){k(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(k){k.callback=null},n.unstable_continueExecution=function(){g||m||(g=!0,Y(I))},n.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<k?Math.floor(1e3/k):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(k){switch(p){case 1:case 2:case 3:var K=3;break;default:K=p}var F=p;p=K;try{return k()}finally{p=F}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(k,K){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var F=p;p=k;try{return K()}finally{p=F}},n.unstable_scheduleCallback=function(k,K,F){var ie=n.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?ie+F:ie):F=ie,k){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=F+me,k={id:u++,callback:K,priorityLevel:k,startTime:F,expirationTime:me,sortIndex:-1},F>ie?(k.sortIndex=F,e(c,k),t(l)===null&&k===t(c)&&(v?(_(P),P=-1):v=!0,te(w,F-ie))):(k.sortIndex=me,e(l,k),g||m||(g=!0,Y(I))),k},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(k){var K=p;return function(){var F=p;p=K;try{return k.apply(this,arguments)}finally{p=F}}}}(GM)),GM}var W3;function mfe(){return W3||(W3=1,zM.exports=pfe()),zM.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gfe=function(e){var t={},r=se,i=mfe(),s=Object.assign;function o(d){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+d,x=1;x<arguments.length;x++)h+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),g=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),I=Symbol.iterator;function T(d){return d===null||typeof d!="object"?null:(d=I&&d[I]||d["@@iterator"],typeof d=="function"?d:null)}function b(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case u:return"Fragment";case c:return"Portal";case p:return"Profiler";case f:return"StrictMode";case y:return"Suspense";case _:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case g:return(d.displayName||"Context")+".Consumer";case m:return(d._context.displayName||"Context")+".Provider";case v:var h=d.render;return d=d.displayName,d||(d=h.displayName||h.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case S:return h=d.displayName||null,h!==null?h:b(d.type)||"Memo";case E:h=d._payload,d=d._init;try{return b(d(h))}catch{}}return null}function P(d){var h=d.type;switch(d.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=h.render,d=d.displayName||d.name||"",h.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return b(h);case 8:return h===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function C(d){var h=d,x=d;if(d.alternate)for(;h.return;)h=h.return;else{d=h;do h=d,h.flags&4098&&(x=h.return),d=h.return;while(d)}return h.tag===3?x:null}function M(d){if(C(d)!==d)throw Error(o(188))}function L(d){var h=d.alternate;if(!h){if(h=C(d),h===null)throw Error(o(188));return h!==d?null:d}for(var x=d,A=h;;){var R=x.return;if(R===null)break;var B=R.alternate;if(B===null){if(A=R.return,A!==null){x=A;continue}break}if(R.child===B.child){for(B=R.child;B;){if(B===x)return M(R),d;if(B===A)return M(R),h;B=B.sibling}throw Error(o(188))}if(x.return!==A.return)x=R,A=B;else{for(var q=!1,fe=R.child;fe;){if(fe===x){q=!0,x=R,A=B;break}if(fe===A){q=!0,A=R,x=B;break}fe=fe.sibling}if(!q){for(fe=B.child;fe;){if(fe===x){q=!0,x=B,A=R;break}if(fe===A){q=!0,A=B,x=R;break}fe=fe.sibling}if(!q)throw Error(o(189))}}if(x.alternate!==A)throw Error(o(190))}if(x.tag!==3)throw Error(o(188));return x.stateNode.current===x?d:h}function U(d){return d=L(d),d!==null?X(d):null}function X(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var h=X(d);if(h!==null)return h;d=d.sibling}return null}function $(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){if(d.tag!==4){var h=$(d);if(h!==null)return h}d=d.sibling}return null}var Q=Array.isArray,Y=e.getPublicInstance,te=e.getRootHostContext,k=e.getChildHostContext,K=e.prepareForCommit,F=e.resetAfterCommit,ie=e.createInstance,me=e.appendInitialChild,Ne=e.finalizeInitialChildren,ce=e.prepareUpdate,xe=e.shouldSetTextContent,Ae=e.createTextInstance,Ie=e.scheduleTimeout,Xe=e.cancelTimeout,it=e.noTimeout,Qe=e.isPrimaryRenderer,Ge=e.supportsMutation,z=e.supportsPersistence,pe=e.supportsHydration,Me=e.getInstanceFromNode,Be=e.preparePortalMount,ye=e.getCurrentEventPriority,oe=e.detachDeletedInstance,Ue=e.supportsMicrotasks,Ke=e.scheduleMicrotask,V=e.supportsTestSelectors,O=e.findFiberRoot,le=e.getBoundingRect,Se=e.getTextContent,ve=e.isHiddenSubtree,Ce=e.matchAccessibilityRole,lt=e.setFocusIfFocusable,Oe=e.setupIntersectionObserver,Ze=e.appendChild,_t=e.appendChildToContainer,He=e.commitTextUpdate,nt=e.commitMount,St=e.commitUpdate,Et=e.insertBefore,Ye=e.insertInContainerBefore,re=e.removeChild,Pe=e.removeChildFromContainer,je=e.resetTextContent,ee=e.hideInstance,Te=e.hideTextInstance,ue=e.unhideInstance,Re=e.unhideTextInstance,We=e.clearContainer,ht=e.cloneInstance,Ct=e.createContainerChildSet,jt=e.appendChildToContainerChildSet,cn=e.finalizeContainerChildren,Ot=e.replaceContainerChildren,yt=e.cloneHiddenInstance,ft=e.cloneHiddenTextInstance,rn=e.canHydrateInstance,et=e.canHydrateTextInstance,Lt=e.canHydrateSuspenseInstance,xt=e.isSuspenseInstancePending,Pt=e.isSuspenseInstanceFallback,In=e.registerSuspenseInstanceRetry,Nt=e.getNextHydratableSibling,vt=e.getFirstHydratableChild,er=e.getFirstHydratableChildWithinContainer,Bn=e.getFirstHydratableChildWithinSuspenseInstance,N=e.hydrateInstance,H=e.hydrateTextInstance,ne=e.hydrateSuspenseInstance,D=e.getNextHydratableInstanceAfterSuspenseInstance,G=e.commitHydratedContainer,j=e.commitHydratedSuspenseInstance,Z=e.clearSuspenseBoundary,J=e.clearSuspenseBoundaryFromContainer,de=e.shouldDeleteUnhydratedTailInstances,_e=e.didNotMatchHydratedContainerTextInstance,we=e.didNotMatchHydratedTextInstance,ge;function Ve(d){if(ge===void 0)try{throw Error()}catch(x){var h=x.stack.trim().match(/\n( *(at )?)/);ge=h&&h[1]||""}return`
`+ge+d}var ke=!1;function Fe(d,h){if(!d||ke)return"";ke=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch($e){var A=$e}Reflect.construct(d,[],h)}else{try{h.call()}catch($e){A=$e}d.call(h.prototype)}else{try{throw Error()}catch($e){A=$e}d()}}catch($e){if($e&&A&&typeof $e.stack=="string"){for(var R=$e.stack.split(`
`),B=A.stack.split(`
`),q=R.length-1,fe=B.length-1;1<=q&&0<=fe&&R[q]!==B[fe];)fe--;for(;1<=q&&0<=fe;q--,fe--)if(R[q]!==B[fe]){if(q!==1||fe!==1)do if(q--,fe--,0>fe||R[q]!==B[fe]){var De=`
`+R[q].replace(" at new "," at ");return d.displayName&&De.includes("<anonymous>")&&(De=De.replace("<anonymous>",d.displayName)),De}while(1<=q&&0<=fe);break}}}finally{ke=!1,Error.prepareStackTrace=x}return(d=d?d.displayName||d.name:"")?Ve(d):""}var st=Object.prototype.hasOwnProperty,ut=[],dt=-1;function bt(d){return{current:d}}function tt(d){0>dt||(d.current=ut[dt],ut[dt]=null,dt--)}function ze(d,h){dt++,ut[dt]=d.current,d.current=h}var It={},wt=bt(It),Dt=bt(!1),An=It;function Pn(d,h){var x=d.type.contextTypes;if(!x)return It;var A=d.stateNode;if(A&&A.__reactInternalMemoizedUnmaskedChildContext===h)return A.__reactInternalMemoizedMaskedChildContext;var R={},B;for(B in x)R[B]=h[B];return A&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=h,d.__reactInternalMemoizedMaskedChildContext=R),R}function tr(d){return d=d.childContextTypes,d!=null}function sn(){tt(Dt),tt(wt)}function en(d,h,x){if(wt.current!==It)throw Error(o(168));ze(wt,h),ze(Dt,x)}function cr(d,h,x){var A=d.stateNode;if(h=h.childContextTypes,typeof A.getChildContext!="function")return x;A=A.getChildContext();for(var R in A)if(!(R in h))throw Error(o(108,P(d)||"Unknown",R));return s({},x,A)}function Yt(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||It,An=wt.current,ze(wt,d),ze(Dt,Dt.current),!0}function hn(d,h,x){var A=d.stateNode;if(!A)throw Error(o(169));x?(d=cr(d,h,An),A.__reactInternalMemoizedMergedChildContext=d,tt(Dt),tt(wt),ze(wt,d)):tt(Dt),ze(Dt,x)}var Gn=Math.clz32?Math.clz32:va,uo=Math.log,Vi=Math.LN2;function va(d){return d>>>=0,d===0?32:31-(uo(d)/Vi|0)|0}var x0=64,S0=4194304;function Wp(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function E0(d,h){var x=d.pendingLanes;if(x===0)return 0;var A=0,R=d.suspendedLanes,B=d.pingedLanes,q=x&268435455;if(q!==0){var fe=q&~R;fe!==0?A=Wp(fe):(B&=q,B!==0&&(A=Wp(B)))}else q=x&~R,q!==0?A=Wp(q):B!==0&&(A=Wp(B));if(A===0)return 0;if(h!==0&&h!==A&&!(h&R)&&(R=A&-A,B=h&-h,R>=B||R===16&&(B&4194240)!==0))return h;if(A&4&&(A|=x&16),h=d.entangledLanes,h!==0)for(d=d.entanglements,h&=A;0<h;)x=31-Gn(h),R=1<<x,A|=d[x],h&=~R;return A}function B6(d,h){switch(d){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function L6(d,h){for(var x=d.suspendedLanes,A=d.pingedLanes,R=d.expirationTimes,B=d.pendingLanes;0<B;){var q=31-Gn(B),fe=1<<q,De=R[q];De===-1?(!(fe&x)||fe&A)&&(R[q]=B6(fe,h)):De<=h&&(d.expiredLanes|=fe),B&=~fe}}function YE(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function JE(d){for(var h=[],x=0;31>x;x++)h.push(d);return h}function Xp(d,h,x){d.pendingLanes|=h,h!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,h=31-Gn(h),d[h]=x}function N6(d,h){var x=d.pendingLanes&~h;d.pendingLanes=h,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=h,d.mutableReadLanes&=h,d.entangledLanes&=h,h=d.entanglements;var A=d.eventTimes;for(d=d.expirationTimes;0<x;){var R=31-Gn(x),B=1<<R;h[R]=0,A[R]=-1,d[R]=-1,x&=~B}}function KE(d,h){var x=d.entangledLanes|=h;for(d=d.entanglements;x;){var A=31-Gn(x),R=1<<A;R&h|d[A]&h&&(d[A]|=h),x&=~R}}var Tn=0;function QP(d){return d&=-d,1<d?4<d?d&268435455?16:536870912:4:1}var $E=i.unstable_scheduleCallback,ZP=i.unstable_cancelCallback,k6=i.unstable_shouldYield,F6=i.unstable_requestPaint,ei=i.unstable_now,qE=i.unstable_ImmediatePriority,O6=i.unstable_UserBlockingPriority,QE=i.unstable_NormalPriority,U6=i.unstable_IdlePriority,A0=null,ya=null;function H6(d){if(ya&&typeof ya.onCommitFiberRoot=="function")try{ya.onCommitFiberRoot(A0,d,void 0,(d.current.flags&128)===128)}catch{}}function z6(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var xa=typeof Object.is=="function"?Object.is:z6,Za=null,w0=!1,ZE=!1;function e2(d){Za===null?Za=[d]:Za.push(d)}function G6(d){w0=!0,e2(d)}function Sa(){if(!ZE&&Za!==null){ZE=!0;var d=0,h=Tn;try{var x=Za;for(Tn=1;d<x.length;d++){var A=x[d];do A=A(!0);while(A!==null)}Za=null,w0=!1}catch(R){throw Za!==null&&(Za=Za.slice(d+1)),$E(qE,Sa),R}finally{Tn=h,ZE=!1}}return null}var V6=a.ReactCurrentBatchConfig;function M0(d,h){if(xa(d,h))return!0;if(typeof d!="object"||d===null||typeof h!="object"||h===null)return!1;var x=Object.keys(d),A=Object.keys(h);if(x.length!==A.length)return!1;for(A=0;A<x.length;A++){var R=x[A];if(!st.call(h,R)||!xa(d[R],h[R]))return!1}return!0}function W6(d){switch(d.tag){case 5:return Ve(d.type);case 16:return Ve("Lazy");case 13:return Ve("Suspense");case 19:return Ve("SuspenseList");case 0:case 2:case 15:return d=Fe(d.type,!1),d;case 11:return d=Fe(d.type.render,!1),d;case 1:return d=Fe(d.type,!0),d;default:return""}}function Wo(d,h){if(d&&d.defaultProps){h=s({},h),d=d.defaultProps;for(var x in d)h[x]===void 0&&(h[x]=d[x]);return h}return h}var T0=bt(null),C0=null,fd=null,eA=null;function tA(){eA=fd=C0=null}function t2(d,h,x){Qe?(ze(T0,h._currentValue),h._currentValue=x):(ze(T0,h._currentValue2),h._currentValue2=x)}function nA(d){var h=T0.current;tt(T0),Qe?d._currentValue=h:d._currentValue2=h}function rA(d,h,x){for(;d!==null;){var A=d.alternate;if((d.childLanes&h)!==h?(d.childLanes|=h,A!==null&&(A.childLanes|=h)):A!==null&&(A.childLanes&h)!==h&&(A.childLanes|=h),d===x)break;d=d.return}}function dd(d,h){C0=d,eA=fd=null,d=d.dependencies,d!==null&&d.firstContext!==null&&(d.lanes&h&&(Ns=!0),d.firstContext=null)}function fo(d){var h=Qe?d._currentValue:d._currentValue2;if(eA!==d)if(d={context:d,memoizedValue:h,next:null},fd===null){if(C0===null)throw Error(o(308));fd=d,C0.dependencies={lanes:0,firstContext:d}}else fd=fd.next=d;return h}var Ea=null,Jl=!1;function iA(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function n2(d,h){d=d.updateQueue,h.updateQueue===d&&(h.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function el(d,h){return{eventTime:d,lane:h,tag:0,payload:null,callback:null,next:null}}function Kl(d,h){var x=d.updateQueue;x!==null&&(x=x.shared,kr!==null&&d.mode&1&&!(tn&2)?(d=x.interleaved,d===null?(h.next=h,Ea===null?Ea=[x]:Ea.push(x)):(h.next=d.next,d.next=h),x.interleaved=h):(d=x.pending,d===null?h.next=h:(h.next=d.next,d.next=h),x.pending=h))}function b0(d,h,x){if(h=h.updateQueue,h!==null&&(h=h.shared,(x&4194240)!==0)){var A=h.lanes;A&=d.pendingLanes,x|=A,h.lanes=x,KE(d,x)}}function r2(d,h){var x=d.updateQueue,A=d.alternate;if(A!==null&&(A=A.updateQueue,x===A)){var R=null,B=null;if(x=x.firstBaseUpdate,x!==null){do{var q={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};B===null?R=B=q:B=B.next=q,x=x.next}while(x!==null);B===null?R=B=h:B=B.next=h}else R=B=h;x={baseState:A.baseState,firstBaseUpdate:R,lastBaseUpdate:B,shared:A.shared,effects:A.effects},d.updateQueue=x;return}d=x.lastBaseUpdate,d===null?x.firstBaseUpdate=h:d.next=h,x.lastBaseUpdate=h}function R0(d,h,x,A){var R=d.updateQueue;Jl=!1;var B=R.firstBaseUpdate,q=R.lastBaseUpdate,fe=R.shared.pending;if(fe!==null){R.shared.pending=null;var De=fe,$e=De.next;De.next=null,q===null?B=$e:q.next=$e,q=De;var mt=d.alternate;mt!==null&&(mt=mt.updateQueue,fe=mt.lastBaseUpdate,fe!==q&&(fe===null?mt.firstBaseUpdate=$e:fe.next=$e,mt.lastBaseUpdate=De))}if(B!==null){var Vt=R.baseState;q=0,mt=$e=De=null,fe=B;do{var Bt=fe.lane,On=fe.eventTime;if((A&Bt)===Bt){mt!==null&&(mt=mt.next={eventTime:On,lane:0,tag:fe.tag,payload:fe.payload,callback:fe.callback,next:null});e:{var Tt=d,Ci=fe;switch(Bt=h,On=x,Ci.tag){case 1:if(Tt=Ci.payload,typeof Tt=="function"){Vt=Tt.call(On,Vt,Bt);break e}Vt=Tt;break e;case 3:Tt.flags=Tt.flags&-65537|128;case 0:if(Tt=Ci.payload,Bt=typeof Tt=="function"?Tt.call(On,Vt,Bt):Tt,Bt==null)break e;Vt=s({},Vt,Bt);break e;case 2:Jl=!0}}fe.callback!==null&&fe.lane!==0&&(d.flags|=64,Bt=R.effects,Bt===null?R.effects=[fe]:Bt.push(fe))}else On={eventTime:On,lane:Bt,tag:fe.tag,payload:fe.payload,callback:fe.callback,next:null},mt===null?($e=mt=On,De=Vt):mt=mt.next=On,q|=Bt;if(fe=fe.next,fe===null){if(fe=R.shared.pending,fe===null)break;Bt=fe,fe=Bt.next,Bt.next=null,R.lastBaseUpdate=Bt,R.shared.pending=null}}while(!0);if(mt===null&&(De=Vt),R.baseState=De,R.firstBaseUpdate=$e,R.lastBaseUpdate=mt,h=R.shared.interleaved,h!==null){R=h;do q|=R.lane,R=R.next;while(R!==h)}else B===null&&(R.shared.lanes=0);Sd|=q,d.lanes=q,d.memoizedState=Vt}}function i2(d,h,x){if(d=h.effects,h.effects=null,d!==null)for(h=0;h<d.length;h++){var A=d[h],R=A.callback;if(R!==null){if(A.callback=null,A=x,typeof R!="function")throw Error(o(191,R));R.call(A)}}}var s2=new r.Component().refs;function sA(d,h,x,A){h=d.memoizedState,x=x(A,h),x=x==null?h:s({},h,x),d.memoizedState=x,d.lanes===0&&(d.updateQueue.baseState=x)}var I0={isMounted:function(d){return(d=d._reactInternals)?C(d)===d:!1},enqueueSetState:function(d,h,x){d=d._reactInternals;var A=Xi(),R=Ql(d),B=el(A,R);B.payload=h,x!=null&&(B.callback=x),Kl(d,B),h=_o(d,R,A),h!==null&&b0(h,d,R)},enqueueReplaceState:function(d,h,x){d=d._reactInternals;var A=Xi(),R=Ql(d),B=el(A,R);B.tag=1,B.payload=h,x!=null&&(B.callback=x),Kl(d,B),h=_o(d,R,A),h!==null&&b0(h,d,R)},enqueueForceUpdate:function(d,h){d=d._reactInternals;var x=Xi(),A=Ql(d),R=el(x,A);R.tag=2,h!=null&&(R.callback=h),Kl(d,R),h=_o(d,A,x),h!==null&&b0(h,d,A)}};function o2(d,h,x,A,R,B,q){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(A,B,q):h.prototype&&h.prototype.isPureReactComponent?!M0(x,A)||!M0(R,B):!0}function a2(d,h,x){var A=!1,R=It,B=h.contextType;return typeof B=="object"&&B!==null?B=fo(B):(R=tr(h)?An:wt.current,A=h.contextTypes,B=(A=A!=null)?Pn(d,R):It),h=new h(x,B),d.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=I0,d.stateNode=h,h._reactInternals=d,A&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=R,d.__reactInternalMemoizedMaskedChildContext=B),h}function l2(d,h,x,A){d=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(x,A),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(x,A),h.state!==d&&I0.enqueueReplaceState(h,h.state,null)}function oA(d,h,x,A){var R=d.stateNode;R.props=x,R.state=d.memoizedState,R.refs=s2,iA(d);var B=h.contextType;typeof B=="object"&&B!==null?R.context=fo(B):(B=tr(h)?An:wt.current,R.context=Pn(d,B)),R.state=d.memoizedState,B=h.getDerivedStateFromProps,typeof B=="function"&&(sA(d,h,B,x),R.state=d.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(h=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),h!==R.state&&I0.enqueueReplaceState(R,R.state,null),R0(d,x,R,A),R.state=d.memoizedState),typeof R.componentDidMount=="function"&&(d.flags|=4194308)}var hd=[],pd=0,P0=null,D0=0,ho=[],po=0,vu=null,tl=1,nl="";function yu(d,h){hd[pd++]=D0,hd[pd++]=P0,P0=d,D0=h}function c2(d,h,x){ho[po++]=tl,ho[po++]=nl,ho[po++]=vu,vu=d;var A=tl;d=nl;var R=32-Gn(A)-1;A&=~(1<<R),x+=1;var B=32-Gn(h)+R;if(30<B){var q=R-R%5;B=(A&(1<<q)-1).toString(32),A>>=q,R-=q,tl=1<<32-Gn(h)+R|x<<R|A,nl=B+d}else tl=1<<B|x<<R|A,nl=d}function aA(d){d.return!==null&&(yu(d,1),c2(d,1,0))}function lA(d){for(;d===P0;)P0=hd[--pd],hd[pd]=null,D0=hd[--pd],hd[pd]=null;for(;d===vu;)vu=ho[--po],ho[po]=null,nl=ho[--po],ho[po]=null,tl=ho[--po],ho[po]=null}var Bs=null,Ls=null,nr=!1,jp=!1,Xo=null;function u2(d,h){var x=vo(5,null,null,0);x.elementType="DELETED",x.stateNode=h,x.return=d,h=d.deletions,h===null?(d.deletions=[x],d.flags|=16):h.push(x)}function f2(d,h){switch(d.tag){case 5:return h=rn(h,d.type,d.pendingProps),h!==null?(d.stateNode=h,Bs=d,Ls=vt(h),!0):!1;case 6:return h=et(h,d.pendingProps),h!==null?(d.stateNode=h,Bs=d,Ls=null,!0):!1;case 13:if(h=Lt(h),h!==null){var x=vu!==null?{id:tl,overflow:nl}:null;return d.memoizedState={dehydrated:h,treeContext:x,retryLane:1073741824},x=vo(18,null,null,0),x.stateNode=h,x.return=d,d.child=x,Bs=d,Ls=null,!0}return!1;default:return!1}}function cA(d){return(d.mode&1)!==0&&(d.flags&128)===0}function uA(d){if(nr){var h=Ls;if(h){var x=h;if(!f2(d,h)){if(cA(d))throw Error(o(418));h=Nt(x);var A=Bs;h&&f2(d,h)?u2(A,x):(d.flags=d.flags&-4097|2,nr=!1,Bs=d)}}else{if(cA(d))throw Error(o(418));d.flags=d.flags&-4097|2,nr=!1,Bs=d}}}function d2(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;Bs=d}function Yp(d){if(!pe||d!==Bs)return!1;if(!nr)return d2(d),nr=!0,!1;if(d.tag!==3&&(d.tag!==5||de(d.type)&&!xe(d.type,d.memoizedProps))){var h=Ls;if(h){if(cA(d)){for(d=Ls;d;)d=Nt(d);throw Error(o(418))}for(;h;)u2(d,h),h=Nt(h)}}if(d2(d),d.tag===13){if(!pe)throw Error(o(316));if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));Ls=D(d)}else Ls=Bs?Nt(d.stateNode):null;return!0}function md(){pe&&(Ls=Bs=null,jp=nr=!1)}function fA(d){Xo===null?Xo=[d]:Xo.push(d)}function Jp(d,h,x){if(d=x.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(o(309));var A=x.stateNode}if(!A)throw Error(o(147,d));var R=A,B=""+d;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===B?h.ref:(h=function(q){var fe=R.refs;fe===s2&&(fe=R.refs={}),q===null?delete fe[B]:fe[B]=q},h._stringRef=B,h)}if(typeof d!="string")throw Error(o(284));if(!x._owner)throw Error(o(290,d))}return d}function B0(d,h){throw d=Object.prototype.toString.call(h),Error(o(31,d==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":d))}function h2(d){var h=d._init;return h(d._payload)}function p2(d){function h(Ee,he){if(d){var be=Ee.deletions;be===null?(Ee.deletions=[he],Ee.flags|=16):be.push(he)}}function x(Ee,he){if(!d)return null;for(;he!==null;)h(Ee,he),he=he.sibling;return null}function A(Ee,he){for(Ee=new Map;he!==null;)he.key!==null?Ee.set(he.key,he):Ee.set(he.index,he),he=he.sibling;return Ee}function R(Ee,he){return Ee=ec(Ee,he),Ee.index=0,Ee.sibling=null,Ee}function B(Ee,he,be){return Ee.index=be,d?(be=Ee.alternate,be!==null?(be=be.index,be<he?(Ee.flags|=2,he):be):(Ee.flags|=2,he)):(Ee.flags|=1048576,he)}function q(Ee){return d&&Ee.alternate===null&&(Ee.flags|=2),Ee}function fe(Ee,he,be,ct){return he===null||he.tag!==6?(he=JA(be,Ee.mode,ct),he.return=Ee,he):(he=R(he,be),he.return=Ee,he)}function De(Ee,he,be,ct){var Mt=be.type;return Mt===u?mt(Ee,he,be.props.children,ct,be.key):he!==null&&(he.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===E&&h2(Mt)===he.type)?(ct=R(he,be.props),ct.ref=Jp(Ee,he,be),ct.return=Ee,ct):(ct=uv(be.type,be.key,be.props,null,Ee.mode,ct),ct.ref=Jp(Ee,he,be),ct.return=Ee,ct)}function $e(Ee,he,be,ct){return he===null||he.tag!==4||he.stateNode.containerInfo!==be.containerInfo||he.stateNode.implementation!==be.implementation?(he=KA(be,Ee.mode,ct),he.return=Ee,he):(he=R(he,be.children||[]),he.return=Ee,he)}function mt(Ee,he,be,ct,Mt){return he===null||he.tag!==7?(he=Tu(be,Ee.mode,ct,Mt),he.return=Ee,he):(he=R(he,be),he.return=Ee,he)}function Vt(Ee,he,be){if(typeof he=="string"&&he!==""||typeof he=="number")return he=JA(""+he,Ee.mode,be),he.return=Ee,he;if(typeof he=="object"&&he!==null){switch(he.$$typeof){case l:return be=uv(he.type,he.key,he.props,null,Ee.mode,be),be.ref=Jp(Ee,null,he),be.return=Ee,be;case c:return he=KA(he,Ee.mode,be),he.return=Ee,he;case E:var ct=he._init;return Vt(Ee,ct(he._payload),be)}if(Q(he)||T(he))return he=Tu(he,Ee.mode,be,null),he.return=Ee,he;B0(Ee,he)}return null}function Bt(Ee,he,be,ct){var Mt=he!==null?he.key:null;if(typeof be=="string"&&be!==""||typeof be=="number")return Mt!==null?null:fe(Ee,he,""+be,ct);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case l:return be.key===Mt?De(Ee,he,be,ct):null;case c:return be.key===Mt?$e(Ee,he,be,ct):null;case E:return Mt=be._init,Bt(Ee,he,Mt(be._payload),ct)}if(Q(be)||T(be))return Mt!==null?null:mt(Ee,he,be,ct,null);B0(Ee,be)}return null}function On(Ee,he,be,ct,Mt){if(typeof ct=="string"&&ct!==""||typeof ct=="number")return Ee=Ee.get(be)||null,fe(he,Ee,""+ct,Mt);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case l:return Ee=Ee.get(ct.key===null?be:ct.key)||null,De(he,Ee,ct,Mt);case c:return Ee=Ee.get(ct.key===null?be:ct.key)||null,$e(he,Ee,ct,Mt);case E:var Qt=ct._init;return On(Ee,he,be,Qt(ct._payload),Mt)}if(Q(ct)||T(ct))return Ee=Ee.get(be)||null,mt(he,Ee,ct,Mt,null);B0(he,ct)}return null}function Tt(Ee,he,be,ct){for(var Mt=null,Qt=null,Wt=he,Cn=he=0,ni=null;Wt!==null&&Cn<be.length;Cn++){Wt.index>Cn?(ni=Wt,Wt=null):ni=Wt.sibling;var bn=Bt(Ee,Wt,be[Cn],ct);if(bn===null){Wt===null&&(Wt=ni);break}d&&Wt&&bn.alternate===null&&h(Ee,Wt),he=B(bn,he,Cn),Qt===null?Mt=bn:Qt.sibling=bn,Qt=bn,Wt=ni}if(Cn===be.length)return x(Ee,Wt),nr&&yu(Ee,Cn),Mt;if(Wt===null){for(;Cn<be.length;Cn++)Wt=Vt(Ee,be[Cn],ct),Wt!==null&&(he=B(Wt,he,Cn),Qt===null?Mt=Wt:Qt.sibling=Wt,Qt=Wt);return nr&&yu(Ee,Cn),Mt}for(Wt=A(Ee,Wt);Cn<be.length;Cn++)ni=On(Wt,Ee,Cn,be[Cn],ct),ni!==null&&(d&&ni.alternate!==null&&Wt.delete(ni.key===null?Cn:ni.key),he=B(ni,he,Cn),Qt===null?Mt=ni:Qt.sibling=ni,Qt=ni);return d&&Wt.forEach(function(tc){return h(Ee,tc)}),nr&&yu(Ee,Cn),Mt}function Ci(Ee,he,be,ct){var Mt=T(be);if(typeof Mt!="function")throw Error(o(150));if(be=Mt.call(be),be==null)throw Error(o(151));for(var Qt=Mt=null,Wt=he,Cn=he=0,ni=null,bn=be.next();Wt!==null&&!bn.done;Cn++,bn=be.next()){Wt.index>Cn?(ni=Wt,Wt=null):ni=Wt.sibling;var tc=Bt(Ee,Wt,bn.value,ct);if(tc===null){Wt===null&&(Wt=ni);break}d&&Wt&&tc.alternate===null&&h(Ee,Wt),he=B(tc,he,Cn),Qt===null?Mt=tc:Qt.sibling=tc,Qt=tc,Wt=ni}if(bn.done)return x(Ee,Wt),nr&&yu(Ee,Cn),Mt;if(Wt===null){for(;!bn.done;Cn++,bn=be.next())bn=Vt(Ee,bn.value,ct),bn!==null&&(he=B(bn,he,Cn),Qt===null?Mt=bn:Qt.sibling=bn,Qt=bn);return nr&&yu(Ee,Cn),Mt}for(Wt=A(Ee,Wt);!bn.done;Cn++,bn=be.next())bn=On(Wt,Ee,Cn,bn.value,ct),bn!==null&&(d&&bn.alternate!==null&&Wt.delete(bn.key===null?Cn:bn.key),he=B(bn,he,Cn),Qt===null?Mt=bn:Qt.sibling=bn,Qt=bn);return d&&Wt.forEach(function(x9){return h(Ee,x9)}),nr&&yu(Ee,Cn),Mt}function yo(Ee,he,be,ct){if(typeof be=="object"&&be!==null&&be.type===u&&be.key===null&&(be=be.props.children),typeof be=="object"&&be!==null){switch(be.$$typeof){case l:e:{for(var Mt=be.key,Qt=he;Qt!==null;){if(Qt.key===Mt){if(Mt=be.type,Mt===u){if(Qt.tag===7){x(Ee,Qt.sibling),he=R(Qt,be.props.children),he.return=Ee,Ee=he;break e}}else if(Qt.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===E&&h2(Mt)===Qt.type){x(Ee,Qt.sibling),he=R(Qt,be.props),he.ref=Jp(Ee,Qt,be),he.return=Ee,Ee=he;break e}x(Ee,Qt);break}else h(Ee,Qt);Qt=Qt.sibling}be.type===u?(he=Tu(be.props.children,Ee.mode,ct,be.key),he.return=Ee,Ee=he):(ct=uv(be.type,be.key,be.props,null,Ee.mode,ct),ct.ref=Jp(Ee,he,be),ct.return=Ee,Ee=ct)}return q(Ee);case c:e:{for(Qt=be.key;he!==null;){if(he.key===Qt)if(he.tag===4&&he.stateNode.containerInfo===be.containerInfo&&he.stateNode.implementation===be.implementation){x(Ee,he.sibling),he=R(he,be.children||[]),he.return=Ee,Ee=he;break e}else{x(Ee,he);break}else h(Ee,he);he=he.sibling}he=KA(be,Ee.mode,ct),he.return=Ee,Ee=he}return q(Ee);case E:return Qt=be._init,yo(Ee,he,Qt(be._payload),ct)}if(Q(be))return Tt(Ee,he,be,ct);if(T(be))return Ci(Ee,he,be,ct);B0(Ee,be)}return typeof be=="string"&&be!==""||typeof be=="number"?(be=""+be,he!==null&&he.tag===6?(x(Ee,he.sibling),he=R(he,be),he.return=Ee,Ee=he):(x(Ee,he),he=JA(be,Ee.mode,ct),he.return=Ee,Ee=he),q(Ee)):x(Ee,he)}return yo}var gd=p2(!0),m2=p2(!1),Kp={},mo=bt(Kp),$p=bt(Kp),_d=bt(Kp);function Aa(d){if(d===Kp)throw Error(o(174));return d}function dA(d,h){ze(_d,h),ze($p,d),ze(mo,Kp),d=te(h),tt(mo),ze(mo,d)}function vd(){tt(mo),tt($p),tt(_d)}function g2(d){var h=Aa(_d.current),x=Aa(mo.current);h=k(x,d.type,h),x!==h&&(ze($p,d),ze(mo,h))}function hA(d){$p.current===d&&(tt(mo),tt($p))}var ur=bt(0);function L0(d){for(var h=d;h!==null;){if(h.tag===13){var x=h.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||xt(x)||Pt(x)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if(h.flags&128)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var pA=[];function mA(){for(var d=0;d<pA.length;d++){var h=pA[d];Qe?h._workInProgressVersionPrimary=null:h._workInProgressVersionSecondary=null}pA.length=0}var N0=a.ReactCurrentDispatcher,go=a.ReactCurrentBatchConfig,yd=0,xr=null,wi=null,ti=null,k0=!1,qp=!1,Qp=0,X6=0;function Mi(){throw Error(o(321))}function gA(d,h){if(h===null)return!1;for(var x=0;x<h.length&&x<d.length;x++)if(!xa(d[x],h[x]))return!1;return!0}function _A(d,h,x,A,R,B){if(yd=B,xr=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,N0.current=d===null||d.memoizedState===null?K6:$6,d=x(A,R),qp){B=0;do{if(qp=!1,Qp=0,25<=B)throw Error(o(301));B+=1,ti=wi=null,h.updateQueue=null,N0.current=q6,d=x(A,R)}while(qp)}if(N0.current=z0,h=wi!==null&&wi.next!==null,yd=0,ti=wi=xr=null,k0=!1,h)throw Error(o(300));return d}function vA(){var d=Qp!==0;return Qp=0,d}function rl(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ti===null?xr.memoizedState=ti=d:ti=ti.next=d,ti}function wa(){if(wi===null){var d=xr.alternate;d=d!==null?d.memoizedState:null}else d=wi.next;var h=ti===null?xr.memoizedState:ti.next;if(h!==null)ti=h,wi=d;else{if(d===null)throw Error(o(310));wi=d,d={memoizedState:wi.memoizedState,baseState:wi.baseState,baseQueue:wi.baseQueue,queue:wi.queue,next:null},ti===null?xr.memoizedState=ti=d:ti=ti.next=d}return ti}function xu(d,h){return typeof h=="function"?h(d):h}function F0(d){var h=wa(),x=h.queue;if(x===null)throw Error(o(311));x.lastRenderedReducer=d;var A=wi,R=A.baseQueue,B=x.pending;if(B!==null){if(R!==null){var q=R.next;R.next=B.next,B.next=q}A.baseQueue=R=B,x.pending=null}if(R!==null){B=R.next,A=A.baseState;var fe=q=null,De=null,$e=B;do{var mt=$e.lane;if((yd&mt)===mt)De!==null&&(De=De.next={lane:0,action:$e.action,hasEagerState:$e.hasEagerState,eagerState:$e.eagerState,next:null}),A=$e.hasEagerState?$e.eagerState:d(A,$e.action);else{var Vt={lane:mt,action:$e.action,hasEagerState:$e.hasEagerState,eagerState:$e.eagerState,next:null};De===null?(fe=De=Vt,q=A):De=De.next=Vt,xr.lanes|=mt,Sd|=mt}$e=$e.next}while($e!==null&&$e!==B);De===null?q=A:De.next=fe,xa(A,h.memoizedState)||(Ns=!0),h.memoizedState=A,h.baseState=q,h.baseQueue=De,x.lastRenderedState=A}if(d=x.interleaved,d!==null){R=d;do B=R.lane,xr.lanes|=B,Sd|=B,R=R.next;while(R!==d)}else R===null&&(x.lanes=0);return[h.memoizedState,x.dispatch]}function O0(d){var h=wa(),x=h.queue;if(x===null)throw Error(o(311));x.lastRenderedReducer=d;var A=x.dispatch,R=x.pending,B=h.memoizedState;if(R!==null){x.pending=null;var q=R=R.next;do B=d(B,q.action),q=q.next;while(q!==R);xa(B,h.memoizedState)||(Ns=!0),h.memoizedState=B,h.baseQueue===null&&(h.baseState=B),x.lastRenderedState=B}return[B,A]}function _2(){}function v2(d,h){var x=xr,A=wa(),R=h(),B=!xa(A.memoizedState,R);if(B&&(A.memoizedState=R,Ns=!0),A=A.queue,em(S2.bind(null,x,A,d),[d]),A.getSnapshot!==h||B||ti!==null&&ti.memoizedState.tag&1){if(x.flags|=2048,Zp(9,x2.bind(null,x,A,R,h),void 0,null),kr===null)throw Error(o(349));yd&30||y2(x,h,R)}return R}function y2(d,h,x){d.flags|=16384,d={getSnapshot:h,value:x},h=xr.updateQueue,h===null?(h={lastEffect:null,stores:null},xr.updateQueue=h,h.stores=[d]):(x=h.stores,x===null?h.stores=[d]:x.push(d))}function x2(d,h,x,A){h.value=x,h.getSnapshot=A,E2(h)&&_o(d,1,-1)}function S2(d,h,x){return x(function(){E2(h)&&_o(d,1,-1)})}function E2(d){var h=d.getSnapshot;d=d.value;try{var x=h();return!xa(d,x)}catch{return!0}}function yA(d){var h=rl();return typeof d=="function"&&(d=d()),h.memoizedState=h.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xu,lastRenderedState:d},h.queue=d,d=d.dispatch=J6.bind(null,xr,d),[h.memoizedState,d]}function Zp(d,h,x,A){return d={tag:d,create:h,destroy:x,deps:A,next:null},h=xr.updateQueue,h===null?(h={lastEffect:null,stores:null},xr.updateQueue=h,h.lastEffect=d.next=d):(x=h.lastEffect,x===null?h.lastEffect=d.next=d:(A=x.next,x.next=d,d.next=A,h.lastEffect=d)),d}function A2(){return wa().memoizedState}function U0(d,h,x,A){var R=rl();xr.flags|=d,R.memoizedState=Zp(1|h,x,void 0,A===void 0?null:A)}function H0(d,h,x,A){var R=wa();A=A===void 0?null:A;var B=void 0;if(wi!==null){var q=wi.memoizedState;if(B=q.destroy,A!==null&&gA(A,q.deps)){R.memoizedState=Zp(h,x,B,A);return}}xr.flags|=d,R.memoizedState=Zp(1|h,x,B,A)}function xA(d,h){return U0(8390656,8,d,h)}function em(d,h){return H0(2048,8,d,h)}function w2(d,h){return H0(4,2,d,h)}function M2(d,h){return H0(4,4,d,h)}function T2(d,h){if(typeof h=="function")return d=d(),h(d),function(){h(null)};if(h!=null)return d=d(),h.current=d,function(){h.current=null}}function C2(d,h,x){return x=x!=null?x.concat([d]):null,H0(4,4,T2.bind(null,h,d),x)}function SA(){}function b2(d,h){var x=wa();h=h===void 0?null:h;var A=x.memoizedState;return A!==null&&h!==null&&gA(h,A[1])?A[0]:(x.memoizedState=[d,h],d)}function R2(d,h){var x=wa();h=h===void 0?null:h;var A=x.memoizedState;return A!==null&&h!==null&&gA(h,A[1])?A[0]:(d=d(),x.memoizedState=[d,h],d)}function j6(d,h){var x=Tn;Tn=x!==0&&4>x?x:4,d(!0);var A=go.transition;go.transition={};try{d(!1),h()}finally{Tn=x,go.transition=A}}function I2(){return wa().memoizedState}function Y6(d,h,x){var A=Ql(d);x={lane:A,action:x,hasEagerState:!1,eagerState:null,next:null},P2(d)?D2(h,x):(B2(d,h,x),x=Xi(),d=_o(d,A,x),d!==null&&L2(d,h,A))}function J6(d,h,x){var A=Ql(d),R={lane:A,action:x,hasEagerState:!1,eagerState:null,next:null};if(P2(d))D2(h,R);else{B2(d,h,R);var B=d.alternate;if(d.lanes===0&&(B===null||B.lanes===0)&&(B=h.lastRenderedReducer,B!==null))try{var q=h.lastRenderedState,fe=B(q,x);if(R.hasEagerState=!0,R.eagerState=fe,xa(fe,q))return}catch{}finally{}x=Xi(),d=_o(d,A,x),d!==null&&L2(d,h,A)}}function P2(d){var h=d.alternate;return d===xr||h!==null&&h===xr}function D2(d,h){qp=k0=!0;var x=d.pending;x===null?h.next=h:(h.next=x.next,x.next=h),d.pending=h}function B2(d,h,x){kr!==null&&d.mode&1&&!(tn&2)?(d=h.interleaved,d===null?(x.next=x,Ea===null?Ea=[h]:Ea.push(h)):(x.next=d.next,d.next=x),h.interleaved=x):(d=h.pending,d===null?x.next=x:(x.next=d.next,d.next=x),h.pending=x)}function L2(d,h,x){if(x&4194240){var A=h.lanes;A&=d.pendingLanes,x|=A,h.lanes=x,KE(d,x)}}var z0={readContext:fo,useCallback:Mi,useContext:Mi,useEffect:Mi,useImperativeHandle:Mi,useInsertionEffect:Mi,useLayoutEffect:Mi,useMemo:Mi,useReducer:Mi,useRef:Mi,useState:Mi,useDebugValue:Mi,useDeferredValue:Mi,useTransition:Mi,useMutableSource:Mi,useSyncExternalStore:Mi,useId:Mi,unstable_isNewReconciler:!1},K6={readContext:fo,useCallback:function(d,h){return rl().memoizedState=[d,h===void 0?null:h],d},useContext:fo,useEffect:xA,useImperativeHandle:function(d,h,x){return x=x!=null?x.concat([d]):null,U0(4194308,4,T2.bind(null,h,d),x)},useLayoutEffect:function(d,h){return U0(4194308,4,d,h)},useInsertionEffect:function(d,h){return U0(4,2,d,h)},useMemo:function(d,h){var x=rl();return h=h===void 0?null:h,d=d(),x.memoizedState=[d,h],d},useReducer:function(d,h,x){var A=rl();return h=x!==void 0?x(h):h,A.memoizedState=A.baseState=h,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:h},A.queue=d,d=d.dispatch=Y6.bind(null,xr,d),[A.memoizedState,d]},useRef:function(d){var h=rl();return d={current:d},h.memoizedState=d},useState:yA,useDebugValue:SA,useDeferredValue:function(d){var h=yA(d),x=h[0],A=h[1];return xA(function(){var R=go.transition;go.transition={};try{A(d)}finally{go.transition=R}},[d]),x},useTransition:function(){var d=yA(!1),h=d[0];return d=j6.bind(null,d[1]),rl().memoizedState=d,[h,d]},useMutableSource:function(){},useSyncExternalStore:function(d,h,x){var A=xr,R=rl();if(nr){if(x===void 0)throw Error(o(407));x=x()}else{if(x=h(),kr===null)throw Error(o(349));yd&30||y2(A,h,x)}R.memoizedState=x;var B={value:x,getSnapshot:h};return R.queue=B,xA(S2.bind(null,A,B,d),[d]),A.flags|=2048,Zp(9,x2.bind(null,A,B,x,h),void 0,null),x},useId:function(){var d=rl(),h=kr.identifierPrefix;if(nr){var x=nl,A=tl;x=(A&~(1<<32-Gn(A)-1)).toString(32)+x,h=":"+h+"R"+x,x=Qp++,0<x&&(h+="H"+x.toString(32)),h+=":"}else x=X6++,h=":"+h+"r"+x.toString(32)+":";return d.memoizedState=h},unstable_isNewReconciler:!1},$6={readContext:fo,useCallback:b2,useContext:fo,useEffect:em,useImperativeHandle:C2,useInsertionEffect:w2,useLayoutEffect:M2,useMemo:R2,useReducer:F0,useRef:A2,useState:function(){return F0(xu)},useDebugValue:SA,useDeferredValue:function(d){var h=F0(xu),x=h[0],A=h[1];return em(function(){var R=go.transition;go.transition={};try{A(d)}finally{go.transition=R}},[d]),x},useTransition:function(){var d=F0(xu)[0],h=wa().memoizedState;return[d,h]},useMutableSource:_2,useSyncExternalStore:v2,useId:I2,unstable_isNewReconciler:!1},q6={readContext:fo,useCallback:b2,useContext:fo,useEffect:em,useImperativeHandle:C2,useInsertionEffect:w2,useLayoutEffect:M2,useMemo:R2,useReducer:O0,useRef:A2,useState:function(){return O0(xu)},useDebugValue:SA,useDeferredValue:function(d){var h=O0(xu),x=h[0],A=h[1];return em(function(){var R=go.transition;go.transition={};try{A(d)}finally{go.transition=R}},[d]),x},useTransition:function(){var d=O0(xu)[0],h=wa().memoizedState;return[d,h]},useMutableSource:_2,useSyncExternalStore:v2,useId:I2,unstable_isNewReconciler:!1};function EA(d,h){try{var x="",A=h;do x+=W6(A),A=A.return;while(A);var R=x}catch(B){R=`
Error generating stack: `+B.message+`
`+B.stack}return{value:d,source:h,stack:R}}function AA(d,h){try{console.error(h.value)}catch(x){setTimeout(function(){throw x})}}var Q6=typeof WeakMap=="function"?WeakMap:Map;function N2(d,h,x){x=el(-1,x),x.tag=3,x.payload={element:null};var A=h.value;return x.callback=function(){rv||(rv=!0,zA=A),AA(d,h)},x}function k2(d,h,x){x=el(-1,x),x.tag=3;var A=d.type.getDerivedStateFromError;if(typeof A=="function"){var R=h.value;x.payload=function(){return A(R)},x.callback=function(){AA(d,h)}}var B=d.stateNode;return B!==null&&typeof B.componentDidCatch=="function"&&(x.callback=function(){AA(d,h),typeof A!="function"&&($l===null?$l=new Set([this]):$l.add(this));var q=h.stack;this.componentDidCatch(h.value,{componentStack:q!==null?q:""})}),x}function F2(d,h,x){var A=d.pingCache;if(A===null){A=d.pingCache=new Q6;var R=new Set;A.set(h,R)}else R=A.get(h),R===void 0&&(R=new Set,A.set(h,R));R.has(x)||(R.add(x),d=d9.bind(null,d,h,x),h.then(d,d))}function O2(d){do{var h;if((h=d.tag===13)&&(h=d.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return d;d=d.return}while(d!==null);return null}function U2(d,h,x,A,R){return d.mode&1?(d.flags|=65536,d.lanes=R,d):(d===h?d.flags|=65536:(d.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(h=el(-1,1),h.tag=2,Kl(x,h))),x.lanes|=1),d)}function Ma(d){d.flags|=4}function H2(d,h){if(d!==null&&d.child===h.child)return!0;if(h.flags&16)return!1;for(d=h.child;d!==null;){if(d.flags&12854||d.subtreeFlags&12854)return!1;d=d.sibling}return!0}var tm,nm,G0,V0;if(Ge)tm=function(d,h){for(var x=h.child;x!==null;){if(x.tag===5||x.tag===6)me(d,x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===h)break;for(;x.sibling===null;){if(x.return===null||x.return===h)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},nm=function(){},G0=function(d,h,x,A,R){if(d=d.memoizedProps,d!==A){var B=h.stateNode,q=Aa(mo.current);x=ce(B,x,d,A,R,q),(h.updateQueue=x)&&Ma(h)}},V0=function(d,h,x,A){x!==A&&Ma(h)};else if(z){tm=function(d,h,x,A){for(var R=h.child;R!==null;){if(R.tag===5){var B=R.stateNode;x&&A&&(B=yt(B,R.type,R.memoizedProps,R)),me(d,B)}else if(R.tag===6)B=R.stateNode,x&&A&&(B=ft(B,R.memoizedProps,R)),me(d,B);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)B=R.child,B!==null&&(B.return=R),tm(d,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===h)break;for(;R.sibling===null;){if(R.return===null||R.return===h)return;R=R.return}R.sibling.return=R.return,R=R.sibling}};var z2=function(d,h,x,A){for(var R=h.child;R!==null;){if(R.tag===5){var B=R.stateNode;x&&A&&(B=yt(B,R.type,R.memoizedProps,R)),jt(d,B)}else if(R.tag===6)B=R.stateNode,x&&A&&(B=ft(B,R.memoizedProps,R)),jt(d,B);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)B=R.child,B!==null&&(B.return=R),z2(d,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===h)break;for(;R.sibling===null;){if(R.return===null||R.return===h)return;R=R.return}R.sibling.return=R.return,R=R.sibling}};nm=function(d,h){var x=h.stateNode;if(!H2(d,h)){d=x.containerInfo;var A=Ct(d);z2(A,h,!1,!1),x.pendingChildren=A,Ma(h),cn(d,A)}},G0=function(d,h,x,A,R){var B=d.stateNode,q=d.memoizedProps;if((d=H2(d,h))&&q===A)h.stateNode=B;else{var fe=h.stateNode,De=Aa(mo.current),$e=null;q!==A&&($e=ce(fe,x,q,A,R,De)),d&&$e===null?h.stateNode=B:(B=ht(B,$e,x,q,A,h,d,fe),Ne(B,x,A,R,De)&&Ma(h),h.stateNode=B,d?Ma(h):tm(B,h,!1,!1))}},V0=function(d,h,x,A){x!==A?(d=Aa(_d.current),x=Aa(mo.current),h.stateNode=Ae(A,d,x,h),Ma(h)):h.stateNode=d.stateNode}}else nm=function(){},G0=function(){},V0=function(){};function rm(d,h){if(!nr)switch(d.tailMode){case"hidden":h=d.tail;for(var x=null;h!==null;)h.alternate!==null&&(x=h),h=h.sibling;x===null?d.tail=null:x.sibling=null;break;case"collapsed":x=d.tail;for(var A=null;x!==null;)x.alternate!==null&&(A=x),x=x.sibling;A===null?h||d.tail===null?d.tail=null:d.tail.sibling=null:A.sibling=null}}function Ti(d){var h=d.alternate!==null&&d.alternate.child===d.child,x=0,A=0;if(h)for(var R=d.child;R!==null;)x|=R.lanes|R.childLanes,A|=R.subtreeFlags&14680064,A|=R.flags&14680064,R.return=d,R=R.sibling;else for(R=d.child;R!==null;)x|=R.lanes|R.childLanes,A|=R.subtreeFlags,A|=R.flags,R.return=d,R=R.sibling;return d.subtreeFlags|=A,d.childLanes=x,h}function Z6(d,h,x){var A=h.pendingProps;switch(lA(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ti(h),null;case 1:return tr(h.type)&&sn(),Ti(h),null;case 3:return A=h.stateNode,vd(),tt(Dt),tt(wt),mA(),A.pendingContext&&(A.context=A.pendingContext,A.pendingContext=null),(d===null||d.child===null)&&(Yp(h)?Ma(h):d===null||d.memoizedState.isDehydrated&&!(h.flags&256)||(h.flags|=1024,Xo!==null&&(WA(Xo),Xo=null))),nm(d,h),Ti(h),null;case 5:hA(h),x=Aa(_d.current);var R=h.type;if(d!==null&&h.stateNode!=null)G0(d,h,R,A,x),d.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!A){if(h.stateNode===null)throw Error(o(166));return Ti(h),null}if(d=Aa(mo.current),Yp(h)){if(!pe)throw Error(o(175));d=N(h.stateNode,h.type,h.memoizedProps,x,d,h,!jp),h.updateQueue=d,d!==null&&Ma(h)}else{var B=ie(R,A,x,d,h);tm(B,h,!1,!1),h.stateNode=B,Ne(B,R,A,x,d)&&Ma(h)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return Ti(h),null;case 6:if(d&&h.stateNode!=null)V0(d,h,d.memoizedProps,A);else{if(typeof A!="string"&&h.stateNode===null)throw Error(o(166));if(d=Aa(_d.current),x=Aa(mo.current),Yp(h)){if(!pe)throw Error(o(176));if(d=h.stateNode,A=h.memoizedProps,(x=H(d,A,h,!jp))&&(R=Bs,R!==null))switch(B=(R.mode&1)!==0,R.tag){case 3:_e(R.stateNode.containerInfo,d,A,B);break;case 5:we(R.type,R.memoizedProps,R.stateNode,d,A,B)}x&&Ma(h)}else h.stateNode=Ae(A,d,x,h)}return Ti(h),null;case 13:if(tt(ur),A=h.memoizedState,nr&&Ls!==null&&h.mode&1&&!(h.flags&128)){for(d=Ls;d;)d=Nt(d);return md(),h.flags|=98560,h}if(A!==null&&A.dehydrated!==null){if(A=Yp(h),d===null){if(!A)throw Error(o(318));if(!pe)throw Error(o(344));if(d=h.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));ne(d,h)}else md(),!(h.flags&128)&&(h.memoizedState=null),h.flags|=4;return Ti(h),null}return Xo!==null&&(WA(Xo),Xo=null),h.flags&128?(h.lanes=x,h):(A=A!==null,x=!1,d===null?Yp(h):x=d.memoizedState!==null,A&&!x&&(h.child.flags|=8192,h.mode&1&&(d===null||ur.current&1?Wr===0&&(Wr=3):jA())),h.updateQueue!==null&&(h.flags|=4),Ti(h),null);case 4:return vd(),nm(d,h),d===null&&Be(h.stateNode.containerInfo),Ti(h),null;case 10:return nA(h.type._context),Ti(h),null;case 17:return tr(h.type)&&sn(),Ti(h),null;case 19:if(tt(ur),R=h.memoizedState,R===null)return Ti(h),null;if(A=(h.flags&128)!==0,B=R.rendering,B===null)if(A)rm(R,!1);else{if(Wr!==0||d!==null&&d.flags&128)for(d=h.child;d!==null;){if(B=L0(d),B!==null){for(h.flags|=128,rm(R,!1),d=B.updateQueue,d!==null&&(h.updateQueue=d,h.flags|=4),h.subtreeFlags=0,d=x,A=h.child;A!==null;)x=A,R=d,x.flags&=14680066,B=x.alternate,B===null?(x.childLanes=0,x.lanes=R,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=B.childLanes,x.lanes=B.lanes,x.child=B.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=B.memoizedProps,x.memoizedState=B.memoizedState,x.updateQueue=B.updateQueue,x.type=B.type,R=B.dependencies,x.dependencies=R===null?null:{lanes:R.lanes,firstContext:R.firstContext}),A=A.sibling;return ze(ur,ur.current&1|2),h.child}d=d.sibling}R.tail!==null&&ei()>HA&&(h.flags|=128,A=!0,rm(R,!1),h.lanes=4194304)}else{if(!A)if(d=L0(B),d!==null){if(h.flags|=128,A=!0,d=d.updateQueue,d!==null&&(h.updateQueue=d,h.flags|=4),rm(R,!0),R.tail===null&&R.tailMode==="hidden"&&!B.alternate&&!nr)return Ti(h),null}else 2*ei()-R.renderingStartTime>HA&&x!==1073741824&&(h.flags|=128,A=!0,rm(R,!1),h.lanes=4194304);R.isBackwards?(B.sibling=h.child,h.child=B):(d=R.last,d!==null?d.sibling=B:h.child=B,R.last=B)}return R.tail!==null?(h=R.tail,R.rendering=h,R.tail=h.sibling,R.renderingStartTime=ei(),h.sibling=null,d=ur.current,ze(ur,A?d&1|2:d&1),h):(Ti(h),null);case 22:case 23:return XA(),A=h.memoizedState!==null,d!==null&&d.memoizedState!==null!==A&&(h.flags|=8192),A&&h.mode&1?ks&1073741824&&(Ti(h),Ge&&h.subtreeFlags&6&&(h.flags|=8192)):Ti(h),null;case 24:return null;case 25:return null}throw Error(o(156,h.tag))}var e9=a.ReactCurrentOwner,Ns=!1;function Wi(d,h,x,A){h.child=d===null?m2(h,null,x,A):gd(h,d.child,x,A)}function G2(d,h,x,A,R){x=x.render;var B=h.ref;return dd(h,R),A=_A(d,h,x,A,B,R),x=vA(),d!==null&&!Ns?(h.updateQueue=d.updateQueue,h.flags&=-2053,d.lanes&=~R,il(d,h,R)):(nr&&x&&aA(h),h.flags|=1,Wi(d,h,A,R),h.child)}function V2(d,h,x,A,R){if(d===null){var B=x.type;return typeof B=="function"&&!YA(B)&&B.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(h.tag=15,h.type=B,W2(d,h,B,A,R)):(d=uv(x.type,null,A,h,h.mode,R),d.ref=h.ref,d.return=h,h.child=d)}if(B=d.child,!(d.lanes&R)){var q=B.memoizedProps;if(x=x.compare,x=x!==null?x:M0,x(q,A)&&d.ref===h.ref)return il(d,h,R)}return h.flags|=1,d=ec(B,A),d.ref=h.ref,d.return=h,h.child=d}function W2(d,h,x,A,R){if(d!==null&&M0(d.memoizedProps,A)&&d.ref===h.ref)if(Ns=!1,(d.lanes&R)!==0)d.flags&131072&&(Ns=!0);else return h.lanes=d.lanes,il(d,h,R);return wA(d,h,x,A,R)}function X2(d,h,x){var A=h.pendingProps,R=A.children,B=d!==null?d.memoizedState:null;if(A.mode==="hidden")if(!(h.mode&1))h.memoizedState={baseLanes:0,cachePool:null},ze(xd,ks),ks|=x;else if(x&1073741824)h.memoizedState={baseLanes:0,cachePool:null},A=B!==null?B.baseLanes:x,ze(xd,ks),ks|=A;else return d=B!==null?B.baseLanes|x:x,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:d,cachePool:null},h.updateQueue=null,ze(xd,ks),ks|=d,null;else B!==null?(A=B.baseLanes|x,h.memoizedState=null):A=x,ze(xd,ks),ks|=A;return Wi(d,h,R,x),h.child}function j2(d,h){var x=h.ref;(d===null&&x!==null||d!==null&&d.ref!==x)&&(h.flags|=512,h.flags|=2097152)}function wA(d,h,x,A,R){var B=tr(x)?An:wt.current;return B=Pn(h,B),dd(h,R),x=_A(d,h,x,A,B,R),A=vA(),d!==null&&!Ns?(h.updateQueue=d.updateQueue,h.flags&=-2053,d.lanes&=~R,il(d,h,R)):(nr&&A&&aA(h),h.flags|=1,Wi(d,h,x,R),h.child)}function Y2(d,h,x,A,R){if(tr(x)){var B=!0;Yt(h)}else B=!1;if(dd(h,R),h.stateNode===null)d!==null&&(d.alternate=null,h.alternate=null,h.flags|=2),a2(h,x,A),oA(h,x,A,R),A=!0;else if(d===null){var q=h.stateNode,fe=h.memoizedProps;q.props=fe;var De=q.context,$e=x.contextType;typeof $e=="object"&&$e!==null?$e=fo($e):($e=tr(x)?An:wt.current,$e=Pn(h,$e));var mt=x.getDerivedStateFromProps,Vt=typeof mt=="function"||typeof q.getSnapshotBeforeUpdate=="function";Vt||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(fe!==A||De!==$e)&&l2(h,q,A,$e),Jl=!1;var Bt=h.memoizedState;q.state=Bt,R0(h,A,q,R),De=h.memoizedState,fe!==A||Bt!==De||Dt.current||Jl?(typeof mt=="function"&&(sA(h,x,mt,A),De=h.memoizedState),(fe=Jl||o2(h,x,fe,A,Bt,De,$e))?(Vt||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount()),typeof q.componentDidMount=="function"&&(h.flags|=4194308)):(typeof q.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=A,h.memoizedState=De),q.props=A,q.state=De,q.context=$e,A=fe):(typeof q.componentDidMount=="function"&&(h.flags|=4194308),A=!1)}else{q=h.stateNode,n2(d,h),fe=h.memoizedProps,$e=h.type===h.elementType?fe:Wo(h.type,fe),q.props=$e,Vt=h.pendingProps,Bt=q.context,De=x.contextType,typeof De=="object"&&De!==null?De=fo(De):(De=tr(x)?An:wt.current,De=Pn(h,De));var On=x.getDerivedStateFromProps;(mt=typeof On=="function"||typeof q.getSnapshotBeforeUpdate=="function")||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(fe!==Vt||Bt!==De)&&l2(h,q,A,De),Jl=!1,Bt=h.memoizedState,q.state=Bt,R0(h,A,q,R);var Tt=h.memoizedState;fe!==Vt||Bt!==Tt||Dt.current||Jl?(typeof On=="function"&&(sA(h,x,On,A),Tt=h.memoizedState),($e=Jl||o2(h,x,$e,A,Bt,Tt,De)||!1)?(mt||typeof q.UNSAFE_componentWillUpdate!="function"&&typeof q.componentWillUpdate!="function"||(typeof q.componentWillUpdate=="function"&&q.componentWillUpdate(A,Tt,De),typeof q.UNSAFE_componentWillUpdate=="function"&&q.UNSAFE_componentWillUpdate(A,Tt,De)),typeof q.componentDidUpdate=="function"&&(h.flags|=4),typeof q.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof q.componentDidUpdate!="function"||fe===d.memoizedProps&&Bt===d.memoizedState||(h.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||fe===d.memoizedProps&&Bt===d.memoizedState||(h.flags|=1024),h.memoizedProps=A,h.memoizedState=Tt),q.props=A,q.state=Tt,q.context=De,A=$e):(typeof q.componentDidUpdate!="function"||fe===d.memoizedProps&&Bt===d.memoizedState||(h.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||fe===d.memoizedProps&&Bt===d.memoizedState||(h.flags|=1024),A=!1)}return MA(d,h,x,A,B,R)}function MA(d,h,x,A,R,B){j2(d,h);var q=(h.flags&128)!==0;if(!A&&!q)return R&&hn(h,x,!1),il(d,h,B);A=h.stateNode,e9.current=h;var fe=q&&typeof x.getDerivedStateFromError!="function"?null:A.render();return h.flags|=1,d!==null&&q?(h.child=gd(h,d.child,null,B),h.child=gd(h,null,fe,B)):Wi(d,h,fe,B),h.memoizedState=A.state,R&&hn(h,x,!0),h.child}function J2(d){var h=d.stateNode;h.pendingContext?en(d,h.pendingContext,h.pendingContext!==h.context):h.context&&en(d,h.context,!1),dA(d,h.containerInfo)}function K2(d,h,x,A,R){return md(),fA(R),h.flags|=256,Wi(d,h,x,A),h.child}var W0={dehydrated:null,treeContext:null,retryLane:0};function X0(d){return{baseLanes:d,cachePool:null}}function $2(d,h,x){var A=h.pendingProps,R=ur.current,B=!1,q=(h.flags&128)!==0,fe;if((fe=q)||(fe=d!==null&&d.memoizedState===null?!1:(R&2)!==0),fe?(B=!0,h.flags&=-129):(d===null||d.memoizedState!==null)&&(R|=1),ze(ur,R&1),d===null)return uA(h),d=h.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?(h.mode&1?Pt(d)?h.lanes=8:h.lanes=1073741824:h.lanes=1,null):(R=A.children,d=A.fallback,B?(A=h.mode,B=h.child,R={mode:"hidden",children:R},!(A&1)&&B!==null?(B.childLanes=0,B.pendingProps=R):B=fv(R,A,0,null),d=Tu(d,A,x,null),B.return=h,d.return=h,B.sibling=d,h.child=B,h.child.memoizedState=X0(x),h.memoizedState=W0,d):TA(h,R));if(R=d.memoizedState,R!==null){if(fe=R.dehydrated,fe!==null){if(q)return h.flags&256?(h.flags&=-257,j0(d,h,x,Error(o(422)))):h.memoizedState!==null?(h.child=d.child,h.flags|=128,null):(B=A.fallback,R=h.mode,A=fv({mode:"visible",children:A.children},R,0,null),B=Tu(B,R,x,null),B.flags|=2,A.return=h,B.return=h,A.sibling=B,h.child=A,h.mode&1&&gd(h,d.child,null,x),h.child.memoizedState=X0(x),h.memoizedState=W0,B);if(!(h.mode&1))h=j0(d,h,x,null);else if(Pt(fe))h=j0(d,h,x,Error(o(419)));else if(A=(x&d.childLanes)!==0,Ns||A){if(A=kr,A!==null){switch(x&-x){case 4:B=2;break;case 16:B=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:B=32;break;case 536870912:B=268435456;break;default:B=0}A=B&(A.suspendedLanes|x)?0:B,A!==0&&A!==R.retryLane&&(R.retryLane=A,_o(d,A,-1))}jA(),h=j0(d,h,x,Error(o(421)))}else xt(fe)?(h.flags|=128,h.child=d.child,h=h9.bind(null,d),In(fe,h),h=null):(x=R.treeContext,pe&&(Ls=Bn(fe),Bs=h,nr=!0,Xo=null,jp=!1,x!==null&&(ho[po++]=tl,ho[po++]=nl,ho[po++]=vu,tl=x.id,nl=x.overflow,vu=h)),h=TA(h,h.pendingProps.children),h.flags|=4096);return h}return B?(A=Q2(d,h,A.children,A.fallback,x),B=h.child,R=d.child.memoizedState,B.memoizedState=R===null?X0(x):{baseLanes:R.baseLanes|x,cachePool:null},B.childLanes=d.childLanes&~x,h.memoizedState=W0,A):(x=q2(d,h,A.children,x),h.memoizedState=null,x)}return B?(A=Q2(d,h,A.children,A.fallback,x),B=h.child,R=d.child.memoizedState,B.memoizedState=R===null?X0(x):{baseLanes:R.baseLanes|x,cachePool:null},B.childLanes=d.childLanes&~x,h.memoizedState=W0,A):(x=q2(d,h,A.children,x),h.memoizedState=null,x)}function TA(d,h){return h=fv({mode:"visible",children:h},d.mode,0,null),h.return=d,d.child=h}function q2(d,h,x,A){var R=d.child;return d=R.sibling,x=ec(R,{mode:"visible",children:x}),!(h.mode&1)&&(x.lanes=A),x.return=h,x.sibling=null,d!==null&&(A=h.deletions,A===null?(h.deletions=[d],h.flags|=16):A.push(d)),h.child=x}function Q2(d,h,x,A,R){var B=h.mode;d=d.child;var q=d.sibling,fe={mode:"hidden",children:x};return!(B&1)&&h.child!==d?(x=h.child,x.childLanes=0,x.pendingProps=fe,h.deletions=null):(x=ec(d,fe),x.subtreeFlags=d.subtreeFlags&14680064),q!==null?A=ec(q,A):(A=Tu(A,B,R,null),A.flags|=2),A.return=h,x.return=h,x.sibling=A,h.child=x,A}function j0(d,h,x,A){return A!==null&&fA(A),gd(h,d.child,null,x),d=TA(h,h.pendingProps.children),d.flags|=2,h.memoizedState=null,d}function Z2(d,h,x){d.lanes|=h;var A=d.alternate;A!==null&&(A.lanes|=h),rA(d.return,h,x)}function CA(d,h,x,A,R){var B=d.memoizedState;B===null?d.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:A,tail:x,tailMode:R}:(B.isBackwards=h,B.rendering=null,B.renderingStartTime=0,B.last=A,B.tail=x,B.tailMode=R)}function eD(d,h,x){var A=h.pendingProps,R=A.revealOrder,B=A.tail;if(Wi(d,h,A.children,x),A=ur.current,A&2)A=A&1|2,h.flags|=128;else{if(d!==null&&d.flags&128)e:for(d=h.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&Z2(d,x,h);else if(d.tag===19)Z2(d,x,h);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break e;for(;d.sibling===null;){if(d.return===null||d.return===h)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}A&=1}if(ze(ur,A),!(h.mode&1))h.memoizedState=null;else switch(R){case"forwards":for(x=h.child,R=null;x!==null;)d=x.alternate,d!==null&&L0(d)===null&&(R=x),x=x.sibling;x=R,x===null?(R=h.child,h.child=null):(R=x.sibling,x.sibling=null),CA(h,!1,R,x,B);break;case"backwards":for(x=null,R=h.child,h.child=null;R!==null;){if(d=R.alternate,d!==null&&L0(d)===null){h.child=R;break}d=R.sibling,R.sibling=x,x=R,R=d}CA(h,!0,x,null,B);break;case"together":CA(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function il(d,h,x){if(d!==null&&(h.dependencies=d.dependencies),Sd|=h.lanes,!(x&h.childLanes))return null;if(d!==null&&h.child!==d.child)throw Error(o(153));if(h.child!==null){for(d=h.child,x=ec(d,d.pendingProps),h.child=x,x.return=h;d.sibling!==null;)d=d.sibling,x=x.sibling=ec(d,d.pendingProps),x.return=h;x.sibling=null}return h.child}function t9(d,h,x){switch(h.tag){case 3:J2(h),md();break;case 5:g2(h);break;case 1:tr(h.type)&&Yt(h);break;case 4:dA(h,h.stateNode.containerInfo);break;case 10:t2(h,h.type._context,h.memoizedProps.value);break;case 13:var A=h.memoizedState;if(A!==null)return A.dehydrated!==null?(ze(ur,ur.current&1),h.flags|=128,null):x&h.child.childLanes?$2(d,h,x):(ze(ur,ur.current&1),d=il(d,h,x),d!==null?d.sibling:null);ze(ur,ur.current&1);break;case 19:if(A=(x&h.childLanes)!==0,d.flags&128){if(A)return eD(d,h,x);h.flags|=128}var R=h.memoizedState;if(R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),ze(ur,ur.current),A)break;return null;case 22:case 23:return h.lanes=0,X2(d,h,x)}return il(d,h,x)}function n9(d,h){switch(lA(h),h.tag){case 1:return tr(h.type)&&sn(),d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 3:return vd(),tt(Dt),tt(wt),mA(),d=h.flags,d&65536&&!(d&128)?(h.flags=d&-65537|128,h):null;case 5:return hA(h),null;case 13:if(tt(ur),d=h.memoizedState,d!==null&&d.dehydrated!==null){if(h.alternate===null)throw Error(o(340));md()}return d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 19:return tt(ur),null;case 4:return vd(),null;case 10:return nA(h.type._context),null;case 22:case 23:return XA(),null;case 24:return null;default:return null}}var Y0=!1,Su=!1,r9=typeof WeakSet=="function"?WeakSet:Set,at=null;function J0(d,h){var x=d.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(A){hs(d,h,A)}else x.current=null}function bA(d,h,x){try{x()}catch(A){hs(d,h,A)}}var tD=!1;function i9(d,h){for(K(d.containerInfo),at=h;at!==null;)if(d=at,h=d.child,(d.subtreeFlags&1028)!==0&&h!==null)h.return=d,at=h;else for(;at!==null;){d=at;try{var x=d.alternate;if(d.flags&1024)switch(d.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var A=x.memoizedProps,R=x.memoizedState,B=d.stateNode,q=B.getSnapshotBeforeUpdate(d.elementType===d.type?A:Wo(d.type,A),R);B.__reactInternalSnapshotBeforeUpdate=q}break;case 3:Ge&&We(d.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(fe){hs(d,d.return,fe)}if(h=d.sibling,h!==null){h.return=d.return,at=h;break}at=d.return}return x=tD,tD=!1,x}function Eu(d,h,x){var A=h.updateQueue;if(A=A!==null?A.lastEffect:null,A!==null){var R=A=A.next;do{if((R.tag&d)===d){var B=R.destroy;R.destroy=void 0,B!==void 0&&bA(h,x,B)}R=R.next}while(R!==A)}}function im(d,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var x=h=h.next;do{if((x.tag&d)===d){var A=x.create;x.destroy=A()}x=x.next}while(x!==h)}}function RA(d){var h=d.ref;if(h!==null){var x=d.stateNode;switch(d.tag){case 5:d=Y(x);break;default:d=x}typeof h=="function"?h(d):h.current=d}}function nD(d,h,x){if(ya&&typeof ya.onCommitFiberUnmount=="function")try{ya.onCommitFiberUnmount(A0,h)}catch{}switch(h.tag){case 0:case 11:case 14:case 15:if(d=h.updateQueue,d!==null&&(d=d.lastEffect,d!==null)){var A=d=d.next;do{var R=A,B=R.destroy;R=R.tag,B!==void 0&&(R&2||R&4)&&bA(h,x,B),A=A.next}while(A!==d)}break;case 1:if(J0(h,x),d=h.stateNode,typeof d.componentWillUnmount=="function")try{d.props=h.memoizedProps,d.state=h.memoizedState,d.componentWillUnmount()}catch(q){hs(h,x,q)}break;case 5:J0(h,x);break;case 4:Ge?lD(d,h,x):z&&z&&(h=h.stateNode.containerInfo,x=Ct(h),Ot(h,x))}}function rD(d,h,x){for(var A=h;;)if(nD(d,A,x),A.child===null||Ge&&A.tag===4){if(A===h)break;for(;A.sibling===null;){if(A.return===null||A.return===h)return;A=A.return}A.sibling.return=A.return,A=A.sibling}else A.child.return=A,A=A.child}function iD(d){var h=d.alternate;h!==null&&(d.alternate=null,iD(h)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(h=d.stateNode,h!==null&&oe(h)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function sD(d){return d.tag===5||d.tag===3||d.tag===4}function oD(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||sD(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function aD(d){if(Ge){e:{for(var h=d.return;h!==null;){if(sD(h))break e;h=h.return}throw Error(o(160))}var x=h;switch(x.tag){case 5:h=x.stateNode,x.flags&32&&(je(h),x.flags&=-33),x=oD(d),PA(d,x,h);break;case 3:case 4:h=x.stateNode.containerInfo,x=oD(d),IA(d,x,h);break;default:throw Error(o(161))}}}function IA(d,h,x){var A=d.tag;if(A===5||A===6)d=d.stateNode,h?Ye(x,d,h):_t(x,d);else if(A!==4&&(d=d.child,d!==null))for(IA(d,h,x),d=d.sibling;d!==null;)IA(d,h,x),d=d.sibling}function PA(d,h,x){var A=d.tag;if(A===5||A===6)d=d.stateNode,h?Et(x,d,h):Ze(x,d);else if(A!==4&&(d=d.child,d!==null))for(PA(d,h,x),d=d.sibling;d!==null;)PA(d,h,x),d=d.sibling}function lD(d,h,x){for(var A=h,R=!1,B,q;;){if(!R){R=A.return;e:for(;;){if(R===null)throw Error(o(160));switch(B=R.stateNode,R.tag){case 5:q=!1;break e;case 3:B=B.containerInfo,q=!0;break e;case 4:B=B.containerInfo,q=!0;break e}R=R.return}R=!0}if(A.tag===5||A.tag===6)rD(d,A,x),q?Pe(B,A.stateNode):re(B,A.stateNode);else if(A.tag===18)q?J(B,A.stateNode):Z(B,A.stateNode);else if(A.tag===4){if(A.child!==null){B=A.stateNode.containerInfo,q=!0,A.child.return=A,A=A.child;continue}}else if(nD(d,A,x),A.child!==null){A.child.return=A,A=A.child;continue}if(A===h)break;for(;A.sibling===null;){if(A.return===null||A.return===h)return;A=A.return,A.tag===4&&(R=!1)}A.sibling.return=A.return,A=A.sibling}}function DA(d,h){if(Ge){switch(h.tag){case 0:case 11:case 14:case 15:Eu(3,h,h.return),im(3,h),Eu(5,h,h.return);return;case 1:return;case 5:var x=h.stateNode;if(x!=null){var A=h.memoizedProps;d=d!==null?d.memoizedProps:A;var R=h.type,B=h.updateQueue;h.updateQueue=null,B!==null&&St(x,B,R,d,A,h)}return;case 6:if(h.stateNode===null)throw Error(o(162));x=h.memoizedProps,He(h.stateNode,d!==null?d.memoizedProps:x,x);return;case 3:pe&&d!==null&&d.memoizedState.isDehydrated&&G(h.stateNode.containerInfo);return;case 12:return;case 13:K0(h);return;case 19:K0(h);return;case 17:return}throw Error(o(163))}switch(h.tag){case 0:case 11:case 14:case 15:Eu(3,h,h.return),im(3,h),Eu(5,h,h.return);return;case 12:return;case 13:K0(h);return;case 19:K0(h);return;case 3:pe&&d!==null&&d.memoizedState.isDehydrated&&G(h.stateNode.containerInfo);break;case 22:case 23:return}e:if(z){switch(h.tag){case 1:case 5:case 6:break e;case 3:case 4:h=h.stateNode,Ot(h.containerInfo,h.pendingChildren);break e}throw Error(o(163))}}function K0(d){var h=d.updateQueue;if(h!==null){d.updateQueue=null;var x=d.stateNode;x===null&&(x=d.stateNode=new r9),h.forEach(function(A){var R=p9.bind(null,d,A);x.has(A)||(x.add(A),A.then(R,R))})}}function s9(d,h){for(at=h;at!==null;){h=at;var x=h.deletions;if(x!==null)for(var A=0;A<x.length;A++){var R=x[A];try{var B=d;Ge?lD(B,R,h):rD(B,R,h);var q=R.alternate;q!==null&&(q.return=null),R.return=null}catch(Mt){hs(R,h,Mt)}}if(x=h.child,h.subtreeFlags&12854&&x!==null)x.return=h,at=x;else for(;at!==null;){h=at;try{var fe=h.flags;if(fe&32&&Ge&&je(h.stateNode),fe&512){var De=h.alternate;if(De!==null){var $e=De.ref;$e!==null&&(typeof $e=="function"?$e(null):$e.current=null)}}if(fe&8192)switch(h.tag){case 13:if(h.memoizedState!==null){var mt=h.alternate;(mt===null||mt.memoizedState===null)&&(UA=ei())}break;case 22:var Vt=h.memoizedState!==null,Bt=h.alternate,On=Bt!==null&&Bt.memoizedState!==null;if(x=h,Ge){e:if(A=x,R=Vt,B=null,Ge)for(var Tt=A;;){if(Tt.tag===5){if(B===null){B=Tt;var Ci=Tt.stateNode;R?ee(Ci):ue(Tt.stateNode,Tt.memoizedProps)}}else if(Tt.tag===6){if(B===null){var yo=Tt.stateNode;R?Te(yo):Re(yo,Tt.memoizedProps)}}else if((Tt.tag!==22&&Tt.tag!==23||Tt.memoizedState===null||Tt===A)&&Tt.child!==null){Tt.child.return=Tt,Tt=Tt.child;continue}if(Tt===A)break;for(;Tt.sibling===null;){if(Tt.return===null||Tt.return===A)break e;B===Tt&&(B=null),Tt=Tt.return}B===Tt&&(B=null),Tt.sibling.return=Tt.return,Tt=Tt.sibling}}if(Vt&&!On&&x.mode&1){at=x;for(var Ee=x.child;Ee!==null;){for(x=at=Ee;at!==null;){A=at;var he=A.child;switch(A.tag){case 0:case 11:case 14:case 15:Eu(4,A,A.return);break;case 1:J0(A,A.return);var be=A.stateNode;if(typeof be.componentWillUnmount=="function"){var ct=A.return;try{be.props=A.memoizedProps,be.state=A.memoizedState,be.componentWillUnmount()}catch(Mt){hs(A,ct,Mt)}}break;case 5:J0(A,A.return);break;case 22:if(A.memoizedState!==null){fD(x);continue}}he!==null?(he.return=A,at=he):fD(x)}Ee=Ee.sibling}}}switch(fe&4102){case 2:aD(h),h.flags&=-3;break;case 6:aD(h),h.flags&=-3,DA(h.alternate,h);break;case 4096:h.flags&=-4097;break;case 4100:h.flags&=-4097,DA(h.alternate,h);break;case 4:DA(h.alternate,h)}}catch(Mt){hs(h,h.return,Mt)}if(x=h.sibling,x!==null){x.return=h.return,at=x;break}at=h.return}}}function o9(d,h,x){at=d,cD(d)}function cD(d,h,x){for(var A=(d.mode&1)!==0;at!==null;){var R=at,B=R.child;if(R.tag===22&&A){var q=R.memoizedState!==null||Y0;if(!q){var fe=R.alternate,De=fe!==null&&fe.memoizedState!==null||Su;fe=Y0;var $e=Su;if(Y0=q,(Su=De)&&!$e)for(at=R;at!==null;)q=at,De=q.child,q.tag===22&&q.memoizedState!==null?dD(R):De!==null?(De.return=q,at=De):dD(R);for(;B!==null;)at=B,cD(B),B=B.sibling;at=R,Y0=fe,Su=$e}uD(d)}else R.subtreeFlags&8772&&B!==null?(B.return=R,at=B):uD(d)}}function uD(d){for(;at!==null;){var h=at;if(h.flags&8772){var x=h.alternate;try{if(h.flags&8772)switch(h.tag){case 0:case 11:case 15:Su||im(5,h);break;case 1:var A=h.stateNode;if(h.flags&4&&!Su)if(x===null)A.componentDidMount();else{var R=h.elementType===h.type?x.memoizedProps:Wo(h.type,x.memoizedProps);A.componentDidUpdate(R,x.memoizedState,A.__reactInternalSnapshotBeforeUpdate)}var B=h.updateQueue;B!==null&&i2(h,B,A);break;case 3:var q=h.updateQueue;if(q!==null){if(x=null,h.child!==null)switch(h.child.tag){case 5:x=Y(h.child.stateNode);break;case 1:x=h.child.stateNode}i2(h,q,x)}break;case 5:var fe=h.stateNode;x===null&&h.flags&4&&nt(fe,h.type,h.memoizedProps,h);break;case 6:break;case 4:break;case 12:break;case 13:if(pe&&h.memoizedState===null){var De=h.alternate;if(De!==null){var $e=De.memoizedState;if($e!==null){var mt=$e.dehydrated;mt!==null&&j(mt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Su||h.flags&512&&RA(h)}catch(Vt){hs(h,h.return,Vt)}}if(h===d){at=null;break}if(x=h.sibling,x!==null){x.return=h.return,at=x;break}at=h.return}}function fD(d){for(;at!==null;){var h=at;if(h===d){at=null;break}var x=h.sibling;if(x!==null){x.return=h.return,at=x;break}at=h.return}}function dD(d){for(;at!==null;){var h=at;try{switch(h.tag){case 0:case 11:case 15:var x=h.return;try{im(4,h)}catch(De){hs(h,x,De)}break;case 1:var A=h.stateNode;if(typeof A.componentDidMount=="function"){var R=h.return;try{A.componentDidMount()}catch(De){hs(h,R,De)}}var B=h.return;try{RA(h)}catch(De){hs(h,B,De)}break;case 5:var q=h.return;try{RA(h)}catch(De){hs(h,q,De)}}}catch(De){hs(h,h.return,De)}if(h===d){at=null;break}var fe=h.sibling;if(fe!==null){fe.return=h.return,at=fe;break}at=h.return}}var $0=0,q0=1,Q0=2,Z0=3,ev=4;if(typeof Symbol=="function"&&Symbol.for){var sm=Symbol.for;$0=sm("selector.component"),q0=sm("selector.has_pseudo_class"),Q0=sm("selector.role"),Z0=sm("selector.test_id"),ev=sm("selector.text")}function BA(d){var h=Me(d);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(o(364));return h}if(d=O(d),d===null)throw Error(o(362));return d.stateNode.current}function LA(d,h){switch(h.$$typeof){case $0:if(d.type===h.value)return!0;break;case q0:e:{h=h.value,d=[d,0];for(var x=0;x<d.length;){var A=d[x++],R=d[x++],B=h[R];if(A.tag!==5||!ve(A)){for(;B!=null&&LA(A,B);)R++,B=h[R];if(R===h.length){h=!0;break e}else for(A=A.child;A!==null;)d.push(A,R),A=A.sibling}}h=!1}return h;case Q0:if(d.tag===5&&Ce(d.stateNode,h.value))return!0;break;case ev:if((d.tag===5||d.tag===6)&&(d=Se(d),d!==null&&0<=d.indexOf(h.value)))return!0;break;case Z0:if(d.tag===5&&(d=d.memoizedProps["data-testname"],typeof d=="string"&&d.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function NA(d){switch(d.$$typeof){case $0:return"<"+(b(d.value)||"Unknown")+">";case q0:return":has("+(NA(d)||"")+")";case Q0:return'[role="'+d.value+'"]';case ev:return'"'+d.value+'"';case Z0:return'[data-testname="'+d.value+'"]';default:throw Error(o(365))}}function hD(d,h){var x=[];d=[d,0];for(var A=0;A<d.length;){var R=d[A++],B=d[A++],q=h[B];if(R.tag!==5||!ve(R)){for(;q!=null&&LA(R,q);)B++,q=h[B];if(B===h.length)x.push(R);else for(R=R.child;R!==null;)d.push(R,B),R=R.sibling}}return x}function kA(d,h){if(!V)throw Error(o(363));d=BA(d),d=hD(d,h),h=[],d=Array.from(d);for(var x=0;x<d.length;){var A=d[x++];if(A.tag===5)ve(A)||h.push(A.stateNode);else for(A=A.child;A!==null;)d.push(A),A=A.sibling}return h}var a9=Math.ceil,tv=a.ReactCurrentDispatcher,FA=a.ReactCurrentOwner,br=a.ReactCurrentBatchConfig,tn=0,kr=null,Fr=null,hi=0,ks=0,xd=bt(0),Wr=0,om=null,Sd=0,nv=0,OA=0,am=null,fs=null,UA=0,HA=1/0;function Ed(){HA=ei()+500}var rv=!1,zA=null,$l=null,iv=!1,ql=null,sv=0,lm=0,GA=null,ov=-1,av=0;function Xi(){return tn&6?ei():ov!==-1?ov:ov=ei()}function Ql(d){return d.mode&1?tn&2&&hi!==0?hi&-hi:V6.transition!==null?(av===0&&(d=x0,x0<<=1,!(x0&4194240)&&(x0=64),av=d),av):(d=Tn,d!==0?d:ye()):1}function _o(d,h,x){if(50<lm)throw lm=0,GA=null,Error(o(185));var A=lv(d,h);return A===null?null:(Xp(A,h,x),(!(tn&2)||A!==kr)&&(A===kr&&(!(tn&2)&&(nv|=h),Wr===4&&Zl(A,hi)),ds(A,x),h===1&&tn===0&&!(d.mode&1)&&(Ed(),w0&&Sa())),A)}function lv(d,h){d.lanes|=h;var x=d.alternate;for(x!==null&&(x.lanes|=h),x=d,d=d.return;d!==null;)d.childLanes|=h,x=d.alternate,x!==null&&(x.childLanes|=h),x=d,d=d.return;return x.tag===3?x.stateNode:null}function ds(d,h){var x=d.callbackNode;L6(d,h);var A=E0(d,d===kr?hi:0);if(A===0)x!==null&&ZP(x),d.callbackNode=null,d.callbackPriority=0;else if(h=A&-A,d.callbackPriority!==h){if(x!=null&&ZP(x),h===1)d.tag===0?G6(mD.bind(null,d)):e2(mD.bind(null,d)),Ue?Ke(function(){tn===0&&Sa()}):$E(qE,Sa),x=null;else{switch(QP(A)){case 1:x=qE;break;case 4:x=O6;break;case 16:x=QE;break;case 536870912:x=U6;break;default:x=QE}x=wD(x,pD.bind(null,d))}d.callbackPriority=h,d.callbackNode=x}}function pD(d,h){if(ov=-1,av=0,tn&6)throw Error(o(327));var x=d.callbackNode;if(Mu()&&d.callbackNode!==x)return null;var A=E0(d,d===kr?hi:0);if(A===0)return null;if(A&30||A&d.expiredLanes||h)h=cv(d,A);else{h=A;var R=tn;tn|=2;var B=vD();(kr!==d||hi!==h)&&(Ed(),Au(d,h));do try{u9();break}catch(fe){_D(d,fe)}while(!0);tA(),tv.current=B,tn=R,Fr!==null?h=0:(kr=null,hi=0,h=Wr)}if(h!==0){if(h===2&&(R=YE(d),R!==0&&(A=R,h=VA(d,R))),h===1)throw x=om,Au(d,0),Zl(d,A),ds(d,ei()),x;if(h===6)Zl(d,A);else{if(R=d.current.alternate,!(A&30)&&!l9(R)&&(h=cv(d,A),h===2&&(B=YE(d),B!==0&&(A=B,h=VA(d,B))),h===1))throw x=om,Au(d,0),Zl(d,A),ds(d,ei()),x;switch(d.finishedWork=R,d.finishedLanes=A,h){case 0:case 1:throw Error(o(345));case 2:wu(d,fs);break;case 3:if(Zl(d,A),(A&130023424)===A&&(h=UA+500-ei(),10<h)){if(E0(d,0)!==0)break;if(R=d.suspendedLanes,(R&A)!==A){Xi(),d.pingedLanes|=d.suspendedLanes&R;break}d.timeoutHandle=Ie(wu.bind(null,d,fs),h);break}wu(d,fs);break;case 4:if(Zl(d,A),(A&4194240)===A)break;for(h=d.eventTimes,R=-1;0<A;){var q=31-Gn(A);B=1<<q,q=h[q],q>R&&(R=q),A&=~B}if(A=R,A=ei()-A,A=(120>A?120:480>A?480:1080>A?1080:1920>A?1920:3e3>A?3e3:4320>A?4320:1960*a9(A/1960))-A,10<A){d.timeoutHandle=Ie(wu.bind(null,d,fs),A);break}wu(d,fs);break;case 5:wu(d,fs);break;default:throw Error(o(329))}}}return ds(d,ei()),d.callbackNode===x?pD.bind(null,d):null}function VA(d,h){var x=am;return d.current.memoizedState.isDehydrated&&(Au(d,h).flags|=256),d=cv(d,h),d!==2&&(h=fs,fs=x,h!==null&&WA(h)),d}function WA(d){fs===null?fs=d:fs.push.apply(fs,d)}function l9(d){for(var h=d;;){if(h.flags&16384){var x=h.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var A=0;A<x.length;A++){var R=x[A],B=R.getSnapshot;R=R.value;try{if(!xa(B(),R))return!1}catch{return!1}}}if(x=h.child,h.subtreeFlags&16384&&x!==null)x.return=h,h=x;else{if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Zl(d,h){for(h&=~OA,h&=~nv,d.suspendedLanes|=h,d.pingedLanes&=~h,d=d.expirationTimes;0<h;){var x=31-Gn(h),A=1<<x;d[x]=-1,h&=~A}}function mD(d){if(tn&6)throw Error(o(327));Mu();var h=E0(d,0);if(!(h&1))return ds(d,ei()),null;var x=cv(d,h);if(d.tag!==0&&x===2){var A=YE(d);A!==0&&(h=A,x=VA(d,A))}if(x===1)throw x=om,Au(d,0),Zl(d,h),ds(d,ei()),x;if(x===6)throw Error(o(345));return d.finishedWork=d.current.alternate,d.finishedLanes=h,wu(d,fs),ds(d,ei()),null}function gD(d){ql!==null&&ql.tag===0&&!(tn&6)&&Mu();var h=tn;tn|=1;var x=br.transition,A=Tn;try{if(br.transition=null,Tn=1,d)return d()}finally{Tn=A,br.transition=x,tn=h,!(tn&6)&&Sa()}}function XA(){ks=xd.current,tt(xd)}function Au(d,h){d.finishedWork=null,d.finishedLanes=0;var x=d.timeoutHandle;if(x!==it&&(d.timeoutHandle=it,Xe(x)),Fr!==null)for(x=Fr.return;x!==null;){var A=x;switch(lA(A),A.tag){case 1:A=A.type.childContextTypes,A!=null&&sn();break;case 3:vd(),tt(Dt),tt(wt),mA();break;case 5:hA(A);break;case 4:vd();break;case 13:tt(ur);break;case 19:tt(ur);break;case 10:nA(A.type._context);break;case 22:case 23:XA()}x=x.return}if(kr=d,Fr=d=ec(d.current,null),hi=ks=h,Wr=0,om=null,OA=nv=Sd=0,fs=am=null,Ea!==null){for(h=0;h<Ea.length;h++)if(x=Ea[h],A=x.interleaved,A!==null){x.interleaved=null;var R=A.next,B=x.pending;if(B!==null){var q=B.next;B.next=R,A.next=q}x.pending=A}Ea=null}return d}function _D(d,h){do{var x=Fr;try{if(tA(),N0.current=z0,k0){for(var A=xr.memoizedState;A!==null;){var R=A.queue;R!==null&&(R.pending=null),A=A.next}k0=!1}if(yd=0,ti=wi=xr=null,qp=!1,Qp=0,FA.current=null,x===null||x.return===null){Wr=1,om=h,Fr=null;break}e:{var B=d,q=x.return,fe=x,De=h;if(h=hi,fe.flags|=32768,De!==null&&typeof De=="object"&&typeof De.then=="function"){var $e=De,mt=fe,Vt=mt.tag;if(!(mt.mode&1)&&(Vt===0||Vt===11||Vt===15)){var Bt=mt.alternate;Bt?(mt.updateQueue=Bt.updateQueue,mt.memoizedState=Bt.memoizedState,mt.lanes=Bt.lanes):(mt.updateQueue=null,mt.memoizedState=null)}var On=O2(q);if(On!==null){On.flags&=-257,U2(On,q,fe,B,h),On.mode&1&&F2(B,$e,h),h=On,De=$e;var Tt=h.updateQueue;if(Tt===null){var Ci=new Set;Ci.add(De),h.updateQueue=Ci}else Tt.add(De);break e}else{if(!(h&1)){F2(B,$e,h),jA();break e}De=Error(o(426))}}else if(nr&&fe.mode&1){var yo=O2(q);if(yo!==null){!(yo.flags&65536)&&(yo.flags|=256),U2(yo,q,fe,B,h),fA(De);break e}}B=De,Wr!==4&&(Wr=2),am===null?am=[B]:am.push(B),De=EA(De,fe),fe=q;do{switch(fe.tag){case 3:fe.flags|=65536,h&=-h,fe.lanes|=h;var Ee=N2(fe,De,h);r2(fe,Ee);break e;case 1:B=De;var he=fe.type,be=fe.stateNode;if(!(fe.flags&128)&&(typeof he.getDerivedStateFromError=="function"||be!==null&&typeof be.componentDidCatch=="function"&&($l===null||!$l.has(be)))){fe.flags|=65536,h&=-h,fe.lanes|=h;var ct=k2(fe,B,h);r2(fe,ct);break e}}fe=fe.return}while(fe!==null)}xD(x)}catch(Mt){h=Mt,Fr===x&&x!==null&&(Fr=x=x.return);continue}break}while(!0)}function vD(){var d=tv.current;return tv.current=z0,d===null?z0:d}function jA(){(Wr===0||Wr===3||Wr===2)&&(Wr=4),kr===null||!(Sd&268435455)&&!(nv&268435455)||Zl(kr,hi)}function cv(d,h){var x=tn;tn|=2;var A=vD();kr===d&&hi===h||Au(d,h);do try{c9();break}catch(R){_D(d,R)}while(!0);if(tA(),tn=x,tv.current=A,Fr!==null)throw Error(o(261));return kr=null,hi=0,Wr}function c9(){for(;Fr!==null;)yD(Fr)}function u9(){for(;Fr!==null&&!k6();)yD(Fr)}function yD(d){var h=AD(d.alternate,d,ks);d.memoizedProps=d.pendingProps,h===null?xD(d):Fr=h,FA.current=null}function xD(d){var h=d;do{var x=h.alternate;if(d=h.return,h.flags&32768){if(x=n9(x,h),x!==null){x.flags&=32767,Fr=x;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{Wr=6,Fr=null;return}}else if(x=Z6(x,h,ks),x!==null){Fr=x;return}if(h=h.sibling,h!==null){Fr=h;return}Fr=h=d}while(h!==null);Wr===0&&(Wr=5)}function wu(d,h){var x=Tn,A=br.transition;try{br.transition=null,Tn=1,f9(d,h,x)}finally{br.transition=A,Tn=x}return null}function f9(d,h,x){do Mu();while(ql!==null);if(tn&6)throw Error(o(327));var A=d.finishedWork,R=d.finishedLanes;if(A===null)return null;if(d.finishedWork=null,d.finishedLanes=0,A===d.current)throw Error(o(177));d.callbackNode=null,d.callbackPriority=0;var B=A.lanes|A.childLanes;if(N6(d,B),d===kr&&(Fr=kr=null,hi=0),!(A.subtreeFlags&2064)&&!(A.flags&2064)||iv||(iv=!0,wD(QE,function(){return Mu(),null})),B=(A.flags&15990)!==0,A.subtreeFlags&15990||B){B=br.transition,br.transition=null;var q=Tn;Tn=1;var fe=tn;tn|=4,FA.current=null,i9(d,A),s9(d,A),F(d.containerInfo),d.current=A,o9(A),F6(),tn=fe,Tn=q,br.transition=B}else d.current=A;if(iv&&(iv=!1,ql=d,sv=R),B=d.pendingLanes,B===0&&($l=null),H6(A.stateNode),ds(d,ei()),h!==null)for(x=d.onRecoverableError,A=0;A<h.length;A++)x(h[A]);if(rv)throw rv=!1,d=zA,zA=null,d;return sv&1&&d.tag!==0&&Mu(),B=d.pendingLanes,B&1?d===GA?lm++:(lm=0,GA=d):lm=0,Sa(),null}function Mu(){if(ql!==null){var d=QP(sv),h=br.transition,x=Tn;try{if(br.transition=null,Tn=16>d?16:d,ql===null)var A=!1;else{if(d=ql,ql=null,sv=0,tn&6)throw Error(o(331));var R=tn;for(tn|=4,at=d.current;at!==null;){var B=at,q=B.child;if(at.flags&16){var fe=B.deletions;if(fe!==null){for(var De=0;De<fe.length;De++){var $e=fe[De];for(at=$e;at!==null;){var mt=at;switch(mt.tag){case 0:case 11:case 15:Eu(8,mt,B)}var Vt=mt.child;if(Vt!==null)Vt.return=mt,at=Vt;else for(;at!==null;){mt=at;var Bt=mt.sibling,On=mt.return;if(iD(mt),mt===$e){at=null;break}if(Bt!==null){Bt.return=On,at=Bt;break}at=On}}}var Tt=B.alternate;if(Tt!==null){var Ci=Tt.child;if(Ci!==null){Tt.child=null;do{var yo=Ci.sibling;Ci.sibling=null,Ci=yo}while(Ci!==null)}}at=B}}if(B.subtreeFlags&2064&&q!==null)q.return=B,at=q;else e:for(;at!==null;){if(B=at,B.flags&2048)switch(B.tag){case 0:case 11:case 15:Eu(9,B,B.return)}var Ee=B.sibling;if(Ee!==null){Ee.return=B.return,at=Ee;break e}at=B.return}}var he=d.current;for(at=he;at!==null;){q=at;var be=q.child;if(q.subtreeFlags&2064&&be!==null)be.return=q,at=be;else e:for(q=he;at!==null;){if(fe=at,fe.flags&2048)try{switch(fe.tag){case 0:case 11:case 15:im(9,fe)}}catch(Mt){hs(fe,fe.return,Mt)}if(fe===q){at=null;break e}var ct=fe.sibling;if(ct!==null){ct.return=fe.return,at=ct;break e}at=fe.return}}if(tn=R,Sa(),ya&&typeof ya.onPostCommitFiberRoot=="function")try{ya.onPostCommitFiberRoot(A0,d)}catch{}A=!0}return A}finally{Tn=x,br.transition=h}}return!1}function SD(d,h,x){h=EA(x,h),h=N2(d,h,1),Kl(d,h),h=Xi(),d=lv(d,1),d!==null&&(Xp(d,1,h),ds(d,h))}function hs(d,h,x){if(d.tag===3)SD(d,d,x);else for(;h!==null;){if(h.tag===3){SD(h,d,x);break}else if(h.tag===1){var A=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&($l===null||!$l.has(A))){d=EA(x,d),d=k2(h,d,1),Kl(h,d),d=Xi(),h=lv(h,1),h!==null&&(Xp(h,1,d),ds(h,d));break}}h=h.return}}function d9(d,h,x){var A=d.pingCache;A!==null&&A.delete(h),h=Xi(),d.pingedLanes|=d.suspendedLanes&x,kr===d&&(hi&x)===x&&(Wr===4||Wr===3&&(hi&130023424)===hi&&500>ei()-UA?Au(d,0):OA|=x),ds(d,h)}function ED(d,h){h===0&&(d.mode&1?(h=S0,S0<<=1,!(S0&130023424)&&(S0=4194304)):h=1);var x=Xi();d=lv(d,h),d!==null&&(Xp(d,h,x),ds(d,x))}function h9(d){var h=d.memoizedState,x=0;h!==null&&(x=h.retryLane),ED(d,x)}function p9(d,h){var x=0;switch(d.tag){case 13:var A=d.stateNode,R=d.memoizedState;R!==null&&(x=R.retryLane);break;case 19:A=d.stateNode;break;default:throw Error(o(314))}A!==null&&A.delete(h),ED(d,x)}var AD;AD=function(d,h,x){if(d!==null)if(d.memoizedProps!==h.pendingProps||Dt.current)Ns=!0;else{if(!(d.lanes&x)&&!(h.flags&128))return Ns=!1,t9(d,h,x);Ns=!!(d.flags&131072)}else Ns=!1,nr&&h.flags&1048576&&c2(h,D0,h.index);switch(h.lanes=0,h.tag){case 2:var A=h.type;d!==null&&(d.alternate=null,h.alternate=null,h.flags|=2),d=h.pendingProps;var R=Pn(h,wt.current);dd(h,x),R=_A(null,h,A,d,R,x);var B=vA();return h.flags|=1,typeof R=="object"&&R!==null&&typeof R.render=="function"&&R.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,tr(A)?(B=!0,Yt(h)):B=!1,h.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,iA(h),R.updater=I0,h.stateNode=R,R._reactInternals=h,oA(h,A,d,x),h=MA(null,h,A,!0,B,x)):(h.tag=0,nr&&B&&aA(h),Wi(null,h,R,x),h=h.child),h;case 16:A=h.elementType;e:{switch(d!==null&&(d.alternate=null,h.alternate=null,h.flags|=2),d=h.pendingProps,R=A._init,A=R(A._payload),h.type=A,R=h.tag=g9(A),d=Wo(A,d),R){case 0:h=wA(null,h,A,d,x);break e;case 1:h=Y2(null,h,A,d,x);break e;case 11:h=G2(null,h,A,d,x);break e;case 14:h=V2(null,h,A,Wo(A.type,d),x);break e}throw Error(o(306,A,""))}return h;case 0:return A=h.type,R=h.pendingProps,R=h.elementType===A?R:Wo(A,R),wA(d,h,A,R,x);case 1:return A=h.type,R=h.pendingProps,R=h.elementType===A?R:Wo(A,R),Y2(d,h,A,R,x);case 3:e:{if(J2(h),d===null)throw Error(o(387));A=h.pendingProps,B=h.memoizedState,R=B.element,n2(d,h),R0(h,A,null,x);var q=h.memoizedState;if(A=q.element,pe&&B.isDehydrated)if(B={element:A,isDehydrated:!1,cache:q.cache,transitions:q.transitions},h.updateQueue.baseState=B,h.memoizedState=B,h.flags&256){R=Error(o(423)),h=K2(d,h,A,x,R);break e}else if(A!==R){R=Error(o(424)),h=K2(d,h,A,x,R);break e}else for(pe&&(Ls=er(h.stateNode.containerInfo),Bs=h,nr=!0,Xo=null,jp=!1),x=m2(h,null,A,x),h.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(md(),A===R){h=il(d,h,x);break e}Wi(d,h,A,x)}h=h.child}return h;case 5:return g2(h),d===null&&uA(h),A=h.type,R=h.pendingProps,B=d!==null?d.memoizedProps:null,q=R.children,xe(A,R)?q=null:B!==null&&xe(A,B)&&(h.flags|=32),j2(d,h),Wi(d,h,q,x),h.child;case 6:return d===null&&uA(h),null;case 13:return $2(d,h,x);case 4:return dA(h,h.stateNode.containerInfo),A=h.pendingProps,d===null?h.child=gd(h,null,A,x):Wi(d,h,A,x),h.child;case 11:return A=h.type,R=h.pendingProps,R=h.elementType===A?R:Wo(A,R),G2(d,h,A,R,x);case 7:return Wi(d,h,h.pendingProps,x),h.child;case 8:return Wi(d,h,h.pendingProps.children,x),h.child;case 12:return Wi(d,h,h.pendingProps.children,x),h.child;case 10:e:{if(A=h.type._context,R=h.pendingProps,B=h.memoizedProps,q=R.value,t2(h,A,q),B!==null)if(xa(B.value,q)){if(B.children===R.children&&!Dt.current){h=il(d,h,x);break e}}else for(B=h.child,B!==null&&(B.return=h);B!==null;){var fe=B.dependencies;if(fe!==null){q=B.child;for(var De=fe.firstContext;De!==null;){if(De.context===A){if(B.tag===1){De=el(-1,x&-x),De.tag=2;var $e=B.updateQueue;if($e!==null){$e=$e.shared;var mt=$e.pending;mt===null?De.next=De:(De.next=mt.next,mt.next=De),$e.pending=De}}B.lanes|=x,De=B.alternate,De!==null&&(De.lanes|=x),rA(B.return,x,h),fe.lanes|=x;break}De=De.next}}else if(B.tag===10)q=B.type===h.type?null:B.child;else if(B.tag===18){if(q=B.return,q===null)throw Error(o(341));q.lanes|=x,fe=q.alternate,fe!==null&&(fe.lanes|=x),rA(q,x,h),q=B.sibling}else q=B.child;if(q!==null)q.return=B;else for(q=B;q!==null;){if(q===h){q=null;break}if(B=q.sibling,B!==null){B.return=q.return,q=B;break}q=q.return}B=q}Wi(d,h,R.children,x),h=h.child}return h;case 9:return R=h.type,A=h.pendingProps.children,dd(h,x),R=fo(R),A=A(R),h.flags|=1,Wi(d,h,A,x),h.child;case 14:return A=h.type,R=Wo(A,h.pendingProps),R=Wo(A.type,R),V2(d,h,A,R,x);case 15:return W2(d,h,h.type,h.pendingProps,x);case 17:return A=h.type,R=h.pendingProps,R=h.elementType===A?R:Wo(A,R),d!==null&&(d.alternate=null,h.alternate=null,h.flags|=2),h.tag=1,tr(A)?(d=!0,Yt(h)):d=!1,dd(h,x),a2(h,A,R),oA(h,A,R,x),MA(null,h,A,!0,d,x);case 19:return eD(d,h,x);case 22:return X2(d,h,x)}throw Error(o(156,h.tag))};function wD(d,h){return $E(d,h)}function m9(d,h,x,A){this.tag=d,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vo(d,h,x,A){return new m9(d,h,x,A)}function YA(d){return d=d.prototype,!(!d||!d.isReactComponent)}function g9(d){if(typeof d=="function")return YA(d)?1:0;if(d!=null){if(d=d.$$typeof,d===v)return 11;if(d===S)return 14}return 2}function ec(d,h){var x=d.alternate;return x===null?(x=vo(d.tag,h,d.key,d.mode),x.elementType=d.elementType,x.type=d.type,x.stateNode=d.stateNode,x.alternate=d,d.alternate=x):(x.pendingProps=h,x.type=d.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=d.flags&14680064,x.childLanes=d.childLanes,x.lanes=d.lanes,x.child=d.child,x.memoizedProps=d.memoizedProps,x.memoizedState=d.memoizedState,x.updateQueue=d.updateQueue,h=d.dependencies,x.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},x.sibling=d.sibling,x.index=d.index,x.ref=d.ref,x}function uv(d,h,x,A,R,B){var q=2;if(A=d,typeof d=="function")YA(d)&&(q=1);else if(typeof d=="string")q=5;else e:switch(d){case u:return Tu(x.children,R,B,h);case f:q=8,R|=8;break;case p:return d=vo(12,x,h,R|2),d.elementType=p,d.lanes=B,d;case y:return d=vo(13,x,h,R),d.elementType=y,d.lanes=B,d;case _:return d=vo(19,x,h,R),d.elementType=_,d.lanes=B,d;case w:return fv(x,R,B,h);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case m:q=10;break e;case g:q=9;break e;case v:q=11;break e;case S:q=14;break e;case E:q=16,A=null;break e}throw Error(o(130,d==null?d:typeof d,""))}return h=vo(q,x,h,R),h.elementType=d,h.type=A,h.lanes=B,h}function Tu(d,h,x,A){return d=vo(7,d,A,h),d.lanes=x,d}function fv(d,h,x,A){return d=vo(22,d,A,h),d.elementType=w,d.lanes=x,d.stateNode={},d}function JA(d,h,x){return d=vo(6,d,null,h),d.lanes=x,d}function KA(d,h,x){return h=vo(4,d.children!==null?d.children:[],d.key,h),h.lanes=x,h.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},h}function _9(d,h,x,A,R){this.tag=h,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=it,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=JE(0),this.expirationTimes=JE(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=JE(0),this.identifierPrefix=A,this.onRecoverableError=R,pe&&(this.mutableSourceEagerHydrationData=null)}function MD(d,h,x,A,R,B,q,fe,De){return d=new _9(d,h,x,fe,De),h===1?(h=1,B===!0&&(h|=8)):h=0,B=vo(3,null,null,h),d.current=B,B.stateNode=d,B.memoizedState={element:A,isDehydrated:x,cache:null,transitions:null},iA(B),d}function TD(d){if(!d)return It;d=d._reactInternals;e:{if(C(d)!==d||d.tag!==1)throw Error(o(170));var h=d;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(tr(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(o(171))}if(d.tag===1){var x=d.type;if(tr(x))return cr(d,x,h)}return h}function CD(d){var h=d._reactInternals;if(h===void 0)throw typeof d.render=="function"?Error(o(188)):(d=Object.keys(d).join(","),Error(o(268,d)));return d=U(h),d===null?null:d.stateNode}function bD(d,h){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var x=d.retryLane;d.retryLane=x!==0&&x<h?x:h}}function $A(d,h){bD(d,h),(d=d.alternate)&&bD(d,h)}function v9(d){return d=U(d),d===null?null:d.stateNode}function y9(){return null}return t.attemptContinuousHydration=function(d){if(d.tag===13){var h=Xi();_o(d,134217728,h),$A(d,134217728)}},t.attemptHydrationAtCurrentPriority=function(d){if(d.tag===13){var h=Xi(),x=Ql(d);_o(d,x,h),$A(d,x)}},t.attemptSynchronousHydration=function(d){switch(d.tag){case 3:var h=d.stateNode;if(h.current.memoizedState.isDehydrated){var x=Wp(h.pendingLanes);x!==0&&(KE(h,x|1),ds(h,ei()),!(tn&6)&&(Ed(),Sa()))}break;case 13:var A=Xi();gD(function(){return _o(d,1,A)}),$A(d,1)}},t.batchedUpdates=function(d,h){var x=tn;tn|=1;try{return d(h)}finally{tn=x,tn===0&&(Ed(),w0&&Sa())}},t.createComponentSelector=function(d){return{$$typeof:$0,value:d}},t.createContainer=function(d,h,x,A,R,B,q){return MD(d,h,!1,null,x,A,R,B,q)},t.createHasPseudoClassSelector=function(d){return{$$typeof:q0,value:d}},t.createHydrationContainer=function(d,h,x,A,R,B,q,fe,De){return d=MD(x,A,!0,d,R,B,q,fe,De),d.context=TD(null),x=d.current,A=Xi(),R=Ql(x),B=el(A,R),B.callback=h??null,Kl(x,B),d.current.lanes=R,Xp(d,R,A),ds(d,A),d},t.createPortal=function(d,h,x){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:A==null?null:""+A,children:d,containerInfo:h,implementation:x}},t.createRoleSelector=function(d){return{$$typeof:Q0,value:d}},t.createTestNameSelector=function(d){return{$$typeof:Z0,value:d}},t.createTextSelector=function(d){return{$$typeof:ev,value:d}},t.deferredUpdates=function(d){var h=Tn,x=br.transition;try{return br.transition=null,Tn=16,d()}finally{Tn=h,br.transition=x}},t.discreteUpdates=function(d,h,x,A,R){var B=Tn,q=br.transition;try{return br.transition=null,Tn=1,d(h,x,A,R)}finally{Tn=B,br.transition=q,tn===0&&Ed()}},t.findAllNodes=kA,t.findBoundingRects=function(d,h){if(!V)throw Error(o(363));h=kA(d,h),d=[];for(var x=0;x<h.length;x++)d.push(le(h[x]));for(h=d.length-1;0<h;h--){x=d[h];for(var A=x.x,R=A+x.width,B=x.y,q=B+x.height,fe=h-1;0<=fe;fe--)if(h!==fe){var De=d[fe],$e=De.x,mt=$e+De.width,Vt=De.y,Bt=Vt+De.height;if(A>=$e&&B>=Vt&&R<=mt&&q<=Bt){d.splice(h,1);break}else if(A!==$e||x.width!==De.width||Bt<B||Vt>q){if(!(B!==Vt||x.height!==De.height||mt<A||$e>R)){$e>A&&(De.width+=$e-A,De.x=A),mt<R&&(De.width=R-$e),d.splice(h,1);break}}else{Vt>B&&(De.height+=Vt-B,De.y=B),Bt<q&&(De.height=q-Vt),d.splice(h,1);break}}}return d},t.findHostInstance=CD,t.findHostInstanceWithNoPortals=function(d){return d=L(d),d=d!==null?$(d):null,d===null?null:d.stateNode},t.findHostInstanceWithWarning=function(d){return CD(d)},t.flushControlled=function(d){var h=tn;tn|=1;var x=br.transition,A=Tn;try{br.transition=null,Tn=1,d()}finally{Tn=A,br.transition=x,tn=h,tn===0&&(Ed(),Sa())}},t.flushPassiveEffects=Mu,t.flushSync=gD,t.focusWithin=function(d,h){if(!V)throw Error(o(363));for(d=BA(d),h=hD(d,h),h=Array.from(h),d=0;d<h.length;){var x=h[d++];if(!ve(x)){if(x.tag===5&&lt(x.stateNode))return!0;for(x=x.child;x!==null;)h.push(x),x=x.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Tn},t.getFindAllNodesFailureDescription=function(d,h){if(!V)throw Error(o(363));var x=0,A=[];d=[BA(d),0];for(var R=0;R<d.length;){var B=d[R++],q=d[R++],fe=h[q];if((B.tag!==5||!ve(B))&&(LA(B,fe)&&(A.push(NA(fe)),q++,q>x&&(x=q)),q<h.length))for(B=B.child;B!==null;)d.push(B,q),B=B.sibling}if(x<h.length){for(d=[];x<h.length;x++)d.push(NA(h[x]));return`findAllNodes was able to match part of the selector:
  `+(A.join(" > ")+`

No matching component was found for:
  `)+d.join(" > ")}return null},t.getPublicRootInstance=function(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return Y(d.child.stateNode);default:return d.child.stateNode}},t.injectIntoDevTools=function(d){if(d={bundleType:d.bundleType,version:d.version,rendererPackageName:d.rendererPackageName,rendererConfig:d.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:v9,findFiberByHostInstance:d.findFiberByHostInstance||y9,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")d=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)d=!0;else{try{A0=h.inject(d),ya=h}catch{}d=!!h.checkDCE}}return d},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(d,h,x,A){if(!V)throw Error(o(363));d=kA(d,h);var R=Oe(d,x,A).disconnect;return{disconnect:function(){R()}}},t.registerMutableSourceForHydration=function(d,h){var x=h._getVersion;x=x(h._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[h,x]:d.mutableSourceEagerHydrationData.push(h,x)},t.runWithPriority=function(d,h){var x=Tn;try{return Tn=d,h()}finally{Tn=x}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(d,h,x,A){var R=h.current,B=Xi(),q=Ql(R);return x=TD(x),h.context===null?h.context=x:h.pendingContext=x,h=el(B,q),h.payload={element:d},A=A===void 0?null:A,A!==null&&(h.callback=A),Kl(R,h),d=_o(R,q,B),d!==null&&b0(d,R,q),q},t};z8.exports=gfe;var _fe=z8.exports;const vfe=N_(_fe);var G8={exports:{}},V8={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(k,K){var F=k.length;k.push(K);e:for(;0<F;){var ie=F-1>>>1,me=k[ie];if(0<i(me,K))k[ie]=K,k[F]=me,F=ie;else break e}}function t(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var K=k[0],F=k.pop();if(F!==K){k[0]=F;e:for(var ie=0,me=k.length,Ne=me>>>1;ie<Ne;){var ce=2*(ie+1)-1,xe=k[ce],Ae=ce+1,Ie=k[Ae];if(0>i(xe,F))Ae<me&&0>i(Ie,xe)?(k[ie]=Ie,k[Ae]=F,ie=Ae):(k[ie]=xe,k[ce]=F,ie=ce);else if(Ae<me&&0>i(Ie,F))k[ie]=Ie,k[Ae]=F,ie=Ae;else break e}}return K}function i(k,K){var F=k.sortIndex-K.sortIndex;return F!==0?F:k.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,p=3,m=!1,g=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(k){for(var K=t(c);K!==null;){if(K.callback===null)r(c);else if(K.startTime<=k)r(c),K.sortIndex=K.expirationTime,e(l,K);else break;K=t(c)}}function w(k){if(v=!1,E(k),!g)if(t(l)!==null)g=!0,Y(I);else{var K=t(c);K!==null&&te(w,K.startTime-k)}}function I(k,K){g=!1,v&&(v=!1,_(P),P=-1),m=!0;var F=p;try{for(E(K),f=t(l);f!==null&&(!(f.expirationTime>K)||k&&!L());){var ie=f.callback;if(typeof ie=="function"){f.callback=null,p=f.priorityLevel;var me=ie(f.expirationTime<=K);K=n.unstable_now(),typeof me=="function"?f.callback=me:f===t(l)&&r(l),E(K)}else r(l);f=t(l)}if(f!==null)var Ne=!0;else{var ce=t(c);ce!==null&&te(w,ce.startTime-K),Ne=!1}return Ne}finally{f=null,p=F,m=!1}}var T=!1,b=null,P=-1,C=5,M=-1;function L(){return!(n.unstable_now()-M<C)}function U(){if(b!==null){var k=n.unstable_now();M=k;var K=!0;try{K=b(!0,k)}finally{K?X():(T=!1,b=null)}}else T=!1}var X;if(typeof S=="function")X=function(){S(U)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,Q=$.port2;$.port1.onmessage=U,X=function(){Q.postMessage(null)}}else X=function(){y(U,0)};function Y(k){b=k,T||(T=!0,X())}function te(k,K){P=y(function(){k(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(k){k.callback=null},n.unstable_continueExecution=function(){g||m||(g=!0,Y(I))},n.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<k?Math.floor(1e3/k):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(k){switch(p){case 1:case 2:case 3:var K=3;break;default:K=p}var F=p;p=K;try{return k()}finally{p=F}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(k,K){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var F=p;p=k;try{return K()}finally{p=F}},n.unstable_scheduleCallback=function(k,K,F){var ie=n.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?ie+F:ie):F=ie,k){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=F+me,k={id:u++,callback:K,priorityLevel:k,startTime:F,expirationTime:me,sortIndex:-1},F>ie?(k.sortIndex=F,e(c,k),t(l)===null&&k===t(c)&&(v?(_(P),P=-1):v=!0,te(w,F-ie))):(k.sortIndex=me,e(l,k),g||m||(g=!0,Y(I))),k},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(k){var K=p;return function(){var F=p;p=K;try{return k.apply(this,arguments)}finally{p=F}}}})(V8);G8.exports=V8;var X3=G8.exports;const OP={},W8=n=>void Object.assign(OP,n);function yfe(n,e){function t(u,{args:f=[],attach:p,...m},g){let v=`${u[0].toUpperCase()}${u.slice(1)}`,y;if(u==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const _=m.object;y=eh(_,{type:u,root:g,attach:p,primitive:!0})}else{const _=OP[v];if(!_)throw new Error(`R3F: ${v} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");y=eh(new _(...f),{type:u,root:g,attach:p,memoizedProps:{args:f}})}return y.__r3f.attach===void 0&&(y instanceof Xt?y.__r3f.attach="geometry":y instanceof Vr&&(y.__r3f.attach="material")),v!=="inject"&&XM(y,m),y}function r(u,f){let p=!1;if(f){var m,g;(m=f.__r3f)!=null&&m.attach?WM(u,f,f.__r3f.attach):f.isObject3D&&u.isObject3D&&(u.add(f),p=!0),p||(g=u.__r3f)==null||g.objects.push(f),f.__r3f||eh(f,{}),f.__r3f.parent=u,Ib(f),th(f)}}function i(u,f,p){let m=!1;if(f){var g,v;if((g=f.__r3f)!=null&&g.attach)WM(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){f.parent=u,f.dispatchEvent({type:"added"}),u.dispatchEvent({type:"childadded",child:f});const y=u.children.filter(S=>S!==f),_=y.indexOf(p);u.children=[...y.slice(0,_),f,...y.slice(_)],m=!0}m||(v=u.__r3f)==null||v.objects.push(f),f.__r3f||eh(f,{}),f.__r3f.parent=u,Ib(f),th(f)}}function s(u,f,p=!1){u&&[...u].forEach(m=>o(f,m,p))}function o(u,f,p){if(f){var m,g,v;if(f.__r3f&&(f.__r3f.parent=null),(m=u.__r3f)!=null&&m.objects&&(u.__r3f.objects=u.__r3f.objects.filter(w=>w!==f)),(g=f.__r3f)!=null&&g.attach)$3(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){var y;u.remove(f),(y=f.__r3f)!=null&&y.root&&Cfe(Fx(f),f)}const S=(v=f.__r3f)==null?void 0:v.primitive,E=!S&&(p===void 0?f.dispose!==null:p);if(!S){var _;s((_=f.__r3f)==null?void 0:_.objects,f,E),s(f.children,f,E)}if(delete f.__r3f,E&&f.dispose&&f.type!=="Scene"){const w=()=>{try{f.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?X3.unstable_scheduleCallback(X3.unstable_IdlePriority,w):w()}th(u)}}function a(u,f,p,m){var g;const v=(g=u.__r3f)==null?void 0:g.parent;if(!v)return;const y=t(f,p,u.__r3f.root);if(u.children){for(const _ of u.children)_.__r3f&&r(y,_);u.children=u.children.filter(_=>!_.__r3f)}u.__r3f.objects.forEach(_=>r(y,_)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(v,u),y.parent&&(y.__r3f.autoRemovedBeforeAppend=!0),r(v,y),y.raycast&&y.__r3f.eventCount&&Fx(y).getState().internal.interaction.push(y),[m,m.alternate].forEach(_=>{_!==null&&(_.stateNode=y,_.ref&&(typeof _.ref=="function"?_.ref(y):_.ref.current=y))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:vfe({createInstance:t,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,f)=>{if(!f)return;const p=u.getState().scene;p.__r3f&&(p.__r3f.root=u,r(p,f))},removeChildFromContainer:(u,f)=>{f&&o(u.getState().scene,f)},insertInContainerBefore:(u,f,p)=>{if(!f||!p)return;const m=u.getState().scene;m.__r3f&&i(m,f,p)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var f;return!!((f=u==null?void 0:u.__r3f)!=null?f:{}).handlers},prepareUpdate(u,f,p,m){var g;if(((g=u==null?void 0:u.__r3f)!=null?g:{}).primitive&&m.object&&m.object!==u)return[!0];{const{args:y=[],children:_,...S}=m,{args:E=[],children:w,...I}=p;if(!Array.isArray(y))throw new Error("R3F: the args prop must be an array!");if(y.some((b,P)=>b!==E[P]))return[!0];const T=q8(u,S,I,!0);return T.changes.length?[!1,T]:null}},commitUpdate(u,[f,p],m,g,v,y){f?a(u,m,v,y):XM(u,p)},commitMount(u,f,p,m){var g;const v=(g=u.__r3f)!=null?g:{};u.raycast&&v.handlers&&v.eventCount&&Fx(u).getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>eh(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var f;const{attach:p,parent:m}=(f=u.__r3f)!=null?f:{};p&&m&&$3(m,u,p),u.isObject3D&&(u.visible=!1),th(u)},unhideInstance(u,f){var p;const{attach:m,parent:g}=(p=u.__r3f)!=null?p:{};m&&g&&WM(g,u,m),(u.isObject3D&&f.visible==null||f.visible)&&(u.visible=!0),th(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():wh.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&jn.fun(performance.now)?performance.now:jn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:jn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:jn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:XM}}var j3,Y3;const VM=n=>"colorSpace"in n||"outputColorSpace"in n,X8=()=>{var n;return(n=OP.ColorManagement)!=null?n:null},j8=n=>n&&n.isOrthographicCamera,xfe=n=>n&&n.hasOwnProperty("current"),m0=typeof window<"u"&&((j3=window.document)!=null&&j3.createElement||((Y3=window.navigator)==null?void 0:Y3.product)==="ReactNative")?se.useLayoutEffect:se.useEffect;function Y8(n){const e=se.useRef(n);return m0(()=>void(e.current=n),[n]),e}function Sfe({set:n}){return m0(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class J8 extends se.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}J8.getDerivedStateFromError=()=>({error:!0});const K8="__default",J3=new Map,Efe=n=>n&&!!n.memoized&&!!n.changes;function $8(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const km=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function Fx(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const jn={obj:n=>n===Object(n)&&!jn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(jn.str(n)||jn.num(n)||jn.boo(n))return n===e;const s=jn.obj(n);if(s&&r==="reference")return n===e;const o=jn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&r==="shallow"){for(a in i?e:n)if(!jn.equ(n[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:n)if(n[a]!==e[a])return!1;if(jn.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function Afe(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function wfe(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function eh(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function Rb(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((s,o)=>s[o],n),{target:t,key:i}}else return{target:t,key:e}}const K3=/-\d+$/;function WM(n,e,t){if(jn.str(t)){if(K3.test(t)){const s=t.replace(K3,""),{target:o,key:a}=Rb(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=Rb(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function $3(n,e,t){var r,i;if(jn.str(t)){const{target:s,key:o}=Rb(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function q8(n,{children:e,key:t,ref:r,...i},{children:s,key:o,ref:a,...l}={},c=!1){const u=n.__r3f,f=Object.entries(i),p=[];if(c){const g=Object.keys(l);for(let v=0;v<g.length;v++)i.hasOwnProperty(g[v])||f.unshift([g[v],K8+"remove"])}f.forEach(([g,v])=>{var y;if((y=n.__r3f)!=null&&y.primitive&&g==="object"||jn.equ(v,l[g]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(g))return p.push([g,v,!0,[]]);let _=[];g.includes("-")&&(_=g.split("-")),p.push([g,v,!1,_]);for(const S in i){const E=i[S];S.startsWith(`${g}-`)&&p.push([S,E,!1,S.split("-")])}});const m={...i};return u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.args&&(m.args=u.memoizedProps.args),u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.attach&&(m.attach=u.memoizedProps.attach),{memoized:m,changes:p}}const Mfe=typeof process<"u"&&!1;function XM(n,e){var t;const r=n.__r3f,i=r==null?void 0:r.root,s=i==null||i.getState==null?void 0:i.getState(),{memoized:o,changes:a}=Efe(e)?e:q8(n,e),l=r==null?void 0:r.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let u=0;u<a.length;u++){let[f,p,m,g]=a[u];if(VM(n)){const S="srgb",E="srgb-linear";f==="encoding"?(f="colorSpace",p=p===3001?S:E):f==="outputEncoding"&&(f="outputColorSpace",p=p===3001?S:E)}let v=n,y=v[f];if(g.length&&(y=g.reduce((_,S)=>_[S],n),!(y&&y.set))){const[_,...S]=g.reverse();v=S.reverse().reduce((E,w)=>E[w],n),f=_}if(p===K8+"remove")if(v.constructor){let _=J3.get(v.constructor);_||(_=new v.constructor,J3.set(v.constructor,_)),p=_[f]}else p=0;if(m&&r)p?r.handlers[f]=p:delete r.handlers[f],r.eventCount=Object.keys(r.handlers).length;else if(y&&y.set&&(y.copy||y instanceof If)){if(Array.isArray(p))y.fromArray?y.fromArray(p):y.set(...p);else if(y.copy&&p&&p.constructor&&(Mfe?y.constructor.name===p.constructor.name:y.constructor===p.constructor))y.copy(p);else if(p!==void 0){const _=y instanceof rt;!_&&y.setScalar?y.setScalar(p):y instanceof If&&p instanceof If?y.mask=p.mask:y.set(p),!X8()&&s&&!s.linear&&_&&y.convertSRGBToLinear()}}else if(v[f]=p,v[f]instanceof En&&v[f].format===Nr&&v[f].type===Is&&s){const _=v[f];VM(_)&&VM(s.gl)?_.colorSpace=s.gl.outputColorSpace:_.encoding=s.gl.outputEncoding}th(n)}if(r&&r.parent&&n.raycast&&l!==r.eventCount){const u=Fx(n).getState().internal,f=u.interaction.indexOf(n);f>-1&&u.interaction.splice(f,1),r.eventCount&&u.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&Ib(n),n}function th(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function Ib(n){n.onUpdate==null||n.onUpdate(n)}function Q8(n,e){n.manual||(j8(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function $y(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function Tfe(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return wh.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return wh.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return wh.ContinuousEventPriority;default:return wh.DefaultEventPriority}}function Z8(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function Cfe(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{Z8(t.capturedMap,e,r,i)})}function bfe(n){function e(l){const{internal:c}=n.getState(),u=l.offsetX-c.initialClick[0],f=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+f*f))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var f;return(f=c.__r3f)==null?void 0:f.handlers["onPointer"+u]}))}function r(l,c){const u=n.getState(),f=new Set,p=[],m=c?c(u.internal.interaction):u.internal.interaction;for(let _=0;_<m.length;_++){const S=km(m[_]);S&&(S.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function g(_){const S=km(_);if(!S||!S.events.enabled||S.raycaster.camera===null)return[];if(S.raycaster.camera===void 0){var E;S.events.compute==null||S.events.compute(l,S,(E=S.previousRoot)==null?void 0:E.getState()),S.raycaster.camera===void 0&&(S.raycaster.camera=null)}return S.raycaster.camera?S.raycaster.intersectObject(_,!0):[]}let v=m.flatMap(g).sort((_,S)=>{const E=km(_.object),w=km(S.object);return!E||!w?_.distance-S.distance:w.events.priority-E.events.priority||_.distance-S.distance}).filter(_=>{const S=$y(_);return f.has(S)?!1:(f.add(S),!0)});u.events.filter&&(v=u.events.filter(v,u));for(const _ of v){let S=_.object;for(;S;){var y;(y=S.__r3f)!=null&&y.eventCount&&p.push({..._,eventObject:S}),S=S.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let _ of u.internal.capturedMap.get(l.pointerId).values())f.has($y(_.intersection))||p.push(_.intersection);return p}function i(l,c,u,f){const p=n.getState();if(l.length){const m={stopped:!1};for(const g of l){const v=km(g.object)||p,{raycaster:y,pointer:_,camera:S,internal:E}=v,w=new W(_.x,_.y,0).unproject(S),I=M=>{var L,U;return(L=(U=E.capturedMap.get(M))==null?void 0:U.has(g.eventObject))!=null?L:!1},T=M=>{const L={intersection:g,target:c.target};E.capturedMap.has(M)?E.capturedMap.get(M).set(g.eventObject,L):E.capturedMap.set(M,new Map([[g.eventObject,L]])),c.target.setPointerCapture(M)},b=M=>{const L=E.capturedMap.get(M);L&&Z8(E.capturedMap,g.eventObject,L,M)};let P={};for(let M in c){let L=c[M];typeof L!="function"&&(P[M]=L)}let C={...g,...P,pointer:_,intersections:l,stopped:m.stopped,delta:u,unprojectedPoint:w,ray:y.ray,camera:S,stopPropagation(){const M="pointerId"in c&&E.capturedMap.get(c.pointerId);if((!M||M.has(g.eventObject))&&(C.stopped=m.stopped=!0,E.hovered.size&&Array.from(E.hovered.values()).find(L=>L.eventObject===g.eventObject))){const L=l.slice(0,l.indexOf(g));s([...L,g])}},target:{hasPointerCapture:I,setPointerCapture:T,releasePointerCapture:b},currentTarget:{hasPointerCapture:I,setPointerCapture:T,releasePointerCapture:b},nativeEvent:c};if(f(C),m.stopped===!0)break}}return l}function s(l){const{internal:c}=n.getState();for(const u of c.hovered.values())if(!l.length||!l.find(f=>f.object===u.object&&f.index===u.index&&f.instanceId===u.instanceId)){const p=u.eventObject.__r3f,m=p==null?void 0:p.handlers;if(c.hovered.delete($y(u)),p!=null&&p.eventCount){const g={...u,intersections:l};m.onPointerOut==null||m.onPointerOut(g),m.onPointerLeave==null||m.onPointerLeave(g)}}}function o(l,c){for(let u=0;u<c.length;u++){const f=c[u].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=n.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:f,internal:p}=n.getState();p.lastEvent.current=u;const m=l==="onPointerMove",g=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",y=r(u,m?t:void 0),_=g?e(u):0;l==="onPointerDown"&&(p.initialClick=[u.offsetX,u.offsetY],p.initialHits=y.map(E=>E.eventObject)),g&&!y.length&&_<=2&&(o(u,p.interaction),f&&f(u)),m&&s(y);function S(E){const w=E.eventObject,I=w.__r3f,T=I==null?void 0:I.handlers;if(I!=null&&I.eventCount)if(m){if(T.onPointerOver||T.onPointerEnter||T.onPointerOut||T.onPointerLeave){const b=$y(E),P=p.hovered.get(b);P?P.stopped&&E.stopPropagation():(p.hovered.set(b,E),T.onPointerOver==null||T.onPointerOver(E),T.onPointerEnter==null||T.onPointerEnter(E))}T.onPointerMove==null||T.onPointerMove(E)}else{const b=T[l];b?(!g||p.initialHits.includes(w))&&(o(u,p.interaction.filter(P=>!p.initialHits.includes(P))),b(E)):g&&p.initialHits.includes(w)&&o(u,p.interaction.filter(P=>!p.initialHits.includes(P)))}}i(y,u,_,S)}}return{handlePointer:a}}const Rfe=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],e6=n=>!!(n!=null&&n.render),WE=se.createContext(null),Ife=(n,e)=>{const t=O8((a,l)=>{const c=new W,u=new W,f=new W;function p(_=l().camera,S=u,E=l().size){const{width:w,height:I,top:T,left:b}=E,P=w/I;S instanceof W?f.copy(S):f.set(...S);const C=_.getWorldPosition(c).distanceTo(f);if(j8(_))return{width:w/_.zoom,height:I/_.zoom,top:T,left:b,factor:1,distance:C,aspect:P};{const M=_.fov*Math.PI/180,L=2*Math.tan(M/2)*C,U=L*(w/I);return{width:U,height:L,top:T,left:b,factor:w/U,distance:C,aspect:P}}}let m;const g=_=>a(S=>({performance:{...S.performance,current:_}})),v=new Le;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(_=1)=>n(l(),_),advance:(_,S)=>e(_,S,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new DP,pointer:v,mouse:v,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const _=l();m&&clearTimeout(m),_.performance.current!==_.performance.min&&g(_.performance.min),m=setTimeout(()=>g(l().performance.max),_.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:_=>a(S=>({...S,events:{...S.events,..._}})),setSize:(_,S,E,w,I)=>{const T=l().camera,b={width:_,height:S,top:w||0,left:I||0,updateStyle:E};a(P=>({size:b,viewport:{...P.viewport,...p(T,u,b)}}))},setDpr:_=>a(S=>{const E=$8(_);return{viewport:{...S.viewport,dpr:E,initialDpr:S.viewport.initialDpr||E}}}),setFrameloop:(_="always")=>{const S=l().clock;S.stop(),S.elapsedTime=0,_!=="never"&&(S.start(),S.elapsedTime=0),a(()=>({frameloop:_}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:se.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(_,S,E)=>{const w=l().internal;return w.priority=w.priority+(S>0?1:0),w.subscribers.push({ref:_,priority:S,store:E}),w.subscribers=w.subscribers.sort((I,T)=>I.priority-T.priority),()=>{const I=l().internal;I!=null&&I.subscribers&&(I.priority=I.priority-(S>0?1:0),I.subscribers=I.subscribers.filter(T=>T.ref!==_))}}}}}),r=t.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:f}=t.getState();if(l.width!==i.width||l.height!==i.height||c.dpr!==s){var p;i=l,s=c.dpr,Q8(a,l),u.setPixelRatio(c.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,m)}a!==o&&(o=a,f(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let qy,Pfe=new Set,Dfe=new Set,Bfe=new Set;function jM(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Fm(n,e){switch(n){case"before":return jM(Pfe,e);case"after":return jM(Dfe,e);case"tail":return jM(Bfe,e)}}let YM,JM;function KM(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),YM=e.internal.subscribers,qy=0;qy<YM.length;qy++)JM=YM[qy],JM.ref.current(JM.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function Lfe(n){let e=!1,t=!1,r,i,s;function o(c){i=requestAnimationFrame(o),e=!0,r=0,Fm("before",c),t=!0;for(const f of n.values()){var u;s=f.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((u=s.gl.xr)!=null&&u.isPresenting)&&(r+=KM(c,s))}if(t=!1,Fm("after",c),r===0)return Fm("tail",c),e=!1,cancelAnimationFrame(i)}function a(c,u=1){var f;if(!c)return n.forEach(p=>a(p.store.getState(),u));(f=c.gl.xr)!=null&&f.isPresenting||!c.internal.active||c.frameloop==="never"||(u>1?c.internal.frames=Math.min(60,c.internal.frames+u):t?c.internal.frames=2:c.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(c,u=!0,f,p){if(u&&Fm("before",c),f)KM(c,f,p);else for(const m of n.values())KM(c,m.store.getState());u&&Fm("after",c)}return{loop:o,invalidate:a,advance:l}}function UP(){const n=se.useContext(WE);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function wr(n=t=>t,e){return UP()(n,e)}function g0(n,e=0){const t=UP(),r=t.getState().internal.subscribe,i=Y8(n);return m0(()=>r(i,e,t),[e,r,t]),null}const q3=new WeakMap;function t6(n,e){return function(t,...r){let i=q3.get(t);return i||(i=new t,q3.set(t,i)),n&&n(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,Afe(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function Go(n,e,t,r){const i=Array.isArray(e)?e:[e],s=ffe(t6(t,r),[n,...i],{equal:jn.equ});return Array.isArray(e)?s:s[0]}Go.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return dfe(t6(t),[n,...r])};Go.clear=function(n,e){const t=Array.isArray(e)?e:[e];return hfe([n,...t])};const Tp=new Map,{invalidate:Q3,advance:Z3}=Lfe(Tp),{reconciler:B_,applyProps:El}=yfe(Tp,Tfe),$d={objects:"shallow",strict:!1},Nfe=(n,e)=>{const t=typeof n=="function"?n(e):n;return e6(t)?t:new fP({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function kfe(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:s,left:o,updateStyle:a=t}=e;return{width:r,height:i,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:r,height:i,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:r,height:i,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function Ffe(n){const e=Tp.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||Ife(Q3,Z3),o=t||B_.createContainer(s,wh.ConcurrentRoot,null,!1,null,"",i,null);e||Tp.set(n,{fiber:o,store:s});let a,l=!1,c;return{configure(u={}){let{gl:f,size:p,scene:m,events:g,onCreated:v,shadows:y=!1,linear:_=!1,flat:S=!1,legacy:E=!1,orthographic:w=!1,frameloop:I="always",dpr:T=[1,2],performance:b,raycaster:P,camera:C,onPointerMissed:M}=u,L=s.getState(),U=L.gl;L.gl||L.set({gl:U=Nfe(f,n)});let X=L.raycaster;X||L.set({raycaster:X=new kP});const{params:$,...Q}=P||{};if(jn.equ(Q,X,$d)||El(X,{...Q}),jn.equ($,X.params,$d)||El(X,{params:{...X.params,...$}}),!L.camera||L.camera===c&&!jn.equ(c,C,$d)){c=C;const F=C instanceof i0,ie=F?C:w?new Qs(0,0,0,0,.1,1e3):new qn(75,0,.1,1e3);F||(ie.position.z=5,C&&(El(ie,C),("aspect"in C||"left"in C||"right"in C||"bottom"in C||"top"in C)&&(ie.manual=!0,ie.updateProjectionMatrix())),!L.camera&&!(C!=null&&C.rotation)&&ie.lookAt(0,0,0)),L.set({camera:ie}),X.camera=ie}if(!L.scene){let F;m instanceof jf?F=m:(F=new jf,m&&El(F,m)),L.set({scene:eh(F)})}if(!L.xr){var Y;const F=(Ne,ce)=>{const xe=s.getState();xe.frameloop!=="never"&&Z3(Ne,!0,xe,ce)},ie=()=>{const Ne=s.getState();Ne.gl.xr.enabled=Ne.gl.xr.isPresenting,Ne.gl.xr.setAnimationLoop(Ne.gl.xr.isPresenting?F:null),Ne.gl.xr.isPresenting||Q3(Ne)},me={connect(){const Ne=s.getState().gl;Ne.xr.addEventListener("sessionstart",ie),Ne.xr.addEventListener("sessionend",ie)},disconnect(){const Ne=s.getState().gl;Ne.xr.removeEventListener("sessionstart",ie),Ne.xr.removeEventListener("sessionend",ie)}};typeof((Y=U.xr)==null?void 0:Y.addEventListener)=="function"&&me.connect(),L.set({xr:me})}if(U.shadowMap){const F=U.shadowMap.enabled,ie=U.shadowMap.type;if(U.shadowMap.enabled=!!y,jn.boo(y))U.shadowMap.type=bg;else if(jn.str(y)){var te;const me={basic:UG,percentage:fE,soft:bg,variance:ea};U.shadowMap.type=(te=me[y])!=null?te:bg}else jn.obj(y)&&Object.assign(U.shadowMap,y);(F!==U.shadowMap.enabled||ie!==U.shadowMap.type)&&(U.shadowMap.needsUpdate=!0)}const k=X8();k&&("enabled"in k?k.enabled=!E:"legacyMode"in k&&(k.legacyMode=E)),l||El(U,{outputEncoding:_?3e3:3001,toneMapping:S?Ya:jI}),L.legacy!==E&&L.set(()=>({legacy:E})),L.linear!==_&&L.set(()=>({linear:_})),L.flat!==S&&L.set(()=>({flat:S})),f&&!jn.fun(f)&&!e6(f)&&!jn.equ(f,U,$d)&&El(U,f),g&&!L.events.handlers&&L.set({events:g(s)});const K=kfe(n,p);return jn.equ(K,L.size,$d)||L.setSize(K.width,K.height,K.updateStyle,K.top,K.left),T&&L.viewport.dpr!==$8(T)&&L.setDpr(T),L.frameloop!==I&&L.setFrameloop(I),L.onPointerMissed||L.set({onPointerMissed:M}),b&&!jn.equ(b,L.performance,$d)&&L.set(F=>({performance:{...F.performance,...b}})),a=v,l=!0,this},render(u){return l||this.configure(),B_.updateContainer(ae.jsx(Ofe,{store:s,children:u,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){n6(n)}}}function Ofe({store:n,children:e,onCreated:t,rootElement:r}){return m0(()=>{const i=n.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),ae.jsx(WE.Provider,{value:n,children:e})}function n6(n,e){const t=Tp.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),B_.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),wfe(i),Tp.delete(n)}catch{}},500)})}}function r6(n,e,t){return ae.jsx(Ufe,{children:n,container:e,state:t},e.uuid)}function Ufe({state:n={},children:e,container:t}){const{events:r,size:i,...s}=n,o=UP(),[a]=se.useState(()=>new kP),[l]=se.useState(()=>new Le),c=se.useCallback((f,p)=>{const m={...f};Object.keys(f).forEach(v=>{(Rfe.includes(v)||f[v]!==p[v]&&p[v])&&delete m[v]});let g;if(p&&i){const v=p.camera;g=f.viewport.getCurrentViewport(v,new W,i),v!==f.camera&&Q8(v,i)}return{...m,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...p==null?void 0:p.events,...r},size:{...f.size,...i},viewport:{...f.viewport,...g},...s}},[n]),[u]=se.useState(()=>{const f=o.getState();return O8((m,g)=>({...f,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...r},size:{...f.size,...i},...s,set:m,get:g,setEvents:v=>m(y=>({...y,events:{...y.events,...v}}))}))});return se.useEffect(()=>{const f=o.subscribe(p=>u.setState(m=>c(p,m)));return()=>{f()}},[c]),se.useEffect(()=>{u.setState(f=>c(o.getState(),f))},[c]),se.useEffect(()=>()=>{u.destroy()},[]),ae.jsx(ae.Fragment,{children:B_.createPortal(ae.jsx(WE.Provider,{value:u,children:e}),u,null)})}B_.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:se.version});const $M={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Hfe(n){const{handlePointer:e}=bfe(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys($M).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:s}=n.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,c]=$M[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=$M[s];r.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function Pb(n,e,t){var r,i,s,o,a;e==null&&(e=100);function l(){var u=Date.now()-o;u<e&&u>=0?r=setTimeout(l,e-u):(r=null,t||(a=n.apply(s,i),s=i=null))}var c=function(){s=this,i=arguments,o=Date.now();var u=t&&!r;return r||(r=setTimeout(l,e)),u&&(a=n.apply(s,i),s=i=null),a};return c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(a=n.apply(s,i),s=i=null,clearTimeout(r),r=null)},c}Pb.debounce=Pb;var zfe=Pb;const eF=N_(zfe);var Gfe=Object.defineProperty,Vfe=Object.defineProperties,Wfe=Object.getOwnPropertyDescriptors,tF=Object.getOwnPropertySymbols,Xfe=Object.prototype.hasOwnProperty,jfe=Object.prototype.propertyIsEnumerable,nF=(n,e,t)=>e in n?Gfe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,rF=(n,e)=>{for(var t in e||(e={}))Xfe.call(e,t)&&nF(n,t,e[t]);if(tF)for(var t of tF(e))jfe.call(e,t)&&nF(n,t,e[t]);return n},Yfe=(n,e)=>Vfe(n,Wfe(e)),iF,sF;typeof window<"u"&&((iF=window.document)!=null&&iF.createElement||((sF=window.navigator)==null?void 0:sF.product)==="ReactNative")?se.useLayoutEffect:se.useEffect;function i6(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=n.child;for(;r;){const i=i6(r,e,t);if(i)return i;r=r.sibling}}function s6(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const oF=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=oF;return}return oF.apply(this,arguments)};const HP=s6(se.createContext(null));class o6 extends se.Component{render(){return se.createElement(HP.Provider,{value:this._reactInternals},this.props.children)}}function Jfe(){const n=se.useContext(HP);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=se.useId();return se.useMemo(()=>{for(const r of[n,n==null?void 0:n.alternate]){if(!r)continue;const i=i6(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[n,e])}function Kfe(){const n=Jfe(),[e]=se.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==HP&&!e.has(i)&&e.set(i,se.useContext(s6(i)))}t=t.return}return e}function $fe(){const n=Kfe();return se.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>se.createElement(e,null,se.createElement(t.Provider,Yfe(rF({},r),{value:n.get(t)}))),e=>se.createElement(o6,rF({},e))),[n])}function qfe({debounce:n,scroll:e,polyfill:t,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||typeof window<"u"&&window.ResizeObserver,[s,o]=se.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0});if(!i)return s.width=1280,s.height=800,[()=>{},s,()=>{}];const a=se.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s}),l=n?typeof n=="number"?n:n.scroll:null,c=n?typeof n=="number"?n:n.resize:null,u=se.useRef(!1);se.useEffect(()=>(u.current=!0,()=>void(u.current=!1)));const[f,p,m]=se.useMemo(()=>{const _=()=>{if(!a.current.element)return;const{left:S,top:E,width:w,height:I,bottom:T,right:b,x:P,y:C}=a.current.element.getBoundingClientRect(),M={left:S,top:E,width:w,height:I,bottom:T,right:b,x:P,y:C};a.current.element instanceof HTMLElement&&r&&(M.height=a.current.element.offsetHeight,M.width=a.current.element.offsetWidth),Object.freeze(M),u.current&&!tde(a.current.lastBounds,M)&&o(a.current.lastBounds=M)};return[_,c?eF(_,c):_,l?eF(_,l):_]},[o,r,l,c]);function g(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(_=>_.removeEventListener("scroll",m,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null)}function v(){a.current.element&&(a.current.resizeObserver=new i(m),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(_=>_.addEventListener("scroll",m,{capture:!0,passive:!0})))}const y=_=>{!_||_===a.current.element||(g(),a.current.element=_,a.current.scrollContainers=a6(_),v())};return Zfe(m,!!e),Qfe(p),se.useEffect(()=>{g(),v()},[e,m,p]),se.useEffect(()=>g,[]),[y,s,f]}function Qfe(n){se.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function Zfe(n,e){se.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function a6(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...a6(n.parentElement)]}const ede=["x","y","top","bottom","left","right","width","height"],tde=(n,e)=>ede.every(t=>n[t]===e[t]),nde=se.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:s,events:o=Hfe,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:f,legacy:p,orthographic:m,frameloop:g,dpr:v,performance:y,raycaster:_,camera:S,scene:E,onPointerMissed:w,onCreated:I,...T},b){se.useMemo(()=>W8(afe),[]);const P=$fe(),[C,M]=qfe({scroll:!0,debounce:{scroll:50,resize:0},...r}),L=se.useRef(null),U=se.useRef(null);se.useImperativeHandle(b,()=>L.current);const X=Y8(w),[$,Q]=se.useState(!1),[Y,te]=se.useState(!1);if($)throw $;if(Y)throw Y;const k=se.useRef(null);m0(()=>{const F=L.current;M.width>0&&M.height>0&&F&&(k.current||(k.current=Ffe(F)),k.current.configure({gl:s,events:o,shadows:c,linear:u,flat:f,legacy:p,orthographic:m,frameloop:g,dpr:v,performance:y,raycaster:_,camera:S,scene:E,size:M,onPointerMissed:(...ie)=>X.current==null?void 0:X.current(...ie),onCreated:ie=>{ie.events.connect==null||ie.events.connect(a?xfe(a)?a.current:a:U.current),l&&ie.setEvents({compute:(me,Ne)=>{const ce=me[l+"X"],xe=me[l+"Y"];Ne.pointer.set(ce/Ne.size.width*2-1,-(xe/Ne.size.height)*2+1),Ne.raycaster.setFromCamera(Ne.pointer,Ne.camera)}}),I==null||I(ie)}}),k.current.render(ae.jsx(P,{children:ae.jsx(J8,{set:te,children:ae.jsx(se.Suspense,{fallback:ae.jsx(Sfe,{set:Q}),children:e})})})))}),se.useEffect(()=>{const F=L.current;if(F)return()=>n6(F)},[]);const K=a?"none":"auto";return ae.jsx("div",{ref:U,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:K,...i},...T,children:ae.jsx("div",{ref:C,style:{width:"100%",height:"100%"},children:ae.jsx("canvas",{ref:L,style:{display:"block"},children:t})})})}),rde=se.forwardRef(function(e,t){return ae.jsx(o6,{children:ae.jsx(nde,{...e,ref:t})})}),_0=new W,zP=new W,ide=new W,aF=new Le;function sde(n,e,t){const r=_0.setFromMatrixPosition(n.matrixWorld);r.project(e);const i=t.width/2,s=t.height/2;return[r.x*i+i,-(r.y*s)+s]}function ode(n,e){const t=_0.setFromMatrixPosition(n.matrixWorld),r=zP.setFromMatrixPosition(e.matrixWorld),i=t.sub(r),s=e.getWorldDirection(ide);return i.angleTo(s)>Math.PI/2}function ade(n,e,t,r){const i=_0.setFromMatrixPosition(n.matrixWorld),s=i.clone();s.project(e),aF.set(s.x,s.y),t.setFromCamera(aF,e);const o=t.intersectObjects(r,!0);if(o.length){const a=o[0].distance;return i.distanceTo(t.ray.origin)<a}return!0}function lde(n,e){if(e instanceof Qs)return e.zoom;if(e instanceof qn){const t=_0.setFromMatrixPosition(n.matrixWorld),r=zP.setFromMatrixPosition(e.matrixWorld),i=e.fov*Math.PI/180,s=t.distanceTo(r);return 1/(2*Math.tan(i/2)*s)}else return 1}function cde(n,e,t){if(e instanceof qn||e instanceof Qs){const r=_0.setFromMatrixPosition(n.matrixWorld),i=zP.setFromMatrixPosition(e.matrixWorld),s=r.distanceTo(i),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}}const Db=n=>Math.abs(n)<1e-10?0:n;function l6(n,e,t=""){let r="matrix3d(";for(let i=0;i!==16;i++)r+=Db(e[i]*n.elements[i])+(i!==15?",":")");return t+r}const ude=(n=>e=>l6(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),fde=(n=>(e,t)=>l6(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function dde(n){return n&&typeof n=="object"&&"current"in n}const hde=se.forwardRef(({children:n,eps:e=.001,style:t,className:r,prepend:i,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:c=!1,transform:u=!1,occlude:f,onOcclude:p,castShadow:m,receiveShadow:g,material:v,geometry:y,zIndexRange:_=[16777271,0],calculatePosition:S=sde,as:E="div",wrapperClass:w,pointerEvents:I="auto",...T},b)=>{const{gl:P,camera:C,scene:M,size:L,raycaster:U,events:X,viewport:$}=wr(),[Q]=se.useState(()=>document.createElement(E)),Y=se.useRef(),te=se.useRef(null),k=se.useRef(0),K=se.useRef([0,0]),F=se.useRef(null),ie=se.useRef(null),me=(a==null?void 0:a.current)||X.connected||P.domElement.parentNode,Ne=se.useRef(null),ce=se.useRef(!1),xe=se.useMemo(()=>f&&f!=="blending"||Array.isArray(f)&&f.length&&dde(f[0]),[f]);se.useLayoutEffect(()=>{const Qe=P.domElement;f&&f==="blending"?(Qe.style.zIndex=`${Math.floor(_[0]/2)}`,Qe.style.position="absolute",Qe.style.pointerEvents="none"):(Qe.style.zIndex=null,Qe.style.position=null,Qe.style.pointerEvents=null)},[f]),se.useLayoutEffect(()=>{if(te.current){const Qe=Y.current=PR(Q);if(M.updateMatrixWorld(),u)Q.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Ge=S(te.current,C,L);Q.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Ge[0]}px,${Ge[1]}px,0);transform-origin:0 0;`}return me&&(i?me.prepend(Q):me.appendChild(Q)),()=>{me&&me.removeChild(Q),Qe.unmount()}}},[me,u]),se.useLayoutEffect(()=>{w&&(Q.className=w)},[w]);const Ae=se.useMemo(()=>u?{position:"absolute",top:0,left:0,width:L.width,height:L.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-L.height/2,left:-L.width/2,width:L.width,height:L.height},...t},[t,s,o,L,u]),Ie=se.useMemo(()=>({position:"absolute",pointerEvents:I}),[I]);se.useLayoutEffect(()=>{if(ce.current=!1,u){var Qe;(Qe=Y.current)==null||Qe.render(se.createElement("div",{ref:F,style:Ae},se.createElement("div",{ref:ie,style:Ie},se.createElement("div",{ref:b,className:r,style:t,children:n}))))}else{var Ge;(Ge=Y.current)==null||Ge.render(se.createElement("div",{ref:b,style:Ae,className:r,children:n}))}});const Xe=se.useRef(!0);g0(Qe=>{if(te.current){C.updateMatrixWorld(),te.current.updateWorldMatrix(!0,!1);const Ge=u?K.current:S(te.current,C,L);if(u||Math.abs(k.current-C.zoom)>e||Math.abs(K.current[0]-Ge[0])>e||Math.abs(K.current[1]-Ge[1])>e){const z=ode(te.current,C);let pe=!1;xe&&(Array.isArray(f)?pe=f.map(oe=>oe.current):f!=="blending"&&(pe=[M]));const Me=Xe.current;if(pe){const oe=ade(te.current,C,U,pe);Xe.current=oe&&!z}else Xe.current=!z;Me!==Xe.current&&(p?p(!Xe.current):Q.style.display=Xe.current?"block":"none");const Be=Math.floor(_[0]/2),ye=f?xe?[_[0],Be]:[Be-1,0]:_;if(Q.style.zIndex=`${cde(te.current,C,ye)}`,u){const[oe,Ue]=[L.width/2,L.height/2],Ke=C.projectionMatrix.elements[5]*Ue,{isOrthographicCamera:V,top:O,left:le,bottom:Se,right:ve}=C,Ce=ude(C.matrixWorldInverse),lt=V?`scale(${Ke})translate(${Db(-(ve+le)/2)}px,${Db((O+Se)/2)}px)`:`translateZ(${Ke}px)`;let Oe=te.current.matrixWorld;c&&(Oe=C.matrixWorldInverse.clone().transpose().copyPosition(Oe).scale(te.current.scale),Oe.elements[3]=Oe.elements[7]=Oe.elements[11]=0,Oe.elements[15]=1),Q.style.width=L.width+"px",Q.style.height=L.height+"px",Q.style.perspective=V?"":`${Ke}px`,F.current&&ie.current&&(F.current.style.transform=`${lt}${Ce}translate(${oe}px,${Ue}px)`,ie.current.style.transform=fde(Oe,1/((l||10)/400)))}else{const oe=l===void 0?1:lde(te.current,C)*l;Q.style.transform=`translate3d(${Ge[0]}px,${Ge[1]}px,0) scale(${oe})`}K.current=Ge,k.current=C.zoom}}if(!xe&&Ne.current&&!ce.current)if(u){if(F.current){const Ge=F.current.children[0];if(Ge!=null&&Ge.clientWidth&&Ge!=null&&Ge.clientHeight){const{isOrthographicCamera:z}=C;if(z||y)T.scale&&(Array.isArray(T.scale)?T.scale instanceof W?Ne.current.scale.copy(T.scale.clone().divideScalar(1)):Ne.current.scale.set(1/T.scale[0],1/T.scale[1],1/T.scale[2]):Ne.current.scale.setScalar(1/T.scale));else{const pe=(l||10)/400,Me=Ge.clientWidth*pe,Be=Ge.clientHeight*pe;Ne.current.scale.set(Me,Be,1)}ce.current=!0}}}else{const Ge=Q.children[0];if(Ge!=null&&Ge.clientWidth&&Ge!=null&&Ge.clientHeight){const z=1/$.factor,pe=Ge.clientWidth*z,Me=Ge.clientHeight*z;Ne.current.scale.set(pe,Me,1),ce.current=!0}Ne.current.lookAt(Qe.camera.position)}});const it=se.useMemo(()=>({vertexShader:u?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[u]);return se.createElement("group",ha({},T,{ref:te}),f&&!xe&&se.createElement("mesh",{castShadow:m,receiveShadow:g,ref:Ne},y||se.createElement("planeGeometry",null),v||se.createElement("shaderMaterial",{side:vs,vertexShader:it.vertexShader,fragmentShader:it.fragmentShader})))}),pde=parseInt(Up.replace(/\D+/g,""));function lF(n,e){if(e===A5)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===p1||e===tP){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const r=t.count-2,i=[];if(t)if(e===p1)for(let o=1;o<=r;o++)i.push(t.getX(0)),i.push(t.getX(o)),i.push(t.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(t.getX(o)),i.push(t.getX(o+1)),i.push(t.getX(o+2))):(i.push(t.getX(o+2)),i.push(t.getX(o+1)),i.push(t.getX(o)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}var Ro=Uint8Array,Bc=Uint16Array,Bb=Uint32Array,c6=new Ro([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),u6=new Ro([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),mde=new Ro([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),f6=function(n,e){for(var t=new Bc(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new Bb(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return[t,i]},d6=f6(c6,2),h6=d6[0],gde=d6[1];h6[28]=258,gde[258]=28;var _de=f6(u6,0),vde=_de[0],Lb=new Bc(32768);for(var Qn=0;Qn<32768;++Qn){var dc=(Qn&43690)>>>1|(Qn&21845)<<1;dc=(dc&52428)>>>2|(dc&13107)<<2,dc=(dc&61680)>>>4|(dc&3855)<<4,Lb[Qn]=((dc&65280)>>>8|(dc&255)<<8)>>>1}var Fg=function(n,e,t){for(var r=n.length,i=0,s=new Bc(e);i<r;++i)++s[n[i]-1];var o=new Bc(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(t){a=new Bc(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var c=i<<4|n[i],u=e-n[i],f=o[n[i]-1]++<<u,p=f|(1<<u)-1;f<=p;++f)a[Lb[f]>>>l]=c}else for(a=new Bc(r),i=0;i<r;++i)n[i]&&(a[i]=Lb[o[n[i]-1]++]>>>15-n[i]);return a},v0=new Ro(288);for(var Qn=0;Qn<144;++Qn)v0[Qn]=8;for(var Qn=144;Qn<256;++Qn)v0[Qn]=9;for(var Qn=256;Qn<280;++Qn)v0[Qn]=7;for(var Qn=280;Qn<288;++Qn)v0[Qn]=8;var p6=new Ro(32);for(var Qn=0;Qn<32;++Qn)p6[Qn]=5;var yde=Fg(v0,9,1),xde=Fg(p6,5,1),qM=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},$o=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},QM=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Sde=function(n){return(n/8|0)+(n&7&&1)},Ede=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var r=new(n instanceof Bc?Bc:n instanceof Bb?Bb:Ro)(t-e);return r.set(n.subarray(e,t)),r},Ade=function(n,e,t){var r=n.length;if(!r||t&&!t.l&&r<5)return e||new Ro(0);var i=!e||t,s=!t||t.i;t||(t={}),e||(e=new Ro(r*3));var o=function(Ae){var Ie=e.length;if(Ae>Ie){var Xe=new Ro(Math.max(Ie*2,Ae));Xe.set(e),e=Xe}},a=t.f||0,l=t.p||0,c=t.b||0,u=t.l,f=t.d,p=t.m,m=t.n,g=r*8;do{if(!u){t.f=a=$o(n,l,1);var v=$o(n,l+1,3);if(l+=3,v)if(v==1)u=yde,f=xde,p=9,m=5;else if(v==2){var E=$o(n,l,31)+257,w=$o(n,l+10,15)+4,I=E+$o(n,l+5,31)+1;l+=14;for(var T=new Ro(I),b=new Ro(19),P=0;P<w;++P)b[mde[P]]=$o(n,l+P*3,7);l+=w*3;for(var C=qM(b),M=(1<<C)-1,L=Fg(b,C,1),P=0;P<I;){var U=L[$o(n,l,M)];l+=U&15;var y=U>>>4;if(y<16)T[P++]=y;else{var X=0,$=0;for(y==16?($=3+$o(n,l,3),l+=2,X=T[P-1]):y==17?($=3+$o(n,l,7),l+=3):y==18&&($=11+$o(n,l,127),l+=7);$--;)T[P++]=X}}var Q=T.subarray(0,E),Y=T.subarray(E);p=qM(Q),m=qM(Y),u=Fg(Q,p,1),f=Fg(Y,m,1)}else throw"invalid block type";else{var y=Sde(l)+4,_=n[y-4]|n[y-3]<<8,S=y+_;if(S>r){if(s)throw"unexpected EOF";break}i&&o(c+_),e.set(n.subarray(y,S),c),t.b=c+=_,t.p=l=S*8;continue}if(l>g){if(s)throw"unexpected EOF";break}}i&&o(c+131072);for(var te=(1<<p)-1,k=(1<<m)-1,K=l;;K=l){var X=u[QM(n,l)&te],F=X>>>4;if(l+=X&15,l>g){if(s)throw"unexpected EOF";break}if(!X)throw"invalid length/literal";if(F<256)e[c++]=F;else if(F==256){K=l,u=null;break}else{var ie=F-254;if(F>264){var P=F-257,me=c6[P];ie=$o(n,l,(1<<me)-1)+h6[P],l+=me}var Ne=f[QM(n,l)&k],ce=Ne>>>4;if(!Ne)throw"invalid distance";l+=Ne&15;var Y=vde[ce];if(ce>3){var me=u6[ce];Y+=QM(n,l)&(1<<me)-1,l+=me}if(l>g){if(s)throw"unexpected EOF";break}i&&o(c+131072);for(var xe=c+ie;c<xe;c+=4)e[c]=e[c-Y],e[c+1]=e[c+1-Y],e[c+2]=e[c+2-Y],e[c+3]=e[c+3-Y];c=xe}}t.l=u,t.p=K,t.b=c,u&&(a=1,t.m=p,t.d=f,t.n=m)}while(!a);return c==e.length?e:Ede(e,0,c)},wde=new Ro(0),Mde=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Qy(n,e){return Ade((Mde(n),n.subarray(2,-4)),e)}var Tde=typeof TextDecoder<"u"&&new TextDecoder,Cde=0;try{Tde.decode(wde,{stream:!0}),Cde=1}catch{}const bde=n=>n&&n.isCubeTexture;class Rde extends lr{constructor(e,t){var r,i;const s=bde(e),a=((i=s?(r=e.image[0])==null?void 0:r.width:e.image.width)!=null?i:1024)/4,l=Math.floor(Math.log2(a)),c=Math.pow(2,l),u=3*Math.max(c,16*7),f=4*c,p=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/u}`,`#define CUBEUV_TEXEL_HEIGHT ${1/f}`,`#define CUBEUV_MAX_MIP ${l}.0`],m=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,g=p.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${parseInt(Up.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,v={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},y=new u0(1,16),_=new Ds({uniforms:v,fragmentShader:g,vertexShader:m,side:vs});super(y,_)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var Ide=Object.defineProperty,Pde=(n,e,t)=>e in n?Ide(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ut=(n,e,t)=>(Pde(n,typeof e!="symbol"?e+"":e,t),t);const Zy=new od,cF=new Sl,Dde=Math.cos(70*(Math.PI/180)),uF=(n,e)=>(n%e+e)%e;let Bde=class extends pa{constructor(e,t){super(),Ut(this,"object"),Ut(this,"domElement"),Ut(this,"enabled",!0),Ut(this,"target",new W),Ut(this,"minDistance",0),Ut(this,"maxDistance",1/0),Ut(this,"minZoom",0),Ut(this,"maxZoom",1/0),Ut(this,"minPolarAngle",0),Ut(this,"maxPolarAngle",Math.PI),Ut(this,"minAzimuthAngle",-1/0),Ut(this,"maxAzimuthAngle",1/0),Ut(this,"enableDamping",!1),Ut(this,"dampingFactor",.05),Ut(this,"enableZoom",!0),Ut(this,"zoomSpeed",1),Ut(this,"enableRotate",!0),Ut(this,"rotateSpeed",1),Ut(this,"enablePan",!0),Ut(this,"panSpeed",1),Ut(this,"screenSpacePanning",!0),Ut(this,"keyPanSpeed",7),Ut(this,"zoomToCursor",!1),Ut(this,"autoRotate",!1),Ut(this,"autoRotateSpeed",2),Ut(this,"reverseOrbit",!1),Ut(this,"reverseHorizontalOrbit",!1),Ut(this,"reverseVerticalOrbit",!1),Ut(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Ut(this,"mouseButtons",{LEFT:Yu.ROTATE,MIDDLE:Yu.DOLLY,RIGHT:Yu.PAN}),Ut(this,"touches",{ONE:Ju.ROTATE,TWO:Ju.DOLLY_PAN}),Ut(this,"target0"),Ut(this,"position0"),Ut(this,"zoom0"),Ut(this,"_domElementKeyEvents",null),Ut(this,"getPolarAngle"),Ut(this,"getAzimuthalAngle"),Ut(this,"setPolarAngle"),Ut(this,"setAzimuthalAngle"),Ut(this,"getDistance"),Ut(this,"listenToKeyEvents"),Ut(this,"stopListenToKeyEvents"),Ut(this,"saveState"),Ut(this,"reset"),Ut(this,"update"),Ut(this,"connect"),Ut(this,"dispose"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=re=>{let Pe=uF(re,2*Math.PI),je=u.phi;je<0&&(je+=2*Math.PI),Pe<0&&(Pe+=2*Math.PI);let ee=Math.abs(Pe-je);2*Math.PI-ee<ee&&(Pe<je?Pe+=2*Math.PI:je+=2*Math.PI),f.phi=Pe-je,r.update()},this.setAzimuthalAngle=re=>{let Pe=uF(re,2*Math.PI),je=u.theta;je<0&&(je+=2*Math.PI),Pe<0&&(Pe+=2*Math.PI);let ee=Math.abs(Pe-je);2*Math.PI-ee<ee&&(Pe<je?Pe+=2*Math.PI:je+=2*Math.PI),f.theta=Pe-je,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=re=>{re.addEventListener("keydown",Oe),this._domElementKeyEvents=re},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Oe),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const re=new W,Pe=new W(0,1,0),je=new ui().setFromUnitVectors(e.up,Pe),ee=je.clone().invert(),Te=new W,ue=new ui,Re=2*Math.PI;return function(){const ht=r.object.position;je.setFromUnitVectors(e.up,Pe),ee.copy(je).invert(),re.copy(ht).sub(r.target),re.applyQuaternion(je),u.setFromVector3(re),r.autoRotate&&l===a.NONE&&$(U()),r.enableDamping?(u.theta+=f.theta*r.dampingFactor,u.phi+=f.phi*r.dampingFactor):(u.theta+=f.theta,u.phi+=f.phi);let Ct=r.minAzimuthAngle,jt=r.maxAzimuthAngle;isFinite(Ct)&&isFinite(jt)&&(Ct<-Math.PI?Ct+=Re:Ct>Math.PI&&(Ct-=Re),jt<-Math.PI?jt+=Re:jt>Math.PI&&(jt-=Re),Ct<=jt?u.theta=Math.max(Ct,Math.min(jt,u.theta)):u.theta=u.theta>(Ct+jt)/2?Math.max(Ct,u.theta):Math.min(jt,u.theta)),u.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,u.phi)),u.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(m,r.dampingFactor):r.target.add(m),r.zoomToCursor&&C||r.object.isOrthographicCamera?u.radius=me(u.radius):u.radius=me(u.radius*p),re.setFromSpherical(u),re.applyQuaternion(ee),ht.copy(r.target).add(re),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(f.theta*=1-r.dampingFactor,f.phi*=1-r.dampingFactor,m.multiplyScalar(1-r.dampingFactor)):(f.set(0,0,0),m.set(0,0,0));let cn=!1;if(r.zoomToCursor&&C){let Ot=null;if(r.object instanceof qn&&r.object.isPerspectiveCamera){const yt=re.length();Ot=me(yt*p);const ft=yt-Ot;r.object.position.addScaledVector(b,ft),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const yt=new W(P.x,P.y,0);yt.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/p)),r.object.updateProjectionMatrix(),cn=!0;const ft=new W(P.x,P.y,0);ft.unproject(r.object),r.object.position.sub(ft).add(yt),r.object.updateMatrixWorld(),Ot=re.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;Ot!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(Ot).add(r.object.position):(Zy.origin.copy(r.object.position),Zy.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(Zy.direction))<Dde?e.lookAt(r.target):(cF.setFromNormalAndCoplanarPoint(r.object.up,r.target),Zy.intersectPlane(cF,r.target))))}else r.object instanceof Qs&&r.object.isOrthographicCamera&&(cn=p!==1,cn&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/p)),r.object.updateProjectionMatrix()));return p=1,C=!1,cn||Te.distanceToSquared(r.object.position)>c||8*(1-ue.dot(r.object.quaternion))>c?(r.dispatchEvent(i),Te.copy(r.object.position),ue.copy(r.object.quaternion),cn=!1,!0):!1}})(),this.connect=re=>{r.domElement=re,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",He),r.domElement.addEventListener("pointerdown",O),r.domElement.addEventListener("pointercancel",Se),r.domElement.addEventListener("wheel",lt)},this.dispose=()=>{var re,Pe,je,ee,Te,ue;r.domElement&&(r.domElement.style.touchAction="auto"),(re=r.domElement)==null||re.removeEventListener("contextmenu",He),(Pe=r.domElement)==null||Pe.removeEventListener("pointerdown",O),(je=r.domElement)==null||je.removeEventListener("pointercancel",Se),(ee=r.domElement)==null||ee.removeEventListener("wheel",lt),(Te=r.domElement)==null||Te.ownerDocument.removeEventListener("pointermove",le),(ue=r.domElement)==null||ue.ownerDocument.removeEventListener("pointerup",Se),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",Oe)};const r=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,u=new bb,f=new bb;let p=1;const m=new W,g=new Le,v=new Le,y=new Le,_=new Le,S=new Le,E=new Le,w=new Le,I=new Le,T=new Le,b=new W,P=new Le;let C=!1;const M=[],L={};function U(){return 2*Math.PI/60/60*r.autoRotateSpeed}function X(){return Math.pow(.95,r.zoomSpeed)}function $(re){r.reverseOrbit||r.reverseHorizontalOrbit?f.theta+=re:f.theta-=re}function Q(re){r.reverseOrbit||r.reverseVerticalOrbit?f.phi+=re:f.phi-=re}const Y=(()=>{const re=new W;return function(je,ee){re.setFromMatrixColumn(ee,0),re.multiplyScalar(-je),m.add(re)}})(),te=(()=>{const re=new W;return function(je,ee){r.screenSpacePanning===!0?re.setFromMatrixColumn(ee,1):(re.setFromMatrixColumn(ee,0),re.crossVectors(r.object.up,re)),re.multiplyScalar(je),m.add(re)}})(),k=(()=>{const re=new W;return function(je,ee){const Te=r.domElement;if(Te&&r.object instanceof qn&&r.object.isPerspectiveCamera){const ue=r.object.position;re.copy(ue).sub(r.target);let Re=re.length();Re*=Math.tan(r.object.fov/2*Math.PI/180),Y(2*je*Re/Te.clientHeight,r.object.matrix),te(2*ee*Re/Te.clientHeight,r.object.matrix)}else Te&&r.object instanceof Qs&&r.object.isOrthographicCamera?(Y(je*(r.object.right-r.object.left)/r.object.zoom/Te.clientWidth,r.object.matrix),te(ee*(r.object.top-r.object.bottom)/r.object.zoom/Te.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function K(re){r.object instanceof qn&&r.object.isPerspectiveCamera||r.object instanceof Qs&&r.object.isOrthographicCamera?p/=re:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function F(re){r.object instanceof qn&&r.object.isPerspectiveCamera||r.object instanceof Qs&&r.object.isOrthographicCamera?p*=re:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function ie(re){if(!r.zoomToCursor||!r.domElement)return;C=!0;const Pe=r.domElement.getBoundingClientRect(),je=re.clientX-Pe.left,ee=re.clientY-Pe.top,Te=Pe.width,ue=Pe.height;P.x=je/Te*2-1,P.y=-(ee/ue)*2+1,b.set(P.x,P.y,1).unproject(r.object).sub(r.object.position).normalize()}function me(re){return Math.max(r.minDistance,Math.min(r.maxDistance,re))}function Ne(re){g.set(re.clientX,re.clientY)}function ce(re){ie(re),w.set(re.clientX,re.clientY)}function xe(re){_.set(re.clientX,re.clientY)}function Ae(re){v.set(re.clientX,re.clientY),y.subVectors(v,g).multiplyScalar(r.rotateSpeed);const Pe=r.domElement;Pe&&($(2*Math.PI*y.x/Pe.clientHeight),Q(2*Math.PI*y.y/Pe.clientHeight)),g.copy(v),r.update()}function Ie(re){I.set(re.clientX,re.clientY),T.subVectors(I,w),T.y>0?K(X()):T.y<0&&F(X()),w.copy(I),r.update()}function Xe(re){S.set(re.clientX,re.clientY),E.subVectors(S,_).multiplyScalar(r.panSpeed),k(E.x,E.y),_.copy(S),r.update()}function it(re){ie(re),re.deltaY<0?F(X()):re.deltaY>0&&K(X()),r.update()}function Qe(re){let Pe=!1;switch(re.code){case r.keys.UP:k(0,r.keyPanSpeed),Pe=!0;break;case r.keys.BOTTOM:k(0,-r.keyPanSpeed),Pe=!0;break;case r.keys.LEFT:k(r.keyPanSpeed,0),Pe=!0;break;case r.keys.RIGHT:k(-r.keyPanSpeed,0),Pe=!0;break}Pe&&(re.preventDefault(),r.update())}function Ge(){if(M.length==1)g.set(M[0].pageX,M[0].pageY);else{const re=.5*(M[0].pageX+M[1].pageX),Pe=.5*(M[0].pageY+M[1].pageY);g.set(re,Pe)}}function z(){if(M.length==1)_.set(M[0].pageX,M[0].pageY);else{const re=.5*(M[0].pageX+M[1].pageX),Pe=.5*(M[0].pageY+M[1].pageY);_.set(re,Pe)}}function pe(){const re=M[0].pageX-M[1].pageX,Pe=M[0].pageY-M[1].pageY,je=Math.sqrt(re*re+Pe*Pe);w.set(0,je)}function Me(){r.enableZoom&&pe(),r.enablePan&&z()}function Be(){r.enableZoom&&pe(),r.enableRotate&&Ge()}function ye(re){if(M.length==1)v.set(re.pageX,re.pageY);else{const je=Ye(re),ee=.5*(re.pageX+je.x),Te=.5*(re.pageY+je.y);v.set(ee,Te)}y.subVectors(v,g).multiplyScalar(r.rotateSpeed);const Pe=r.domElement;Pe&&($(2*Math.PI*y.x/Pe.clientHeight),Q(2*Math.PI*y.y/Pe.clientHeight)),g.copy(v)}function oe(re){if(M.length==1)S.set(re.pageX,re.pageY);else{const Pe=Ye(re),je=.5*(re.pageX+Pe.x),ee=.5*(re.pageY+Pe.y);S.set(je,ee)}E.subVectors(S,_).multiplyScalar(r.panSpeed),k(E.x,E.y),_.copy(S)}function Ue(re){const Pe=Ye(re),je=re.pageX-Pe.x,ee=re.pageY-Pe.y,Te=Math.sqrt(je*je+ee*ee);I.set(0,Te),T.set(0,Math.pow(I.y/w.y,r.zoomSpeed)),K(T.y),w.copy(I)}function Ke(re){r.enableZoom&&Ue(re),r.enablePan&&oe(re)}function V(re){r.enableZoom&&Ue(re),r.enableRotate&&ye(re)}function O(re){var Pe,je;r.enabled!==!1&&(M.length===0&&((Pe=r.domElement)==null||Pe.ownerDocument.addEventListener("pointermove",le),(je=r.domElement)==null||je.ownerDocument.addEventListener("pointerup",Se)),nt(re),re.pointerType==="touch"?Ze(re):ve(re))}function le(re){r.enabled!==!1&&(re.pointerType==="touch"?_t(re):Ce(re))}function Se(re){var Pe,je,ee;St(re),M.length===0&&((Pe=r.domElement)==null||Pe.releasePointerCapture(re.pointerId),(je=r.domElement)==null||je.ownerDocument.removeEventListener("pointermove",le),(ee=r.domElement)==null||ee.ownerDocument.removeEventListener("pointerup",Se)),r.dispatchEvent(o),l=a.NONE}function ve(re){let Pe;switch(re.button){case 0:Pe=r.mouseButtons.LEFT;break;case 1:Pe=r.mouseButtons.MIDDLE;break;case 2:Pe=r.mouseButtons.RIGHT;break;default:Pe=-1}switch(Pe){case Yu.DOLLY:if(r.enableZoom===!1)return;ce(re),l=a.DOLLY;break;case Yu.ROTATE:if(re.ctrlKey||re.metaKey||re.shiftKey){if(r.enablePan===!1)return;xe(re),l=a.PAN}else{if(r.enableRotate===!1)return;Ne(re),l=a.ROTATE}break;case Yu.PAN:if(re.ctrlKey||re.metaKey||re.shiftKey){if(r.enableRotate===!1)return;Ne(re),l=a.ROTATE}else{if(r.enablePan===!1)return;xe(re),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function Ce(re){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;Ae(re);break;case a.DOLLY:if(r.enableZoom===!1)return;Ie(re);break;case a.PAN:if(r.enablePan===!1)return;Xe(re);break}}function lt(re){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(re.preventDefault(),r.dispatchEvent(s),it(re),r.dispatchEvent(o))}function Oe(re){r.enabled===!1||r.enablePan===!1||Qe(re)}function Ze(re){switch(Et(re),M.length){case 1:switch(r.touches.ONE){case Ju.ROTATE:if(r.enableRotate===!1)return;Ge(),l=a.TOUCH_ROTATE;break;case Ju.PAN:if(r.enablePan===!1)return;z(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case Ju.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Me(),l=a.TOUCH_DOLLY_PAN;break;case Ju.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Be(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function _t(re){switch(Et(re),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;ye(re),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;oe(re),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Ke(re),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;V(re),r.update();break;default:l=a.NONE}}function He(re){r.enabled!==!1&&re.preventDefault()}function nt(re){M.push(re)}function St(re){delete L[re.pointerId];for(let Pe=0;Pe<M.length;Pe++)if(M[Pe].pointerId==re.pointerId){M.splice(Pe,1);return}}function Et(re){let Pe=L[re.pointerId];Pe===void 0&&(Pe=new Le,L[re.pointerId]=Pe),Pe.set(re.pageX,re.pageY)}function Ye(re){const Pe=re.pointerId===M[0].pointerId?M[1]:M[0];return L[Pe.pointerId]}t!==void 0&&this.connect(t),this.update()}};function v1(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,r=n.length;t<r;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const pf="srgb",Ll="srgb-linear",fF=3001,Lde=3e3;class GP extends Ai{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Ude(t)}),this.register(function(t){return new Hde(t)}),this.register(function(t){return new Kde(t)}),this.register(function(t){return new $de(t)}),this.register(function(t){return new qde(t)}),this.register(function(t){return new Gde(t)}),this.register(function(t){return new Vde(t)}),this.register(function(t){return new Wde(t)}),this.register(function(t){return new Xde(t)}),this.register(function(t){return new Ode(t)}),this.register(function(t){return new jde(t)}),this.register(function(t){return new zde(t)}),this.register(function(t){return new Jde(t)}),this.register(function(t){return new Yde(t)}),this.register(function(t){return new kde(t)}),this.register(function(t){return new Qde(t)}),this.register(function(t){return new Zde(t)})}load(e,t,r,i){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const c=Jc.extractUrlBase(e);o=Jc.resolveURL(c,this.path)}else o=Jc.extractUrlBase(e);this.manager.itemStart(e);const a=function(c){i?i(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Si(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(v1(new Uint8Array(e.slice(0,4)))===m6){try{o[fn.KHR_BINARY_GLTF]=new ehe(e)}catch(u){i&&i(u);return}s=JSON.parse(o[fn.KHR_BINARY_GLTF].content)}else s=JSON.parse(v1(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new hhe(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const u=this.pluginCallbacks[c](l);u.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[u.name]=u,o[u.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){const u=s.extensionsUsed[c],f=s.extensionsRequired||[];switch(u){case fn.KHR_MATERIALS_UNLIT:o[u]=new Fde;break;case fn.KHR_DRACO_MESH_COMPRESSION:o[u]=new the(s,this.dracoLoader);break;case fn.KHR_TEXTURE_TRANSFORM:o[u]=new nhe;break;case fn.KHR_MESH_QUANTIZATION:o[u]=new rhe;break;default:f.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(r,i)}parseAsync(e,t){const r=this;return new Promise(function(i,s){r.parse(e,t,i,s)})}}function Nde(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const fn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class kde{constructor(e){this.parser=e,this.name=fn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,i=t.length;r<i;r++){const s=t[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let i=t.cache.get(r);if(i)return i;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new rt(16777215);l.color!==void 0&&u.setRGB(l.color[0],l.color[1],l.color[2],Ll);const f=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new IP(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new RP(u),c.distance=f;break;case"spot":c=new bP(u),c.distance=f,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,_l(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),i=Promise.resolve(c),t.cache.add(r,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,r=this.parser,s=r.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return r._getNodeRef(t.cache,a,l)})}}class Fde{constructor(){this.name=fn.KHR_MATERIALS_UNLIT}getMaterialType(){return Ss}extendParams(e,t,r){const i=[];e.color=new rt(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],Ll),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture,pf))}return Promise.all(i)}}class Ode{constructor(e){this.parser=e,this.name=fn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class Ude{constructor(e){this.parser=e,this.name=fn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Vo}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Le(a,a)}return Promise.all(s)}}class Hde{constructor(e){this.parser=e,this.name=fn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Vo}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class zde{constructor(e){this.parser=e,this.name=fn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Vo}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class Gde{constructor(e){this.parser=e,this.name=fn.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Vo}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new rt(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],Ll)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(t,"sheenColorMap",o.sheenColorTexture,pf)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class Vde{constructor(e){this.parser=e,this.name=fn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Vo}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class Wde{constructor(e){this.parser=e,this.name=fn.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Vo}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new rt().setRGB(a[0],a[1],a[2],Ll),Promise.all(s)}}class Xde{constructor(e){this.parser=e,this.name=fn.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Vo}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class jde{constructor(e){this.parser=e,this.name=fn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Vo}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new rt().setRGB(a[0],a[1],a[2],Ll),o.specularColorTexture!==void 0&&s.push(r.assignTexture(t,"specularColorMap",o.specularColorTexture,pf)),Promise.all(s)}}class Yde{constructor(e){this.parser=e,this.name=fn.EXT_MATERIALS_BUMP}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Vo}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(r.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class Jde{constructor(e){this.parser=e,this.name=fn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Vo}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(r.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class Kde{constructor(e){this.parser=e,this.name=fn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class $de{constructor(e){this.parser=e,this.name=fn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class qde{constructor(e){this.parser=e,this.name=fn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Qde{constructor(e){this.name=fn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=i.byteOffset||0,c=i.byteLength||0,u=i.count,f=i.byteStride,p=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,f,p,i.mode,i.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(u*f);return o.decodeGltfBuffer(new Uint8Array(m),u,f,p,i.mode,i.filter),m})})}else return null}}class Zde{constructor(e){this.name=fn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,r=t.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=t.meshes[r.mesh];for(const c of i.primitives)if(c.mode!==Ao.TRIANGLES&&c.mode!==Ao.TRIANGLE_STRIP&&c.mode!==Ao.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=r.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(u=>(l[c]=u,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const u=c.pop(),f=u.isGroup?u.children:[u],p=c[0].count,m=[];for(const g of f){const v=new Rt,y=new W,_=new ui,S=new W(1,1,1),E=new pP(g.geometry,g.material,p);for(let w=0;w<p;w++)l.TRANSLATION&&y.fromBufferAttribute(l.TRANSLATION,w),l.ROTATION&&_.fromBufferAttribute(l.ROTATION,w),l.SCALE&&S.fromBufferAttribute(l.SCALE,w),E.setMatrixAt(w,v.compose(y,_,S));for(const w in l)if(w==="_COLOR_0"){const I=l[w];E.instanceColor=new Yf(I.array,I.itemSize,I.normalized)}else w!=="TRANSLATION"&&w!=="ROTATION"&&w!=="SCALE"&&g.geometry.setAttribute(w,l[w]);_n.prototype.copy.call(E,g),this.parser.assignFinalMaterial(E),m.push(E)}return u.isGroup?(u.clear(),u.add(...m),u):m[0]}))}}const m6="glTF",Om=12,dF={JSON:1313821514,BIN:5130562};class ehe{constructor(e){this.name=fn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Om);if(this.header={magic:v1(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==m6)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-Om,i=new DataView(e,Om);let s=0;for(;s<r;){const o=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===dF.JSON){const l=new Uint8Array(e,Om+s,o);this.content=v1(l)}else if(a===dF.BIN){const l=Om+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class the{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=fn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const f=Nb[u]||u.toLowerCase();a[f]=o[u]}for(const u in e.attributes){const f=Nb[u]||u.toLowerCase();if(o[u]!==void 0){const p=r.accessors[e.attributes[u]],m=Wh[p.componentType];c[f]=m.name,l[f]=p.normalized===!0}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(f,p){i.decodeDracoFile(u,function(m){for(const g in m.attributes){const v=m.attributes[g],y=l[g];y!==void 0&&(v.normalized=y)}f(m)},a,c,Ll,p)})})}}class nhe{constructor(){this.name=fn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class rhe{constructor(){this.name=fn.KHR_MESH_QUANTIZATION}}class g6 extends Vp{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)t[o]=r[s+o];return t}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,u=i-t,f=(r-t)/u,p=f*f,m=p*f,g=e*c,v=g-c,y=-2*m+3*p,_=m-p,S=1-y,E=_-p+f;for(let w=0;w!==a;w++){const I=o[v+w+a],T=o[v+w+l]*u,b=o[g+w+a],P=o[g+w]*u;s[w]=S*I+E*T+y*b+_*P}return s}}const ihe=new ui;class she extends g6{interpolate_(e,t,r,i){const s=super.interpolate_(e,t,r,i);return ihe.fromArray(s).normalize().toArray(s),s}}const Ao={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Wh={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},hF={9728:$r,9729:Sn,9984:dE,9985:zh,9986:af,9987:Bo},pF={33071:Lr,33648:yp,10497:su},ZM={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Nb={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...pde>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},hc={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},ohe={CUBICSPLINE:void 0,LINEAR:Ep,STEP:Sp},eT={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function ahe(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new h0({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:$a})),n.DefaultMaterial}function zu(n,e,t){for(const r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function _l(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function lhe(n,e,t){let r=!1,i=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const f=e[c];if(f.POSITION!==void 0&&(r=!0),f.NORMAL!==void 0&&(i=!0),f.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];if(r){const p=f.POSITION!==void 0?t.getDependency("accessor",f.POSITION):n.attributes.position;o.push(p)}if(i){const p=f.NORMAL!==void 0?t.getDependency("accessor",f.NORMAL):n.attributes.normal;a.push(p)}if(s){const p=f.COLOR_0!==void 0?t.getDependency("accessor",f.COLOR_0):n.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],f=c[1],p=c[2];return r&&(n.morphAttributes.position=u),i&&(n.morphAttributes.normal=f),s&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}function che(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,i=t.length;r<i;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function uhe(n){let e;const t=n.extensions&&n.extensions[fn.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+tT(t.attributes):e=n.indices+":"+tT(n.attributes)+":"+n.mode,n.targets!==void 0)for(let r=0,i=n.targets.length;r<i;r++)e+=":"+tT(n.targets[r]);return e}function tT(n){let e="";const t=Object.keys(n).sort();for(let r=0,i=t.length;r<i;r++)e+=t[r]+":"+n[t[r]]+";";return e}function kb(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function fhe(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const dhe=new Rt;class hhe{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Nde,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,i=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||i&&s<98?this.textureLoader=new p0(this.options.manager):this.textureLoader=new D8(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Si(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};return zu(s,a,i),_l(a,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const i=r.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(r,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const i=e(t[r]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&r.push(s)}return r}getDependency(e,t){const r=e+":"+t;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(r,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[fn.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load(Jc.resolveURL(t.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const i=t.byteLength||0,s=t.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const t=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const o=ZM[i.type],a=Wh[i.componentType],l=i.normalized===!0,c=new a(i.count*o);return Promise.resolve(new Mn(c,o,l))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=ZM[i.type],c=Wh[i.componentType],u=c.BYTES_PER_ELEMENT,f=u*l,p=i.byteOffset||0,m=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,g=i.normalized===!0;let v,y;if(m&&m!==f){const _=Math.floor(p/m),S="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+_+":"+i.count;let E=t.cache.get(S);E||(v=new c(a,_*m,i.count*m/u),E=new a0(v,m/u),t.cache.add(S,E)),y=new ou(E,l,p%m/u,g)}else a===null?v=new c(i.count*l):v=new c(a,p,i.count*l),y=new Mn(v,l,g);if(i.sparse!==void 0){const _=ZM.SCALAR,S=Wh[i.sparse.indices.componentType],E=i.sparse.indices.byteOffset||0,w=i.sparse.values.byteOffset||0,I=new S(o[1],E,i.sparse.count*_),T=new c(o[2],w,i.sparse.count*l);a!==null&&(y=new Mn(y.array.slice(),y.itemSize,y.normalized));for(let b=0,P=I.length;b<P;b++){const C=I[b];if(y.setX(C,T[b*l]),l>=2&&y.setY(C,T[b*l+1]),l>=3&&y.setZ(C,T[b*l+2]),l>=4&&y.setW(C,T[b*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return y})}loadTexture(e){const t=this.json,r=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=r.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,r){const i=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,r).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);const p=(s.samplers||{})[o.sampler]||{};return u.magFilter=hF[p.magFilter]||Sn,u.minFilter=hF[p.minFilter]||Bo,u.wrapS=pF[p.wrapS]||su,u.wrapT=pF[p.wrapT]||su,i.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const r=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(f=>f.clone());const o=i.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=r.getDependency("bufferView",o.bufferView).then(function(f){c=!0;const p=new Blob([f],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(f){return new Promise(function(p,m){let g=p;t.isImageBitmapLoader===!0&&(g=function(v){const y=new En(v);y.needsUpdate=!0,p(y)}),t.load(Jc.resolveURL(f,s.path),g,void 0,m)})}).then(function(f){return c===!0&&a.revokeObjectURL(l),_l(f,o),f.userData.mimeType=o.mimeType||fhe(o.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),f});return this.sourceCache[e]=u,u}assignTexture(e,t,r,i){const s=this;return this.getDependency("texture",r.index).then(function(o){if(!o)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(o=o.clone(),o.channel=r.texCoord),s.extensions[fn.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[fn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[fn.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return i!==void 0&&(typeof i=="number"&&(i=i===fF?pf:Ll),"colorSpace"in o?o.colorSpace=i:o.encoding=i===pf?fF:Lde),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new CE,Vr.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new Gi,Vr.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,this.cache.add(a,l)),r=l}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}e.material=r}getMaterialType(){return h0}loadMaterial(e){const t=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[fn.KHR_MATERIALS_UNLIT]){const f=i[fn.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),c.push(f.extendParams(a,s,t))}else{const f=s.pbrMetallicRoughness||{};if(a.color=new rt(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const p=f.baseColorFactor;a.color.setRGB(p[0],p[1],p[2],Ll),a.opacity=p[3]}f.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",f.baseColorTexture,pf)),a.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,a.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=vs);const u=s.alphaMode||eT.OPAQUE;if(u===eT.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===eT.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==Ss&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Le(1,1),s.normalTexture.scale!==void 0)){const f=s.normalTexture.scale;a.normalScale.set(f,f)}if(s.occlusionTexture!==void 0&&o!==Ss&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==Ss){const f=s.emissiveFactor;a.emissive=new rt().setRGB(f[0],f[1],f[2],Ll)}return s.emissiveTexture!==void 0&&o!==Ss&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,pf)),Promise.all(c).then(function(){const f=new o(a);return s.name&&(f.name=s.name),_l(f,s),t.associations.set(f,{materials:e}),s.extensions&&zu(i,f,s),f})}createUniqueName(e){const t=vn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[fn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return mF(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=uhe(c),f=i[u];if(f)o.push(f.promise);else{let p;c.extensions&&c.extensions[fn.KHR_DRACO_MESH_COMPRESSION]?p=s(c):p=mF(new Xt,c,t),i[u]={primitive:c,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=o[l].material===void 0?ahe(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],f=[];for(let m=0,g=u.length;m<g;m++){const v=u[m],y=o[m];let _;const S=c[m];if(y.mode===Ao.TRIANGLES||y.mode===Ao.TRIANGLE_STRIP||y.mode===Ao.TRIANGLE_FAN||y.mode===void 0)_=s.isSkinnedMesh===!0?new hP(v,S):new lr(v,S),_.isSkinnedMesh===!0&&_.normalizeSkinWeights(),y.mode===Ao.TRIANGLE_STRIP?_.geometry=lF(_.geometry,tP):y.mode===Ao.TRIANGLE_FAN&&(_.geometry=lF(_.geometry,p1));else if(y.mode===Ao.LINES)_=new ma(v,S);else if(y.mode===Ao.LINE_STRIP)_=new jl(v,S);else if(y.mode===Ao.LINE_LOOP)_=new mP(v,S);else if(y.mode===Ao.POINTS)_=new gP(v,S);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+y.mode);Object.keys(_.geometry.morphAttributes).length>0&&che(_,s),_.name=t.createUniqueName(s.name||"mesh_"+e),_l(_,s),y.extensions&&zu(i,_,y),t.assignFinalMaterial(_),f.push(_)}for(let m=0,g=f.length;m<g;m++)t.associations.set(f[m],{meshes:e,primitives:m});if(f.length===1)return s.extensions&&zu(i,f[0],s),f[0];const p=new oa;s.extensions&&zu(i,p,s),t.associations.set(p,{meshes:e});for(let m=0,g=f.length;m<g;m++)p.add(f[m]);return p})}loadCamera(e){let t;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new qn(L5.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(t=new Qs(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),_l(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r=[];for(let i=0,s=t.joints.length;i<s;i++)r.push(this._loadNodeShallow(t.joints[i]));return t.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",t.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(i){const s=i.pop(),o=i,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const f=o[c];if(f){a.push(f);const p=new Rt;s!==null&&p.fromArray(s.array,c*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new l0(a,l)})}loadAnimation(e){const t=this.json,r=this,i=t.animations[e],s=i.name?i.name:"animation_"+e,o=[],a=[],l=[],c=[],u=[];for(let f=0,p=i.channels.length;f<p;f++){const m=i.channels[f],g=i.samplers[m.sampler],v=m.target,y=v.node,_=i.parameters!==void 0?i.parameters[g.input]:g.input,S=i.parameters!==void 0?i.parameters[g.output]:g.output;v.node!==void 0&&(o.push(this.getDependency("node",y)),a.push(this.getDependency("accessor",_)),l.push(this.getDependency("accessor",S)),c.push(g),u.push(v))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(f){const p=f[0],m=f[1],g=f[2],v=f[3],y=f[4],_=[];for(let S=0,E=p.length;S<E;S++){const w=p[S],I=m[S],T=g[S],b=v[S],P=y[S];if(w===void 0)continue;w.updateMatrix&&w.updateMatrix();const C=r._createAnimationTracks(w,I,T,b,P);if(C)for(let M=0;M<C.length;M++)_.push(C[M])}return new Mp(s,void 0,_)})}createNodeMesh(e){const t=this.json,r=this,i=t.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=i.weights.length;l<c;l++)a.morphTargetInfluences[l]=i.weights[l]}),o})}loadNode(e){const t=this.json,r=this,i=t.nodes[e],s=r._loadNodeShallow(e),o=[],a=i.children||[];for(let c=0,u=a.length;c<u;c++)o.push(r.getDependency("node",a[c]));const l=i.skin===void 0?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const u=c[0],f=c[1],p=c[2];p!==null&&u.traverse(function(m){m.isSkinnedMesh&&m.bind(p,dhe)});for(let m=0,g=f.length;m<g;m++)u.add(f[m]);return u})}_loadNodeShallow(e){const t=this.json,r=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?i.createUniqueName(s.name):"",a=[],l=i._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(c){return i._getNodeRef(i.cameraCache,s.camera,c)})),i._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(s.isBone===!0?u=new TE:c.length>1?u=new oa:c.length===1?u=c[0]:u=new _n,u!==c[0])for(let f=0,p=c.length;f<p;f++)u.add(c[f]);if(s.name&&(u.userData.name=s.name,u.name=o),_l(u,s),s.extensions&&zu(r,u,s),s.matrix!==void 0){const f=new Rt;f.fromArray(s.matrix),u.applyMatrix4(f)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return i.associations.has(u)||i.associations.set(u,{}),i.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,r=this.json.scenes[e],i=this,s=new oa;r.name&&(s.name=i.createUniqueName(r.name)),_l(s,r),r.extensions&&zu(t,s,r);const o=r.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(i.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,f=l.length;u<f;u++)s.add(l[u]);const c=u=>{const f=new Map;for(const[p,m]of i.associations)(p instanceof Vr||p instanceof En)&&f.set(p,m);return u.traverse(p=>{const m=i.associations.get(p);m!=null&&f.set(p,m)}),f};return i.associations=c(s),s})}_createAnimationTracks(e,t,r,i,s){const o=[],a=e.name?e.name:e.uuid,l=[];hc[s.path]===hc.weights?e.traverse(function(p){p.morphTargetInfluences&&l.push(p.name?p.name:p.uuid)}):l.push(a);let c;switch(hc[s.path]){case hc.weights:c=Kf;break;case hc.rotation:c=$f;break;case hc.position:case hc.scale:c=qf;break;default:switch(r.itemSize){case 1:c=Kf;break;case 2:case 3:default:c=qf;break}break}const u=i.interpolation!==void 0?ohe[i.interpolation]:Ep,f=this._getArrayFromAccessor(r);for(let p=0,m=l.length;p<m;p++){const g=new c(l[p]+"."+hc[s.path],t.array,f,u);i.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(g),o.push(g)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const r=kb(t.constructor),i=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)i[s]=t[s]*r;t=i}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(r){const i=this instanceof $f?she:g6;return new i(this.times,this.values,this.getValueSize()/3,r)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function phe(n,e,t){const r=e.attributes,i=new Ui;if(r.POSITION!==void 0){const a=t.json.accessors[r.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(i.set(new W(l[0],l[1],l[2]),new W(c[0],c[1],c[2])),a.normalized){const u=kb(Wh[a.componentType]);i.min.multiplyScalar(u),i.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new W,l=new W;for(let c=0,u=s.length;c<u;c++){const f=s[c];if(f.POSITION!==void 0){const p=t.json.accessors[f.POSITION],m=p.min,g=p.max;if(m!==void 0&&g!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(g[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(g[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(g[2]))),p.normalized){const v=kb(Wh[p.componentType]);l.multiplyScalar(v)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}n.boundingBox=i;const o=new xi;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,n.boundingSphere=o}function mF(n,e,t){const r=e.attributes,i=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in r){const a=Nb[o]||o.toLowerCase();a in n.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});i.push(o)}return _l(n,e),phe(n,e,t),Promise.all(i).then(function(){return e.targets!==void 0?lhe(n,e.targets,t):n})}class mhe extends TP{constructor(e){super(e),this.type=qr}parse(e){const o=function(P,C){switch(P){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(C||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(C||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(C||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(C||""))}},u=`
`,f=function(P,C,M){C=C||1024;let U=P.pos,X=-1,$=0,Q="",Y=String.fromCharCode.apply(null,new Uint16Array(P.subarray(U,U+128)));for(;0>(X=Y.indexOf(u))&&$<C&&U<P.byteLength;)Q+=Y,$+=Y.length,U+=128,Y+=String.fromCharCode.apply(null,new Uint16Array(P.subarray(U,U+128)));return-1<X?(P.pos+=$+X+1,Q+Y.slice(0,X)):!1},p=function(P){const C=/^#\?(\S+)/,M=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,L=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,U=/^\s*FORMAT=(\S+)\s*$/,X=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,$={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let Q,Y;for((P.pos>=P.byteLength||!(Q=f(P)))&&o(1,"no header found"),(Y=Q.match(C))||o(3,"bad initial token"),$.valid|=1,$.programtype=Y[1],$.string+=Q+`
`;Q=f(P),Q!==!1;){if($.string+=Q+`
`,Q.charAt(0)==="#"){$.comments+=Q+`
`;continue}if((Y=Q.match(M))&&($.gamma=parseFloat(Y[1])),(Y=Q.match(L))&&($.exposure=parseFloat(Y[1])),(Y=Q.match(U))&&($.valid|=2,$.format=Y[1]),(Y=Q.match(X))&&($.valid|=4,$.height=parseInt(Y[1],10),$.width=parseInt(Y[2],10)),$.valid&2&&$.valid&4)break}return $.valid&2||o(3,"missing format specifier"),$.valid&4||o(3,"missing image size specifier"),$},m=function(P,C,M){const L=C;if(L<8||L>32767||P[0]!==2||P[1]!==2||P[2]&128)return new Uint8Array(P);L!==(P[2]<<8|P[3])&&o(3,"wrong scanline width");const U=new Uint8Array(4*C*M);U.length||o(4,"unable to allocate buffer space");let X=0,$=0;const Q=4*L,Y=new Uint8Array(4),te=new Uint8Array(Q);let k=M;for(;k>0&&$<P.byteLength;){$+4>P.byteLength&&o(1),Y[0]=P[$++],Y[1]=P[$++],Y[2]=P[$++],Y[3]=P[$++],(Y[0]!=2||Y[1]!=2||(Y[2]<<8|Y[3])!=L)&&o(3,"bad rgbe scanline format");let K=0,F;for(;K<Q&&$<P.byteLength;){F=P[$++];const me=F>128;if(me&&(F-=128),(F===0||K+F>Q)&&o(3,"bad scanline data"),me){const Ne=P[$++];for(let ce=0;ce<F;ce++)te[K++]=Ne}else te.set(P.subarray($,$+F),K),K+=F,$+=F}const ie=L;for(let me=0;me<ie;me++){let Ne=0;U[X]=te[me+Ne],Ne+=L,U[X+1]=te[me+Ne],Ne+=L,U[X+2]=te[me+Ne],Ne+=L,U[X+3]=te[me+Ne],X+=4}k--}return U},g=function(P,C,M,L){const U=P[C+3],X=Math.pow(2,U-128)/255;M[L+0]=P[C+0]*X,M[L+1]=P[C+1]*X,M[L+2]=P[C+2]*X,M[L+3]=1},v=function(P,C,M,L){const U=P[C+3],X=Math.pow(2,U-128)/255;M[L+0]=ff.toHalfFloat(Math.min(P[C+0]*X,65504)),M[L+1]=ff.toHalfFloat(Math.min(P[C+1]*X,65504)),M[L+2]=ff.toHalfFloat(Math.min(P[C+2]*X,65504)),M[L+3]=ff.toHalfFloat(1)},y=new Uint8Array(e);y.pos=0;const _=p(y),S=_.width,E=_.height,w=m(y.subarray(y.pos),S,E);let I,T,b;switch(this.type){case ar:b=w.length/4;const P=new Float32Array(b*4);for(let M=0;M<b;M++)g(w,M*4,P,M*4);I=P,T=ar;break;case qr:b=w.length/4;const C=new Uint16Array(b*4);for(let M=0;M<b;M++)v(w,M*4,C,M*4);I=C,T=qr;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:S,height:E,data:I,header:_.string,gamma:_.gamma,exposure:_.exposure,type:T}}setDataType(e){return this.type=e,this}load(e,t,r,i){function s(o,a){switch(o.type){case ar:case qr:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=Sn,o.magFilter=Sn,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,r,i)}}const Um="colorSpace"in new En;class ghe extends TP{constructor(e){super(e),this.type=qr}parse(e){const C=Math.pow(2.7182818,2.2);function M(N,H){for(var ne=0,D=0;D<65536;++D)(D==0||N[D>>3]&1<<(D&7))&&(H[ne++]=D);for(var G=ne-1;ne<65536;)H[ne++]=0;return G}function L(N){for(var H=0;H<16384;H++)N[H]={},N[H].len=0,N[H].lit=0,N[H].p=null}const U={l:0,c:0,lc:0};function X(N,H,ne,D,G){for(;ne<N;)H=H<<8|re(D,G),ne+=8;ne-=N,U.l=H>>ne&(1<<N)-1,U.c=H,U.lc=ne}const $=new Array(59);function Q(N){for(var H=0;H<=58;++H)$[H]=0;for(var H=0;H<65537;++H)$[N[H]]+=1;for(var ne=0,H=58;H>0;--H){var D=ne+$[H]>>1;$[H]=ne,ne=D}for(var H=0;H<65537;++H){var G=N[H];G>0&&(N[H]=G|$[G]++<<6)}}function Y(N,H,ne,D,G,j,Z){for(var J=ne,de=0,_e=0;G<=j;G++){if(J.value-ne.value>D)return!1;X(6,de,_e,N,J);var we=U.l;if(de=U.c,_e=U.lc,Z[G]=we,we==63){if(J.value-ne.value>D)throw"Something wrong with hufUnpackEncTable";X(8,de,_e,N,J);var ge=U.l+6;if(de=U.c,_e=U.lc,G+ge>j+1)throw"Something wrong with hufUnpackEncTable";for(;ge--;)Z[G++]=0;G--}else if(we>=59){var ge=we-59+2;if(G+ge>j+1)throw"Something wrong with hufUnpackEncTable";for(;ge--;)Z[G++]=0;G--}}Q(Z)}function te(N){return N&63}function k(N){return N>>6}function K(N,H,ne,D){for(;H<=ne;H++){var G=k(N[H]),j=te(N[H]);if(G>>j)throw"Invalid table entry";if(j>14){var Z=D[G>>j-14];if(Z.len)throw"Invalid table entry";if(Z.lit++,Z.p){var J=Z.p;Z.p=new Array(Z.lit);for(var de=0;de<Z.lit-1;++de)Z.p[de]=J[de]}else Z.p=new Array(1);Z.p[Z.lit-1]=H}else if(j)for(var _e=0,de=1<<14-j;de>0;de--){var Z=D[(G<<14-j)+_e];if(Z.len||Z.p)throw"Invalid table entry";Z.len=j,Z.lit=H,_e++}}return!0}const F={c:0,lc:0};function ie(N,H,ne,D){N=N<<8|re(ne,D),H+=8,F.c=N,F.lc=H}const me={c:0,lc:0};function Ne(N,H,ne,D,G,j,Z,J,de,_e){if(N==H){D<8&&(ie(ne,D,G,Z),ne=F.c,D=F.lc),D-=8;var we=ne>>D,we=new Uint8Array([we])[0];if(de.value+we>_e)return!1;for(var ge=J[de.value-1];we-- >0;)J[de.value++]=ge}else if(de.value<_e)J[de.value++]=N;else return!1;me.c=ne,me.lc=D}function ce(N){return N&65535}function xe(N){var H=ce(N);return H>32767?H-65536:H}const Ae={a:0,b:0};function Ie(N,H){var ne=xe(N),D=xe(H),G=D,j=ne+(G&1)+(G>>1),Z=j,J=j-G;Ae.a=Z,Ae.b=J}function Xe(N,H){var ne=ce(N),D=ce(H),G=ne-(D>>1)&65535,j=D+G-32768&65535;Ae.a=j,Ae.b=G}function it(N,H,ne,D,G,j,Z){for(var J=Z<16384,de=ne>G?G:ne,_e=1,we;_e<=de;)_e<<=1;for(_e>>=1,we=_e,_e>>=1;_e>=1;){for(var ge=0,Ve=ge+j*(G-we),ke=j*_e,Fe=j*we,st=D*_e,ut=D*we,dt,bt,tt,ze;ge<=Ve;ge+=Fe){for(var It=ge,wt=ge+D*(ne-we);It<=wt;It+=ut){var Dt=It+st,An=It+ke,Pn=An+st;J?(Ie(N[It+H],N[An+H]),dt=Ae.a,tt=Ae.b,Ie(N[Dt+H],N[Pn+H]),bt=Ae.a,ze=Ae.b,Ie(dt,bt),N[It+H]=Ae.a,N[Dt+H]=Ae.b,Ie(tt,ze),N[An+H]=Ae.a,N[Pn+H]=Ae.b):(Xe(N[It+H],N[An+H]),dt=Ae.a,tt=Ae.b,Xe(N[Dt+H],N[Pn+H]),bt=Ae.a,ze=Ae.b,Xe(dt,bt),N[It+H]=Ae.a,N[Dt+H]=Ae.b,Xe(tt,ze),N[An+H]=Ae.a,N[Pn+H]=Ae.b)}if(ne&_e){var An=It+ke;J?Ie(N[It+H],N[An+H]):Xe(N[It+H],N[An+H]),dt=Ae.a,N[An+H]=Ae.b,N[It+H]=dt}}if(G&_e)for(var It=ge,wt=ge+D*(ne-we);It<=wt;It+=ut){var Dt=It+st;J?Ie(N[It+H],N[Dt+H]):Xe(N[It+H],N[Dt+H]),dt=Ae.a,N[Dt+H]=Ae.b,N[It+H]=dt}we=_e,_e>>=1}return ge}function Qe(N,H,ne,D,G,j,Z,J,de,_e){for(var we=0,ge=0,Ve=J,ke=Math.trunc(G.value+(j+7)/8);G.value<ke;)for(ie(we,ge,ne,G),we=F.c,ge=F.lc;ge>=14;){var Fe=we>>ge-14&16383,st=H[Fe];if(st.len)ge-=st.len,Ne(st.lit,Z,we,ge,ne,D,G,de,_e,Ve),we=me.c,ge=me.lc;else{if(!st.p)throw"hufDecode issues";var ut;for(ut=0;ut<st.lit;ut++){for(var dt=te(N[st.p[ut]]);ge<dt&&G.value<ke;)ie(we,ge,ne,G),we=F.c,ge=F.lc;if(ge>=dt&&k(N[st.p[ut]])==(we>>ge-dt&(1<<dt)-1)){ge-=dt,Ne(st.p[ut],Z,we,ge,ne,D,G,de,_e,Ve),we=me.c,ge=me.lc;break}}if(ut==st.lit)throw"hufDecode issues"}}var bt=8-j&7;for(we>>=bt,ge-=bt;ge>0;){var st=H[we<<14-ge&16383];if(st.len)ge-=st.len,Ne(st.lit,Z,we,ge,ne,D,G,de,_e,Ve),we=me.c,ge=me.lc;else throw"hufDecode issues"}return!0}function Ge(N,H,ne,D,G,j){var Z={value:0},J=ne.value,de=Ye(H,ne),_e=Ye(H,ne);ne.value+=4;var we=Ye(H,ne);if(ne.value+=4,de<0||de>=65537||_e<0||_e>=65537)throw"Something wrong with HUF_ENCSIZE";var ge=new Array(65537),Ve=new Array(16384);L(Ve);var ke=D-(ne.value-J);if(Y(N,H,ne,ke,de,_e,ge),we>8*(D-(ne.value-J)))throw"Something wrong with hufUncompress";K(ge,de,_e,Ve),Qe(ge,Ve,N,H,ne,we,_e,j,G,Z)}function z(N,H,ne){for(var D=0;D<ne;++D)H[D]=N[H[D]]}function pe(N){for(var H=1;H<N.length;H++){var ne=N[H-1]+N[H]-128;N[H]=ne}}function Me(N,H){for(var ne=0,D=Math.floor((N.length+1)/2),G=0,j=N.length-1;!(G>j||(H[G++]=N[ne++],G>j));)H[G++]=N[D++]}function Be(N){for(var H=N.byteLength,ne=new Array,D=0,G=new DataView(N);H>0;){var j=G.getInt8(D++);if(j<0){var Z=-j;H-=Z+1;for(var J=0;J<Z;J++)ne.push(G.getUint8(D++))}else{var Z=j;H-=2;for(var de=G.getUint8(D++),J=0;J<Z+1;J++)ne.push(de)}}return ne}function ye(N,H,ne,D,G,j){var Dt=new DataView(j.buffer),Z=ne[N.idx[0]].width,J=ne[N.idx[0]].height,de=3,_e=Math.floor(Z/8),we=Math.ceil(Z/8),ge=Math.ceil(J/8),Ve=Z-(we-1)*8,ke=J-(ge-1)*8,Fe={value:0},st=new Array(de),ut=new Array(de),dt=new Array(de),bt=new Array(de),tt=new Array(de);for(let en=0;en<de;++en)tt[en]=H[N.idx[en]],st[en]=en<1?0:st[en-1]+we*ge,ut[en]=new Float32Array(64),dt[en]=new Uint16Array(64),bt[en]=new Uint16Array(we*64);for(let en=0;en<ge;++en){var ze=8;en==ge-1&&(ze=ke);var It=8;for(let Yt=0;Yt<we;++Yt){Yt==we-1&&(It=Ve);for(let hn=0;hn<de;++hn)dt[hn].fill(0),dt[hn][0]=G[st[hn]++],oe(Fe,D,dt[hn]),Ue(dt[hn],ut[hn]),Ke(ut[hn]);V(ut);for(let hn=0;hn<de;++hn)O(ut[hn],bt[hn],Yt*64)}let cr=0;for(let Yt=0;Yt<de;++Yt){const hn=ne[N.idx[Yt]].type;for(let Gn=8*en;Gn<8*en+ze;++Gn){cr=tt[Yt][Gn];for(let uo=0;uo<_e;++uo){const Vi=uo*64+(Gn&7)*8;Dt.setUint16(cr+0*2*hn,bt[Yt][Vi+0],!0),Dt.setUint16(cr+1*2*hn,bt[Yt][Vi+1],!0),Dt.setUint16(cr+2*2*hn,bt[Yt][Vi+2],!0),Dt.setUint16(cr+3*2*hn,bt[Yt][Vi+3],!0),Dt.setUint16(cr+4*2*hn,bt[Yt][Vi+4],!0),Dt.setUint16(cr+5*2*hn,bt[Yt][Vi+5],!0),Dt.setUint16(cr+6*2*hn,bt[Yt][Vi+6],!0),Dt.setUint16(cr+7*2*hn,bt[Yt][Vi+7],!0),cr+=8*2*hn}}if(_e!=we)for(let Gn=8*en;Gn<8*en+ze;++Gn){const uo=tt[Yt][Gn]+8*_e*2*hn,Vi=_e*64+(Gn&7)*8;for(let va=0;va<It;++va)Dt.setUint16(uo+va*2*hn,bt[Yt][Vi+va],!0)}}}for(var wt=new Uint16Array(Z),Dt=new DataView(j.buffer),An=0;An<de;++An){ne[N.idx[An]].decoded=!0;var Pn=ne[N.idx[An]].type;if(ne[An].type==2)for(var tr=0;tr<J;++tr){const en=tt[An][tr];for(var sn=0;sn<Z;++sn)wt[sn]=Dt.getUint16(en+sn*2*Pn,!0);for(var sn=0;sn<Z;++sn)Dt.setFloat32(en+sn*2*Pn,ue(wt[sn]),!0)}}}function oe(N,H,ne){for(var D,G=1;G<64;)D=H[N.value],D==65280?G=64:D>>8==255?G+=D&255:(ne[G]=D,G++),N.value++}function Ue(N,H){H[0]=ue(N[0]),H[1]=ue(N[1]),H[2]=ue(N[5]),H[3]=ue(N[6]),H[4]=ue(N[14]),H[5]=ue(N[15]),H[6]=ue(N[27]),H[7]=ue(N[28]),H[8]=ue(N[2]),H[9]=ue(N[4]),H[10]=ue(N[7]),H[11]=ue(N[13]),H[12]=ue(N[16]),H[13]=ue(N[26]),H[14]=ue(N[29]),H[15]=ue(N[42]),H[16]=ue(N[3]),H[17]=ue(N[8]),H[18]=ue(N[12]),H[19]=ue(N[17]),H[20]=ue(N[25]),H[21]=ue(N[30]),H[22]=ue(N[41]),H[23]=ue(N[43]),H[24]=ue(N[9]),H[25]=ue(N[11]),H[26]=ue(N[18]),H[27]=ue(N[24]),H[28]=ue(N[31]),H[29]=ue(N[40]),H[30]=ue(N[44]),H[31]=ue(N[53]),H[32]=ue(N[10]),H[33]=ue(N[19]),H[34]=ue(N[23]),H[35]=ue(N[32]),H[36]=ue(N[39]),H[37]=ue(N[45]),H[38]=ue(N[52]),H[39]=ue(N[54]),H[40]=ue(N[20]),H[41]=ue(N[22]),H[42]=ue(N[33]),H[43]=ue(N[38]),H[44]=ue(N[46]),H[45]=ue(N[51]),H[46]=ue(N[55]),H[47]=ue(N[60]),H[48]=ue(N[21]),H[49]=ue(N[34]),H[50]=ue(N[37]),H[51]=ue(N[47]),H[52]=ue(N[50]),H[53]=ue(N[56]),H[54]=ue(N[59]),H[55]=ue(N[61]),H[56]=ue(N[35]),H[57]=ue(N[36]),H[58]=ue(N[48]),H[59]=ue(N[49]),H[60]=ue(N[57]),H[61]=ue(N[58]),H[62]=ue(N[62]),H[63]=ue(N[63])}function Ke(N){const H=.5*Math.cos(.7853975),ne=.5*Math.cos(3.14159/16),D=.5*Math.cos(3.14159/8),G=.5*Math.cos(3*3.14159/16),j=.5*Math.cos(5*3.14159/16),Z=.5*Math.cos(3*3.14159/8),J=.5*Math.cos(7*3.14159/16);for(var de=new Array(4),_e=new Array(4),we=new Array(4),ge=new Array(4),Ve=0;Ve<8;++Ve){var ke=Ve*8;de[0]=D*N[ke+2],de[1]=Z*N[ke+2],de[2]=D*N[ke+6],de[3]=Z*N[ke+6],_e[0]=ne*N[ke+1]+G*N[ke+3]+j*N[ke+5]+J*N[ke+7],_e[1]=G*N[ke+1]-J*N[ke+3]-ne*N[ke+5]-j*N[ke+7],_e[2]=j*N[ke+1]-ne*N[ke+3]+J*N[ke+5]+G*N[ke+7],_e[3]=J*N[ke+1]-j*N[ke+3]+G*N[ke+5]-ne*N[ke+7],we[0]=H*(N[ke+0]+N[ke+4]),we[3]=H*(N[ke+0]-N[ke+4]),we[1]=de[0]+de[3],we[2]=de[1]-de[2],ge[0]=we[0]+we[1],ge[1]=we[3]+we[2],ge[2]=we[3]-we[2],ge[3]=we[0]-we[1],N[ke+0]=ge[0]+_e[0],N[ke+1]=ge[1]+_e[1],N[ke+2]=ge[2]+_e[2],N[ke+3]=ge[3]+_e[3],N[ke+4]=ge[3]-_e[3],N[ke+5]=ge[2]-_e[2],N[ke+6]=ge[1]-_e[1],N[ke+7]=ge[0]-_e[0]}for(var Fe=0;Fe<8;++Fe)de[0]=D*N[16+Fe],de[1]=Z*N[16+Fe],de[2]=D*N[48+Fe],de[3]=Z*N[48+Fe],_e[0]=ne*N[8+Fe]+G*N[24+Fe]+j*N[40+Fe]+J*N[56+Fe],_e[1]=G*N[8+Fe]-J*N[24+Fe]-ne*N[40+Fe]-j*N[56+Fe],_e[2]=j*N[8+Fe]-ne*N[24+Fe]+J*N[40+Fe]+G*N[56+Fe],_e[3]=J*N[8+Fe]-j*N[24+Fe]+G*N[40+Fe]-ne*N[56+Fe],we[0]=H*(N[Fe]+N[32+Fe]),we[3]=H*(N[Fe]-N[32+Fe]),we[1]=de[0]+de[3],we[2]=de[1]-de[2],ge[0]=we[0]+we[1],ge[1]=we[3]+we[2],ge[2]=we[3]-we[2],ge[3]=we[0]-we[1],N[0+Fe]=ge[0]+_e[0],N[8+Fe]=ge[1]+_e[1],N[16+Fe]=ge[2]+_e[2],N[24+Fe]=ge[3]+_e[3],N[32+Fe]=ge[3]-_e[3],N[40+Fe]=ge[2]-_e[2],N[48+Fe]=ge[1]-_e[1],N[56+Fe]=ge[0]-_e[0]}function V(N){for(var H=0;H<64;++H){var ne=N[0][H],D=N[1][H],G=N[2][H];N[0][H]=ne+1.5747*G,N[1][H]=ne-.1873*D-.4682*G,N[2][H]=ne+1.8556*D}}function O(N,H,ne){for(var D=0;D<64;++D)H[ne+D]=ff.toHalfFloat(le(N[D]))}function le(N){return N<=1?Math.sign(N)*Math.pow(Math.abs(N),2.2):Math.sign(N)*Math.pow(C,Math.abs(N)-1)}function Se(N){return new DataView(N.array.buffer,N.offset.value,N.size)}function ve(N){var H=N.viewer.buffer.slice(N.offset.value,N.offset.value+N.size),ne=new Uint8Array(Be(H)),D=new Uint8Array(ne.length);return pe(ne),Me(ne,D),new DataView(D.buffer)}function Ce(N){var H=N.array.slice(N.offset.value,N.offset.value+N.size),ne=Qy(H),D=new Uint8Array(ne.length);return pe(ne),Me(ne,D),new DataView(D.buffer)}function lt(N){for(var H=N.viewer,ne={value:N.offset.value},D=new Uint16Array(N.width*N.scanlineBlockSize*(N.channels*N.type)),G=new Uint8Array(8192),j=0,Z=new Array(N.channels),J=0;J<N.channels;J++)Z[J]={},Z[J].start=j,Z[J].end=Z[J].start,Z[J].nx=N.width,Z[J].ny=N.lines,Z[J].size=N.type,j+=Z[J].nx*Z[J].ny*Z[J].size;var de=Re(H,ne),_e=Re(H,ne);if(_e>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(de<=_e)for(var J=0;J<_e-de+1;J++)G[J+de]=Pe(H,ne);var we=new Uint16Array(65536),ge=M(G,we),Ve=Ye(H,ne);Ge(N.array,H,ne,Ve,D,j);for(var J=0;J<N.channels;++J)for(var ke=Z[J],Fe=0;Fe<Z[J].size;++Fe)it(D,ke.start+Fe,ke.nx,ke.size,ke.ny,ke.nx*ke.size,ge);z(we,D,j);for(var st=0,ut=new Uint8Array(D.buffer.byteLength),dt=0;dt<N.lines;dt++)for(var bt=0;bt<N.channels;bt++){var ke=Z[bt],tt=ke.nx*ke.size,ze=new Uint8Array(D.buffer,ke.end*2,tt*2);ut.set(ze,st),st+=tt*2,ke.end+=tt}return new DataView(ut.buffer)}function Oe(N){var H=N.array.slice(N.offset.value,N.offset.value+N.size),ne=Qy(H);const D=N.lines*N.channels*N.width,G=N.type==1?new Uint16Array(D):new Uint32Array(D);let j=0,Z=0;const J=new Array(4);for(let de=0;de<N.lines;de++)for(let _e=0;_e<N.channels;_e++){let we=0;switch(N.type){case 1:J[0]=j,J[1]=J[0]+N.width,j=J[1]+N.width;for(let ge=0;ge<N.width;++ge){const Ve=ne[J[0]++]<<8|ne[J[1]++];we+=Ve,G[Z]=we,Z++}break;case 2:J[0]=j,J[1]=J[0]+N.width,J[2]=J[1]+N.width,j=J[2]+N.width;for(let ge=0;ge<N.width;++ge){const Ve=ne[J[0]++]<<24|ne[J[1]++]<<16|ne[J[2]++]<<8;we+=Ve,G[Z]=we,Z++}break}}return new DataView(G.buffer)}function Ze(N){var H=N.viewer,ne={value:N.offset.value},D=new Uint8Array(N.width*N.lines*(N.channels*N.type*2)),G={version:je(H,ne),unknownUncompressedSize:je(H,ne),unknownCompressedSize:je(H,ne),acCompressedSize:je(H,ne),dcCompressedSize:je(H,ne),rleCompressedSize:je(H,ne),rleUncompressedSize:je(H,ne),rleRawSize:je(H,ne),totalAcUncompressedCount:je(H,ne),totalDcUncompressedCount:je(H,ne),acCompression:je(H,ne)};if(G.version<2)throw"EXRLoader.parse: "+Nt.compression+" version "+G.version+" is unsupported";for(var j=new Array,Z=Re(H,ne)-2;Z>0;){var J=_t(H.buffer,ne),de=Pe(H,ne),_e=de>>2&3,we=(de>>4)-1,ge=new Int8Array([we])[0],Ve=Pe(H,ne);j.push({name:J,index:ge,type:Ve,compression:_e}),Z-=J.length+3}for(var ke=Nt.channels,Fe=new Array(N.channels),st=0;st<N.channels;++st){var ut=Fe[st]={},dt=ke[st];ut.name=dt.name,ut.compression=0,ut.decoded=!1,ut.type=dt.pixelType,ut.pLinear=dt.pLinear,ut.width=N.width,ut.height=N.lines}for(var bt={idx:new Array(3)},tt=0;tt<N.channels;++tt)for(var ut=Fe[tt],st=0;st<j.length;++st){var ze=j[st];ut.name==ze.name&&(ut.compression=ze.compression,ze.index>=0&&(bt.idx[ze.index]=tt),ut.offset=tt)}if(G.acCompressedSize>0)switch(G.acCompression){case 0:var Dt=new Uint16Array(G.totalAcUncompressedCount);Ge(N.array,H,ne,G.acCompressedSize,Dt,G.totalAcUncompressedCount);break;case 1:var It=N.array.slice(ne.value,ne.value+G.totalAcUncompressedCount),wt=Qy(It),Dt=new Uint16Array(wt.buffer);ne.value+=G.totalAcUncompressedCount;break}if(G.dcCompressedSize>0){var An={array:N.array,offset:ne,size:G.dcCompressedSize},Pn=new Uint16Array(Ce(An).buffer);ne.value+=G.dcCompressedSize}if(G.rleRawSize>0){var It=N.array.slice(ne.value,ne.value+G.rleCompressedSize),wt=Qy(It),tr=Be(wt.buffer);ne.value+=G.rleCompressedSize}for(var sn=0,en=new Array(Fe.length),st=0;st<en.length;++st)en[st]=new Array;for(var cr=0;cr<N.lines;++cr)for(var Yt=0;Yt<Fe.length;++Yt)en[Yt].push(sn),sn+=Fe[Yt].width*N.type*2;ye(bt,en,Fe,Dt,Pn,D);for(var st=0;st<Fe.length;++st){var ut=Fe[st];if(!ut.decoded)switch(ut.compression){case 2:for(var hn=0,Gn=0,cr=0;cr<N.lines;++cr){for(var uo=en[st][hn],Vi=0;Vi<ut.width;++Vi){for(var va=0;va<2*ut.type;++va)D[uo++]=tr[Gn+va*ut.width*ut.height];Gn++}hn++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(D.buffer)}function _t(N,H){for(var ne=new Uint8Array(N),D=0;ne[H.value+D]!=0;)D+=1;var G=new TextDecoder().decode(ne.slice(H.value,H.value+D));return H.value=H.value+D+1,G}function He(N,H,ne){var D=new TextDecoder().decode(new Uint8Array(N).slice(H.value,H.value+ne));return H.value=H.value+ne,D}function nt(N,H){var ne=Et(N,H),D=Ye(N,H);return[ne,D]}function St(N,H){var ne=Ye(N,H),D=Ye(N,H);return[ne,D]}function Et(N,H){var ne=N.getInt32(H.value,!0);return H.value=H.value+4,ne}function Ye(N,H){var ne=N.getUint32(H.value,!0);return H.value=H.value+4,ne}function re(N,H){var ne=N[H.value];return H.value=H.value+1,ne}function Pe(N,H){var ne=N.getUint8(H.value);return H.value=H.value+1,ne}const je=function(N,H){let ne;return"getBigInt64"in DataView.prototype?ne=Number(N.getBigInt64(H.value,!0)):ne=N.getUint32(H.value+4,!0)+Number(N.getUint32(H.value,!0)<<32),H.value+=8,ne};function ee(N,H){var ne=N.getFloat32(H.value,!0);return H.value+=4,ne}function Te(N,H){return ff.toHalfFloat(ee(N,H))}function ue(N){var H=(N&31744)>>10,ne=N&1023;return(N>>15?-1:1)*(H?H===31?ne?NaN:1/0:Math.pow(2,H-15)*(1+ne/1024):6103515625e-14*(ne/1024))}function Re(N,H){var ne=N.getUint16(H.value,!0);return H.value+=2,ne}function We(N,H){return ue(Re(N,H))}function ht(N,H,ne,D){for(var G=ne.value,j=[];ne.value<G+D-1;){var Z=_t(H,ne),J=Et(N,ne),de=Pe(N,ne);ne.value+=3;var _e=Et(N,ne),we=Et(N,ne);j.push({name:Z,pixelType:J,pLinear:de,xSampling:_e,ySampling:we})}return ne.value+=1,j}function Ct(N,H){var ne=ee(N,H),D=ee(N,H),G=ee(N,H),j=ee(N,H),Z=ee(N,H),J=ee(N,H),de=ee(N,H),_e=ee(N,H);return{redX:ne,redY:D,greenX:G,greenY:j,blueX:Z,blueY:J,whiteX:de,whiteY:_e}}function jt(N,H){var ne=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],D=Pe(N,H);return ne[D]}function cn(N,H){var ne=Ye(N,H),D=Ye(N,H),G=Ye(N,H),j=Ye(N,H);return{xMin:ne,yMin:D,xMax:G,yMax:j}}function Ot(N,H){var ne=["INCREASING_Y"],D=Pe(N,H);return ne[D]}function yt(N,H){var ne=ee(N,H),D=ee(N,H);return[ne,D]}function ft(N,H){var ne=ee(N,H),D=ee(N,H),G=ee(N,H);return[ne,D,G]}function rn(N,H,ne,D,G){if(D==="string"||D==="stringvector"||D==="iccProfile")return He(H,ne,G);if(D==="chlist")return ht(N,H,ne,G);if(D==="chromaticities")return Ct(N,ne);if(D==="compression")return jt(N,ne);if(D==="box2i")return cn(N,ne);if(D==="lineOrder")return Ot(N,ne);if(D==="float")return ee(N,ne);if(D==="v2f")return yt(N,ne);if(D==="v3f")return ft(N,ne);if(D==="int")return Et(N,ne);if(D==="rational")return nt(N,ne);if(D==="timecode")return St(N,ne);if(D==="preview")return ne.value+=G,"skipped";ne.value+=G}function et(N,H,ne){const D={};if(N.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";D.version=N.getUint8(4);const G=N.getUint8(5);D.spec={singleTile:!!(G&2),longName:!!(G&4),deepFormat:!!(G&8),multiPart:!!(G&16)},ne.value=8;for(var j=!0;j;){var Z=_t(H,ne);if(Z==0)j=!1;else{var J=_t(H,ne),de=Ye(N,ne),_e=rn(N,H,ne,J,de);_e===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${J}'.`):D[Z]=_e}}if(G&-5)throw console.error("EXRHeader:",D),"THREE.EXRLoader: provided file is currently unsupported.";return D}function Lt(N,H,ne,D,G){const j={size:0,viewer:H,array:ne,offset:D,width:N.dataWindow.xMax-N.dataWindow.xMin+1,height:N.dataWindow.yMax-N.dataWindow.yMin+1,channels:N.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:N.channels[0].pixelType,uncompress:null,getter:null,format:null,[Um?"colorSpace":"encoding"]:null};switch(N.compression){case"NO_COMPRESSION":j.lines=1,j.uncompress=Se;break;case"RLE_COMPRESSION":j.lines=1,j.uncompress=ve;break;case"ZIPS_COMPRESSION":j.lines=1,j.uncompress=Ce;break;case"ZIP_COMPRESSION":j.lines=16,j.uncompress=Ce;break;case"PIZ_COMPRESSION":j.lines=32,j.uncompress=lt;break;case"PXR24_COMPRESSION":j.lines=16,j.uncompress=Oe;break;case"DWAA_COMPRESSION":j.lines=32,j.uncompress=Ze;break;case"DWAB_COMPRESSION":j.lines=256,j.uncompress=Ze;break;default:throw"EXRLoader.parse: "+N.compression+" is unsupported"}if(j.scanlineBlockSize=j.lines,j.type==1)switch(G){case ar:j.getter=We,j.inputSize=2;break;case qr:j.getter=Re,j.inputSize=2;break}else if(j.type==2)switch(G){case ar:j.getter=ee,j.inputSize=4;break;case qr:j.getter=Te,j.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+j.type+" for "+N.compression+".";j.blockCount=(N.dataWindow.yMax+1)/j.scanlineBlockSize;for(var Z=0;Z<j.blockCount;Z++)je(H,D);j.outputChannels=j.channels==3?4:j.channels;const J=j.width*j.height*j.outputChannels;switch(G){case ar:j.byteArray=new Float32Array(J),j.channels<j.outputChannels&&j.byteArray.fill(1,0,J);break;case qr:j.byteArray=new Uint16Array(J),j.channels<j.outputChannels&&j.byteArray.fill(15360,0,J);break;default:console.error("THREE.EXRLoader: unsupported type: ",G);break}return j.bytesPerLine=j.width*j.inputSize*j.channels,j.outputChannels==4?j.format=Nr:j.format=t0,Um?j.colorSpace="srgb-linear":j.encoding=3e3,j}const xt=new DataView(e),Pt=new Uint8Array(e),In={value:0},Nt=et(xt,e,In),vt=Lt(Nt,xt,Pt,In,this.type),er={value:0},Bn={R:0,G:1,B:2,A:3,Y:0};for(let N=0;N<vt.height/vt.scanlineBlockSize;N++){const H=Ye(xt,In);vt.size=Ye(xt,In),vt.lines=H+vt.scanlineBlockSize>vt.height?vt.height-H:vt.scanlineBlockSize;const D=vt.size<vt.lines*vt.bytesPerLine?vt.uncompress(vt):Se(vt);In.value+=vt.size;for(let G=0;G<vt.scanlineBlockSize;G++){const j=G+N*vt.scanlineBlockSize;if(j>=vt.height)break;for(let Z=0;Z<vt.channels;Z++){const J=Bn[Nt.channels[Z].name];for(let de=0;de<vt.width;de++){er.value=(G*(vt.channels*vt.width)+Z*vt.width+de)*vt.inputSize;const _e=(vt.height-1-j)*(vt.width*vt.outputChannels)+de*vt.outputChannels+J;vt.byteArray[_e]=vt.getter(D,er)}}}}return{header:Nt,width:vt.width,height:vt.height,data:vt.byteArray,format:vt.format,[Um?"colorSpace":"encoding"]:vt[Um?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,r,i){function s(o,a){Um?o.colorSpace=a.colorSpace:o.encoding=a.encoding,o.minFilter=Sn,o.magFilter=Sn,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,a)}return super.load(e,s,r,i)}}const nT=new WeakMap;class _he extends Ai{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,i){const s=new Si(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(i)},r,i)}decodeDracoFile(e,t,r,i){const s={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const c=t.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=c.name)}const r=JSON.stringify(t);if(nT.has(e)){const l=nT.get(e);if(l.key===r)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(i=l,new Promise((c,u)=>{i._callbacks[s]={resolve:c,reject:u},i.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),nT.set(e,{key:r,promise:a}),a}_createGeometry(e){const t=new Xt;e.index&&t.setIndex(new Mn(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const i=e.attributes[r],s=i.name,o=i.array,a=i.itemSize;t.setAttribute(s,new Mn(o,a))}return t}_loadLibrary(e,t){const r=new Si(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((i,s)=>{r.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{const i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const s=vhe.toString(),o=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const o=s.data;switch(o.type){case"decode":i._callbacks[o.id].resolve(o);break;case"error":i._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function vhe(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(u){n.onModuleLoaded=function(f){u({draco:f})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(u=>{const f=u.draco,p=new f.Decoder,m=new f.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const g=t(f,p,m,c),v=g.attributes.map(y=>y.array.buffer);g.index&&v.push(g.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:g},v)}catch(g){console.error(g),self.postMessage({type:"error",id:a.id,error:g.message})}finally{f.destroy(m),f.destroy(p)}});break}};function t(o,a,l,c){const u=c.attributeIDs,f=c.attributeTypes;let p,m;const g=a.GetEncodedGeometryType(l);if(g===o.TRIANGULAR_MESH)p=new o.Mesh,m=a.DecodeBufferToMesh(l,p);else if(g===o.POINT_CLOUD)p=new o.PointCloud,m=a.DecodeBufferToPointCloud(l,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const v={index:null,attributes:[]};for(const y in u){const _=self[f[y]];let S,E;if(c.useUniqueIDs)E=u[y],S=a.GetAttributeByUniqueId(p,E);else{if(E=a.GetAttributeId(p,o[u[y]]),E===-1)continue;S=a.GetAttribute(p,E)}v.attributes.push(i(o,a,p,y,_,S))}return g===o.TRIANGULAR_MESH&&(v.index=r(o,a,p)),o.destroy(p),v}function r(o,a,l){const u=l.num_faces()*3,f=u*4,p=o._malloc(f);a.GetTrianglesUInt32Array(l,f,p);const m=new Uint32Array(o.HEAPF32.buffer,p,u).slice();return o._free(p),{array:m,itemSize:1}}function i(o,a,l,c,u,f){const p=f.num_components(),g=l.num_points()*p,v=g*u.BYTES_PER_ELEMENT,y=s(o,u),_=o._malloc(v);a.GetAttributeDataArrayForAllPoints(l,f,y,v,_);const S=new u(o.HEAPF32.buffer,_,g).slice();return o._free(_),{name:c,array:S,itemSize:p}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let ex;const rT=()=>{if(ex)return ex;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=n;WebAssembly.validate(t)&&(i=e);let s;const o=WebAssembly.instantiate(a(i),{}).then(f=>{s=f.instance,s.exports.__wasm_call_ctors()});function a(f){const p=new Uint8Array(f.length);for(let g=0;g<f.length;++g){const v=f.charCodeAt(g);p[g]=v>96?v-71:v>64?v-65:v>47?v+4:v>46?63:62}let m=0;for(let g=0;g<f.length;++g)p[m++]=p[g]<60?r[p[g]]:(p[g]-60)*64+p[++g];return p.buffer.slice(0,m)}function l(f,p,m,g,v,y){const _=s.exports.sbrk,S=m+3&-4,E=_(S*g),w=_(v.length),I=new Uint8Array(s.exports.memory.buffer);I.set(v,w);const T=f(E,m,g,w,v.length);if(T===0&&y&&y(E,S,g),p.set(I.subarray(E,E+m*g)),_(E-_(0)),T!==0)throw new Error(`Malformed buffer data: ${T}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return ex={ready:o,supported:!0,decodeVertexBuffer(f,p,m,g,v){l(s.exports.meshopt_decodeVertexBuffer,f,p,m,g,s.exports[c[v]])},decodeIndexBuffer(f,p,m,g){l(s.exports.meshopt_decodeIndexBuffer,f,p,m,g)},decodeIndexSequence(f,p,m,g){l(s.exports.meshopt_decodeIndexSequence,f,p,m,g)},decodeGltfBuffer(f,p,m,g,v,y){l(s.exports[u[v]],f,p,m,g,s.exports[c[y]])}},ex},iT=n=>n===Object(n)&&!Array.isArray(n)&&typeof n!="function";function VP(n,e){const t=wr(s=>s.gl),r=Go(p0,iT(n)?Object.values(n):n);return se.useLayoutEffect(()=>{e==null||e(r)},[e]),se.useEffect(()=>{if("initTexture"in t){let s=[];Array.isArray(r)?s=r:r instanceof En?s=[r]:iT(r)&&(s=Object.values(r)),s.forEach(o=>{o instanceof En&&t.initTexture(o)})}},[t,r]),se.useMemo(()=>{if(iT(n)){const s={};let o=0;for(const a in n)s[a]=r[o++];return s}else return r},[n,r])}VP.preload=n=>Go.preload(p0,n);VP.clear=n=>Go.clear(p0,n);let tx=null,_6="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function v6(n,e,t){return r=>{t&&t(r),n&&(tx||(tx=new _he),tx.setDecoderPath(typeof n=="string"?n:_6),r.setDRACOLoader(tx)),e&&r.setMeshoptDecoder(typeof rT=="function"?rT():rT)}}function y0(n,e=!0,t=!0,r){return Go(GP,n,v6(e,t,r))}y0.preload=(n,e=!0,t=!0,r)=>Go.preload(GP,n,v6(e,t,r));y0.clear=n=>Go.clear(GP,n);y0.setDecoderPath=n=>{_6=n};function yhe(n,e,t){const r=wr(p=>p.size),i=wr(p=>p.viewport),s=typeof n=="number"?n:r.width*i.dpr,o=r.height*i.dpr,a=(typeof n=="number"?t:n)||{},{samples:l=0,depth:c,...u}=a,f=se.useMemo(()=>{const p=new Ps(s,o,{minFilter:Sn,magFilter:Sn,type:qr,...u});return c&&(p.depthTexture=new EE(s,o,ar)),p.samples=l,p},[]);return se.useLayoutEffect(()=>{f.setSize(s,o),l&&(f.samples=l)},[l,f,s,o]),se.useEffect(()=>()=>f.dispose(),[]),f}const xhe=n=>typeof n=="function",She=se.forwardRef(({envMap:n,resolution:e=256,frames:t=1/0,makeDefault:r,children:i,...s},o)=>{const a=wr(({set:y})=>y),l=wr(({camera:y})=>y),c=wr(({size:y})=>y),u=se.useRef(null);se.useImperativeHandle(o,()=>u.current,[]);const f=se.useRef(null),p=yhe(e);se.useLayoutEffect(()=>{s.manual||(u.current.aspect=c.width/c.height)},[c,s]),se.useLayoutEffect(()=>{u.current.updateProjectionMatrix()});let m=0,g=null;const v=xhe(i);return g0(y=>{v&&(t===1/0||m<t)&&(f.current.visible=!1,y.gl.setRenderTarget(p),g=y.scene.background,n&&(y.scene.background=n),y.gl.render(y.scene,u.current),y.scene.background=g,y.gl.setRenderTarget(null),f.current.visible=!0,m++)}),se.useLayoutEffect(()=>{if(r){const y=l;return a(()=>({camera:u.current})),()=>a(()=>({camera:y}))}},[u,r,a]),se.createElement(se.Fragment,null,se.createElement("perspectiveCamera",ha({ref:u},s),!v&&i),se.createElement("group",{ref:f},v&&i(p.texture)))}),Ehe=se.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:r,enableDamping:i=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...c},u)=>{const f=wr(T=>T.invalidate),p=wr(T=>T.camera),m=wr(T=>T.gl),g=wr(T=>T.events),v=wr(T=>T.setEvents),y=wr(T=>T.set),_=wr(T=>T.get),S=wr(T=>T.performance),E=e||p,w=r||g.connected||m.domElement,I=se.useMemo(()=>new Bde(E),[E]);return g0(()=>{I.enabled&&I.update()},-1),se.useEffect(()=>(s&&I.connect(s===!0?w:s),I.connect(w),()=>void I.dispose()),[s,w,t,I,f]),se.useEffect(()=>{const T=C=>{f(),t&&S.regress(),o&&o(C)},b=C=>{a&&a(C)},P=C=>{l&&l(C)};return I.addEventListener("change",T),I.addEventListener("start",b),I.addEventListener("end",P),()=>{I.removeEventListener("start",b),I.removeEventListener("end",P),I.removeEventListener("change",T)}},[o,a,l,I,f,v]),se.useEffect(()=>{if(n){const T=_().controls;return y({controls:I}),()=>y({controls:T})}},[n,I]),se.createElement("primitive",ha({ref:u,object:I,enableDamping:i},c))}),Ahe=3e3,whe=3001,y6=(n,e,t)=>{let r;switch(n){case Is:r=new Uint8ClampedArray(e*t*4);break;case qr:r=new Uint16Array(e*t*4);break;case Qa:r=new Uint32Array(e*t*4);break;case hE:r=new Int8Array(e*t*4);break;case pE:r=new Int16Array(e*t*4);break;case e0:r=new Int32Array(e*t*4);break;case ar:r=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return r};let nx;const Mhe=(n,e,t,r)=>{if(nx!==void 0)return nx;const i=new Ps(1,1,r);e.setRenderTarget(i);const s=new lr(new mu,new Ss({color:16777215}));e.render(s,t),e.setRenderTarget(null);const o=y6(n,i.width,i.height);return e.readRenderTargetPixels(i,0,0,i.width,i.height,o),i.dispose(),s.geometry.dispose(),s.material.dispose(),nx=o[0]!==0,nx};class WP{constructor(e){var t,r,i,s,o,a,l,c,u,f,p,m,g,v,y,_;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(E){throw this._renderer.setRenderTarget(null),E}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const S={format:Nr,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(r=e.renderTargetOptions)===null||r===void 0?void 0:r.anisotropy:1,generateMipmaps:((i=e.renderTargetOptions)===null||i===void 0?void 0:i.generateMipmaps)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps:!1,magFilter:((o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter)!==void 0?(a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter:Sn,minFilter:((l=e.renderTargetOptions)===null||l===void 0?void 0:l.minFilter)!==void 0?(c=e.renderTargetOptions)===null||c===void 0?void 0:c.minFilter:Sn,samples:((u=e.renderTargetOptions)===null||u===void 0?void 0:u.samples)!==void 0?(f=e.renderTargetOptions)===null||f===void 0?void 0:f.samples:void 0,wrapS:((p=e.renderTargetOptions)===null||p===void 0?void 0:p.wrapS)!==void 0?(m=e.renderTargetOptions)===null||m===void 0?void 0:m.wrapS:Lr,wrapT:((g=e.renderTargetOptions)===null||g===void 0?void 0:g.wrapT)!==void 0?(v=e.renderTargetOptions)===null||v===void 0?void 0:v.wrapT:Lr};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=WP.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new jf,this._camera=new Qs,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!Mhe(this._type,this._renderer,this._camera,S)){let E;switch(this._type){case qr:E=this._renderer.extensions.has("EXT_color_buffer_float")?ar:void 0;break}E!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${ar}`),this._type=E):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new lr(new mu,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Ps(this.width,this.height,S),this._renderTarget.texture.mapping=((y=e.renderTargetOptions)===null||y===void 0?void 0:y.mapping)!==void 0?(_=e.renderTargetOptions)===null||_===void 0?void 0:_.mapping:ru}static instantiateRenderer(){const e=new fP;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=y6(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new ua(this.toArray(),this.width,this.height,Nr,this._type,(e==null?void 0:e.mapping)||ru,(e==null?void 0:e.wrapS)||Lr,(e==null?void 0:e.wrapT)||Lr,(e==null?void 0:e.magFilter)||Sn,(e==null?void 0:e.minFilter)||Sn,(e==null?void 0:e.anisotropy)||1,zo);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Ds&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof En&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof En&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const The=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,Che=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class bhe extends Ds{constructor({gamma:e,offsetHdr:t,offsetSdr:r,gainMapMin:i,gainMapMax:s,maxDisplayBoost:o,hdrCapacityMin:a,hdrCapacityMax:l,sdr:c,gainMap:u}){super({name:"GainMapDecoderMaterial",vertexShader:The,fragmentShader:Che,uniforms:{sdr:{value:c},gainMap:{value:u},gamma:{value:new W(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new W().fromArray(t)},offsetSdr:{value:new W().fromArray(r)},gainMapMin:{value:new W().fromArray(i)},gainMapMax:{value:new W().fromArray(s)},weightFactor:{value:(Math.log2(o)-a)/(l-a)}},blending:ja,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=o,this._hdrCapacityMin=a,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class x6 extends Error{}class S6 extends Error{}const Hm=(n,e,t)=>{var r;let i;const s=(r=n.attributes.getNamedItem(e))===null||r===void 0?void 0:r.nodeValue;if(s)i=s;else{const o=n.getElementsByTagName(e)[0];if(o){const a=o.getElementsByTagName("rdf:li");if(a.length===3)i=Array.from(a).map(l=>l.innerHTML);else throw new Error(`Gainmap metadata contains an array of items for ${e} but its length is not 3`)}else{if(t)return t;throw new Error(`Can't find ${e} in gainmap metadata`)}}return i},Rhe=n=>{var e,t;let r;typeof TextDecoder<"u"?r=new TextDecoder().decode(n):r=n.toString();let i=r.indexOf("<x:xmpmeta");const s=new DOMParser;for(;i!==-1;){const o=r.indexOf("x:xmpmeta>",i);r.slice(i,o+10);const a=r.slice(i,o+10);try{const c=s.parseFromString(a,"text/xml").getElementsByTagName("rdf:Description")[0],u=Hm(c,"hdrgm:GainMapMin","0"),f=Hm(c,"hdrgm:GainMapMax"),p=Hm(c,"hdrgm:Gamma","1"),m=Hm(c,"hdrgm:OffsetSDR","0.015625"),g=Hm(c,"hdrgm:OffsetHDR","0.015625");let v=(e=c.attributes.getNamedItem("hdrgm:HDRCapacityMin"))===null||e===void 0?void 0:e.nodeValue;v||(v="0");const y=(t=c.attributes.getNamedItem("hdrgm:HDRCapacityMax"))===null||t===void 0?void 0:t.nodeValue;if(!y)throw new Error("Incomplete gainmap metadata");return{gainMapMin:Array.isArray(u)?u.map(_=>parseFloat(_)):[parseFloat(u),parseFloat(u),parseFloat(u)],gainMapMax:Array.isArray(f)?f.map(_=>parseFloat(_)):[parseFloat(f),parseFloat(f),parseFloat(f)],gamma:Array.isArray(p)?p.map(_=>parseFloat(_)):[parseFloat(p),parseFloat(p),parseFloat(p)],offsetSdr:Array.isArray(m)?m.map(_=>parseFloat(_)):[parseFloat(m),parseFloat(m),parseFloat(m)],offsetHdr:Array.isArray(g)?g.map(_=>parseFloat(_)):[parseFloat(g),parseFloat(g),parseFloat(g)],hdrCapacityMin:parseFloat(v),hdrCapacityMax:parseFloat(y)}}catch{}i=r.indexOf("<x:xmpmeta",o)}};class Ihe{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,r)=>{const i=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){r(new Error("Not a valid jpeg"));return}const o=s.byteLength;let a=2,l=0,c;for(;a<o;){if(++l>250){r(new Error(`Found no marker after ${l} loops `));return}if(s.getUint8(a)!==255){r(new Error(`Not a valid marker at offset 0x${a.toString(16)}, found: 0x${s.getUint8(a).toString(16)}`));return}if(c=s.getUint8(a+1),i&&console.log(`Marker: ${c.toString(16)}`),c===226){i&&console.log("Found APP2 marker (0xffe2)");const u=a+4;if(s.getUint32(u)===1297106432){const f=u+4;let p;if(s.getUint16(f)===18761)p=!1;else if(s.getUint16(f)===19789)p=!0;else{r(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(f+2,!p)!==42){r(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const m=s.getUint32(f+4,!p);if(m<8){r(new Error("Not valid TIFF data! (First offset less than 8)"));return}const g=f+m,v=s.getUint16(g,!p),y=g+2;let _=0;for(let I=y;I<y+12*v;I+=12)s.getUint16(I,!p)===45057&&(_=s.getUint32(I+8,!p));const E=g+2+v*12+4,w=[];for(let I=E;I<E+_*16;I+=16){const T={MPType:s.getUint32(I,!p),size:s.getUint32(I+4,!p),dataOffset:s.getUint32(I+8,!p),dependantImages:s.getUint32(I+12,!p),start:-1,end:-1,isFII:!1};T.dataOffset?(T.start=f+T.dataOffset,T.isFII=!1):(T.start=0,T.isFII=!0),T.end=T.start+T.size,w.push(T)}if(this.options.extractNonFII&&w.length){const I=new Blob([s]),T=[];for(const b of w){if(b.isFII&&!this.options.extractFII)continue;const P=I.slice(b.start,b.end+1,"image/jpeg");T.push(P)}t(T)}}}a+=2+s.getUint16(a+2)}})}}const Phe=async n=>{const e=Rhe(n);if(!e)throw new S6("Gain map XMP metadata not found");const r=await new Ihe({extractFII:!0,extractNonFII:!0}).extract(n);if(r.length!==2)throw new x6("Gain map recovery image not found");return{sdr:new Uint8Array(await r[0].arrayBuffer()),gainMap:new Uint8Array(await r[1].arrayBuffer()),metadata:e}},gF=n=>new Promise((e,t)=>{const r=document.createElement("img");r.onload=()=>{e(r)},r.onerror=i=>{t(i)},r.src=URL.createObjectURL(n)});class E6 extends Ai{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new GE}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new bhe({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new En,sdr:new En});return new WP({width:16,height:16,type:qr,colorSpace:zo,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,r,i){const s=i?new Blob([i],{type:"image/jpeg"}):void 0,o=new Blob([r],{type:"image/jpeg"});let a,l,c=!1;if(typeof createImageBitmap>"u"){const p=await Promise.all([s?gF(s):Promise.resolve(void 0),gF(o)]);l=p[0],a=p[1],c=!0}else{const p=await Promise.all([s?createImageBitmap(s,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:"flipY"})]);l=p[0],a=p[1]}const u=new En(l||new ImageData(2,2),ru,Lr,Lr,Sn,_b,Nr,Is,1,zo);u.flipY=c,u.needsUpdate=!0;const f=new En(a,ru,Lr,Lr,Sn,_b,Nr,Is,1,Ws);f.flipY=c,f.needsUpdate=!0,e.width=a.width,e.height=a.height,e.material.gainMap=u,e.material.sdr=f,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class Dhe extends E6{load([e,t,r],i,s,o){const a=this.prepareQuadRenderer();let l,c,u;const f=async()=>{if(l&&c&&u){try{await this.render(a,u,l,c)}catch(C){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(r),typeof o=="function"&&o(C),a.disposeOnDemandRenderer();return}typeof i=="function"&&i(a),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(r),a.disposeOnDemandRenderer()}};let p=!0,m=0,g=0,v=!0,y=0,_=0,S=!0,E=0,w=0;const I=()=>{if(typeof s=="function"){const C=m+y+E,M=g+_+w,L=p&&v&&S;s(new ProgressEvent("progress",{lengthComputable:L,loaded:M,total:C}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(r);const T=new Si(this._internalLoadingManager);T.setResponseType("arraybuffer"),T.setRequestHeader(this.requestHeader),T.setPath(this.path),T.setWithCredentials(this.withCredentials),T.load(e,async C=>{if(typeof C=="string")throw new Error("Invalid sdr buffer");l=C,await f()},C=>{p=C.lengthComputable,g=C.loaded,m=C.total,I()},C=>{this.manager.itemError(e),typeof o=="function"&&o(C)});const b=new Si(this._internalLoadingManager);b.setResponseType("arraybuffer"),b.setRequestHeader(this.requestHeader),b.setPath(this.path),b.setWithCredentials(this.withCredentials),b.load(t,async C=>{if(typeof C=="string")throw new Error("Invalid gainmap buffer");c=C,await f()},C=>{v=C.lengthComputable,_=C.loaded,y=C.total,I()},C=>{this.manager.itemError(t),typeof o=="function"&&o(C)});const P=new Si(this._internalLoadingManager);return P.setRequestHeader(this.requestHeader),P.setPath(this.path),P.setWithCredentials(this.withCredentials),P.load(r,async C=>{if(typeof C!="string")throw new Error("Invalid metadata string");u=JSON.parse(C),await f()},C=>{S=C.lengthComputable,w=C.loaded,E=C.total,I()},C=>{this.manager.itemError(r),typeof o=="function"&&o(C)}),a}}class Bhe extends E6{load(e,t,r,i){const s=this.prepareQuadRenderer(),o=new Si(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,async a=>{if(typeof a=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(a);let c,u,f;try{const p=await Phe(l);c=p.sdr,u=p.gainMap,f=p.metadata}catch(p){if(p instanceof S6||p instanceof x6)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),f={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},c=l;else throw p}try{await this.render(s,f,c,u)}catch(p){this.manager.itemError(e),typeof i=="function"&&i(p),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},r,a=>{this.manager.itemError(e),typeof i=="function"&&i(a)}),s}}const L_={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},A6="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",Xh=n=>Array.isArray(n),XP=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function XE({files:n=XP,path:e="",preset:t=void 0,encoding:r=void 0,extensions:i}={}){let s=null,o=!1;t&&(jP(t),n=L_[t],e=A6),o=Xh(n);const{extension:a,isCubemap:l}=YP(n);if(s=JP(a),!s)throw new Error("useEnvironment: Unrecognized file extension: "+n);const c=wr(m=>m.gl);se.useLayoutEffect(()=>{if(a!=="webp"&&a!=="jpg"&&a!=="jpeg")return;function m(){Go.clear(s,o?[n]:n)}c.domElement.addEventListener("webglcontextlost",m,{once:!0})},[n,c.domElement]);const u=Go(s,o?[n]:n,m=>{(a==="webp"||a==="jpg"||a==="jpeg")&&m.setRenderer(c),m.setPath==null||m.setPath(e),i&&i(m)});let f=o?u[0]:u;if(a==="jpg"||a==="jpeg"||a==="webp"){var p;f=(p=f.renderTarget)==null?void 0:p.texture}return f.mapping=l?qa:vp,"colorSpace"in f?f.colorSpace=r??l?"srgb":"srgb-linear":f.encoding=r??l?whe:Ahe,f}const Lhe={files:XP,path:"",preset:void 0,extensions:void 0};XE.preload=n=>{const e={...Lhe,...n};let{files:t,path:r=""}=e;const{preset:i,extensions:s}=e;i&&(jP(i),t=L_[i],r=A6);const{extension:o}=YP(t);if(o==="webp"||o==="jpg"||o==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const a=JP(o);if(!a)throw new Error("useEnvironment: Unrecognized file extension: "+t);Go.preload(a,Xh(t)?[t]:t,l=>{l.setPath==null||l.setPath(r),s&&s(l)})};const Nhe={files:XP,preset:void 0};XE.clear=n=>{const e={...Nhe,...n};let{files:t}=e;const{preset:r}=e;r&&(jP(r),t=L_[r]);const{extension:i}=YP(t),s=JP(i);if(!s)throw new Error("useEnvironment: Unrecognized file extension: "+t);Go.clear(s,Xh(t)?[t]:t)};function jP(n){if(!(n in L_))throw new Error("Preset must be one of: "+Object.keys(L_).join(", "))}function YP(n){var e;const t=Xh(n)&&n.length===6,r=Xh(n)&&n.length===3&&n.some(o=>o.endsWith("json")),i=Xh(n)?n[0]:n;return{extension:t?"cube":r?"webp":i.startsWith("data:application/exr")?"exr":i.startsWith("data:application/hdr")?"hdr":i.startsWith("data:image/jpeg")?"jpg":(e=i.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:r}}function JP(n){return n==="cube"?w8:n==="hdr"?mhe:n==="exr"?ghe:n==="jpg"||n==="jpeg"?Bhe:n==="webp"?Dhe:null}const khe=n=>n.current&&n.current.isScene,Fhe=n=>khe(n)?n.current:n;function KP(n,e,t,r,i={}){var s,o,a,l,c;i={backgroundBlurriness:(s=i.blur)!==null&&s!==void 0?s:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...i};const u=Fhe(e||t),f=u.background,p=u.environment,m={backgroundBlurriness:u.backgroundBlurriness,backgroundIntensity:u.backgroundIntensity,backgroundRotation:(o=(a=u.backgroundRotation)==null||a.clone==null?void 0:a.clone())!==null&&o!==void 0?o:[0,0,0],environmentIntensity:u.environmentIntensity,environmentRotation:(l=(c=u.environmentRotation)==null||c.clone==null?void 0:c.clone())!==null&&l!==void 0?l:[0,0,0]};return n!=="only"&&(u.environment=r),n&&(u.background=r),El(u,i),()=>{n!=="only"&&(u.environment=p),n&&(u.background=f),El(u,m)}}function $P({scene:n,background:e=!1,map:t,...r}){const i=wr(s=>s.scene);return se.useLayoutEffect(()=>{if(t)return KP(e,n,i,t,r)}),null}function w6({background:n=!1,scene:e,blur:t,backgroundBlurriness:r,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:o,environmentRotation:a,...l}){const c=XE(l),u=wr(f=>f.scene);return se.useLayoutEffect(()=>KP(n,e,u,c,{blur:t,backgroundBlurriness:r,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:o,environmentRotation:a})),null}function Ohe({children:n,near:e=1,far:t=1e3,resolution:r=256,frames:i=1,map:s,background:o=!1,blur:a,backgroundBlurriness:l,backgroundIntensity:c,backgroundRotation:u,environmentIntensity:f,environmentRotation:p,scene:m,files:g,path:v,preset:y=void 0,extensions:_}){const S=wr(P=>P.gl),E=wr(P=>P.scene),w=se.useRef(null),[I]=se.useState(()=>new jf),T=se.useMemo(()=>{const P=new aP(r);return P.texture.type=qr,P},[r]);se.useLayoutEffect(()=>(i===1&&w.current.update(S,I),KP(o,m,E,T.texture,{blur:a,backgroundBlurriness:l,backgroundIntensity:c,backgroundRotation:u,environmentIntensity:f,environmentRotation:p})),[n,I,T.texture,m,E,o,i,S]);let b=1;return g0(()=>{(i===1/0||b<i)&&(w.current.update(S,I),b++)}),se.createElement(se.Fragment,null,r6(se.createElement(se.Fragment,null,n,se.createElement("cubeCamera",{ref:w,args:[e,t,T]}),g||y?se.createElement(w6,{background:!0,files:g,preset:y,path:v,extensions:_}):s?se.createElement($P,{background:!0,map:s,extensions:_}):null),I))}function Uhe(n){var e,t,r,i;const s=XE(n),o=n.map||s;se.useMemo(()=>W8({GroundProjectedEnvImpl:Rde}),[]);const a=se.useMemo(()=>[o],[o]),l=(e=n.ground)==null?void 0:e.height,c=(t=n.ground)==null?void 0:t.radius,u=(r=(i=n.ground)==null?void 0:i.scale)!==null&&r!==void 0?r:1e3;return se.createElement(se.Fragment,null,se.createElement($P,ha({},n,{map:o})),se.createElement("groundProjectedEnvImpl",{args:a,scale:u,height:l,radius:c}))}function Hhe(n){return n.ground?se.createElement(Uhe,n):n.map?se.createElement($P,n):n.children?se.createElement(Ohe,n):se.createElement(w6,n)}const sT=se.forwardRef(({args:n,map:e,toneMapped:t=!1,color:r="white",form:i="rect",intensity:s=1,scale:o=1,target:a,children:l,...c},u)=>{const f=se.useRef(null);return se.useImperativeHandle(u,()=>f.current,[]),se.useLayoutEffect(()=>{!l&&!c.material&&(El(f.current.material,{color:r}),f.current.material.color.multiplyScalar(s))},[r,s,l,c.material]),se.useLayoutEffect(()=>{a&&f.current.lookAt(Array.isArray(a)?new W(...a):a)},[a]),o=Array.isArray(o)&&o.length===2?[o[0],o[1],1]:o,se.createElement("mesh",ha({ref:f,scale:o},c),i==="circle"?se.createElement("ringGeometry",{args:[0,1,64]}):i==="ring"?se.createElement("ringGeometry",{args:[.5,1,64]}):i==="rect"?se.createElement("planeGeometry",null):se.createElement(i,{args:n}),l||(c.material?null:se.createElement("meshBasicMaterial",{toneMapped:t,map:e,side:vs})))}),zhe={BASE_URL:"/apple-website/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},_F=n=>{let e;const t=new Set,r=(u,f)=>{const p=typeof u=="function"?u(e):u;if(!Object.is(p,e)){const m=e;e=f??(typeof p!="object"||p===null)?p:Object.assign({},e,p),t.forEach(g=>g(e,m))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>c,subscribe:u=>(t.add(u),()=>t.delete(u)),destroy:()=>{(zhe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},c=e=n(r,i,l);return l},Ghe=n=>n?_F(n):_F;var M6={exports:{}},T6={},C6={exports:{}},b6={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cp=se;function Vhe(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Whe=typeof Object.is=="function"?Object.is:Vhe,Xhe=Cp.useState,jhe=Cp.useEffect,Yhe=Cp.useLayoutEffect,Jhe=Cp.useDebugValue;function Khe(n,e){var t=e(),r=Xhe({inst:{value:t,getSnapshot:e}}),i=r[0].inst,s=r[1];return Yhe(function(){i.value=t,i.getSnapshot=e,oT(i)&&s({inst:i})},[n,t,e]),jhe(function(){return oT(i)&&s({inst:i}),n(function(){oT(i)&&s({inst:i})})},[n]),Jhe(t),t}function oT(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Whe(n,t)}catch{return!0}}function $he(n,e){return e()}var qhe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?$he:Khe;b6.useSyncExternalStore=Cp.useSyncExternalStore!==void 0?Cp.useSyncExternalStore:qhe;C6.exports=b6;var Qhe=C6.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jE=se,Zhe=Qhe;function epe(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var tpe=typeof Object.is=="function"?Object.is:epe,npe=Zhe.useSyncExternalStore,rpe=jE.useRef,ipe=jE.useEffect,spe=jE.useMemo,ope=jE.useDebugValue;T6.useSyncExternalStoreWithSelector=function(n,e,t,r,i){var s=rpe(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=spe(function(){function l(m){if(!c){if(c=!0,u=m,m=r(m),i!==void 0&&o.hasValue){var g=o.value;if(i(g,m))return f=g}return f=m}if(g=f,tpe(u,m))return g;var v=r(m);return i!==void 0&&i(g,v)?g:(u=m,f=v)}var c=!1,u,f,p=t===void 0?null:t;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,t,r,i]);var a=npe(n,s[0],s[1]);return ipe(function(){o.hasValue=!0,o.value=a},[a]),ope(a),a};M6.exports=T6;var ape=M6.exports;const lpe=N_(ape),R6={BASE_URL:"/apple-website/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},{useDebugValue:cpe}=jh,{useSyncExternalStoreWithSelector:upe}=lpe;let vF=!1;const fpe=n=>n;function dpe(n,e=fpe,t){(R6?"production":void 0)!=="production"&&t&&!vF&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),vF=!0);const r=upe(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return cpe(r),r}const yF=n=>{(R6?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?Ghe(n):n,t=(r,i)=>dpe(e,r,i);return Object.assign(t,e),t},hpe=n=>n?yF(n):yF;var xF,SF;const EF=typeof window<"u"&&((xF=window.document)!=null&&xF.createElement||((SF=window.navigator)==null?void 0:SF.product)==="ReactNative")?jh.useLayoutEffect:jh.useEffect;function ppe(){const n=hpe(e=>({current:new Array,version:0,set:e}));return{In:({children:e})=>{const t=n(i=>i.set),r=n(i=>i.version);return EF(()=>{t(i=>({version:i.version+1}))},[]),EF(()=>(t(({current:i})=>({current:[...i,e]})),()=>t(({current:i})=>({current:i.filter(s=>s!==e)}))),[e,r]),null},Out:()=>{const e=n(t=>t.current);return jh.createElement(jh.Fragment,null,e)}}}const mpe=n=>n&&n.isOrthographicCamera,AF=new rt,I6=ppe();function P6(n){return"top"in n}function aT(n,e){const{right:t,top:r,left:i,bottom:s,width:o,height:a}=e,l=e.bottom<0||r>n.height||t<0||e.left>n.width;if(P6(n)){const f=n.top+n.height-s,p=i-n.left;return{position:{width:o,height:a,left:p,top:r,bottom:f,right:t},isOffscreen:l}}const c=n.height-s;return{position:{width:o,height:a,top:r,left:i,bottom:c,right:t},isOffscreen:l}}function lT(n,{left:e,bottom:t,width:r,height:i}){let s;const o=r/i;return mpe(n.camera)?(n.camera.left!==r/-2||n.camera.right!==r/2||n.camera.top!==i/2||n.camera.bottom!==i/-2)&&(Object.assign(n.camera,{left:r/-2,right:r/2,top:i/2,bottom:i/-2}),n.camera.updateProjectionMatrix()):n.camera.aspect!==o&&(n.camera.aspect=o,n.camera.updateProjectionMatrix()),s=n.gl.autoClear,n.gl.autoClear=!1,n.gl.setViewport(e,t,r,i),n.gl.setScissor(e,t,r,i),n.gl.setScissorTest(!0),s}function cT(n,e){n.gl.setScissorTest(!1),n.gl.autoClear=e}function wF(n){n.gl.getClearColor(AF),n.gl.setClearColor(AF,n.gl.getClearAlpha()),n.gl.clear(!0,!0)}function gpe({visible:n=!0,canvasSize:e,scene:t,index:r,children:i,frames:s,rect:o,track:a}){const l=wr(),[c,u]=se.useState(!1);let f=0;return g0(p=>{if(s===1/0||f<=s){var m;a&&(o.current=(m=a.current)==null?void 0:m.getBoundingClientRect()),f++}if(o.current){const{position:g,isOffscreen:v}=aT(e,o.current);if(c!==v&&u(v),n&&!c&&o.current){const y=lT(p,g);p.gl.render(i?p.scene:t,p.camera),cT(p,y)}}},r),se.useLayoutEffect(()=>{const p=o.current;if(p&&(!n||!c)){const{position:m}=aT(e,p),g=lT(l,m);wF(l),cT(l,g)}},[n,c]),se.useEffect(()=>{if(!a)return;const p=o.current,m=l.get().events.connected;return l.setEvents({connected:a.current}),()=>{if(p){const{position:g}=aT(e,p),v=lT(l,g);wF(l),cT(l,v)}l.setEvents({connected:m})}},[a]),se.useEffect(()=>{P6(e)||console.warn(`Detected @react-three/fiber canvas size does not include position information. <View /> may not work as expected. Upgrade to @react-three/fiber ^8.1.0 for support.
 See https://github.com/pmndrs/drei/issues/944`)},[]),se.createElement(se.Fragment,null,i,se.createElement("group",{onPointerOver:()=>null}))}const D6=se.forwardRef(({track:n,visible:e=!0,index:t=1,id:r,style:i,className:s,frames:o=1/0,children:a,...l},c)=>{var u,f,p,m;const g=se.useRef(null),{size:v,scene:y}=wr(),[_]=se.useState(()=>new jf),[S,E]=se.useReducer(()=>!0,!1),w=se.useCallback((I,T)=>{if(g.current&&n&&n.current&&I.target===n.current){const{width:b,height:P,left:C,top:M}=g.current,L=I.clientX-C,U=I.clientY-M;T.pointer.set(L/b*2-1,-(U/P)*2+1),T.raycaster.setFromCamera(T.pointer,T.camera)}},[g,n]);return se.useEffect(()=>{var I;n&&(g.current=(I=n.current)==null?void 0:I.getBoundingClientRect()),E()},[n]),se.createElement("group",ha({ref:c},l),S&&r6(se.createElement(gpe,{visible:e,canvasSize:v,frames:o,scene:y,track:n,rect:g,index:t},a),_,{events:{compute:w,priority:t},size:{width:(u=g.current)==null?void 0:u.width,height:(f=g.current)==null?void 0:f.height,top:(p=g.current)==null?void 0:p.top,left:(m=g.current)==null?void 0:m.left}}))}),_pe=se.forwardRef(({as:n="div",id:e,visible:t,className:r,style:i,index:s=1,track:o,frames:a=1/0,children:l,...c},u)=>{const f=se.useId(),p=se.useRef(null);return se.useImperativeHandle(u,()=>p.current),se.createElement(se.Fragment,null,se.createElement(n,ha({ref:p,id:e,className:r,style:i},c)),se.createElement(I6.In,null,se.createElement(D6,{visible:t,key:f,track:p,frames:a,index:s},l)))}),qP=se.forwardRef((n,e)=>se.useContext(WE)?se.createElement(D6,ha({ref:e},n)):se.createElement(_pe,ha({ref:e},n)));qP.Port=()=>se.createElement(I6.Out,null);const vpe=()=>ae.jsxs("group",{name:"lights",children:[ae.jsx(Hhe,{resolution:256,children:ae.jsxs("group",{children:[ae.jsx(sT,{form:"rect",intensity:10,position:[-1,0,-10],scale:10,color:"#495057"}),ae.jsx(sT,{form:"rect",intensity:10,position:[-10,2,1],scale:10,"rotation-y":Math.PI/2}),ae.jsx(sT,{form:"rect",intensity:10,position:[10,0,1],scale:10,"rotation-y":Math.PI/2})]})}),ae.jsx("spotLight",{position:[-2,10,5],angle:.15,penumbra:1,decay:0,intensity:Math.PI*.2,color:"#f8f9fa"}),ae.jsx("spotLight",{position:[0,-25,10],angle:.15,penumbra:1,decay:0,intensity:Math.PI*.2,color:"#f8f9fa"}),ae.jsx("spotLight",{position:[0,15,5],angle:.15,penumbra:1,decay:.1,intensity:Math.PI*3})]});function ype(n){const{nodes:e,materials:t}=y0("/models/scene.glb"),r=VP(n.item.img);return se.useEffect(()=>{Object.entries(t).map(i=>{i[0]!=="zFdeDaGNRwzccye"&&i[0]!=="ujsvqBWRMnqdwPx"&&i[0]!=="hUlRcbieVuIiOXG"&&i[0]!=="jlzuBkUzuJqgiAK"&&i[0]!=="xNrofRCqOXXHVZt"&&(i[1].color=new rt(n.item.color[0])),i[1].needsUpdate=!0})},[t,n.item]),ae.jsxs("group",{...n,dispose:null,children:[ae.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.ttmRoLdJipiIOmf.geometry,material:t.hUlRcbieVuIiOXG,scale:.01}),ae.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.DjsDkGiopeiEJZK.geometry,material:t.PaletteMaterial001,scale:.01}),ae.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.buRWvyqhBBgcJFo.geometry,material:t.PaletteMaterial002,scale:.01}),ae.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.MrMmlCAsAxJpYqQ_0.geometry,material:t.dxCVrUCvYhjVxqy,scale:.01}),ae.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.wqbHSzWaUxBCwxY_0.geometry,material:t.MHFGNLrDQbTNima,scale:.01}),ae.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.QvGDcbDApaGssma.geometry,material:t.kUhjpatHUvkBwfM,scale:.01}),ae.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.vFwJFNASGvEHWhs.geometry,material:t.RJoymvEsaIItifI,scale:.01}),ae.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.evAxFwhaQUwXuua.geometry,material:t.KSIxMqttXxxmOYl,scale:.01}),ae.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.USxQiqZgxHbRvqB.geometry,material:t.mcPrzcBUcdqUybC,scale:.01}),ae.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.TvgBVmqNmSrFVfW.geometry,material:t.pIhYLPqiSQOZTjn,scale:.01}),ae.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.GuYJryuYunhpphO.geometry,material:t.eShKpuMNVJTRrgg,scale:.01}),ae.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.pvdHknDTGDzVpwc.geometry,material:t.xdyiJLYTYRfJffH,scale:.01}),ae.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.CfghdUoyzvwzIum.geometry,material:t.jpGaQNgTtEGkTfo,scale:.01}),ae.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.DjdhycfQYjKMDyn.geometry,material:t.ujsvqBWRMnqdwPx,scale:.01}),ae.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.usFLmqcyrnltBUr.geometry,material:t.sxNzrmuTqVeaXdg,scale:.01}),ae.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.xXDHkMplTIDAXLN.geometry,material:t.pIJKfZsazmcpEiU,scale:.01,children:ae.jsx("meshStandardMaterial",{roughness:1,map:r})}),ae.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.vELORlCJixqPHsZ.geometry,material:t.zFdeDaGNRwzccye,scale:.01}),ae.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.EbQGKrWAqhBHiMv.geometry,material:t.TBLSREBUyLMVtJa,scale:.01}),ae.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.EddVrWkqZTlvmci.geometry,material:t.xNrofRCqOXXHVZt,scale:.01}),ae.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.KSWlaxBcnPDpFCs.geometry,material:t.yQQySPTfbEJufve,scale:.01}),ae.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.TakBsdEjEytCAMK.geometry,material:t.PaletteMaterial003,scale:.01}),ae.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.IykfmVvLplTsTEW.geometry,material:t.PaletteMaterial004,scale:.01}),ae.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.wLfSXtbwRlBrwof.geometry,material:t.oZRkkORNzkufnGD,scale:.01}),ae.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.WJwwVjsahIXbJpU.geometry,material:t.yhcAXNGcJWCqtIS,scale:.01}),ae.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.YfrJNXgMvGOAfzz.geometry,material:t.bCgzXjHOanGdTFV,scale:.01}),ae.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.DCLCbjzqejuvsqH.geometry,material:t.vhaEJjZoqGtyLdo,scale:.01}),ae.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.CdalkzDVnwgdEhS.geometry,material:t.jlzuBkUzuJqgiAK,scale:.01}),ae.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.NtjcIgolNGgYlCg.geometry,material:t.PpwUTnTFZJXxCoE,scale:.01}),ae.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.pXBNoLiaMwsDHRF.geometry,material:t.yiDkEwDSyEhavuP,scale:.01}),ae.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.IkoiNqATMVoZFKD.geometry,material:t.hiVunnLeAHkwGEo,scale:.01}),ae.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.rqgRAGHOwnuBypi.geometry,material:t.HGhEhpqSBZRnjHC,scale:.01})]})}y0.preload("/models/scene.glb");const xpe=()=>ae.jsx(hde,{children:ae.jsx("div",{className:"absolute top-0 left-0 w-full h-full flex justify-center items-center",children:ae.jsx("div",{className:"w-[10vw} h-[10vw] rounded-full",children:"Loading..."})})}),MF=({index:n,groupRef:e,gsapType:t,controlRef:r,setRotationState:i,size:s,item:o})=>ae.jsxs(qP,{index:n,id:t,className:`w-full h-full absolute ${n===2?"right-[-100%]":""}`,children:[ae.jsx("ambientLight",{intensity:1}),ae.jsx(She,{makeDefault:!0,position:[0,0,4]}),ae.jsx(vpe,{}),ae.jsx(Ehe,{makeDefault:!0,ref:r,enableZoom:!1,enablePan:!1,rotateSpeed:.4,target:new W(0,0,0),onEnd:()=>i(r.current.getAzimuthalAngle())}),ae.jsx("group",{ref:e,name:`${n===1?"small":"large"} `,position:[0,0,0],children:ae.jsx(se.Suspense,{fallback:ae.jsx(xpe,{}),children:ae.jsx(ype,{scale:n===1?[15,15,15]:[17,17,17],item:o,size:s})})})]});hr.registerPlugin(ln);const Ox=(n,e,t)=>{hr.to(n,{...e,scrollTrigger:{trigger:n,toggleActions:"restart reverse restart reverse",start:"top 85%",...t}})},TF=(n,e,t,r,i,s)=>{n.to(e.current.rotation,{y:t,duration:1,ease:"power2.inOut"}),n.to(r,{...s,ease:"power2.inOut"},"<"),n.to(i,{...s,ease:"power2.inOut"},"<")},Spe=()=>{const[n,e]=se.useState("small"),[t,r]=se.useState({title:"iPhone 15 Pro in Natural Titanium",color:["#8F8A81","#FFE7B9","#6F6C64"],img:fG}),i=se.useRef(),s=se.useRef(),o=se.useRef(new oa),a=se.useRef(new oa),[l,c]=se.useState(0),[u,f]=se.useState(0),p=hr.timeline();return se.useEffect(()=>{n==="large"&&TF(p,o,l,"#view1","#view2",{transform:"translateX(-100%)",duration:2}),n==="small"&&TF(p,a,u,"#view2","#view1",{transform:"translateX(0)",duration:2})},[n,u,o,p,l]),hu(()=>{hr.to("#heading",{y:0,opacity:1})},[]),ae.jsx("section",{className:"common-padding",children:ae.jsxs("div",{className:"screen-max-width",children:[ae.jsx("h1",{id:"heading",className:"section-heading",children:"Take a closer look"}),ae.jsxs("div",{className:"flex flex-col items-center mt-5",children:[ae.jsxs("div",{className:"w-full h-[75vh] md:h-[90vh] overflow-hidden relative",children:[ae.jsx(MF,{index:1,groupRef:o,gsapType:"view1",controlRef:i,setRotationState:c,item:t,size:n}),ae.jsx(MF,{index:2,groupRef:a,gsapType:"view2",controlRef:s,setRotationState:f,item:t,size:n}),ae.jsx(rde,{className:"w-full h-full",style:{position:"fixed",top:0,left:0,bottom:0,right:0,overflow:"hidden"},eventSource:document.getElementById("root"),children:ae.jsx(qP.Port,{})})]}),ae.jsxs("div",{className:"mx-auto w-full",children:[ae.jsx("p",{className:"text-sm font-light text-center mb-5",children:t.title}),ae.jsxs("div",{className:"flex-center",children:[ae.jsx("ul",{className:"color-container",children:are.map((m,g)=>ae.jsx("li",{className:"w-6 h-6 rounded-full mx-2 cursor-pointer ",style:{backgroundColor:m.color[0]},onClick:()=>r(m)},g))}),ae.jsx("button",{className:"size-btn-container",children:lre.map(({label:m,value:g})=>ae.jsx("span",{className:"size-btn",style:{backgroundColor:n===g?"white":"transparent",color:n===g?"black":"white"},onClick:()=>e(g),children:m},m))})]})]})]})]})})},Epe=()=>{const n=se.useRef();return hu(()=>{hr.to("#exploreVideo",{scrollTrigger:{trigger:"#exploreVideo",toggleActions:"play pause reverse restart",start:"-10% bottom"},onComplete:()=>{n.current.play()}}),Ox("#features_title",{y:0,opacity:1}),Ox(".g_grow",{scale:1,opacity:1,ease:"power1"},{scrub:5.5}),Ox(".g_text",{y:0,opacity:1,ease:"power2.inOut",duration:1})},[]),ae.jsx("section",{className:"h-full common-padding bg-zinc relative overflow-hidden",children:ae.jsxs("div",{className:"screen-max-wdith",children:[ae.jsx("div",{className:"mb-12 w-full",children:ae.jsx("h1",{id:"features_title",className:"section-heading",children:"Explore the full story."})}),ae.jsxs("div",{className:"flex flex-col justify-center items-center overflow-hidden",children:[ae.jsxs("div",{className:"mt-32 mb-24 pl-24",children:[ae.jsx("h2",{className:"text-5xl lg:text-7xl font-semibold",children:"iPhone."}),ae.jsx("h2",{className:"text-5xl lg:text-7xl font-semibold",children:"Forged in titanium."})]}),ae.jsxs("div",{className:"flex-center flex-col sm:px-10",children:[ae.jsx("div",{className:"relative h-[50vh] w-full flex items-center",children:ae.jsx("video",{playsInline:!0,id:"exploreVideo",className:"w-full h-full object-cover object-center",preload:"none",muted:!0,autoPlay:!0,ref:n,children:ae.jsx("source",{src:wne,type:"video/mp4"})})}),ae.jsxs("div",{className:"flex flex-col w-full relative",children:[ae.jsxs("div",{className:"feature-video-container",children:[ae.jsx("div",{className:"overflow-hidden flex-1 h-[50vh]",children:ae.jsx("img",{src:Fne,alt:"titanium",className:"feature-video g_grow"})}),ae.jsx("div",{className:"overflow-hidden flex-1 h-[50vh]",children:ae.jsx("img",{src:One,alt:"titanium 2",className:"feature-video g_grow"})})]}),ae.jsxs("div",{className:"feature-text-container",children:[ae.jsx("div",{className:"flex-1 flex-center",children:ae.jsxs("p",{className:"feature-text g_text",children:["iPhone 15 Pro is"," ",ae.jsx("span",{className:"text-white",children:"the first iPhone to feature an aerospace-grade titanium design"}),", using the same alloy that spacecrafts use for missions to Mars."]})}),ae.jsx("div",{className:"flex-1 flex-center",children:ae.jsxs("p",{className:"feature-text g_text",children:["Titanium has one of the best strength-to-weight ratios of any metal, making these our"," ",ae.jsx("span",{className:"text-white",children:"lightest Pro models ever."}),"You'll notice the difference the moment you pick one up."]})})]})]})]})]})]})})};hr.registerPlugin(ln);const Ape=()=>{const n=se.useRef();return hu(()=>{hr.from("#chip",{scrollTrigger:{trigger:"#chip",start:"20% bottom"},opacity:0,duration:2,scale:2,ease:"power2.inOut"}),Ox(".g_fadeIn",{opacity:1,y:0,duration:1,ease:"power2.inOut"})},[]),ae.jsx("section",{className:"common-padding",children:ae.jsxs("div",{className:"screen-max-width",children:[ae.jsx("div",{id:"chip",className:"flex-center w-full my-20",children:ae.jsx("img",{src:Une,alt:"chip",width:180,height:180})}),ae.jsxs("div",{className:"flex flex-col items-center",children:[ae.jsxs("h2",{className:"hiw-title",children:["A17 Pro chip.",ae.jsx("br",{})," A monster win for gaming."]}),ae.jsx("p",{className:"hiw-subtitle",children:"It's here. The biggest redesign in the history of Apple GPUs"})]}),ae.jsxs("div",{className:"mt-10 md:mt-20 mb-14",children:[ae.jsxs("div",{className:"relative h-full flex-center",children:[ae.jsx("div",{className:"overflow-hidden",children:ae.jsx("img",{src:Hne,alt:"frame",className:" bg-transparent relative z-10"})}),ae.jsx("div",{className:"hiw-video",children:ae.jsx("video",{className:"pointer-events-none",playsInline:!0,preload:"none",muted:!0,autoPlay:!0,ref:n,children:ae.jsx("source",{src:Mne,type:"video/mp4"})})})]}),ae.jsx("p",{className:"text-gray font-semibold text-center mt-3",children:"Honkai: Star Rail"})]}),ae.jsxs("div",{className:"hiw-text-container ",children:[ae.jsxs("div",{className:"flex flex-1 justify-center gap-8 flex-col",children:[ae.jsxs("p",{className:"hiw-text g_fadeIn",children:["A17 Pro is an entirely new class of iPhone chip that delivers our"," ",ae.jsx("span",{className:"text-white",children:"best graphic performance by far."})]}),ae.jsxs("p",{className:"hiw-text g_fadeIn",children:["Mobile"," ",ae.jsx("span",{className:"text-white",children:"games will look and feel so immersive."}),"with incredibly detailed environments and characters. And with industry-leading speed and efficiency, A17 Pro takes fast and runs with it."]})]}),ae.jsxs("div",{className:"flex-1 flex justify-center flex-col g_fadeIn",children:[ae.jsx("p",{className:"hiw-text",children:"New"}),ae.jsx("p",{className:"hiw-bigtext",children:"Pro-class GPU"}),ae.jsx("p",{className:"hiw-text",children:"with 6 cores"})]})]})]})})},wpe=()=>ae.jsx("footer",{className:"py-5 sm:px-10 px-5",children:ae.jsxs("div",{className:" screen-max-width",children:[ae.jsxs("div",{className:"",children:[ae.jsxs("p",{className:"font-semibold text-gray text-xs",children:["More ways to shop:"," ",ae.jsx("span",{className:"underline text-blue",children:"Find an Apple Store "}),"or ",ae.jsx("span",{className:"underline text-blue",children:"other retailer "})," near you."]}),ae.jsx("p",{className:"font-semibold text-gray text-xs",children:"Or call 000800-040-1966"})]}),ae.jsx("div",{className:"bg-neutral-700 my-5 h-[1px]"}),ae.jsxs("div",{className:" flex md:flex-row flex-col md:items-center justify-between",children:[ae.jsx("p",{className:"font-semibold text-gray text-xs",children:"Copright @ 2024 Apple Inc. All rights reserved."}),ae.jsx("div",{className:"flex ",children:lk.map((n,e)=>ae.jsxs("p",{className:" font-semibold text-gray text-xs",children:[n,e!==lk.length-1&&ae.jsx("span",{className:"mx-2",children:" | "})]},n))})]})]})}),Mpe=()=>ae.jsxs("main",{className:"bg-black",children:[ae.jsx(fre,{}),ae.jsx(zne,{}),ae.jsx(ure,{}),ae.jsx(Spe,{}),ae.jsx(Epe,{}),ae.jsx(Ape,{}),ae.jsx(wpe,{})]}),Tpe=Dee(Mpe);dee({dsn:"https://9242fa77fc0f6406d50fbed9e0517758@o4507988331003904.ingest.de.sentry.io/4507988332445776",integrations:[QZ({colorScheme:"system",isNameRequired:!0}),iz(),Lee({useEffect:jh.useEffect}),OQ({maskAllText:!1,blockAllMedia:!1})],tracesSampleRate:1,tracePropagationTargets:["localhost",/^https:\/\/yourserver\.io\/api/],replaysSessionSampleRate:.1,replaysOnErrorSampleRate:1});PR(document.getElementById("root")).render(ae.jsx(se.StrictMode,{children:ae.jsx(Tpe,{})}));
//# sourceMappingURL=index-CPCjTKq1.js.map
